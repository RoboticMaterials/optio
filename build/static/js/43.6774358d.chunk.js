(this["webpackJsonprmstudio_2.0"]=this["webpackJsonprmstudio_2.0"]||[]).push([[43],{1562:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var c=n(44),o=n(35),r=n(1),i=n(41),a=n(112),s=n(65),d=n(8);function u(e){var t,n,u=e.route,l=Object(i.d)((function(e){return e.tasksReducer.selectedTask})),j=Object(i.d)((function(e){return e.tasksReducer.selectedHoveringTask})),b=Object(i.d)((function(e){return e.positionsReducer.positions})),v=Object(i.d)((function(e){return e.stationsReducer.stations})),O=Object(i.c)(),f=null;f=u||(j||l);var w=Object(r.useRef)();w.current=f;var h=null===(t=f)||void 0===t?void 0:t.load,x=(null===(n=f)||void 0===n||n.unload,Object(r.useState)({x:0,y:0})),k=(Object(o.a)(x,1)[0],Object(r.useState)(0)),m=Object(o.a)(k,2),p=m[0],g=m[1],y=Object(r.useState)(0),E=Object(o.a)(y,2),M=E[0],L=E[1],_=Object(r.useState)(null),S=Object(o.a)(_,2),R=S[0],B=S[1],G=Object(r.useState)(null),J=Object(o.a)(G,2),N=J[0],T=J[1],W=Object(r.useState)((function(){return function(e){B(e.clientX),T(e.clientY)}})),q=Object(o.a)(W,1)[0],A=Object(r.useState)((function(){return function(e){"Escape"==e.key&&O(Object(a.p)(w.current._id,{load:null}))}})),D=Object(o.a)(A,1)[0];if(Object(r.useEffect)((function(){var e,t;if(f?(e=Object(s.d)(f),t=Object(s.k)(f)):(e=Object(s.d)(j),t=Object(s.k)(j)),null!==f||null!==j){if(null!==e){var n=b[e]?b[e]:v[e];n&&(g(n.x),L(n.y))}if(null!==t){var c=b[t]?b[t]:v[t];c&&(B(c.x),T(c.y))}}})),Object(r.useEffect)((function(){var e=Object(s.d)(f),t=Object(s.k)(f);return window.addEventListener("mousedown",q,!1),null!==f&&null!==e&&null===t?(B(p),T(M),window.addEventListener("mousemove",q,!1),window.addEventListener("keydown",D)):(window.removeEventListener("mousemove",q,!1),window.removeEventListener("keydown",D)),function(){window.removeEventListener("mousedown",q,!1),window.removeEventListener("mousemove",q,!1),window.removeEventListener("keydown",D)}}),[f]),null!==f&&null!=h){var F=R||p,H=N||M,I=Math.sqrt(Math.pow(F-p,2)+Math.pow(H-M,2)),P=Math.atan2(H-M,F-p),X=180*P/Math.PI,Y=Object(c.a)(Array(Math.ceil(I/(10*e.d3.scale))).keys()),z=(null===j||void 0===j?void 0:j._id)===(null===u||void 0===u?void 0:u._id)?"rgba(56, 235, 135, 0.95)":"rgba(255, 182, 46, 0.95)",C=(null===j||void 0===j?void 0:j._id)===(null===u||void 0===u?void 0:u._id)?"rgba(184, 255, 215, 0.7)":"rgba(255, 236, 201, 0.7)",K=(null===j||void 0===j?void 0:j._id)===(null===u||void 0===u?void 0:u._id)?"rgba(56, 235, 135, 0.95)":"rgba(255, 182, 47, 0.95)";return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("g",{children:[Object(d.jsx)("defs",{children:Object(d.jsxs)("filter",{id:"glow",children:[Object(d.jsx)("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),Object(d.jsxs)("feMerge",{children:[Object(d.jsx)("feMergeNode",{in:"coloredBlur"}),Object(d.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})}),Object(d.jsx)("line",{x1:"".concat(p),y1:"".concat(M),x2:"".concat(R||p),y2:"".concat(N||M),strokeWidth:"".concat(8*e.d3.scale),stroke:z,strokeLinecap:"round"}),Object(d.jsx)("line",{x1:"".concat(p),y1:"".concat(M),x2:"".concat(R||p),y2:"".concat(N||M),strokeWidth:"".concat(6*e.d3.scale),stroke:C,strokeLinecap:"round"}),Y.map((function(t){return Object(d.jsx)("g",{transform:"translate(".concat(p+t*e.d3.scale*10*Math.cos(P)," ").concat(M+t*e.d3.scale*10*Math.sin(P),")"),children:Object(d.jsx)("g",{viewBox:"-50 -50 50 50",transform:"rotate(".concat(X,") scale(").concat(.05*e.d3.scale,")"),children:Object(d.jsx)("polygon",{points:"-40,-50 -40,50 40,0",fill:K})})},"arrow-".concat(t))}))]})})}return null}}}]);
//# sourceMappingURL=43.6774358d.chunk.js.map