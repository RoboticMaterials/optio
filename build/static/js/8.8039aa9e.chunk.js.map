{"version":3,"sources":["components/side_bar/content/cards/columns/station_column/station_column.style.js","higher_order_components/react-window-size.js","components/side_bar/content/cards/columns/column/column.style.js","components/side_bar/content/cards/columns/column/column.js","components/side_bar/content/cards/columns/station_column/station_column.js","components/side_bar/content/cards/columns/lot_queue/lot_queue.style.js","components/side_bar/content/cards/columns/lot_queue/lot_queue.js","components/side_bar/content/cards/columns/finish_column/finish_column.style.js","components/side_bar/content/cards/columns/finish_column/finish_column.js","components/side_bar/content/cards/card_zone/card_zone.style.js","components/side_bar/content/cards/card_zone/card_zone.js","methods/utils/time_utils.js"],"names":["minHeight","StationContainerCss","styled","span","css","props","isCollapsed","theme","bg","octonary","StationHeader","div","secondary","HeaderRow","QuantityText","textColor","LabelContainer","StationTitle","fontSize","sz4","senary","sz3","HeaderSection","button","quaternary","dragEnter","HeaderSectionTitle","h5","septenary","font","primary","RowContainer","divider","hr","getWindowDimensions","window","width","innerWidth","height","innerHeight","RotationWrapperOuter","RotationWrapperInner","LotDiv","DragToDiv","dragDivHeight","tertiary","RotatedRouteName","StationContainer","maxWidth","maxHeight","BodyContainer","schema","lots","solid","Column","station_id","stationName","onCardClick","selectedCards","processId","HeaderContent","sortMode","sortDirection","containerStyle","setSelectedCards","reduxCards","useSelector","state","cardsReducer","processCards","hoveringLotId","cardPageReducer","draggingLotId","draggingStationId","lotDivHeight","dragFromBin","routes","tasksReducer","tasks","stations","stationsReducer","processes","processesReducer","showCardEditor","dashboardsReducer","kickOffEnabledDashboards","showEditor","lotRef","useHistory","location","pathname","includes","useRef","dragContainerRef","dispatch","useDispatch","dispatchPutCard","card","ID","a","putCard","dispatchSetLotHovering","lotId","setLotHovering","dispatchSetDraggingLotId","setDraggingLotId","dispatchSetDraggingStationId","stationId","setDraggingStationId","dispatchSetDragFromBin","setDragFromBin","useState","lotQuantitySummation","setLotQuantitySummation","numberOfLots","setNumberOfLots","cards","setCards","enableFlags","highlightStation","setHighlightStation","acceptDrop","setAcceptDrop","setInDropZone","useEffect","tempLotQuantitySummation","tempNumberOfLots","forEach","currLot","count","parseInt","isSelectedCardsNotEmpty","setIsSelectedCardsNotEmpty","isNonEmptyArray","tempCards","sortBy","accDrop","shouldAcceptDrop","cardId","binId","lastStationTraversed","oldProcessId","process_id","process","processRoutes","map","routeId","startNodes","findProcessStartNodes","endNode","findProcessEndNodes","forwardsFound","forwardsTraverseCheck","currentStationID","startDivergeType","length","ind","nextRoutes","filter","route","load","divergeType","unload","backwardsFound","backwardsTraverseCheck","mergingRoutes","dispersingRoutes","onMouseLeave","event","getLastSelected","lastSelectedIndex","addedIndex","i","getLastSelectedIndex","handleDrop","inDropZne","lastStn","droppedCard","oldBins","bins","movedBin","stationBeforeMerge","updatedLot","handleNextStationBins","handleCurrentStationBins","Object","values","_id","then","res","style","padding","whiteSpace","overflow","textOverflow","onDragOver","e","current","preventDefault","onDragLeave","pointerEvents","class","ref","index","leadTime","name","object_id","flags","lotNum","totalQuantity","isLastSelected","processName","lotTemplateId","selectable","partBins","keys","part","isPartial","partialVisibility","offset","bottom","top","isVisible","id","onMouseEnter","onDragStart","offsetHeight","setLotDivHeight","target","opacity","onDragEnd","background","borderRadius","onDeleteDisabledLot","partId","currBin","submitLot","handleDeleteDisabledLot","onRightClickDeleteLot","handleRightClickDeleteLot","glow","enableFlagSelector","lotNumber","onClick","payload","lastSelectedLotId","selectedIndex","findIndex","currLotId","currBinId","existingIndex","slice","reverse","getBetweenSelected","border","boxShadow","margin","StationsColumn","autoCycleTime","dispatchPutStation","station","putStation","useTheme","setCollapsed","cycleTimeDisplayTime","useMemo","time","cycle_time_mode","cycle_time","convertSecondsToHHMMSS","manual_cycle_time","splitVal","split","moment","set","renderCycleTime","marginTop","marginRight","display","alignItems","onColor","transform","checked","onChange","switched","isManual","deepCopy","handleToggleManualCycleTime","marginLeft","showHours","showMinutes","value","val","convertHHMMSSStringToSeconds","handleSaveCycleTime","format","allowEmpty","className","cursor","marginBottom","justifyContent","LotQueue","onAddLotClick","setShowCardEditor","defaultProps","FinishColumn","Container","CardZone","handleCardClick","lotFilters","lotFilterValue","selectedFilterOption","handleAddLotClick","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","useWindowDimensions","currentProcess","undefined","showFinish","showQueue","allCards","lotTemplatesReducer","lotTemplates","draggedLotInfo","droppedLotInfo","multipleFilters","settingsReducer","settings","shiftDetails","enableMultipleLotFilters","draggingBinId","cardsSorted","setCardsSorted","setBins","queue","setQueue","finished","setFinished","deleteStationCycleTime","doesProcessEndInAllWarehouses","nodeId","type","every","tempBins","currRouteId","currRoute","loadStationId","getLoadStationId","unloadStationId","getUnloadStationId","tempQueue","tempFinished","tempCardsSorted","cardBins","rest","getLotTotalQuantity","matchesFilter","reduce","matchesAll","checkCardMatchesFilter","getMatchesFilter","entries","binEntry","lotItem","currentObj","isObject","existingCards","isArray","push","renderStationColumns","columns","flattened_stations","stationNode","idx","stationID","depth","position","LOT_FILTER_OPTIONS","SORT_DIRECTIONS","ASCENDING","memo","convert12hto24h","time12h","numericTime","modifier","hours","minutes","convert24htoEpoch","time24h","date","Date","parse","convertDateto12h","settingState","store","getState","timezone","label","toLocaleString","timeZone","convertDateToLocaleTimeZone","convert24hto12h","getHours","getMinutes","timeStr","hour","minute","second","seconds","toISOString","substr"],"mappings":"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","file":"static/js/8.8039aa9e.chunk.js","sourcesContent":["import styled, { css } from \"styled-components\";\nimport { Container } from \"react-smooth-dnd\";\n\n// export const RouteContainer = styled.div`\n//     display: flex;\n//     flex: 1;\n//     flex-direction: column;\n//     background: yellow;\n// `\n\nconst minHeight = \"10rem\"\nexport const RotatedRouteName = styled.span`\n// background: red;\n\ttransform: rotate(-90deg);\n\t// transform: translateY(50%);\n`\n\n\nexport const StationContainerCss = css`\n\tdisplay: flex;\n    flex-direction: column;\n    min-height: ${minHeight};\n\n    width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    max-width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    min-width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    margin-right: 1rem;\n\n    border-radius: 1rem;\n    overflow: hidden;\n\n    color: ${props => props.theme.bg.octonary};\n`\n\nexport const StationContainer = styled.div`\n    ${StationContainerCss};\n`\n\nexport const StationHeader = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    background: ${props => props.theme.bg.secondary};\n    padding: .5rem 1rem;\n`\n\nexport const HeaderRow = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    align-self: stretch;\n`\n\nexport const QuantityText = styled.span`\n    font-size: 1rem;\n    color: ${props => props.theme.textColor};\n`\n\nexport const HeaderContent = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n`\n\n\nexport const TitleContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\n\n\nexport const RouteContainer = styled.div`\n\tdisplay: flex;\n\tborder-bottom: 1px solid black;\n\twidth: 100%;\n`\n\nexport const LabelContainer = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t// justify-content: space-between;\n`\n\nexport const StationLabel = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz4};\n    border-bottom: 1px solid black;\n    width: 100%;\n    padding: .25rem;\n    background: ${props => props.theme.bg.senary};\n`\n\nexport const StationTitle = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz3};\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 2; /* number of lines to show */\n    -webkit-box-orient: vertical;\n    color: ${props => props.theme.textColor};\n`\n\n\n\nexport const StationButton = styled.button`\n\n`\n\nexport const BodyContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\t// flex: 1;\n\tmin-height: ${minHeight};\n\toverflow: hidden;\n\tbackground: ${props => props.theme.bg.quaternary};\n\topacity: ${props => props.dragEnter ? 0.75 : 1};\n\tborder-bottom-right-radius: 1rem;\n\tborder-bottom-left-radius: 1rem;\n\tjustify-content: center;\n`\n\nexport const HeaderSection = styled.div`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width:100%;\n    justify-content: space-between;\n    overflow: hidden;\n    align-content: center;\n    margin: 0.2rem 0;\n    /* position: absolute; */\n    /* right: 1rem; */\n\n`\n\nexport const HeaderSectionTitle = styled.h5`\n    text-align: center;\n    color: ${props => props.theme.bg.septenary};\n    font-family: ${props => props.theme.font.primary};\n`\n\nexport const RowContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n`\n\nexport const divider = styled.hr`\n    border-top: .05rem solid;\n    border-color: ${props => props.theme.bg.quaternary};\n    border-radius: .25rem;\n    width: 100%;\n    margin: 0;\n`\n","import { useState, useEffect } from 'react';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height\n  };\n}\n\nexport default function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return windowDimensions;\n}\n","import styled, { css } from \"styled-components\";\n\nconst minHeight = \"10rem\"\n\nexport const RotationWrapperOuter = styled.div`\n  display: table;\n`\n\nexport const RotationWrapperInner = styled.div`\n  padding: 50% 0;\n`\nexport const LotDiv = styled.div`\n\n`\n\nexport const DragToDiv = styled.div`\n  width: 97%;\n  margin-top: .5rem;\n  margin-bottom: .5rem;\n  margin-left: 0.5rem;\n  min-height: ${props => !props.dragDivHeight ? '10rem' : props.dragDivHeight};\n  background: ${props => props.theme.bg.tertiary};\n\n  border: 0.2rem solid #dedfe3;\n  border-radius: 0.2rem;\n`\n\n\nexport const RotatedRouteName = styled.span`\n  display: block;\n  transform-origin: top left;\n  transform: rotate(90deg) translate(0, -110%);\n  margin-top: -50%;\n  max-width: 20rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`\n\nexport const StationContainerCss = css`\n\n`\n\nexport const StationContainer = styled.div`\n    display: flex;\n    flex-direction: column;\n    min-height: ${minHeight};\n\n    width: ${props => props.isCollapsed ? \"2rem\" : props.maxWidth};\n    max-width: ${props => props.isCollapsed ? \"2rem\" : props.maxWidth};\n    min-width: ${props => props.isCollapsed ? \"2rem\" : props.maxWidth};\n    margin-left: 0.5rem;\n    margin-right: 0.5rem;\n    max-height: ${props => props.maxHeight && props.maxHeight};\n\n    border-radius: 0.5rem;\n    overflow: hidden;\n\n    color: ${props => props.theme.bg.octonary};\n`\n\nexport const StationHeader = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    background: ${props => props.theme.bg.secondary};\n`\n\nexport const TitleContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\nexport const RouteContainer = styled.div`\n\tdisplay: flex;\n\tborder-bottom: 1px solid black;\n\twidth: 100%;\n`\n\nexport const StationLabel = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz4};\n`\n\nexport const BodyContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n  height: 100%;\n\tmin-height: 10rem;\n  background: ${props => props.theme.bg.secondary};\n\tborder-bottom-right-radius: 0.5rem;\n\tborder-bottom-left-radius: 0.5rem;\n\n  // border-left: 0.2rem solid ${props => props.theme.schema.lots.solid};\n  // border-bottom: 0.2rem solid ${props => props.theme.schema.lots.solid};\n  // border-right: 0.2rem solid ${props => props.theme.schema.lots.solid};\n\n\tjustify-content: start;\n`\n","import React, { useEffect, useRef, useMemo, useState} from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport VisibilitySensor from 'react-visibility-sensor'\n\n// actions\nimport { putCard } from \"../../../../../../redux/actions/card_actions\";\nimport {\n\tsetDroppingLotId,\n\tsetLotHovering,\n\tsetDraggingLotId,\n\tsetDraggingStationId,\n\tsetDragFromBin,\n\tsetLotDivHeight,\n} from \"../../../../../../redux/actions/card_page_actions\";\n\n// components external\nimport { Draggable, Container } from 'react-smooth-dnd';\n\n// components internal\nimport Lot from \"../../lot/lot\";\n\n// functions external\nimport { useDispatch, useSelector } from \"react-redux\";\n\n// styles\nimport * as styled from \"./column.style\";\n\n/// utils\nimport { sortBy } from \"../../../../../../methods/utils/card_utils\";\nimport { immutableDelete, immutableReplace, isArray, isNonEmptyArray } from \"../../../../../../methods/utils/array_utils\";\nimport { getCustomFields, handleNextStationBins, handleCurrentStationBins, handleMergeParts } from \"../../../../../../methods/utils/lot_utils\";\nimport {findProcessStartNodes, findProcessEndNodes, isStationOnBranch } from '../../../../../../methods/utils/processes_utils'\nimport LotContainer from \"../../lot/lot_container\";\n\nconst Column = ((props) => {\n\n\tconst {\n\t\tstation_id,\n\t\tstationName = \"Unnamed\",\n\t\tonCardClick,\n\t\tselectedCards,\n\t\tprocessId,\n\t\tHeaderContent,\n\t\tisCollapsed,\n\t\tmaxWidth,\n\t\tmaxHeight,\n\t\tsortMode,\n\t\tsortDirection,\n\t\tsetSelectedCards,\n\t\tcontainerStyle\n\t} = props\n\n\t// redux state\n\tconst reduxCards = useSelector(state => { return state.cardsReducer.processCards[processId] }) || {}\n\tconst hoveringLotId = useSelector(state => { return state.cardPageReducer.hoveringLotId }) || null\n\tconst draggingLotId = useSelector(state => { return state.cardPageReducer.draggingLotId }) || null\n\tconst draggingStationId = useSelector(state => state.cardPageReducer.draggingStationId) || null\n\tconst lotDivHeight = useSelector(state => state.cardPageReducer.lotDivHeight) || null\n\tconst dragFromBin = useSelector(state => state.cardPageReducer.dragFromBin) || null\n\tconst routes = useSelector(state => state.tasksReducer.tasks)\n\tconst stations = useSelector(state => state.stationsReducer.stations)\n\tconst processes = useSelector(state => state.processesReducer.processes)\n\tconst kickoffDashboards = useSelector(state => { return state.dashboardsReducer.kickOffEnabledDashboards})\n\tconst showCardEditor = useSelector(state => { return state.cardsReducer.showEditor })\n\tconst history = useHistory();\n  const pageName = history.location.pathname;\n  const isDashboard = !!pageName.includes(\"/locations\");\n\t// actions\n\tconst lotRef = useRef(null)\n\tconst dragContainerRef = useRef(null)\n\tconst dispatch = useDispatch()\n\tconst dispatchPutCard = async (card, ID) => await dispatch(putCard(card, ID))\n\tconst dispatchSetLotDivHeight = (height) => dispatch(setLotDivHeight(height))\n\tconst dispatchSetDroppingLotId = async (lotId, binId) => await dispatch(setDroppingLotId(lotId, binId))\n\tconst dispatchSetLotHovering = async (lotId) => await dispatch(setLotHovering(lotId))\n\tconst dispatchSetDraggingLotId = async (lotId) => await dispatch(setDraggingLotId(lotId))\n\tconst dispatchSetDraggingStationId = async (stationId) => await dispatch(setDraggingStationId(stationId))\n\tconst dispatchSetDragFromBin = async (stationId) => await dispatch(setDragFromBin(stationId))\n\n\n\t// component state\n\tconst [dragEnter, setDragEnter] = useState(false)\n\tconst [lotQuantitySummation, setLotQuantitySummation] = useState(0)\n\tconst [numberOfLots, setNumberOfLots] = useState(0)\n\tconst [cards, setCards] = useState([])\n\tconst [enableFlags, setEnableFlags] = useState(true)\n\tconst [isSourcee, setIsSource] = useState(false)\n\tconst [highlightStation, setHighlightStation] = useState(false)\n\tconst [acceptDrop, setAcceptDrop] = useState(false)//checks if the station should accept the drop when hovering over it\n\tconst [inDropZone, setInDropZone] = useState(false)\n\n\tuseEffect(() => {\n\t\tlet tempLotQuantitySummation = 0\n\t\tlet tempNumberOfLots = 0\n\t\tcards.forEach((currLot) => {\n\t\t\tconst {\n\t\t\t\tcount = 0\n\t\t\t} = currLot || {}\n\n\t\t\ttempNumberOfLots = parseInt(tempNumberOfLots) + 1\n\t\t\ttempLotQuantitySummation = parseInt(tempLotQuantitySummation) + parseInt(count)\n\t\t})\n\n\t\tsetNumberOfLots(tempNumberOfLots)\n\t\tsetLotQuantitySummation(tempLotQuantitySummation)\n\t}, [cards])\n\n\n\tconst [isSelectedCardsNotEmpty, setIsSelectedCardsNotEmpty] = useState(false)\n\n\tuseEffect(() => {\n\t\tsetIsSelectedCardsNotEmpty(isNonEmptyArray(selectedCards))\n\t}, [selectedCards])\n\n\tuseEffect(() => {\n\t\tif (sortMode) {\n\t\t\tlet tempCards = [...props.cards] // *** MAKE MODIFIABLE COPY OF CARDS TO ALLOW SORTING ***\n\t\t\tsortBy(tempCards, sortMode, sortDirection)\n\t\t\tsetCards(tempCards)\n\n\t\t}\n\t\telse {\n\t\t\tsetCards(props.cards)\n\t\t}\n\t}, [props.cards, sortMode, sortDirection])\n\n\tuseEffect(() => {\n\t\tif(!!draggingLotId && !!dragFromBin && !!reduxCards[draggingLotId]){\n\t\t\tlet accDrop = shouldAcceptDrop(draggingLotId, dragFromBin, station_id) //true means update last traversed station for merge functions\n\t\t\tsetAcceptDrop(accDrop)\n\t\t}\n\t\tif(!draggingLotId) setHighlightStation(null)\n\n\t}, [draggingLotId])\n\n\t//This function is now more limiting with split/merge\n\t// -dont allow moving lot to next stations(s) if current station disperses a lot\n\t//-dont allow movinga lot backwards if the previous node has routes merging into it or if it disperses a lot\n\t//-dont allow moving lot back if current node has routes merging into it\n\t//-These limitations ensure dragging lots around in cardZone dont mess merge/split functionality\n\t//-We should make it more flexible in the future with functions that handle the above cases...\n\t//-There is some functionality that i added where you can drag lots forward into their merging station and it will properly merge them\n\tconst shouldAcceptDrop = (cardId, binId, station_id) => {\n\t\tlet lastStationTraversed = false\n\t\tlet oldProcessId = reduxCards[cardId].process_id\n\n\t\tconst process = processes[reduxCards[cardId].process_id]\n\t\tconst processRoutes = process.routes.map(routeId => routes[routeId])\n\n\t\tif (reduxCards[cardId].process_id !== processId) return false\n\t\tif (!!showCardEditor) return false\n\n\t\t\tlet startNodes = findProcessStartNodes(processRoutes, stations)\n\t\t\tlet endNode = findProcessEndNodes(processRoutes)\n\n\t\t\tif (oldProcessId !== processId) return [false, lastStationTraversed]\n\t\t\tif(!!showCardEditor) return [false, lastStationTraversed]\n\t\t\t//if (process[oldProcessId] === undefined) return false\n\n\t\t \tif(binId === station_id) {\n\t\t\t\t//setHighlightStation(true)\n\t\t\t\treturn [true, lastStationTraversed]\n\t\t\t}\n\n\t\t\tconst forwardsTraverseCheck = (currentStationID) => {\n\t\t\t\tif(endNode.includes(currentStationID) && station_id =='FINISH'){//If you can traverse to the end node, also allow finish column\n\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t\telse if(currentStationID === 'QUEUE' && (process.startDivergeType!=='split' || startNodes.length ===1)){\n\t\t\t\t\t//if lot is in queue and station is one of the the start nodes and start disperse isnt split then allow move\n\t\t\t\t\tif(startNodes.includes(station_id)){\n\t\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t\telse{//If the station is not one of the start nodes still traverse forwards from all the start nodes to see if you can get to station\n\t\t\t\t\t\tfor(const ind in startNodes){\n\t\t\t\t\t\t\tconst canMove = forwardsTraverseCheck(startNodes[ind])\n\t\t\t\t\t\t\tif(!!canMove) return true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst nextRoutes = processRoutes.filter(route => route.load === currentStationID)\n\t\t\t\tif(!!nextRoutes[0] && (!nextRoutes[0].divergeType || nextRoutes[0].divergeType!=='split')){//can't drag forward if station disperses lots\n\t\t\t\t\tfor(const ind in nextRoutes){\n\t\t\t\t\t\tif(nextRoutes[ind].unload === station_id){\n\t\t\t\t\t\t\t//If you are skipping over nodes and drag to a merge station we need to keep track of the station right before\n\t\t\t\t\t\t\t//the merge station as merge functions need this to find routeTravelled\n\t\t\t\t\t\t\tlastStationTraversed = nextRoutes[ind].load\n\t\t\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tconst mergingRoutes = processRoutes.filter((route) => route.unload === nextRoutes[ind].unload);\n\t\t\t\t\t\t\tif(mergingRoutes.length === 1){\n\t\t\t\t\t\t\t\tconst canMove = forwardsTraverseCheck(nextRoutes[ind].unload)\n\t\t\t\t\t\t\t\tif(!!canMove) return true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst backwardsTraverseCheck = (currentStationID) => {//dragging into Queue, make sure kickoff isnt dispersed\n\t\t\t\tif(startNodes.includes(currentStationID) && station_id === 'QUEUE' && (process.startDivergeType!=='split' || startNodes.length ===1)) {//can traverse back to queue\n\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\treturn true\n\n\t\t\t\t}\n\n\t\t\t\telse if(currentStationID === 'FINISH'){//dragging from Finish. Can drag into traversed stations provided theyre not a merge station\n\t\t\t\t\tif(endNode.includes(station_id)){\n\t\t\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tconst canMove = backwardsTraverseCheck(endNode)\n\t\t\t\t\t\tif(!!canMove) return true\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst mergingRoutes = processRoutes.filter((route) => route.unload === currentStationID);\n\t\t\t\tif(mergingRoutes.length===1){//Can't drag backwards from merge station\n\t\t\t\t\tfor(const ind in mergingRoutes){\n\t\t\t\t\t\tconst dispersingRoutes = processRoutes.filter((route) => route.load === mergingRoutes[ind].load);\n\t\t\t\t\t\tif(mergingRoutes[ind].load === station_id) {\n\t\t\t\t\t\t\tif(dispersingRoutes.length === 1 || dispersingRoutes[0].divergeType!=='split' || !dispersingRoutes[0].divergeType ){\n\t\t\t\t\t\t\t\tsetHighlightStation(true)\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tif(dispersingRoutes.length === 1 || !dispersingRoutes[0].divergeType || dispersingRoutes[0].divergeType!=='split'){\n\t\t\t\t\t\t\t\t\tconst canMove = backwardsTraverseCheck(mergingRoutes[ind].load)\n\t\t\t\t\t\t\t\t\tif(!!canMove) return true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\tlet atMergeStation = false\n\t\t\tconst forwardsFound = forwardsTraverseCheck(binId)\n\t\t\tif(!!forwardsFound) return [true, lastStationTraversed]\n\n\t\t\tconst backwardsFound = backwardsTraverseCheck(binId)\n\t\t\tif(!!backwardsFound) return [true, lastStationTraversed]\n\n\t\t\treturn [false, lastStationTraversed]\n\n\t}\n\n\n\tconst onMouseEnter = (event, lotId) => {\n\t\tdispatchSetLotHovering(lotId)\n\t}\n\n\n\tconst onMouseLeave = (event) => {\n\n\t\tdispatchSetLotHovering(null)\n\t}\n\n\tconst handleDeleteDisabledLot = (card, binId, partId) => {\n\t\t\tlet currLot = reduxCards[card.cardId]\n\t\t\tlet currBin = currLot.bins[binId]\n\n\t\t\tdelete currBin[partId]\n\n\t\t\tlet submitLot = {\n\t\t\t\t...currLot,\n\t\t\t\tbins: {\n\t\t\t\t\t...currLot.bins,\n\t\t\t\t\t[binId]: currBin\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(Object.values(currBin).length===1 && currBin['count'] === 0) delete submitLot.bins[binId]\n\t\t\tdispatchPutCard(submitLot, submitLot._id)\n\t}\n\n\tconst handleRightClickDeleteLot = (card, binId) => {\n\t\t\tlet currLot = reduxCards[card.cardId]\n\t\t\tlet currBin = currLot.bins[binId]\n\n\t\t\tcurrBin['count'] = 0\n\n\t\t\tlet submitLot = {\n\t\t\t\t...currLot,\n\t\t\t\tbins: {\n\t\t\t\t\t...currLot.bins,\n\t\t\t\t\t[binId]: currBin\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(Object.values(currBin).length===1) delete submitLot.bins[binId]\n\t\t\tdispatchPutCard(submitLot, submitLot._id)\n\t}\n\n\tconst getSelectedIndex = (lotId, binId) => {\n\t\treturn selectedCards.findIndex((currLot) => {\n\t\t\tconst {\n\t\t\t\tcardId: currLotId,\n\t\t\t\tbinId: currBinId\n\t\t\t} = currLot\n\n\t\t\treturn (lotId === currLotId) && (binId === currBinId)\n\t\t})\n\t}\n\n\tconst getIsSelected = (lotId, binId) => {\n\t\tconst existingIndex = getSelectedIndex(lotId, binId)\n\t\treturn (existingIndex !== -1)\n\t}\n\n\tconst getLastSelectedIndex = () => {\n\t\tlet addedIndex = -1\n\n\t\tfor (var i = selectedCards.length - 1; i >= 0; i--) {\n\t\t\tconst currLot = selectedCards[i]\n\t\t\tconst {\n\t\t\t\tbinId: currBinId\n\t\t\t} = currLot || {}\n\n\t\t\tif ((currBinId === station_id) && (i > addedIndex)) {\n\t\t\t\taddedIndex = i\n\t\t\t}\n\t\t}\n\n\t\treturn addedIndex\n\t}\n\n\tconst getLastSelected = () => {\n\t\tconst lastSelectedIndex = getLastSelectedIndex()\n\t\treturn selectedCards[lastSelectedIndex]\n\t}\n\n\tconst getIsLastSelected = (lotId) => {\n\t\tconst lastSelected = getLastSelected() || {}\n\t\tconst {\n\t\t\tcardId: currLotId,\n\t\t} = lastSelected\n\n\t\treturn lotId === currLotId\n\t}\n\n\tconst getBetweenSelected = (lotId) => {\n\t\tconst lastSelected = getLastSelected() || {}\n\t\tconst {\n\t\t\tcardId: lastSelectedLotId,\n\t\t} = lastSelected\n\n\t\tconst selectedIndex = cards.findIndex((currLot) => {\n\t\t\tconst {\n\t\t\t\tcardId: currLotId,\n\t\t\t\tbinId: currBinId\n\t\t\t} = currLot\n\n\t\t\treturn (lastSelectedLotId === currLotId) && (station_id === currBinId)\n\t\t})\n\n\t\tconst existingIndex = cards.findIndex((currLot) => {\n\t\t\tconst {\n\t\t\t\tcardId: currLotId,\n\t\t\t\tbinId: currBinId\n\t\t\t} = currLot\n\n\t\t\treturn (lotId === currLotId) && (station_id === currBinId)\n\t\t})\n\n\t\tif (selectedIndex === -1) {\n\t\t\treturn [cards[existingIndex]]\n\t\t}\n\t\telse if (selectedIndex < existingIndex) {\n\t\t\treturn cards.slice(selectedIndex, existingIndex + 1)\n\t\t}\n\t\telse {\n\t\t\treturn cards.slice(existingIndex, selectedIndex + 1).reverse()\n\t\t}\n\t}\n\n\tconst handleDrop = async () => {\n\t\t\tlet [inDropZne, lastStn] = shouldAcceptDrop(draggingLotId, dragFromBin, draggingStationId)\n\n\t\t\tif(!!inDropZne){\n\t\t\t\t\tconst binId = dragFromBin\n\t\t\t\t\tconst droppedCard = reduxCards[draggingLotId] ? reduxCards[draggingLotId] : {}\n\t\t\t\t\tconst oldBins = droppedCard.bins ? droppedCard.bins : {}\n\t\t\t\t\tconst {\n\t\t\t\t\t\t[binId]: movedBin,\n\t\t\t\t\t\t...remainingOldBins\n\t\t\t\t\t} = oldBins || {}\n\n\t\t\t\t\tif (movedBin) {\n\t\t\t\t\t\tlet updatedLot = droppedCard\n\t\t\t\t\t\tlet stationBeforeMerge = !!lastStn ? lastStn : binId\n\t\t\t\t\t\tupdatedLot.bins = handleNextStationBins(updatedLot.bins, updatedLot.bins[binId]?.count, stationBeforeMerge, draggingStationId, processes[updatedLot.process_id], routes, stations)\n\t\t\t\t\t\tupdatedLot.bins = handleCurrentStationBins(updatedLot.bins, updatedLot.bins[binId]?.count, binId, processes[updatedLot.process_id], routes)\n\t\t\t\t\t\tif(!!updatedLot.bins[binId] && !updatedLot.bins[binId]['count']){\n\t\t\t\t\t\t\tupdatedLot.bins[binId] = {\n\t\t\t\t\t\t\t\t...updatedLot.bins[binId],\n\t\t\t\t\t\t\t\tcount: 0\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//Bin exists but nothing in it. Delete the bin as this messes various things up.\n\t\t\t\t\t\tif(!!updatedLot.bins[binId] && updatedLot.bins[binId]['count'] === 0 && Object.values(updatedLot.bins[binId]).length === 1){\n\t\t\t\t\t\t\tdelete updatedLot.bins[binId]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet result = dispatchPutCard(updatedLot, updatedLot._id)\n\n\t\t\t\t\t\tresult.then((res) => {\n\t\t\t\t\t\t\tdispatchSetDraggingLotId(null)\n\t\t\t\t\t\t\tdispatchSetDragFromBin(null)\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdispatchSetDraggingLotId(null)\n\t\t\t\tdispatchSetDragFromBin(null)\n\t\t\t}\n\t}\n\n\tconst renderCards = () => {\n\t\treturn (\n\t\t\t\t<styled.BodyContainer\n\t\t\t\t\tclass = 'container'\n\t\t\t\t\tstyle={{ overflow: \"auto\", height: \"100%\", padding: \"1rem\", pointerEvents: !!draggingLotId && 'none'\n\n\t\t\t\t }}\n\n\t\t\t\t\t>\n\t\t\t\t\t{(!!highlightStation && !!draggingLotId && station_id!==dragFromBin) &&\n\t\t\t\t\t\t<styled.DragToDiv\n\t\t\t\t\t\tref = {dragContainerRef}\n\t\t\t\t\t\tdragDivHeight = {!!lotDivHeight ? (lotDivHeight-1) + 'rem' : '10rem'}\n\t\t\t\t\t\tclass = 'dragToDiv'\n\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t\t{cards.map((card, index) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t_id,\n\t\t\t\t\t\t\t\tcount = 0,\n\t\t\t\t\t\t\t\tleadTime,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tobject_id,\n\t\t\t\t\t\t\t\tcardId,\n\t\t\t\t\t\t\t\tflags,\n\t\t\t\t\t\t\t\tlotNum,\n\t\t\t\t\t\t\t\ttotalQuantity,\n\t\t\t\t\t\t\t\tprocessName,\n\t\t\t\t\t\t\t\tlotTemplateId,\n\t\t\t\t\t\t\t\t...rest\n\t\t\t\t\t\t\t} = card\n\n\t\t\t\t\t\t\tconst isLastSelected = getIsLastSelected(cardId)\n\n\t\t\t\t\t\t\t// const isSelected = (draggingLotId !== null) ? () : ()\n\t\t\t\t\t\t\tconst selectable = (hoveringLotId !== null) || (draggingLotId !== null) || isSelectedCardsNotEmpty\n\t\t\t\t\t\t\tif(!!reduxCards[card.cardId]?.bins[card.binId]){\n\t\t\t\t\t\t\t\tlet partBins = reduxCards[card.cardId].bins[card.binId]\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\tObject.keys(partBins).map((part) => {\n\n\t\t\t\t\t\t\t\t\t\tconst isPartial = part !== 'count' ? true : false\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<VisibilitySensor partialVisibility = {true} offset = {{bottom: 50, top: 50}}>\n\t\t\t\t\t\t\t\t\t\t\t\t{({isVisible}) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!!isVisible ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(partBins[part]>0 || (part === 'count' && partBins['count']>0)) &&\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<styled.LotDiv\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid = 'item'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref = {lotRef}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass = 'item'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={(event) => onMouseEnter(event, cardId)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={onMouseLeave}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDragStart = {(e)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!!lotRef && !!lotRef.current && !!lotRef.current.offsetHeight){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatchSetLotDivHeight(lotRef.current.offsetHeight/16)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.opacity = '.001'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatchSetDraggingLotId(cardId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatchSetDragFromBin(station_id)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDragEnd = {(e)=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!!dragFromBin && !!draggingStationId && dragFromBin!==draggingStationId) handleDrop()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatchSetDraggingLotId(null)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdispatchSetDragFromBin(null)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.style.opacity = '1'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: 'transparent',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '1rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpointerEvents: 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<LotContainer\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisPartial = {isPartial}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDeleteDisabledLot = {() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleDeleteDisabledLot(card, card.binId, part)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonRightClickDeleteLot = {()=>{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleRightClickDeleteLot(card, card.binId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tglow={isLastSelected}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tenableFlagSelector={enableFlags}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselectable={selectable}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={cardId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// processName={processName}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotalQuantity={totalQuantity}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlotNumber={lotNum}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={isPartial ? name + ` (${routes[part]?.part})` : name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcount={isPartial ? partBins[part] : partBins['count']}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tleadTime={leadTime}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={cardId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflags={flags || []}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlotId={cardId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbinId={station_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst payload = getBetweenSelected(cardId)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonCardClick(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlotId: cardId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprocessId: processId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbinId: station_id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpayload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontainerStyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder: draggingLotId === cardId && station_id === dragFromBin && '.1rem solid #b8b9bf',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: draggingLotId === cardId && station_id === dragFromBin && '2px 3px 2px 1px rgba(0,0,0,0.2)',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: '0.2rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0.2rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin: '.4rem',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth: '96%',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpointerEvents: !!draggingLotId && draggingLotId !== cardId && 'none',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</styled.LotDiv>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div style = {{minHeight:'15rem', width: '80%'}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t...Loading\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</VisibilitySensor>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})}\n\t\t\t\t</styled.BodyContainer>\n\t\t)\n\t}\n\n\tif (isCollapsed) {\n\t\treturn (\n\t\t\t<styled.StationContainer\n\t\t\t\tmaxHeight={maxHeight}\n\t\t\t\tisCollapsed={isCollapsed}\n\t\t\t\tmaxWidth={maxWidth}\n\t\t\t>\n\t\t\t\t{HeaderContent(numberOfLots, lotQuantitySummation)}\n\n\t\t\t\t<styled.BodyContainer style={{\n\t\t\t\t\tpadding: \"1rem 0\",\n\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\ttextOverflow: \"ellipsis\",\n\n\t\t\t\t}}>\n\t\t\t\t\t<styled.RotationWrapperOuter>\n\t\t\t\t\t\t<styled.RotationWrapperInner>\n\t\t\t\t\t\t\t<styled.RotatedRouteName>{stationName}</styled.RotatedRouteName>\n\t\t\t\t\t\t</styled.RotationWrapperInner>\n\t\t\t\t\t</styled.RotationWrapperOuter>\n\t\t\t\t</styled.BodyContainer>\n\t\t\t</styled.StationContainer>\n\t\t)\n\t}\n\n\telse {\n\t\treturn (\n\n\t\t\t<styled.StationContainer\n\t\t\t\tonDragOver = {(e) => {\n\t\t\t\t if(!!dragContainerRef && !!dragContainerRef.current) dragContainerRef.current.style.minHeight = (lotDivHeight + 4) + 'rem'\n\t\t\t\t dispatchSetDraggingStationId(station_id)\n\t\t\t\t if(!!acceptDrop){\n\t\t\t\t\t setInDropZone(true)\n\t\t\t\t }\n\t\t\t\t e.preventDefault()\n\t\t\t }}\n\t\t\t onDragLeave={(e) => {\n\t\t\t\t\t setInDropZone(false)\n\t\t\t\t\t dispatchSetDraggingStationId(null)\n\t\t\t\t\t if(!!dragContainerRef && !!dragContainerRef.current) dragContainerRef.current.style.minHeight = (lotDivHeight -1) + 'rem'\n\t\t\t }}\n\t\t\t\tisCollapsed={isCollapsed}\n\t\t\t\tmaxWidth={maxWidth}\n\t\t\t\tmaxHeight={maxHeight}\n\t\t\t\tstyle={{\n\t\t\t\t\t...containerStyle\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div style = {{pointerEvents: !!draggingLotId && 'none'}}>\n\t\t\t\t\t{HeaderContent(numberOfLots, lotQuantitySummation)}\n\t\t\t\t</div>\n\t\t\t\t{!showCardEditor &&\n\t\t\t\t\trenderCards()\n\t\t\t\t}\n\t\t\t</styled.StationContainer>\n\t\t)\n\t}\n\n})\n\nexport default Column\n","import React, { useState, useMemo } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport moment from 'moment';\nimport Switch from 'react-ios-switch';\n\nimport { useTheme } from \"styled-components\";\nimport * as styled from \"./station_column.style\";\n\n// Import Components\nimport TimePicker from \"rc-time-picker\";\nimport Button from '../../../../../basic/button/button'\nimport Column from \"../column/column\"\n\n// Import Actions\nimport { putStation } from '../../../../../../redux/actions/stations_actions'\n\n// Import Utils\nimport { deepCopy } from '../../../../../../methods/utils/utils'\nimport { convertSecondsToHHMMSS, convertHHMMSSStringToSeconds } from '../../../../../../methods/utils/time_utils'\n\nconst StationsColumn = ((props) => {\n    const {\n        id,\n        station_id,\n        stationName = \"Unnamed\",\n        onCardClick,\n        cards = [],\n        processId,\n        maxHeight,\n        sortMode,\n        sortDirection,\n        selectedCards,\n        setSelectedCards,\n        autoCycleTime,\n        containerStyle\n    } = props\n\n    const dispatch = useDispatch()\n    const dispatchPutStation = async (station) => await dispatch(putStation(station))\n\n    const stations = useSelector(state => state.stationsReducer.stations)\n    const theme = useTheme()\n\n    const [isCollapsed, setCollapsed] = useState(false)\n\n    const cycleTimeDisplayTime = useMemo(() => {\n\n        let time = '00:00:00'\n\n        // If there is a manual time and its enable then use that time\n        if (stations[station_id].cycle_time_mode === 'auto' && !!stations[station_id]?.cycle_time) {\n            time = convertSecondsToHHMMSS(stations[station_id].cycle_time);\n        } else if (stations[station_id].cycle_time_mode === 'manual' && !!stations[station_id]?.manual_cycle_time) {\n            time = convertSecondsToHHMMSS(stations[station_id]?.manual_cycle_time);\n        }\n\n        // Split the time up\n        const splitVal = time.split(':')\n\n        // Set it to a moment for the time picker\n        return moment().set({ 'hour': splitVal[0], 'minute': splitVal[1], 'second': splitVal[2] })\n    }, [stations[station_id]])\n\n\n    const handleSaveCycleTime = (time) => {\n        let station = deepCopy(stations[station_id])\n        station.manual_cycle_time = convertHHMMSSStringToSeconds(time)\n        dispatchPutStation(station)\n    }\n\n    const handleToggleManualCycleTime = (isManual) => {\n        let station = deepCopy(stations[station_id])\n        station.cycle_time_mode = isManual ? 'manual' : 'auto'\n        dispatchPutStation(station)\n    }\n\n    const renderCycleTime = () => {\n\n        return (\n            <>\n                <styled.divider />\n                <styled.HeaderSection style={{ marginTop: '.5rem' }}>\n                    <styled.HeaderSectionTitle>\n                        Cycle Time\n                    </styled.HeaderSectionTitle>\n                    <styled.RowContainer>\n                        <styled.QuantityText style={{ marginRight: '.25rem', display: 'flex', alignItems: 'center' }}>Auto</styled.QuantityText>\n                        <Switch\n                            onColor={theme.schema.lots.solid}\n                            style={{ transform: 'scale(0.8)' }}\n                            checked={stations[station_id]?.cycle_time_mode === 'manual'}\n                            onChange={switched => {\n                                handleToggleManualCycleTime(switched)\n                            }}\n                        />\n                        <styled.QuantityText style={{ marginLeft: '.25rem', display: 'flex', alignItems: 'center' }}>Manual</styled.QuantityText>\n                    </styled.RowContainer>\n\n\n                </styled.HeaderSection>\n\n                <styled.HeaderSection style={{ opacity: stations[station_id]?.cycle_time_mode === 'auto' && '70%', pointerEvents: stations[station_id]?.cycle_time_mode === 'auto' ? 'none' : 'auto', borderRadius: '0 3px 3px 0'}}>\n                    <styled.HeaderSectionTitle style={{ fontSize: '1rem' }}>\n                        (HH:MM:SS)\n                    </styled.HeaderSectionTitle>\n\n                    <TimePicker\n                        showHours={true}\n                        showMinutes={true}\n                        value={cycleTimeDisplayTime}\n                        onChange={(val) => {\n                            handleSaveCycleTime(val.format('HH:mm:ss'))\n                        }}\n                        style={{width: '5.5rem'}}\n                        allowEmpty={false}\n                        // disabled={stations[station_id]?.cycle_time_mode === 'auto'}\n                    />\n\n\n                </styled.HeaderSection>\n                <styled.divider />\n\n            </>\n        )\n    }\n\n    return (\n        <Column\n            setSelectedCards={setSelectedCards}\n            selectedCards={selectedCards}\n            sortDirection={sortDirection}\n            maxWidth={\"25rem\"}\n            sortMode={sortMode}\n            maxHeight={maxHeight}\n            id={id}\n            containerStyle={containerStyle}\n            HeaderContent={(numberOfLots = 0, lotQuantitySummation = 0) => {\n                if (isCollapsed) {\n                    return (\n                        <styled.StationHeader>\n                            <i className=\"fa fa-chevron-right\" aria-hidden=\"true\"\n                                onClick={() => setCollapsed(false)}\n                                style={{ cursor: 'pointer' }}\n                            />\n                        </styled.StationHeader>\n                    )\n                }\n                else {\n                    return (\n                        <styled.StationHeader>\n                            <styled.HeaderRow\n                                style={{\n                                    marginBottom: \"1rem\",\n                                    justifyContent: 'center'\n                                }}\n                            >\n                                <styled.LabelContainer>\n                                    <styled.StationTitle>{stationName}</styled.StationTitle>\n                                </styled.LabelContainer>\n\n                                <i className=\"fas fa-ellipsis-h\" style={{ opacity: 0 }}></i>\n\n                            </styled.HeaderRow>\n\n                            <styled.HeaderRow>\n                                <div>\n                                    <styled.QuantityText>Lots: </styled.QuantityText>\n                                    <styled.QuantityText>{numberOfLots}</styled.QuantityText>\n                                </div>\n\n                                <div>\n                                    <styled.QuantityText>Total Quantity: </styled.QuantityText>\n                                    <styled.QuantityText>{lotQuantitySummation}</styled.QuantityText>\n                                </div>\n\n                            </styled.HeaderRow>\n                            {renderCycleTime()}\n                        </styled.StationHeader>\n                    )\n                }\n            }}\n            station_id={station_id}\n            stationName={stationName}\n            onCardClick={onCardClick}\n            cards={cards}\n            processId={processId}\n            isCollapsed={isCollapsed}\n        />\n    )\n})\n\nexport default StationsColumn\n","import styled, { css } from \"styled-components\";\nimport {Container} from \"react-smooth-dnd\";\n\n// export const RouteContainer = styled.div`\n//     display: flex;\n//     flex: 1;\n//     flex-direction: column;\n//     background: yellow;\n// `\n\nconst minHeight = \"10rem\"\nexport const RotatedRouteName = styled.span`\n// background: red;\n\ttransform: rotate(-90deg);\n\t// transform: translateY(50%);\n`\n\n\nexport const StationContainerCss = css`\n\tdisplay: flex;\n    flex-direction: column;\n    min-height: ${minHeight};\n    \n    width: ${props => props.isCollapsed ? \"2rem\" : \"fit-content\"};\n    max-width: ${props => props.isCollapsed ? \"2rem\" : \"fit-content\"};\n    min-width: ${props => props.isCollapsed ? \"2rem\" : \"fit-content\"};\n    margin-right: 1rem;\n    \n    border-radius: 1rem;\n    overflow: hidden;\n    \n    color: ${props => props.theme.bg.octonary};\n`\n\nexport const StationContainer = styled.div`\n    ${StationContainerCss};\n`\n\nexport const StationHeader = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    background: ${props => props.theme.bg.secondary};\n    padding: 0.5rem 1rem;\n`\n\nexport const HeaderRow = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    align-self: stretch;\n`\n\nexport const QuantityText = styled.span`\n    font-size: 1rem;\n    color: ${props => props.theme.textColor};\n\n`\n\n\nexport const TitleContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\n\n\nexport const RouteContainer = styled.div`\n\tdisplay: flex;\n\tborder-bottom: 1px solid black;\n\twidth: 100%;\n`\n\nexport const LabelContainer = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n    margin: 0 2rem;\n\t// justify-content: space-between;\n`\n\nexport const StationLabel = styled.span`\n    text-align: center;\n    margin-right: 1rem;\n    \n    font-size: ${props => props.theme.fontSize.sz3};\n`\n\nexport const StationTitle = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz3};\n    color: ${props => props.theme.textColor};\n`\n\n\n\nexport const StationButton = styled.button`\n\n`\n\nexport const BodyContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\t// flex: 1;\n\tmin-height: ${minHeight};\n\toverflow: hidden;\n\tbackground: ${props => props.theme.bg.quaternary};\n\topacity: ${props => props.dragEnter ? 0.75 : 1};\n\tborder-bottom-right-radius: 1rem;\n\tborder-bottom-left-radius: 1rem;\n\tjustify-content: center;\n`\n","import React, {useState} from \"react\";\n\n// functions external\nimport PropTypes from 'prop-types';\n\n// components internal\nimport Column from \"../column/column\";\nimport Button from \"../../../../../basic/button/button\";\n\nimport * as styled from \"./lot_queue.style\";\n\nconst LotQueue = ((props) => {\n\tconst {\n\t\tstation_id = \"QUEUE\",\n\t\tstationName = \"Unnamed\",\n\t\tonCardClick,\n\t\tcards,\n\t\tonAddLotClick,\n\t\tprocessId,\n\t\tsetShowCardEditor,\n\t\tshowCardEditor,\n\t\tmaxHeight,\n\t\tsortMode,\n\t\tsortDirection,\n\t\tselectedCards,\n\t\tsetSelectedCards\n\t} = props\n\n\tconst [isCollapsed, setCollapsed] = useState(false)\n\n\treturn(\n\t\t<Column\n\t\t\tsetSelectedCards={setSelectedCards}\n\t\t\tselectedCards={selectedCards}\n\t\t\tsortDirection={sortDirection}\n\t\t\tsortMode={sortMode}\n\t\t\tmaxHeight={maxHeight}\n\t\t\tmaxWidth={\"24rem\"}\n\t\t\tHeaderContent={(numberOfLots = 0, lotQuantitySummation = 0) => {\n\t\t\t\tif(isCollapsed) {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<styled.StationHeader>\n\t\t\t\t\t\t\t<i className=\"fa fa-chevron-right\" aria-hidden=\"true\"\n\t\t\t\t\t\t\t   onClick={() => setCollapsed(false)}\n\t\t\t\t\t\t\t\t style = {{cursor: \"pointer\"}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</styled.StationHeader>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<styled.StationHeader>\n\t\t\t\t\t\t\t<styled.HeaderRow\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmarginBottom: \"1rem\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-chevron-down\" aria-hidden=\"true\"\n\t\t\t\t\t\t\t\t   onClick={() => setCollapsed(true)}\n\t\t\t\t\t\t\t\t\t style = {{cursor: \"pointer\"}}\n\n\t\t\t\t\t\t\t\t/>\n\n\n\t\t\t\t\t\t\t\t<styled.LabelContainer>\n\t\t\t\t\t\t\t\t\t<styled.StationTitle>{stationName}</styled.StationTitle>\n\t\t\t\t\t\t\t\t</styled.LabelContainer>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={onAddLotClick}\n\t\t\t\t\t\t\t\t\tschema={'lots'}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t+ Lot\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</styled.HeaderRow>\n\t\t\t\t\t\t\t<styled.HeaderRow\n\t\t\t\t\t\t\t\tstyle={{justifyContent: \"space-between\"}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>Lots: </styled.QuantityText>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>{numberOfLots}</styled.QuantityText>\n\t\t\t\t\t\t\t\t</div>\n\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>Total Quantity: </styled.QuantityText>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>{lotQuantitySummation}</styled.QuantityText>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</styled.HeaderRow>\n\n\t\t\t\t\t\t</styled.StationHeader>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}}\n\t\t\tstation_id={station_id}\n\t\t\tstationName = {stationName}\n\t\t\tonCardClick={onCardClick}\n\t\t\tcards = {cards}\n\t\t\tprocessId={processId}\n\t\t\tisCollapsed={isCollapsed}\n\t\t/>\n\t)\n\n\n})\n\n// Specifies propTypes\nLotQueue.propTypes = {\n\tstationName: PropTypes.string,\n\tonCardClick: PropTypes.func,\n\tonAddLotClick: PropTypes.func,\n\tsetShowCardEditor: PropTypes.func,\n\tshowCardEditor: PropTypes.bool\n};\n\n// Specifies the default values for props:\nLotQueue.defaultProps = {\n\tstationName: \"Unnamed\",\n\tonCardClick: ()=>{},\n\tonAddLotClick: ()=>{},\n\tcards: [],\n\tsetShowCardEditor: ()=>{},\n\tshowCardEditor: false\n};\n\nexport default LotQueue\n","import styled, { css } from \"styled-components\";\nimport {Container} from \"react-smooth-dnd\";\n\n// export const RouteContainer = styled.div`\n//     display: flex;\n//     flex: 1;\n//     flex-direction: column;\n//     background: yellow;\n// `\n\nconst minHeight = \"10rem\"\nexport const RotatedRouteName = styled.span`\n// background: red;\n\ttransform: rotate(-90deg);\n\t// transform: translateY(50%);\n`\n\n\nexport const StationContainerCss = css`\n\tdisplay: flex;\n    flex-direction: column;\n    min-height: ${minHeight};\n    \n    width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    max-width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    min-width: ${props => props.isCollapsed ? \"2rem\" : \"15rem\"};\n    margin-right: 1rem;\n    \n    border-radius: 1rem;\n    overflow: hidden;\n    \n    color: ${props => props.theme.bg.octonary};\n`\n\nexport const StationContainer = styled.div`\n    ${StationContainerCss};\n`\n\nexport const StationHeader = styled.div`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    justify-content: center;\n    align-items: center;\n    background: ${props => props.theme.bg.secondary};\n    padding: .5rem 1rem;\n`\n\nexport const HeaderRow = styled.div`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    align-self: stretch;\n`\n\nexport const QuantityText = styled.span`\n    font-size: 1rem;\n    color: ${props => props.theme.textColor};\n`\n\nexport const HeaderContent = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-left: 1rem;\n    padding-right: 1rem;\n \n \n`\n\n\nexport const TitleContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n`\n\n\n\nexport const RouteContainer = styled.div`\n\tdisplay: flex;\n\tborder-bottom: 1px solid black;\n\twidth: 100%;\n`\n\nexport const LabelContainer = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\t// justify-content: space-between;\n`\n\nexport const StationLabel = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz4};\n`\n\nexport const StationTitle = styled.span`\n    text-align: center;\n    font-size: ${props => props.theme.fontSize.sz3};\n    color: ${props => props.theme.textColor};\n`\n\n\n\nexport const StationButton = styled.button`\n\n`\n\nexport const BodyContainer = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\t// flex: 1;\n\tmin-height: ${minHeight};\n\toverflow: hidden;\n\tbackground: ${props => props.theme.bg.quaternary};\n\topacity: ${props => props.dragEnter ? 0.75 : 1};\n\tborder-bottom-right-radius: 1rem;\n\tborder-bottom-left-radius: 1rem;\n\tjustify-content: center;\n`\n","import {SortableContainer} from \"react-sortable-hoc\";\n\nimport * as styled from \"./finish_column.style\";\n\nimport React, {useState} from \"react\";\n\nimport Column from \"../column/column\"\n\nconst FinishColumn = ((props) => {\n\tconst {\n\t\tstation_id,\n\t\tstationName = \"Unnamed\",\n\t\tonCardClick,\n\t\tcards = [],\n\t\tprocessId,\n\t\tmaxHeight,\n\t\tsortMode,\n\t\tsortDirection,\n\t\tselectedCards,\n\t\tsetSelectedCards\n\t} = props\n\n\tconst [isCollapsed, setCollapsed] = useState(false)\n\n\treturn(\n\t\t<Column\n\t\t\tsetSelectedCards={setSelectedCards}\n\t\t\tselectedCards={selectedCards}\n\t\t\tsortDirection={sortDirection}\n\t\t\tmaxHeight={maxHeight}\n\t\t\tsortMode={sortMode}\n\t\t\tmaxWidth={\"24rem\"}\n\t\t\tHeaderContent={(numberOfLots = 0, lotQuantitySummation = 0)=>{\n\t\t\t\tif(isCollapsed) {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<styled.StationHeader>\n\t\t\t\t\t\t\t<i className=\"fa fa-chevron-right\" aria-hidden=\"true\"\n\t\t\t\t\t\t\t   onClick={() => setCollapsed(false)}\n\t\t\t\t\t\t\t\t style = {{cursor: \"pointer\"}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</styled.StationHeader>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn(\n\t\t\t\t\t\t<styled.StationHeader>\n\t\t\t\t\t\t\t<styled.HeaderRow style={{\n\t\t\t\t\t\t\t\tmarginBottom: \"1rem\",\n\t\t\t\t\t\t\t\tjustifyContent: 'center'\n\t\t\t\t\t\t\t}}>\n\n\t\t\t\t\t\t\t\t<styled.LabelContainer>\n\n\t\t\t\t\t\t\t\t\t<styled.StationTitle>{stationName}</styled.StationTitle>\n\t\t\t\t\t\t\t\t</styled.LabelContainer>\n\n\t\t\t\t\t\t\t\t<i className=\"fas fa-ellipsis-h\" style={{opacity: 0}}></i>\n\t\t\t\t\t\t\t</styled.HeaderRow>\n\n\t\t\t\t\t\t\t<styled.HeaderRow>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>Lots: </styled.QuantityText>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>{numberOfLots}</styled.QuantityText>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>Total Quantity: </styled.QuantityText>\n\t\t\t\t\t\t\t\t\t<styled.QuantityText>{lotQuantitySummation}</styled.QuantityText>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</styled.HeaderRow>\n\t\t\t\t\t\t</styled.StationHeader>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}}\n\t\t\tstation_id={station_id}\n\t\t\tstationName = {stationName}\n\t\t\tonCardClick={onCardClick}\n\t\t\tcards = {cards}\n\t\t\tprocessId={processId}\n\t\t\tisCollapsed={isCollapsed}\n\t\t/>\n\t)\n\n\n})\n\nexport default FinishColumn\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  // max-height: ${props => props.maxHeight};\n  display: flex;\n  flex-direction: row;\n  padding: 1rem;\n  justify-content:  flex-start;\n`\n\nexport const ColumnGroup = styled.div`\ndisplay: flex;\nflex-direction: row;\npadding: 1rem 0rem;\nmargin: 0 1rem;\n// border: 1px solid lightgrey;\n`","import React, { useEffect, useState, memo, useMemo } from \"react\"\nimport useWindowDimensions from \"../../../../../higher_order_components/react-window-size\";\n\n// components internal\nimport StationsColumn from \"../columns/station_column/station_column\"\nimport LotQueue from \"../columns/lot_queue/lot_queue\"\nimport FinishColumn from \"../columns/finish_column/finish_column\"\n\n// functions external\nimport { useDispatch, useSelector } from \"react-redux\"\nimport PropTypes from \"prop-types\"\n\n// utils\nimport { getLotTotalQuantity, checkCardMatchesFilter, getMatchesFilter } from \"../../../../../methods/utils/lot_utils\";\nimport { getLoadStationId, getUnloadStationId } from \"../../../../../methods/utils/route_utils\";\n\n//Actions\nimport {putCard} from '../../../../../redux/actions/card_actions'\n\n// styles\nimport * as styled from \"./card_zone.style\"\nimport { isObject } from \"../../../../../methods/utils/object_utils\";\nimport { isArray } from \"../../../../../methods/utils/array_utils\";\nimport { LOT_FILTER_OPTIONS, SORT_DIRECTIONS } from \"../../../../../constants/lot_contants\";\nimport { findProcessEndNodes } from \"../../../../../methods/utils/processes_utils\";\n\n\nconst CardZone = ((props) => {\n\n    // extract props\n    const {\n        handleCardClick,\n        processId,\n        setShowCardEditor,\n        showCardEditor,\n        maxHeight,\n        lotFilters,\n        lotFilterValue,\n        selectedFilterOption,\n        sortMode,\n        sortDirection,\n        selectedCards,\n        setSelectedCards,\n        handleAddLotClick,\n    } = props\n\n    const { height: windowHeight, width: windowWidth } = useWindowDimensions()\n    const dispatch = useDispatch()\n\n    // redux state\n    const currentProcess = useSelector(state => { return state.processesReducer.processes[processId] }) || {}\n    const showFinish = currentProcess.showFinish === undefined ? true: currentProcess.showFinish\n    const showQueue = currentProcess.showQueue === undefined ? true: currentProcess.showQueue\n\n    const dispatchPutCard = (card,cardId) => dispatch(putCard(card, cardId))\n    const routes = useSelector(state => { return state.tasksReducer.tasks })\n    const lotTemplates = useSelector(state => state.lotTemplatesReducer.lotTemplates)\n    const allCards = useSelector(state => { return state.cardsReducer.processCards }) || {}\n    const stations = useSelector(state => { return state.stationsReducer.stations })\n    const draggedLotInfo = useSelector(state => { return state.cardPageReducer.droppedLotInfo })\n    const { shiftDetails } = useSelector(state => state.settingsReducer.settings)\n    const multipleFilters = useSelector(state => state.settingsReducer.settings.enableMultipleLotFilters)\n    const {\n        lotId: draggingLotId = \"\",\n        binId: draggingBinId = \"\"\n    } = draggedLotInfo || {}\n    // component state\n    const [cardsSorted, setCardsSorted] = useState({})\n    const [bins, setBins] = useState({})\n    const [queue, setQueue] = useState([])\n    const [finished, setFinished] = useState([])\n    const [deleteStationCycleTime, setDeleteStationCycleTime] = useState({})\n\n    const {\n        name: processName = \"\"\n    } = currentProcess || {}\n\n    const doesProcessEndInAllWarehouses = useMemo(() => {\n        const processRoutes = currentProcess.routes.map(routeId => routes[routeId]);\n        const processEndNodes = findProcessEndNodes(processRoutes)\n\n        return processEndNodes.map(nodeId => stations[nodeId]?.type).every(type => type === 'warehouse')\n    }, [currentProcess.routes, stations])\n    // need to loop through the process's routes first and get all station ids involved in the process\n    // this must be done first in order to avoid showing lots that are in stations that are no longer a part of the process\n    useEffect(() => {\n        let prevLoadStationId\t\t// tracks previous load station id when looping through routes\n        let prevUnloadStationId\t\t// tracks previous unload station id when looping through routes\n        let tempBins = {}\t// temp var for storing sorted cards\n\n        // loop through routes, get load / unload station id and create entry in tempCardsSorted for each station\n        currentProcess.routes && currentProcess.routes.forEach((currRouteId, index) => {\n\n            // get current route and load / unload station ids\n            const currRoute = routes[currRouteId]\n            const loadStationId = getLoadStationId(currRoute)\n            const unloadStationId = getUnloadStationId(currRoute)\n\n            tempBins[loadStationId] = {\n                station_id: loadStationId,\n                cards: []\n            }\n\n            // add entry in tempCardsSorted\n            tempBins[unloadStationId] = {\n                station_id: unloadStationId,\n                cards: []\n            }\n\n            // update prevLoadStationId and prevUnloadStationId\n            prevLoadStationId = loadStationId\n            prevUnloadStationId = unloadStationId\n        })\n\n        setBins(tempBins)\n\n    }, [currentProcess, routes])\n\n\n    // now that the object keys have been made, loop through the process's cards and add them to the correct bins\n    useEffect(() => {\n        let tempQueue = []\t\t// temp var for storing queue lots\n        let tempFinished = []\t// temp var for storing finished lots\n        let tempCardsSorted = { ...bins }\n\n        const processCards = allCards[processId] || {}\n\n        Object.values(processCards).forEach((card) => {\n            // extract lot attributes\n            const {\n                bins: cardBins,\n                _id,\n                ...rest\n            } = card\n\n            const totalQuantity = getLotTotalQuantity(card)\n            // const matchesFilter = lotFilters.reduce((filter, matchesAll) => matchesAll && checkCardMatchesFilter(card, filter), true)\n            var matchesFilter = false\n            if(!!multipleFilters){\n              matchesFilter = lotFilters.reduce((matchesAll, filter) => matchesAll && checkCardMatchesFilter(card, filter), true)\n            }\n            else{\n              matchesFilter = getMatchesFilter(card, lotFilterValue, selectedFilterOption)\n            }\n\n            if (cardBins && matchesFilter) {\n\n                // loop through this lot's bins\n                Object.entries(cardBins).forEach((binEntry) => {\n\n                    // get bin attributes\n                    const binId = binEntry[0]\n                    const binValue = binEntry[1]\n                    const {\n                        count\n                    } = binValue\n\n                    if (!(count > -1)) return\n\n                    // don't render lot being dragged - prevents flicker bug after drop\n                    //if ((binId === draggingBinId) && (_id === draggingLotId)) return\n\n                    const lotItem = {\n                        ...rest,\n                        totalQuantity,\n                        binId,\n                        count,\n                        cardId: _id,\n                        processName\n                    }\n\n\n                    // if there is an entry in tempCardsSorted with key matching {binId}, add the lot to this bin\n                    if (bins[binId]) {\n                        // tempCardsSorted[binId].cards.push(lotItem)\n                        const currentObj = isObject(tempCardsSorted[binId]) ? tempCardsSorted[binId] : {}\n                        const existingCards = (isArray(currentObj.cards)) ? currentObj.cards : []\n\n                        tempCardsSorted = {\n                            ...tempCardsSorted,\n                            [binId]: {\n                                ...currentObj,\n                                cards: [...existingCards, lotItem]\n                            }\n                        }\n                    }\n\n                    // if {binId} is queue, add the lot to the queue\n                    else if (binId === \"QUEUE\") {\n                        tempQueue.push(lotItem)\n                    }\n\n                    // if the {binId} is finish, add the lot to the finished column\n                    else if (binId === \"FINISH\") {\n                        tempFinished.push(lotItem)\n                    }\n\n                })\n            }\n        })\n\n        setCardsSorted(tempCardsSorted)\n        setQueue(tempQueue)\n        setFinished(tempFinished)\n    }, [bins, allCards, processId, lotFilters, draggingBinId, draggingLotId, lotFilterValue, selectedFilterOption])\n\n    const renderStationColumns = useMemo(() => {\n\n        const columns = currentProcess.flattened_stations.map((stationNode, idx) => (\n\n            <div id={`column-${stationNode.stationID}`}>\n                <StationsColumn\n                    containerStyle={{marginTop: `${stationNode.depth*2}rem`, position: 'relative'}}\n                    setSelectedCards={setSelectedCards}\n                    selectedCards={selectedCards}\n                    sortMode={sortMode}\n                    sortDirection={sortDirection}\n                    maxHeight={maxHeight}\n                    id={processId + \"+\" + stationNode.stationID}\n                    station_id={stationNode.stationID}\n                    stationName={stations[stationNode.stationID].name}\n                    processId={processId}\n                    cards={cardsSorted[stationNode.stationID]?.cards || []}\n                    onCardClick={handleCardClick}\n                    autoCycleTime={deleteStationCycleTime[stationNode.stationID]}\n                />\n            </div>\n\n        ))\n\n        // const pathsBoxWidth = 26*(currentProcess.flattened_stations.length + 2)\n        // const pathsBoxHeight = 2*Math.max(...currentProcess.flattened_stations.map(node => node.depth))\n        // const paths = (\n        //     <div style={{zIndex: 1000, background: 'red', width: '400rem', top: 0, left: 0}}>\n        //     {/* <svg style={{background: 'rgba(0,0,0.3,0.3)', position: 'absolute'}} fill='yellow' viewBox={`0 0 ${100*pathsBoxWidth} ${100*pathsBoxHeight}`} width={`${pathsBoxWidth}rem`} height={`${pathsBoxHeight}rem`} >\n        //         {currentProcess.routes.map(routeId => {\n        //             const route = routes[routeId];\n        //             const loadIdx = currentProcess.flattened_stations.findIndex(node => node.stationID === route.load)\n        //             const unloadIdx = currentProcess.flattened_stations.findIndex(node => node.stationID === route.unload)\n\n        //             return <line x1={`${26*100*loadIdx}`} y1={200*currentProcess.flattened_stations[loadIdx].depth} x2={`${26*100*unloadIdx}`} y2={200*currentProcess.flattened_stations[unloadIdx].depth} stroke=\"black\" strokeWidth=\"10\"/>\n        //         })}\n        //     </svg> */}\n        //     </div>\n        // )\n\n        return (\n            <>\n                {columns}\n                {/* {paths} */}\n            </>\n        )\n\n    }, [cardsSorted, currentProcess])\n\n    return (\n        <styled.Container style={{ background: 'white' }}>\n\n            <LotQueue\n                setSelectedCards={setSelectedCards}\n                selectedCards={selectedCards}\n                key={\"QUEUE\"}\n                sortMode={sortMode}\n                sortDirection={sortDirection}\n                maxHeight={maxHeight}\n                station_id={\"QUEUE\"}\n                setShowCardEditor={setShowCardEditor}\n                showCardEditor={showCardEditor}\n                stationName={\"Queue\"}\n                processId={processId}\n                cards={queue}\n                onCardClick={handleCardClick}\n                onAddLotClick={() => handleAddLotClick(processId)}\n            />\n\n            {renderStationColumns}\n\n            {!doesProcessEndInAllWarehouses &&\n                <FinishColumn\n                    setSelectedCards={setSelectedCards}\n                    selectedCards={selectedCards}\n                    key={\"FINISH\"}\n                    sortMode={sortMode}\n                    sortDirection={sortDirection}\n                    maxHeight={maxHeight}\n                    station_id={\"FINISH\"}\n                    setShowCardEditor={setShowCardEditor}\n                    showCardEditor={showCardEditor}\n                    stationName={\"Finished\"}\n                    processId={processId}\n                    cards={finished}\n                    onCardClick={handleCardClick}\n                />\n            }\n        </styled.Container>\n    )\n})\n\n// Specifies propTypes\nCardZone.propTypes = {\n    handleCardClick: PropTypes.func,\n    setShowCardEditor: PropTypes.func,\n    processId: PropTypes.string,\n    lotFilters: PropTypes.array,\n    lotFilterValue: PropTypes.any,\n    showCardEditor: PropTypes.bool,\n    maxHeight: PropTypes.any\n}\n\n// Specifies the default values for props:\nCardZone.defaultProps = {\n    handleCardClick: () => { },\n    processId: null,\n    setShowCardEditor: () => { },\n    showCardEditor: false,\n    maxHeight: null,\n    lotFilterValue: \"\",\n    selectedFilterOption: LOT_FILTER_OPTIONS.name,\n    lotFilters: [],\n    sortMode: LOT_FILTER_OPTIONS.name,\n    sortDirection: SORT_DIRECTIONS.ASCENDING,\n}\n\nexport default memo(CardZone)\n","// Import Store\nimport store from '../../redux/store/index'\nimport moment from 'moment';\n\nexport const getMinutesFromMoment = (m) => {\n    return m.minutes() + m.hours() * 60;\n}\n\n/**\n * Takes in time12h which is a string: 1:30 pm\n * Converts that string into a 24h string: 13:30\n * @param {*} time12h \n */\nexport const convert12hto24h = (time12h) => {\n    const [numericTime, modifier] = time12h.split(' ');\n\n    let [hours, minutes] = numericTime.split(':');\n\n    if (hours === '12' && (modifier === 'AM' || modifier === 'am')) {\n        hours = '00';\n    } else if (hours === '12' && (modifier === 'PM' || modifier === 'pm')) {\n        hours = '12';\n    }\n\n    if ((modifier === 'PM' || modifier === 'pm') && hours !== '12') {\n        hours = parseInt(hours, 10) + 12;\n    }\n    return `${hours}:${minutes}`\n}\n\n/**\n * Takes in a string time24h: 13:30\n * Converts that string into a 12h string: 1:30 pm\n * @param {*} time24h \n */\nexport const convert24hto12h = (time24h) => {\n    let modifier = 'am'\n\n    let [hours, minutes] = time24h.split(':');\n\n    hours = parseInt(hours)\n\n    if (hours >= 12) {\n        if (hours > 12) {\n            hours = hours - 12\n        }\n        modifier = 'pm'\n    }\n\n    if (minutes.length === 1) {\n        minutes = `0${minutes}`\n    }\n\n    return `${hours}:${minutes} ${modifier}`\n\n}\n\n/**\n * Takes in a string: 1 pm\n * Converts that string to 24 hours: 13:000\n * @param {*} string \n */\nexport const convertTimeStringto24h = (string) => {\n    let [hour, modifier] = string.split(' ');\n    hour = parseInt(hour)\n\n    // If pm and not 12pm then add 12\n    if (modifier === 'pm' && hour !== 12) {\n        hour = hour + 12\n    }\n\n    // If hour is 12pmm, then set to 0\n    if (hour === 12 && modifier === 'pm') {\n        hour = 0\n    }\n\n    // Convert back to string\n    // Add 0 to front if need be\n    if (hour < 10) {\n        hour = hour.toString()\n        hour = `0${hour}`\n    }\n    else {\n        hour = hour.toString()\n    }\n\n    return `${hour}:00`\n\n}\n\nexport const convertEpochTo12h = (epoch) => {\n\n    let convertedTime = new Date(epoch * 1000)\n    let hour = convertedTime.getHours()\n    let minute = convertedTime.getMinutes()\n\n    hour = parseInt(hour)\n    minute = parseInt(minute)\n\n    if (hour < 10) {\n        hour = hour.toString()\n        hour = `0${hour}`\n    }\n    else {\n        hour = hour.toString()\n    }\n\n    if (minute < 10) {\n        minute = minute.toString()\n        minute = `0${minute}`\n    }\n    else {\n        minute = minute.toString()\n    }\n\n    return `${hour}:${minute}`\n}\n\n/**\n * Converts 24h string to int\n * '13:00' is converted to 1300\n * @param {*} time24h \n */\nexport const convert24htoInt = (time24h) => {\n    const [hour, minute] = time24h.split(':')\n    return parseInt(`${hour}${minute}`)\n}\n\n/**\n * Converts into to 24h\n * 1300 is converted to '13:00'\n * @param {*} int \n */\nexport const convertIntto24h = (int) => {\n    let hour\n    let minute\n\n    // If the string length is 3, then the hour must start with a 0\n    if (int.toString().length === 3) {\n        hour = `0${int.toString()[0]}`\n        minute = `${int.toString()[1]}${int.toString()[2]}`\n    }\n    else {\n        hour = `${int.toString()[0]}${int.toString()[1]}`\n        minute = `${int.toString()[2]}${int.toString()[3]}`\n    }\n    return `${hour}:${minute}`\n}\n\n/**\n * Converts strings into time\n * time24h string format: 13:00\n * date string format: May 13, 1993\n * @param {*} time24h \n * @param {*} date \n */\nexport const convert24htoEpoch = (time24h, date) => {\n    const epochTime = Date.parse(`${date} ${time24h}`)\n\n    return epochTime\n}\n\nexport const convertDateToLocaleTimeZone = (date, timezone) => {\n    return new Date(date.toLocaleString(\"en-US\", { timeZone: timezone }))\n}\n\nexport const convertDateto12h = (date) => {\n    const settingState = store.getState().settingsReducer\n\n    if (!!settingState?.settings?.timezone?.label) {\n        date = convertDateToLocaleTimeZone(date, settingState?.settings?.timezone?.label)\n    }\n\n    return convert24hto12h(`${date.getHours()}:${date.getMinutes()}`)\n\n}\n\n\nexport const isDateToday = (date) => {\n    const today = new Date()\n    const incomingDate = new Date(date)\n    // call setHours to take the time out of the comparison\n    if (incomingDate.setHours(0, 0, 0, 0) === today.setHours(0, 0, 0, 0)) {\n        return true\n    }\n    else {\n        return false\n    }\n}\n\n// Takes shift details and returns total work time in seconds\nexport const convertShiftDetailsToWorkingTime = (shiftDetails) => {\n    let totalBreakTime = 0\n\n    Object.values(shiftDetails.breaks)\n        .sort((a, b) => a.startOfBreak - b.startOfBreak)\n        .forEach(br => {\n            if (br.enabled) {\n\n                const start = moment.duration(br.startOfBreak).asSeconds()\n                const end = moment.duration(br.endOfBreak).asSeconds()\n\n                const breakLength = end - start\n                totalBreakTime += breakLength\n\n            }\n        })\n\n\n    const startOfShift = moment.duration(shiftDetails.startOfShift).asSeconds()\n    const endOfShift = moment.duration(shiftDetails.endOfShift).asSeconds()\n\n    const workingTime = endOfShift - startOfShift - totalBreakTime\n    return workingTime\n\n}\n\n// Converts time string to \nexport const convertHHMMSSStringToSeconds = (timeStr) => {\n    let [hour, minute, second] = timeStr.split(':')\n\n    hour = parseInt(hour)\n    minute = parseInt(minute)\n    second = parseInt(second)\n\n    const totalSeconds = hour * 60 * 60 + minute * 60 + second\n    return totalSeconds\n}\n\n// Convert Seconds to HHMMSS\nexport const convertSecondsToHHMMSS = (seconds) => {\n    const date = new Date(seconds * 1000).toISOString().substr(11, 8)\n    return date\n}"],"sourceRoot":""}