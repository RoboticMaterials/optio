// Key Words to search for (Kalervo): joystick, joystick_transmit, joystick_transmit, ROSLIB

!(function (e, t) {
  "use strict";
  "object" == typeof module && "object" == typeof module.exports
    ? (module.exports = e.document
        ? t(e, !0)
        : function (e) {
            if (!e.document)
              throw new Error("jQuery requires a window with a document");
            return t(e);
          })
    : t(e);
})("undefined" != typeof window ? window : this, function (C, e) {
  "use strict";
  var t = [],
    E = C.document,
    r = Object.getPrototypeOf,
    s = t.slice,
    g = t.concat,
    u = t.push,
    i = t.indexOf,
    n = {},
    o = n.toString,
    h = n.hasOwnProperty,
    a = h.toString,
    l = a.call(Object),
    m = {};
  function v(e, t) {
    var n = (t = t || E).createElement("script");
    (n.text = e), t.head.appendChild(n).parentNode.removeChild(n);
  }
  function c(e, t) {
    return t.toUpperCase();
  }
  var f = "3.1.1",
    k = function (e, t) {
      return new k.fn.init(e, t);
    },
    p = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    d = /^-ms-/,
    y = /-([a-z])/g;
  function x(e) {
    var t = !!e && "length" in e && e.length,
      n = k.type(e);
    return (
      "function" !== n &&
      !k.isWindow(e) &&
      ("array" === n ||
        0 === t ||
        ("number" == typeof t && 0 < t && t - 1 in e))
    );
  }
  (k.fn = k.prototype = {
    jquery: f,
    constructor: k,
    length: 0,
    toArray: function () {
      return s.call(this);
    },
    get: function (e) {
      return null == e ? s.call(this) : e < 0 ? this[e + this.length] : this[e];
    },
    pushStack: function (e) {
      var t = k.merge(this.constructor(), e);
      return (t.prevObject = this), t;
    },
    each: function (e) {
      return k.each(this, e);
    },
    map: function (n) {
      return this.pushStack(
        k.map(this, function (e, t) {
          return n.call(e, t, e);
        })
      );
    },
    slice: function () {
      return this.pushStack(s.apply(this, arguments));
    },
    first: function () {
      return this.eq(0);
    },
    last: function () {
      return this.eq(-1);
    },
    eq: function (e) {
      var t = this.length,
        n = +e + (e < 0 ? t : 0);
      return this.pushStack(0 <= n && n < t ? [this[n]] : []);
    },
    end: function () {
      return this.prevObject || this.constructor();
    },
    push: u,
    sort: t.sort,
    splice: t.splice,
  }),
    (k.extend = k.fn.extend = function () {
      var e,
        t,
        n,
        r,
        i,
        o,
        a = arguments[0] || {},
        s = 1,
        u = arguments.length,
        l = !1;
      for (
        "boolean" == typeof a && ((l = a), (a = arguments[s] || {}), s++),
          "object" == typeof a || k.isFunction(a) || (a = {}),
          s === u && ((a = this), s--);
        s < u;
        s++
      )
        if (null != (e = arguments[s]))
          for (t in e)
            (n = a[t]),
              a !== (r = e[t]) &&
                (l && r && (k.isPlainObject(r) || (i = k.isArray(r)))
                  ? ((o = i
                      ? ((i = !1), n && k.isArray(n) ? n : [])
                      : n && k.isPlainObject(n)
                      ? n
                      : {}),
                    (a[t] = k.extend(l, o, r)))
                  : void 0 !== r && (a[t] = r));
      return a;
    }),
    k.extend({
      expando: "jQuery" + (f + Math.random()).replace(/\D/g, ""),
      isReady: !0,
      error: function (e) {
        throw new Error(e);
      },
      noop: function () {},
      isFunction: function (e) {
        return "function" === k.type(e);
      },
      isArray: Array.isArray,
      isWindow: function (e) {
        return null != e && e === e.window;
      },
      isNumeric: function (e) {
        var t = k.type(e);
        return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e));
      },
      isPlainObject: function (e) {
        var t, n;
        return !(
          !e ||
          "[object Object]" !== o.call(e) ||
          ((t = r(e)) &&
            ("function" !=
              typeof (n = h.call(t, "constructor") && t.constructor) ||
              a.call(n) !== l))
        );
      },
      isEmptyObject: function (e) {
        var t;
        for (t in e) return !1;
        return !0;
      },
      type: function (e) {
        return null == e
          ? e + ""
          : "object" == typeof e || "function" == typeof e
          ? n[o.call(e)] || "object"
          : typeof e;
      },
      globalEval: function (e) {
        v(e);
      },
      camelCase: function (e) {
        return e.replace(d, "ms-").replace(y, c);
      },
      nodeName: function (e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
      },
      each: function (e, t) {
        var n,
          r = 0;
        if (x(e))
          for (n = e.length; r < n && !1 !== t.call(e[r], r, e[r]); r++);
        else for (r in e) if (!1 === t.call(e[r], r, e[r])) break;
        return e;
      },
      trim: function (e) {
        return null == e ? "" : (e + "").replace(p, "");
      },
      makeArray: function (e, t) {
        var n = t || [];
        return (
          null != e &&
            (x(Object(e))
              ? k.merge(n, "string" == typeof e ? [e] : e)
              : u.call(n, e)),
          n
        );
      },
      inArray: function (e, t, n) {
        return null == t ? -1 : i.call(t, e, n);
      },
      merge: function (e, t) {
        for (var n = +t.length, r = 0, i = e.length; r < n; r++) e[i++] = t[r];
        return (e.length = i), e;
      },
      grep: function (e, t, n) {
        for (var r = [], i = 0, o = e.length, a = !n; i < o; i++)
          !t(e[i], i) != a && r.push(e[i]);
        return r;
      },
      map: function (e, t, n) {
        var r,
          i,
          o = 0,
          a = [];
        if (x(e))
          for (r = e.length; o < r; o++)
            null != (i = t(e[o], o, n)) && a.push(i);
        else for (o in e) null != (i = t(e[o], o, n)) && a.push(i);
        return g.apply([], a);
      },
      guid: 1,
      proxy: function (e, t) {
        var n, r, i;
        if (
          ("string" == typeof t && ((n = e[t]), (t = e), (e = n)),
          k.isFunction(e))
        )
          return (
            (r = s.call(arguments, 2)),
            ((i = function () {
              return e.apply(t || this, r.concat(s.call(arguments)));
            }).guid = e.guid = e.guid || k.guid++),
            i
          );
      },
      now: Date.now,
      support: m,
    }),
    "function" == typeof Symbol && (k.fn[Symbol.iterator] = t[Symbol.iterator]),
    k.each(
      "Boolean Number String Function Array Date RegExp Object Error Symbol".split(
        " "
      ),
      function (e, t) {
        n["[object " + t + "]"] = t.toLowerCase();
      }
    );
  var b = (function (n) {
    function f(e, t, n) {
      var r = "0x" + t - 65536;
      return r != r || n
        ? t
        : r < 0
        ? String.fromCharCode(65536 + r)
        : String.fromCharCode((r >> 10) | 55296, (1023 & r) | 56320);
    }
    function i() {
      T();
    }
    var e,
      d,
      b,
      o,
      a,
      h,
      p,
      g,
      w,
      u,
      l,
      T,
      C,
      s,
      E,
      m,
      c,
      v,
      y,
      k = "sizzle" + 1 * new Date(),
      x = n.document,
      N = 0,
      r = 0,
      S = ae(),
      D = ae(),
      j = ae(),
      A = function (e, t) {
        return e === t && (l = !0), 0;
      },
      q = {}.hasOwnProperty,
      t = [],
      L = t.pop,
      H = t.push,
      F = t.push,
      O = t.slice,
      P = function (e, t) {
        for (var n = 0, r = e.length; n < r; n++) if (e[n] === t) return n;
        return -1;
      },
      R =
        "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
      M = "[\\x20\\t\\r\\n\\f]",
      I = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",
      W =
        "\\[" +
        M +
        "*(" +
        I +
        ")(?:" +
        M +
        "*([*^$|!~]?=)" +
        M +
        "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" +
        I +
        "))|)" +
        M +
        "*\\]",
      $ =
        ":(" +
        I +
        ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" +
        W +
        ")*)|.*)\\)|)",
      B = new RegExp(M + "+", "g"),
      _ = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"),
      z = new RegExp("^" + M + "*," + M + "*"),
      X = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"),
      U = new RegExp("=" + M + "*([^\\]'\"]*?)" + M + "*\\]", "g"),
      V = new RegExp($),
      G = new RegExp("^" + I + "$"),
      Y = {
        ID: new RegExp("^#(" + I + ")"),
        CLASS: new RegExp("^\\.(" + I + ")"),
        TAG: new RegExp("^(" + I + "|[*])"),
        ATTR: new RegExp("^" + W),
        PSEUDO: new RegExp("^" + $),
        CHILD: new RegExp(
          "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
            M +
            "*(even|odd|(([+-]|)(\\d*)n|)" +
            M +
            "*(?:([+-]|)" +
            M +
            "*(\\d+)|))" +
            M +
            "*\\)|)",
          "i"
        ),
        bool: new RegExp("^(?:" + R + ")$", "i"),
        needsContext: new RegExp(
          "^" +
            M +
            "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
            M +
            "*((?:-\\d)?\\d*)" +
            M +
            "*\\)|)(?=[^-]|$)",
          "i"
        ),
      },
      Q = /^(?:input|select|textarea|button)$/i,
      J = /^h\d$/i,
      K = /^[^{]+\{\s*\[native \w/,
      Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
      ee = /[+~]/,
      te = new RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"),
      ne = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
      re = function (e, t) {
        return t
          ? "\0" === e
            ? "�"
            : e.slice(0, -1) +
              "\\" +
              e.charCodeAt(e.length - 1).toString(16) +
              " "
          : "\\" + e;
      },
      ie = ye(
        function (e) {
          return !0 === e.disabled && ("form" in e || "label" in e);
        },
        {
          dir: "parentNode",
          next: "legend",
        }
      );
    try {
      F.apply((t = O.call(x.childNodes)), x.childNodes),
        t[x.childNodes.length].nodeType;
    } catch (e) {
      F = {
        apply: t.length
          ? function (e, t) {
              H.apply(e, O.call(t));
            }
          : function (e, t) {
              for (var n = e.length, r = 0; (e[n++] = t[r++]); );
              e.length = n - 1;
            },
      };
    }
    function oe(e, t, n, r) {
      var i,
        o,
        a,
        s,
        u,
        l,
        c,
        f = t && t.ownerDocument,
        p = t ? t.nodeType : 9;
      if (
        ((n = n || []),
        "string" != typeof e || !e || (1 !== p && 9 !== p && 11 !== p))
      )
        return n;
      if (
        !r &&
        ((t ? t.ownerDocument || t : x) !== C && T(t), (t = t || C), E)
      ) {
        if (11 !== p && (u = Z.exec(e)))
          if ((i = u[1])) {
            if (9 === p) {
              if (!(a = t.getElementById(i))) return n;
              if (a.id === i) return n.push(a), n;
            } else if (f && (a = f.getElementById(i)) && y(t, a) && a.id === i)
              return n.push(a), n;
          } else {
            if (u[2]) return F.apply(n, t.getElementsByTagName(e)), n;
            if (
              (i = u[3]) &&
              d.getElementsByClassName &&
              t.getElementsByClassName
            )
              return F.apply(n, t.getElementsByClassName(i)), n;
          }
        if (d.qsa && !j[e + " "] && (!m || !m.test(e))) {
          if (1 !== p) (f = t), (c = e);
          else if ("object" !== t.nodeName.toLowerCase()) {
            for (
              (s = t.getAttribute("id"))
                ? (s = s.replace(ne, re))
                : t.setAttribute("id", (s = k)),
                o = (l = h(e)).length;
              o--;

            )
              l[o] = "#" + s + " " + ve(l[o]);
            (c = l.join(",")), (f = (ee.test(e) && ge(t.parentNode)) || t);
          }
          if (c)
            try {
              return F.apply(n, f.querySelectorAll(c)), n;
            } catch (e) {
            } finally {
              s === k && t.removeAttribute("id");
            }
        }
      }
      return g(e.replace(_, "$1"), t, n, r);
    }
    function ae() {
      var r = [];
      return function e(t, n) {
        return (
          r.push(t + " ") > b.cacheLength && delete e[r.shift()],
          (e[t + " "] = n)
        );
      };
    }
    function se(e) {
      return (e[k] = !0), e;
    }
    function ue(e) {
      var t = C.createElement("fieldset");
      try {
        return !!e(t);
      } catch (e) {
        return !1;
      } finally {
        t.parentNode && t.parentNode.removeChild(t), (t = null);
      }
    }
    function le(e, t) {
      for (var n = e.split("|"), r = n.length; r--; ) b.attrHandle[n[r]] = t;
    }
    function ce(e, t) {
      var n = t && e,
        r =
          n &&
          1 === e.nodeType &&
          1 === t.nodeType &&
          e.sourceIndex - t.sourceIndex;
      if (r) return r;
      if (n) for (; (n = n.nextSibling); ) if (n === t) return -1;
      return e ? 1 : -1;
    }
    function fe(t) {
      return function (e) {
        return "input" === e.nodeName.toLowerCase() && e.type === t;
      };
    }
    function pe(n) {
      return function (e) {
        var t = e.nodeName.toLowerCase();
        return ("input" === t || "button" === t) && e.type === n;
      };
    }
    function de(t) {
      return function (e) {
        return "form" in e
          ? e.parentNode && !1 === e.disabled
            ? "label" in e
              ? "label" in e.parentNode
                ? e.parentNode.disabled === t
                : e.disabled === t
              : e.isDisabled === t || (e.isDisabled !== !t && ie(e) === t)
            : e.disabled === t
          : "label" in e && e.disabled === t;
      };
    }
    function he(a) {
      return se(function (o) {
        return (
          (o = +o),
          se(function (e, t) {
            for (var n, r = a([], e.length, o), i = r.length; i--; )
              e[(n = r[i])] && (e[n] = !(t[n] = e[n]));
          })
        );
      });
    }
    function ge(e) {
      return e && void 0 !== e.getElementsByTagName && e;
    }
    for (e in ((d = oe.support = {}),
    (a = oe.isXML = function (e) {
      var t = e && (e.ownerDocument || e).documentElement;
      return !!t && "HTML" !== t.nodeName;
    }),
    (T = oe.setDocument = function (e) {
      var t,
        n,
        r = e ? e.ownerDocument || e : x;
      return (
        r !== C &&
          9 === r.nodeType &&
          r.documentElement &&
          ((s = (C = r).documentElement),
          (E = !a(C)),
          x !== C &&
            (n = C.defaultView) &&
            n.top !== n &&
            (n.addEventListener
              ? n.addEventListener("unload", i, !1)
              : n.attachEvent && n.attachEvent("onunload", i)),
          (d.attributes = ue(function (e) {
            return (e.className = "i"), !e.getAttribute("className");
          })),
          (d.getElementsByTagName = ue(function (e) {
            return (
              e.appendChild(C.createComment("")),
              !e.getElementsByTagName("*").length
            );
          })),
          (d.getElementsByClassName = K.test(C.getElementsByClassName)),
          (d.getById = ue(function (e) {
            return (
              (s.appendChild(e).id = k),
              !C.getElementsByName || !C.getElementsByName(k).length
            );
          })),
          d.getById
            ? ((b.filter.ID = function (e) {
                var t = e.replace(te, f);
                return function (e) {
                  return e.getAttribute("id") === t;
                };
              }),
              (b.find.ID = function (e, t) {
                if (void 0 !== t.getElementById && E) {
                  var n = t.getElementById(e);
                  return n ? [n] : [];
                }
              }))
            : ((b.filter.ID = function (e) {
                var n = e.replace(te, f);
                return function (e) {
                  var t =
                    void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                  return t && t.value === n;
                };
              }),
              (b.find.ID = function (e, t) {
                if (void 0 !== t.getElementById && E) {
                  var n,
                    r,
                    i,
                    o = t.getElementById(e);
                  if (o) {
                    if ((n = o.getAttributeNode("id")) && n.value === e)
                      return [o];
                    for (i = t.getElementsByName(e), r = 0; (o = i[r++]); )
                      if ((n = o.getAttributeNode("id")) && n.value === e)
                        return [o];
                  }
                  return [];
                }
              })),
          (b.find.TAG = d.getElementsByTagName
            ? function (e, t) {
                return void 0 !== t.getElementsByTagName
                  ? t.getElementsByTagName(e)
                  : d.qsa
                  ? t.querySelectorAll(e)
                  : void 0;
              }
            : function (e, t) {
                var n,
                  r = [],
                  i = 0,
                  o = t.getElementsByTagName(e);
                if ("*" !== e) return o;
                for (; (n = o[i++]); ) 1 === n.nodeType && r.push(n);
                return r;
              }),
          (b.find.CLASS =
            d.getElementsByClassName &&
            function (e, t) {
              if (void 0 !== t.getElementsByClassName && E)
                return t.getElementsByClassName(e);
            }),
          (c = []),
          (m = []),
          (d.qsa = K.test(C.querySelectorAll)) &&
            (ue(function (e) {
              (s.appendChild(e).innerHTML =
                "<a id='" +
                k +
                "'></a><select id='" +
                k +
                "-\r\\' msallowcapture=''><option selected=''></option></select>"),
                e.querySelectorAll("[msallowcapture^='']").length &&
                  m.push("[*^$]=" + M + "*(?:''|\"\")"),
                e.querySelectorAll("[selected]").length ||
                  m.push("\\[" + M + "*(?:value|" + R + ")"),
                e.querySelectorAll("[id~=" + k + "-]").length || m.push("~="),
                e.querySelectorAll(":checked").length || m.push(":checked"),
                e.querySelectorAll("a#" + k + "+*").length ||
                  m.push(".#.+[+~]");
            }),
            ue(function (e) {
              e.innerHTML =
                "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
              var t = C.createElement("input");
              t.setAttribute("type", "hidden"),
                e.appendChild(t).setAttribute("name", "D"),
                e.querySelectorAll("[name=d]").length &&
                  m.push("name" + M + "*[*^$|!~]?="),
                2 !== e.querySelectorAll(":enabled").length &&
                  m.push(":enabled", ":disabled"),
                (s.appendChild(e).disabled = !0),
                2 !== e.querySelectorAll(":disabled").length &&
                  m.push(":enabled", ":disabled"),
                e.querySelectorAll("*,:x"),
                m.push(",.*:");
            })),
          (d.matchesSelector = K.test(
            (v =
              s.matches ||
              s.webkitMatchesSelector ||
              s.mozMatchesSelector ||
              s.oMatchesSelector ||
              s.msMatchesSelector)
          )) &&
            ue(function (e) {
              (d.disconnectedMatch = v.call(e, "*")),
                v.call(e, "[s!='']:x"),
                c.push("!=", $);
            }),
          (m = m.length && new RegExp(m.join("|"))),
          (c = c.length && new RegExp(c.join("|"))),
          (t = K.test(s.compareDocumentPosition)),
          (y =
            t || K.test(s.contains)
              ? function (e, t) {
                  var n = 9 === e.nodeType ? e.documentElement : e,
                    r = t && t.parentNode;
                  return (
                    e === r ||
                    !(
                      !r ||
                      1 !== r.nodeType ||
                      !(n.contains
                        ? n.contains(r)
                        : e.compareDocumentPosition &&
                          16 & e.compareDocumentPosition(r))
                    )
                  );
                }
              : function (e, t) {
                  if (t) for (; (t = t.parentNode); ) if (t === e) return !0;
                  return !1;
                }),
          (A = t
            ? function (e, t) {
                if (e === t) return (l = !0), 0;
                var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return (
                  n ||
                  (1 &
                    (n =
                      (e.ownerDocument || e) === (t.ownerDocument || t)
                        ? e.compareDocumentPosition(t)
                        : 1) ||
                  (!d.sortDetached && t.compareDocumentPosition(e) === n)
                    ? e === C || (e.ownerDocument === x && y(x, e))
                      ? -1
                      : t === C || (t.ownerDocument === x && y(x, t))
                      ? 1
                      : u
                      ? P(u, e) - P(u, t)
                      : 0
                    : 4 & n
                    ? -1
                    : 1)
                );
              }
            : function (e, t) {
                if (e === t) return (l = !0), 0;
                var n,
                  r = 0,
                  i = e.parentNode,
                  o = t.parentNode,
                  a = [e],
                  s = [t];
                if (!i || !o)
                  return e === C
                    ? -1
                    : t === C
                    ? 1
                    : i
                    ? -1
                    : o
                    ? 1
                    : u
                    ? P(u, e) - P(u, t)
                    : 0;
                if (i === o) return ce(e, t);
                for (n = e; (n = n.parentNode); ) a.unshift(n);
                for (n = t; (n = n.parentNode); ) s.unshift(n);
                for (; a[r] === s[r]; ) r++;
                return r
                  ? ce(a[r], s[r])
                  : a[r] === x
                  ? -1
                  : s[r] === x
                  ? 1
                  : 0;
              })),
        C
      );
    }),
    (oe.matches = function (e, t) {
      return oe(e, null, null, t);
    }),
    (oe.matchesSelector = function (e, t) {
      if (
        ((e.ownerDocument || e) !== C && T(e),
        (t = t.replace(U, "='$1']")),
        d.matchesSelector &&
          E &&
          !j[t + " "] &&
          (!c || !c.test(t)) &&
          (!m || !m.test(t)))
      )
        try {
          var n = v.call(e, t);
          if (
            n ||
            d.disconnectedMatch ||
            (e.document && 11 !== e.document.nodeType)
          )
            return n;
        } catch (e) {}
      return 0 < oe(t, C, null, [e]).length;
    }),
    (oe.contains = function (e, t) {
      return (e.ownerDocument || e) !== C && T(e), y(e, t);
    }),
    (oe.attr = function (e, t) {
      (e.ownerDocument || e) !== C && T(e);
      var n = b.attrHandle[t.toLowerCase()],
        r = n && q.call(b.attrHandle, t.toLowerCase()) ? n(e, t, !E) : void 0;
      return void 0 !== r
        ? r
        : d.attributes || !E
        ? e.getAttribute(t)
        : (r = e.getAttributeNode(t)) && r.specified
        ? r.value
        : null;
    }),
    (oe.escape = function (e) {
      return (e + "").replace(ne, re);
    }),
    (oe.error = function (e) {
      throw new Error("Syntax error, unrecognized expression: " + e);
    }),
    (oe.uniqueSort = function (e) {
      var t,
        n = [],
        r = 0,
        i = 0;
      if (
        ((l = !d.detectDuplicates),
        (u = !d.sortStable && e.slice(0)),
        e.sort(A),
        l)
      ) {
        for (; (t = e[i++]); ) t === e[i] && (r = n.push(i));
        for (; r--; ) e.splice(n[r], 1);
      }
      return (u = null), e;
    }),
    (o = oe.getText = function (e) {
      var t,
        n = "",
        r = 0,
        i = e.nodeType;
      if (i) {
        if (1 === i || 9 === i || 11 === i) {
          if ("string" == typeof e.textContent) return e.textContent;
          for (e = e.firstChild; e; e = e.nextSibling) n += o(e);
        } else if (3 === i || 4 === i) return e.nodeValue;
      } else for (; (t = e[r++]); ) n += o(t);
      return n;
    }),
    ((b = oe.selectors = {
      cacheLength: 50,
      createPseudo: se,
      match: Y,
      attrHandle: {},
      find: {},
      relative: {
        ">": {
          dir: "parentNode",
          first: !0,
        },
        " ": {
          dir: "parentNode",
        },
        "+": {
          dir: "previousSibling",
          first: !0,
        },
        "~": {
          dir: "previousSibling",
        },
      },
      preFilter: {
        ATTR: function (e) {
          return (
            (e[1] = e[1].replace(te, f)),
            (e[3] = (e[3] || e[4] || e[5] || "").replace(te, f)),
            "~=" === e[2] && (e[3] = " " + e[3] + " "),
            e.slice(0, 4)
          );
        },
        CHILD: function (e) {
          return (
            (e[1] = e[1].toLowerCase()),
            "nth" === e[1].slice(0, 3)
              ? (e[3] || oe.error(e[0]),
                (e[4] = +(e[4]
                  ? e[5] + (e[6] || 1)
                  : 2 * ("even" === e[3] || "odd" === e[3]))),
                (e[5] = +(e[7] + e[8] || "odd" === e[3])))
              : e[3] && oe.error(e[0]),
            e
          );
        },
        PSEUDO: function (e) {
          var t,
            n = !e[6] && e[2];
          return Y.CHILD.test(e[0])
            ? null
            : (e[3]
                ? (e[2] = e[4] || e[5] || "")
                : n &&
                  V.test(n) &&
                  (t = h(n, !0)) &&
                  (t = n.indexOf(")", n.length - t) - n.length) &&
                  ((e[0] = e[0].slice(0, t)), (e[2] = n.slice(0, t))),
              e.slice(0, 3));
        },
      },
      filter: {
        TAG: function (e) {
          var t = e.replace(te, f).toLowerCase();
          return "*" === e
            ? function () {
                return !0;
              }
            : function (e) {
                return e.nodeName && e.nodeName.toLowerCase() === t;
              };
        },
        CLASS: function (e) {
          var t = S[e + " "];
          return (
            t ||
            ((t = new RegExp("(^|" + M + ")" + e + "(" + M + "|$)")) &&
              S(e, function (e) {
                return t.test(
                  ("string" == typeof e.className && e.className) ||
                    (void 0 !== e.getAttribute && e.getAttribute("class")) ||
                    ""
                );
              }))
          );
        },
        ATTR: function (n, r, i) {
          return function (e) {
            var t = oe.attr(e, n);
            return null == t
              ? "!=" === r
              : !r ||
                  ((t += ""),
                  "=" === r
                    ? t === i
                    : "!=" === r
                    ? t !== i
                    : "^=" === r
                    ? i && 0 === t.indexOf(i)
                    : "*=" === r
                    ? i && -1 < t.indexOf(i)
                    : "$=" === r
                    ? i && t.slice(-i.length) === i
                    : "~=" === r
                    ? -1 < (" " + t.replace(B, " ") + " ").indexOf(i)
                    : "|=" === r &&
                      (t === i || t.slice(0, i.length + 1) === i + "-"));
          };
        },
        CHILD: function (h, e, t, g, m) {
          var v = "nth" !== h.slice(0, 3),
            y = "last" !== h.slice(-4),
            x = "of-type" === e;
          return 1 === g && 0 === m
            ? function (e) {
                return !!e.parentNode;
              }
            : function (e, t, n) {
                var r,
                  i,
                  o,
                  a,
                  s,
                  u,
                  l = v != y ? "nextSibling" : "previousSibling",
                  c = e.parentNode,
                  f = x && e.nodeName.toLowerCase(),
                  p = !n && !x,
                  d = !1;
                if (c) {
                  if (v) {
                    for (; l; ) {
                      for (a = e; (a = a[l]); )
                        if (
                          x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType
                        )
                          return !1;
                      u = l = "only" === h && !u && "nextSibling";
                    }
                    return !0;
                  }
                  if (((u = [y ? c.firstChild : c.lastChild]), y && p)) {
                    for (
                      d =
                        (s =
                          (r =
                            (i =
                              (o = (a = c)[k] || (a[k] = {}))[a.uniqueID] ||
                              (o[a.uniqueID] = {}))[h] || [])[0] === N &&
                          r[1]) && r[2],
                        a = s && c.childNodes[s];
                      (a = (++s && a && a[l]) || (d = s = 0) || u.pop());

                    )
                      if (1 === a.nodeType && ++d && a === e) {
                        i[h] = [N, s, d];
                        break;
                      }
                  } else if (
                    (p &&
                      (d = s =
                        (r =
                          (i =
                            (o = (a = e)[k] || (a[k] = {}))[a.uniqueID] ||
                            (o[a.uniqueID] = {}))[h] || [])[0] === N && r[1]),
                    !1 === d)
                  )
                    for (
                      ;
                      (a = (++s && a && a[l]) || (d = s = 0) || u.pop()) &&
                      ((x
                        ? a.nodeName.toLowerCase() !== f
                        : 1 !== a.nodeType) ||
                        !++d ||
                        (p &&
                          ((i =
                            (o = a[k] || (a[k] = {}))[a.uniqueID] ||
                            (o[a.uniqueID] = {}))[h] = [N, d]),
                        a !== e));

                    );
                  return (d -= m) === g || (d % g == 0 && 0 <= d / g);
                }
              };
        },
        PSEUDO: function (e, o) {
          var t,
            a =
              b.pseudos[e] ||
              b.setFilters[e.toLowerCase()] ||
              oe.error("unsupported pseudo: " + e);
          return a[k]
            ? a(o)
            : 1 < a.length
            ? ((t = [e, e, "", o]),
              b.setFilters.hasOwnProperty(e.toLowerCase())
                ? se(function (e, t) {
                    for (var n, r = a(e, o), i = r.length; i--; )
                      e[(n = P(e, r[i]))] = !(t[n] = r[i]);
                  })
                : function (e) {
                    return a(e, 0, t);
                  })
            : a;
        },
      },
      pseudos: {
        not: se(function (e) {
          var r = [],
            i = [],
            s = p(e.replace(_, "$1"));
          return s[k]
            ? se(function (e, t, n, r) {
                for (var i, o = s(e, null, r, []), a = e.length; a--; )
                  (i = o[a]) && (e[a] = !(t[a] = i));
              })
            : function (e, t, n) {
                return (r[0] = e), s(r, null, n, i), (r[0] = null), !i.pop();
              };
        }),
        has: se(function (t) {
          return function (e) {
            return 0 < oe(t, e).length;
          };
        }),
        contains: se(function (t) {
          return (
            (t = t.replace(te, f)),
            function (e) {
              return -1 < (e.textContent || e.innerText || o(e)).indexOf(t);
            }
          );
        }),
        lang: se(function (n) {
          return (
            G.test(n || "") || oe.error("unsupported lang: " + n),
            (n = n.replace(te, f).toLowerCase()),
            function (e) {
              var t;
              do {
                if (
                  (t = E
                    ? e.lang
                    : e.getAttribute("xml:lang") || e.getAttribute("lang"))
                )
                  return (
                    (t = t.toLowerCase()) === n || 0 === t.indexOf(n + "-")
                  );
              } while ((e = e.parentNode) && 1 === e.nodeType);
              return !1;
            }
          );
        }),
        target: function (e) {
          var t = n.location && n.location.hash;
          return t && t.slice(1) === e.id;
        },
        root: function (e) {
          return e === s;
        },
        focus: function (e) {
          return (
            e === C.activeElement &&
            (!C.hasFocus || C.hasFocus()) &&
            !!(e.type || e.href || ~e.tabIndex)
          );
        },
        enabled: de(!1),
        disabled: de(!0),
        checked: function (e) {
          var t = e.nodeName.toLowerCase();
          return (
            ("input" === t && !!e.checked) || ("option" === t && !!e.selected)
          );
        },
        selected: function (e) {
          return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected;
        },
        empty: function (e) {
          for (e = e.firstChild; e; e = e.nextSibling)
            if (e.nodeType < 6) return !1;
          return !0;
        },
        parent: function (e) {
          return !b.pseudos.empty(e);
        },
        header: function (e) {
          return J.test(e.nodeName);
        },
        input: function (e) {
          return Q.test(e.nodeName);
        },
        button: function (e) {
          var t = e.nodeName.toLowerCase();
          return ("input" === t && "button" === e.type) || "button" === t;
        },
        text: function (e) {
          var t;
          return (
            "input" === e.nodeName.toLowerCase() &&
            "text" === e.type &&
            (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
          );
        },
        first: he(function () {
          return [0];
        }),
        last: he(function (e, t) {
          return [t - 1];
        }),
        eq: he(function (e, t, n) {
          return [n < 0 ? n + t : n];
        }),
        even: he(function (e, t) {
          for (var n = 0; n < t; n += 2) e.push(n);
          return e;
        }),
        odd: he(function (e, t) {
          for (var n = 1; n < t; n += 2) e.push(n);
          return e;
        }),
        lt: he(function (e, t, n) {
          for (var r = n < 0 ? n + t : n; 0 <= --r; ) e.push(r);
          return e;
        }),
        gt: he(function (e, t, n) {
          for (var r = n < 0 ? n + t : n; ++r < t; ) e.push(r);
          return e;
        }),
      },
    }).pseudos.nth = b.pseudos.eq),
    {
      radio: !0,
      checkbox: !0,
      file: !0,
      password: !0,
      image: !0,
    }))
      b.pseudos[e] = fe(e);
    for (e in {
      submit: !0,
      reset: !0,
    })
      b.pseudos[e] = pe(e);
    function me() {}
    function ve(e) {
      for (var t = 0, n = e.length, r = ""; t < n; t++) r += e[t].value;
      return r;
    }
    function ye(s, e, t) {
      var u = e.dir,
        l = e.next,
        c = l || u,
        f = t && "parentNode" === c,
        p = r++;
      return e.first
        ? function (e, t, n) {
            for (; (e = e[u]); ) if (1 === e.nodeType || f) return s(e, t, n);
            return !1;
          }
        : function (e, t, n) {
            var r,
              i,
              o,
              a = [N, p];
            if (n) {
              for (; (e = e[u]); )
                if ((1 === e.nodeType || f) && s(e, t, n)) return !0;
            } else
              for (; (e = e[u]); )
                if (1 === e.nodeType || f)
                  if (
                    ((i =
                      (o = e[k] || (e[k] = {}))[e.uniqueID] ||
                      (o[e.uniqueID] = {})),
                    l && l === e.nodeName.toLowerCase())
                  )
                    e = e[u] || e;
                  else {
                    if ((r = i[c]) && r[0] === N && r[1] === p)
                      return (a[2] = r[2]);
                    if (((i[c] = a)[2] = s(e, t, n))) return !0;
                  }
            return !1;
          };
    }
    function xe(i) {
      return 1 < i.length
        ? function (e, t, n) {
            for (var r = i.length; r--; ) if (!i[r](e, t, n)) return !1;
            return !0;
          }
        : i[0];
    }
    function be(e, t, n, r, i) {
      for (var o, a = [], s = 0, u = e.length, l = null != t; s < u; s++)
        (o = e[s]) && ((n && !n(o, r, i)) || (a.push(o), l && t.push(s)));
      return a;
    }
    function we(d, h, g, m, v, e) {
      return (
        m && !m[k] && (m = we(m)),
        v && !v[k] && (v = we(v, e)),
        se(function (e, t, n, r) {
          var i,
            o,
            a,
            s = [],
            u = [],
            l = t.length,
            c =
              e ||
              (function (e, t, n) {
                for (var r = 0, i = t.length; r < i; r++) oe(e, t[r], n);
                return n;
              })(h || "*", n.nodeType ? [n] : n, []),
            f = !d || (!e && h) ? c : be(c, s, d, n, r),
            p = g ? (v || (e ? d : l || m) ? [] : t) : f;
          if ((g && g(f, p, n, r), m))
            for (i = be(p, u), m(i, [], n, r), o = i.length; o--; )
              (a = i[o]) && (p[u[o]] = !(f[u[o]] = a));
          if (e) {
            if (v || d) {
              if (v) {
                for (i = [], o = p.length; o--; )
                  (a = p[o]) && i.push((f[o] = a));
                v(null, (p = []), i, r);
              }
              for (o = p.length; o--; )
                (a = p[o]) &&
                  -1 < (i = v ? P(e, a) : s[o]) &&
                  (e[i] = !(t[i] = a));
            }
          } else (p = be(p === t ? p.splice(l, p.length) : p)), v ? v(null, t, p, r) : F.apply(t, p);
        })
      );
    }
    function Te(e) {
      for (
        var i,
          t,
          n,
          r = e.length,
          o = b.relative[e[0].type],
          a = o || b.relative[" "],
          s = o ? 1 : 0,
          u = ye(
            function (e) {
              return e === i;
            },
            a,
            !0
          ),
          l = ye(
            function (e) {
              return -1 < P(i, e);
            },
            a,
            !0
          ),
          c = [
            function (e, t, n) {
              var r =
                (!o && (n || t !== w)) ||
                ((i = t).nodeType ? u(e, t, n) : l(e, t, n));
              return (i = null), r;
            },
          ];
        s < r;
        s++
      )
        if ((t = b.relative[e[s].type])) c = [ye(xe(c), t)];
        else {
          if ((t = b.filter[e[s].type].apply(null, e[s].matches))[k]) {
            for (n = ++s; n < r && !b.relative[e[n].type]; n++);
            return we(
              1 < s && xe(c),
              1 < s &&
                ve(
                  e.slice(0, s - 1).concat({
                    value: " " === e[s - 2].type ? "*" : "",
                  })
                ).replace(_, "$1"),
              t,
              s < n && Te(e.slice(s, n)),
              n < r && Te((e = e.slice(n))),
              n < r && ve(e)
            );
          }
          c.push(t);
        }
      return xe(c);
    }
    return (
      (me.prototype = b.filters = b.pseudos),
      (b.setFilters = new me()),
      (h = oe.tokenize = function (e, t) {
        var n,
          r,
          i,
          o,
          a,
          s,
          u,
          l = D[e + " "];
        if (l) return t ? 0 : l.slice(0);
        for (a = e, s = [], u = b.preFilter; a; ) {
          for (o in ((n && !(r = z.exec(a))) ||
            (r && (a = a.slice(r[0].length) || a), s.push((i = []))),
          (n = !1),
          (r = X.exec(a)) &&
            ((n = r.shift()),
            i.push({
              value: n,
              type: r[0].replace(_, " "),
            }),
            (a = a.slice(n.length))),
          b.filter))
            !(r = Y[o].exec(a)) ||
              (u[o] && !(r = u[o](r))) ||
              ((n = r.shift()),
              i.push({
                value: n,
                type: o,
                matches: r,
              }),
              (a = a.slice(n.length)));
          if (!n) break;
        }
        return t ? a.length : a ? oe.error(e) : D(e, s).slice(0);
      }),
      (p = oe.compile = function (e, t) {
        var n,
          r = [],
          i = [],
          o = j[e + " "];
        if (!o) {
          for (n = (t = t || h(e)).length; n--; )
            (o = Te(t[n]))[k] ? r.push(o) : i.push(o);
          (o = j(
            e,
            (function (m, v) {
              function e(e, t, n, r, i) {
                var o,
                  a,
                  s,
                  u = 0,
                  l = "0",
                  c = e && [],
                  f = [],
                  p = w,
                  d = e || (x && b.find.TAG("*", i)),
                  h = (N += null == p ? 1 : Math.random() || 0.1),
                  g = d.length;
                for (
                  i && (w = t === C || t || i);
                  l !== g && null != (o = d[l]);
                  l++
                ) {
                  if (x && o) {
                    for (
                      a = 0, t || o.ownerDocument === C || (T(o), (n = !E));
                      (s = m[a++]);

                    )
                      if (s(o, t || C, n)) {
                        r.push(o);
                        break;
                      }
                    i && (N = h);
                  }
                  y && ((o = !s && o) && u--, e && c.push(o));
                }
                if (((u += l), y && l !== u)) {
                  for (a = 0; (s = v[a++]); ) s(c, f, t, n);
                  if (e) {
                    if (0 < u) for (; l--; ) c[l] || f[l] || (f[l] = L.call(r));
                    f = be(f);
                  }
                  F.apply(r, f),
                    i &&
                      !e &&
                      0 < f.length &&
                      1 < u + v.length &&
                      oe.uniqueSort(r);
                }
                return i && ((N = h), (w = p)), c;
              }
              var y = 0 < v.length,
                x = 0 < m.length;
              return y ? se(e) : e;
            })(i, r)
          )).selector = e;
        }
        return o;
      }),
      (g = oe.select = function (e, t, n, r) {
        var i,
          o,
          a,
          s,
          u,
          l = "function" == typeof e && e,
          c = !r && h((e = l.selector || e));
        if (((n = n || []), 1 === c.length)) {
          if (
            2 < (o = c[0] = c[0].slice(0)).length &&
            "ID" === (a = o[0]).type &&
            9 === t.nodeType &&
            E &&
            b.relative[o[1].type]
          ) {
            if (!(t = (b.find.ID(a.matches[0].replace(te, f), t) || [])[0]))
              return n;
            l && (t = t.parentNode), (e = e.slice(o.shift().value.length));
          }
          for (
            i = Y.needsContext.test(e) ? 0 : o.length;
            i-- && ((a = o[i]), !b.relative[(s = a.type)]);

          )
            if (
              (u = b.find[s]) &&
              (r = u(
                a.matches[0].replace(te, f),
                (ee.test(o[0].type) && ge(t.parentNode)) || t
              ))
            ) {
              if ((o.splice(i, 1), !(e = r.length && ve(o))))
                return F.apply(n, r), n;
              break;
            }
        }
        return (
          (l || p(e, c))(
            r,
            t,
            !E,
            n,
            !t || (ee.test(e) && ge(t.parentNode)) || t
          ),
          n
        );
      }),
      (d.sortStable = k.split("").sort(A).join("") === k),
      (d.detectDuplicates = !!l),
      T(),
      (d.sortDetached = ue(function (e) {
        return 1 & e.compareDocumentPosition(C.createElement("fieldset"));
      })),
      ue(function (e) {
        return (
          (e.innerHTML = "<a href='#'></a>"),
          "#" === e.firstChild.getAttribute("href")
        );
      }) ||
        le("type|href|height|width", function (e, t, n) {
          if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2);
        }),
      (d.attributes &&
        ue(function (e) {
          return (
            (e.innerHTML = "<input/>"),
            e.firstChild.setAttribute("value", ""),
            "" === e.firstChild.getAttribute("value")
          );
        })) ||
        le("value", function (e, t, n) {
          if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue;
        }),
      ue(function (e) {
        return null == e.getAttribute("disabled");
      }) ||
        le(R, function (e, t, n) {
          var r;
          if (!n)
            return !0 === e[t]
              ? t.toLowerCase()
              : (r = e.getAttributeNode(t)) && r.specified
              ? r.value
              : null;
        }),
      oe
    );
  })(C);
  (k.find = b),
    (k.expr = b.selectors),
    (k.expr[":"] = k.expr.pseudos),
    (k.uniqueSort = k.unique = b.uniqueSort),
    (k.text = b.getText),
    (k.isXMLDoc = b.isXML),
    (k.contains = b.contains),
    (k.escapeSelector = b.escape);
  function w(e, t, n) {
    for (var r = [], i = void 0 !== n; (e = e[t]) && 9 !== e.nodeType; )
      if (1 === e.nodeType) {
        if (i && k(e).is(n)) break;
        r.push(e);
      }
    return r;
  }
  function T(e, t) {
    for (var n = []; e; e = e.nextSibling)
      1 === e.nodeType && e !== t && n.push(e);
    return n;
  }
  var N = k.expr.match.needsContext,
    S = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
    D = /^.[^:#\[\.,]*$/;
  function j(e, n, r) {
    return k.isFunction(n)
      ? k.grep(e, function (e, t) {
          return !!n.call(e, t, e) !== r;
        })
      : n.nodeType
      ? k.grep(e, function (e) {
          return (e === n) !== r;
        })
      : "string" != typeof n
      ? k.grep(e, function (e) {
          return -1 < i.call(n, e) !== r;
        })
      : D.test(n)
      ? k.filter(n, e, r)
      : ((n = k.filter(n, e)),
        k.grep(e, function (e) {
          return -1 < i.call(n, e) !== r && 1 === e.nodeType;
        }));
  }
  (k.filter = function (e, t, n) {
    var r = t[0];
    return (
      n && (e = ":not(" + e + ")"),
      1 === t.length && 1 === r.nodeType
        ? k.find.matchesSelector(r, e)
          ? [r]
          : []
        : k.find.matches(
            e,
            k.grep(t, function (e) {
              return 1 === e.nodeType;
            })
          )
    );
  }),
    k.fn.extend({
      find: function (e) {
        var t,
          n,
          r = this.length,
          i = this;
        if ("string" != typeof e)
          return this.pushStack(
            k(e).filter(function () {
              for (t = 0; t < r; t++) if (k.contains(i[t], this)) return !0;
            })
          );
        for (n = this.pushStack([]), t = 0; t < r; t++) k.find(e, i[t], n);
        return 1 < r ? k.uniqueSort(n) : n;
      },
      filter: function (e) {
        return this.pushStack(j(this, e || [], !1));
      },
      not: function (e) {
        return this.pushStack(j(this, e || [], !0));
      },
      is: function (e) {
        return !!j(this, "string" == typeof e && N.test(e) ? k(e) : e || [], !1)
          .length;
      },
    });
  var A,
    q = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
  ((k.fn.init = function (e, t, n) {
    var r, i;
    if (!e) return this;
    if (((n = n || A), "string" != typeof e))
      return e.nodeType
        ? ((this[0] = e), (this.length = 1), this)
        : k.isFunction(e)
        ? void 0 !== n.ready
          ? n.ready(e)
          : e(k)
        : k.makeArray(e, this);
    if (
      !(r =
        "<" === e[0] && ">" === e[e.length - 1] && 3 <= e.length
          ? [null, e, null]
          : q.exec(e)) ||
      (!r[1] && t)
    )
      return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
    if (r[1]) {
      if (
        ((t = t instanceof k ? t[0] : t),
        k.merge(
          this,
          k.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : E, !0)
        ),
        S.test(r[1]) && k.isPlainObject(t))
      )
        for (r in t) k.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
      return this;
    }
    return (
      (i = E.getElementById(r[2])) && ((this[0] = i), (this.length = 1)), this
    );
  }).prototype = k.fn),
    (A = k(E));
  var L = /^(?:parents|prev(?:Until|All))/,
    H = {
      children: !0,
      contents: !0,
      next: !0,
      prev: !0,
    };
  function F(e, t) {
    for (; (e = e[t]) && 1 !== e.nodeType; );
    return e;
  }
  k.fn.extend({
    has: function (e) {
      var t = k(e, this),
        n = t.length;
      return this.filter(function () {
        for (var e = 0; e < n; e++) if (k.contains(this, t[e])) return !0;
      });
    },
    closest: function (e, t) {
      var n,
        r = 0,
        i = this.length,
        o = [],
        a = "string" != typeof e && k(e);
      if (!N.test(e))
        for (; r < i; r++)
          for (n = this[r]; n && n !== t; n = n.parentNode)
            if (
              n.nodeType < 11 &&
              (a
                ? -1 < a.index(n)
                : 1 === n.nodeType && k.find.matchesSelector(n, e))
            ) {
              o.push(n);
              break;
            }
      return this.pushStack(1 < o.length ? k.uniqueSort(o) : o);
    },
    index: function (e) {
      return e
        ? "string" == typeof e
          ? i.call(k(e), this[0])
          : i.call(this, e.jquery ? e[0] : e)
        : this[0] && this[0].parentNode
        ? this.first().prevAll().length
        : -1;
    },
    add: function (e, t) {
      return this.pushStack(k.uniqueSort(k.merge(this.get(), k(e, t))));
    },
    addBack: function (e) {
      return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    },
  }),
    k.each(
      {
        parent: function (e) {
          var t = e.parentNode;
          return t && 11 !== t.nodeType ? t : null;
        },
        parents: function (e) {
          return w(e, "parentNode");
        },
        parentsUntil: function (e, t, n) {
          return w(e, "parentNode", n);
        },
        next: function (e) {
          return F(e, "nextSibling");
        },
        prev: function (e) {
          return F(e, "previousSibling");
        },
        nextAll: function (e) {
          return w(e, "nextSibling");
        },
        prevAll: function (e) {
          return w(e, "previousSibling");
        },
        nextUntil: function (e, t, n) {
          return w(e, "nextSibling", n);
        },
        prevUntil: function (e, t, n) {
          return w(e, "previousSibling", n);
        },
        siblings: function (e) {
          return T((e.parentNode || {}).firstChild, e);
        },
        children: function (e) {
          return T(e.firstChild);
        },
        contents: function (e) {
          return e.contentDocument || k.merge([], e.childNodes);
        },
      },
      function (r, i) {
        k.fn[r] = function (e, t) {
          var n = k.map(this, i, e);
          return (
            "Until" !== r.slice(-5) && (t = e),
            t && "string" == typeof t && (n = k.filter(t, n)),
            1 < this.length &&
              (H[r] || k.uniqueSort(n), L.test(r) && n.reverse()),
            this.pushStack(n)
          );
        };
      }
    );
  var O = /[^\x20\t\r\n\f]+/g;
  function P(e) {
    return e;
  }
  function R(e) {
    throw e;
  }
  function M(e, t, n) {
    var r;
    try {
      e && k.isFunction((r = e.promise))
        ? r.call(e).done(t).fail(n)
        : e && k.isFunction((r = e.then))
        ? r.call(e, t, n)
        : t.call(void 0, e);
    } catch (e) {
      n.call(void 0, e);
    }
  }
  (k.Callbacks = function (r) {
    r =
      "string" == typeof r
        ? (function (e) {
            var n = {};
            return (
              k.each(e.match(O) || [], function (e, t) {
                n[t] = !0;
              }),
              n
            );
          })(r)
        : k.extend({}, r);
    function n() {
      for (o = r.once, t = i = !0; s.length; u = -1)
        for (e = s.shift(); ++u < a.length; )
          !1 === a[u].apply(e[0], e[1]) &&
            r.stopOnFalse &&
            ((u = a.length), (e = !1));
      r.memory || (e = !1), (i = !1), o && (a = e ? [] : "");
    }
    var i,
      e,
      t,
      o,
      a = [],
      s = [],
      u = -1,
      l = {
        add: function () {
          return (
            a &&
              (e && !i && ((u = a.length - 1), s.push(e)),
              (function n(e) {
                k.each(e, function (e, t) {
                  k.isFunction(t)
                    ? (r.unique && l.has(t)) || a.push(t)
                    : t && t.length && "string" !== k.type(t) && n(t);
                });
              })(arguments),
              e && !i && n()),
            this
          );
        },
        remove: function () {
          return (
            k.each(arguments, function (e, t) {
              for (var n; -1 < (n = k.inArray(t, a, n)); )
                a.splice(n, 1), n <= u && u--;
            }),
            this
          );
        },
        has: function (e) {
          return e ? -1 < k.inArray(e, a) : 0 < a.length;
        },
        empty: function () {
          return (a = a && []), this;
        },
        disable: function () {
          return (o = s = []), (a = e = ""), this;
        },
        disabled: function () {
          return !a;
        },
        lock: function () {
          return (o = s = []), e || i || (a = e = ""), this;
        },
        locked: function () {
          return !!o;
        },
        fireWith: function (e, t) {
          return (
            o ||
              ((t = [e, (t = t || []).slice ? t.slice() : t]),
              s.push(t),
              i || n()),
            this
          );
        },
        fire: function () {
          return l.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!t;
        },
      };
    return l;
  }),
    k.extend({
      Deferred: function (e) {
        var o = [
            [
              "notify",
              "progress",
              k.Callbacks("memory"),
              k.Callbacks("memory"),
              2,
            ],
            [
              "resolve",
              "done",
              k.Callbacks("once memory"),
              k.Callbacks("once memory"),
              0,
              "resolved",
            ],
            [
              "reject",
              "fail",
              k.Callbacks("once memory"),
              k.Callbacks("once memory"),
              1,
              "rejected",
            ],
          ],
          i = "pending",
          a = {
            state: function () {
              return i;
            },
            always: function () {
              return s.done(arguments).fail(arguments), this;
            },
            catch: function (e) {
              return a.then(null, e);
            },
            pipe: function () {
              var i = arguments;
              return k
                .Deferred(function (r) {
                  k.each(o, function (e, t) {
                    var n = k.isFunction(i[t[4]]) && i[t[4]];
                    s[t[1]](function () {
                      var e = n && n.apply(this, arguments);
                      e && k.isFunction(e.promise)
                        ? e
                            .promise()
                            .progress(r.notify)
                            .done(r.resolve)
                            .fail(r.reject)
                        : r[t[0] + "With"](this, n ? [e] : arguments);
                    });
                  }),
                    (i = null);
                })
                .promise();
            },
            then: function (t, n, r) {
              var u = 0;
              function l(i, o, a, s) {
                return function () {
                  function e() {
                    var e, t;
                    if (!(i < u)) {
                      if ((e = a.apply(n, r)) === o.promise())
                        throw new TypeError("Thenable self-resolution");
                      (t =
                        e &&
                        ("object" == typeof e || "function" == typeof e) &&
                        e.then),
                        k.isFunction(t)
                          ? s
                            ? t.call(e, l(u, o, P, s), l(u, o, R, s))
                            : (u++,
                              t.call(
                                e,
                                l(u, o, P, s),
                                l(u, o, R, s),
                                l(u, o, P, o.notifyWith)
                              ))
                          : (a !== P && ((n = void 0), (r = [e])),
                            (s || o.resolveWith)(n, r));
                    }
                  }
                  var n = this,
                    r = arguments,
                    t = s
                      ? e
                      : function () {
                          try {
                            e();
                          } catch (e) {
                            k.Deferred.exceptionHook &&
                              k.Deferred.exceptionHook(e, t.stackTrace),
                              u <= i + 1 &&
                                (a !== R && ((n = void 0), (r = [e])),
                                o.rejectWith(n, r));
                          }
                        };
                  i
                    ? t()
                    : (k.Deferred.getStackHook &&
                        (t.stackTrace = k.Deferred.getStackHook()),
                      C.setTimeout(t));
                };
              }
              return k
                .Deferred(function (e) {
                  o[0][3].add(l(0, e, k.isFunction(r) ? r : P, e.notifyWith)),
                    o[1][3].add(l(0, e, k.isFunction(t) ? t : P)),
                    o[2][3].add(l(0, e, k.isFunction(n) ? n : R));
                })
                .promise();
            },
            promise: function (e) {
              return null != e ? k.extend(e, a) : a;
            },
          },
          s = {};
        return (
          k.each(o, function (e, t) {
            var n = t[2],
              r = t[5];
            (a[t[1]] = n.add),
              r &&
                n.add(
                  function () {
                    i = r;
                  },
                  o[3 - e][2].disable,
                  o[0][2].lock
                ),
              n.add(t[3].fire),
              (s[t[0]] = function () {
                return (
                  s[t[0] + "With"](this === s ? void 0 : this, arguments), this
                );
              }),
              (s[t[0] + "With"] = n.fireWith);
          }),
          a.promise(s),
          e && e.call(s, s),
          s
        );
      },
      when: function (e) {
        function t(t) {
          return function (e) {
            (i[t] = this),
              (o[t] = 1 < arguments.length ? s.call(arguments) : e),
              --n || a.resolveWith(i, o);
          };
        }
        var n = arguments.length,
          r = n,
          i = Array(r),
          o = s.call(arguments),
          a = k.Deferred();
        if (
          n <= 1 &&
          (M(e, a.done(t(r)).resolve, a.reject),
          "pending" === a.state() || k.isFunction(o[r] && o[r].then))
        )
          return a.then();
        for (; r--; ) M(o[r], t(r), a.reject);
        return a.promise();
      },
    });
  var I = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
  (k.Deferred.exceptionHook = function (e, t) {
    C.console &&
      C.console.warn &&
      e &&
      I.test(e.name) &&
      C.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t);
  }),
    (k.readyException = function (e) {
      C.setTimeout(function () {
        throw e;
      });
    });
  var W = k.Deferred();
  function $() {
    E.removeEventListener("DOMContentLoaded", $),
      C.removeEventListener("load", $),
      k.ready();
  }
  (k.fn.ready = function (e) {
    return (
      W.then(e).catch(function (e) {
        k.readyException(e);
      }),
      this
    );
  }),
    k.extend({
      isReady: !1,
      readyWait: 1,
      holdReady: function (e) {
        e ? k.readyWait++ : k.ready(!0);
      },
      ready: function (e) {
        (!0 === e ? --k.readyWait : k.isReady) ||
          ((k.isReady = !0) !== e && 0 < --k.readyWait) ||
          W.resolveWith(E, [k]);
      },
    }),
    (k.ready.then = W.then),
    "complete" === E.readyState ||
    ("loading" !== E.readyState && !E.documentElement.doScroll)
      ? C.setTimeout(k.ready)
      : (E.addEventListener("DOMContentLoaded", $),
        C.addEventListener("load", $));
  function B(e) {
    return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType;
  }
  var _ = function (e, t, n, r, i, o, a) {
    var s = 0,
      u = e.length,
      l = null == n;
    if ("object" === k.type(n))
      for (s in ((i = !0), n)) _(e, t, s, n[s], !0, o, a);
    else if (
      void 0 !== r &&
      ((i = !0),
      k.isFunction(r) || (a = !0),
      l &&
        (t = a
          ? (t.call(e, r), null)
          : ((l = t),
            function (e, t, n) {
              return l.call(k(e), n);
            })),
      t)
    )
      for (; s < u; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)));
    return i ? e : l ? t.call(e) : u ? t(e[0], n) : o;
  };
  function z() {
    this.expando = k.expando + z.uid++;
  }
  (z.uid = 1),
    (z.prototype = {
      cache: function (e) {
        var t = e[this.expando];
        return (
          t ||
            ((t = {}),
            B(e) &&
              (e.nodeType
                ? (e[this.expando] = t)
                : Object.defineProperty(e, this.expando, {
                    value: t,
                    configurable: !0,
                  }))),
          t
        );
      },
      set: function (e, t, n) {
        var r,
          i = this.cache(e);
        if ("string" == typeof t) i[k.camelCase(t)] = n;
        else for (r in t) i[k.camelCase(r)] = t[r];
        return i;
      },
      get: function (e, t) {
        return void 0 === t
          ? this.cache(e)
          : e[this.expando] && e[this.expando][k.camelCase(t)];
      },
      access: function (e, t, n) {
        return void 0 === t || (t && "string" == typeof t && void 0 === n)
          ? this.get(e, t)
          : (this.set(e, t, n), void 0 !== n ? n : t);
      },
      remove: function (e, t) {
        var n,
          r = e[this.expando];
        if (void 0 !== r) {
          if (void 0 !== t) {
            n = (t = k.isArray(t)
              ? t.map(k.camelCase)
              : (t = k.camelCase(t)) in r
              ? [t]
              : t.match(O) || []).length;
            for (; n--; ) delete r[t[n]];
          }
          (void 0 !== t && !k.isEmptyObject(r)) ||
            (e.nodeType ? (e[this.expando] = void 0) : delete e[this.expando]);
        }
      },
      hasData: function (e) {
        var t = e[this.expando];
        return void 0 !== t && !k.isEmptyObject(t);
      },
    });
  var X = new z(),
    U = new z(),
    V = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    G = /[A-Z]/g;
  function Y(e, t, n) {
    var r;
    if (void 0 === n && 1 === e.nodeType)
      if (
        ((r = "data-" + t.replace(G, "-$&").toLowerCase()),
        "string" == typeof (n = e.getAttribute(r)))
      ) {
        try {
          n = (function (e) {
            return (
              "true" === e ||
              ("false" !== e &&
                ("null" === e
                  ? null
                  : e === +e + ""
                  ? +e
                  : V.test(e)
                  ? JSON.parse(e)
                  : e))
            );
          })(n);
        } catch (e) {}
        U.set(e, t, n);
      } else n = void 0;
    return n;
  }
  k.extend({
    hasData: function (e) {
      return U.hasData(e) || X.hasData(e);
    },
    data: function (e, t, n) {
      return U.access(e, t, n);
    },
    removeData: function (e, t) {
      U.remove(e, t);
    },
    _data: function (e, t, n) {
      return X.access(e, t, n);
    },
    _removeData: function (e, t) {
      X.remove(e, t);
    },
  }),
    k.fn.extend({
      data: function (n, e) {
        var t,
          r,
          i,
          o = this[0],
          a = o && o.attributes;
        if (void 0 !== n)
          return "object" == typeof n
            ? this.each(function () {
                U.set(this, n);
              })
            : _(
                this,
                function (e) {
                  var t;
                  if (o && void 0 === e) {
                    if (void 0 !== (t = U.get(o, n))) return t;
                    if (void 0 !== (t = Y(o, n))) return t;
                  } else
                    this.each(function () {
                      U.set(this, n, e);
                    });
                },
                null,
                e,
                1 < arguments.length,
                null,
                !0
              );
        if (
          this.length &&
          ((i = U.get(o)), 1 === o.nodeType && !X.get(o, "hasDataAttrs"))
        ) {
          for (t = a.length; t--; )
            a[t] &&
              0 === (r = a[t].name).indexOf("data-") &&
              ((r = k.camelCase(r.slice(5))), Y(o, r, i[r]));
          X.set(o, "hasDataAttrs", !0);
        }
        return i;
      },
      removeData: function (e) {
        return this.each(function () {
          U.remove(this, e);
        });
      },
    }),
    k.extend({
      queue: function (e, t, n) {
        var r;
        if (e)
          return (
            (t = (t || "fx") + "queue"),
            (r = X.get(e, t)),
            n &&
              (!r || k.isArray(n)
                ? (r = X.access(e, t, k.makeArray(n)))
                : r.push(n)),
            r || []
          );
      },
      dequeue: function (e, t) {
        t = t || "fx";
        var n = k.queue(e, t),
          r = n.length,
          i = n.shift(),
          o = k._queueHooks(e, t);
        "inprogress" === i && ((i = n.shift()), r--),
          i &&
            ("fx" === t && n.unshift("inprogress"),
            delete o.stop,
            i.call(
              e,
              function () {
                k.dequeue(e, t);
              },
              o
            )),
          !r && o && o.empty.fire();
      },
      _queueHooks: function (e, t) {
        var n = t + "queueHooks";
        return (
          X.get(e, n) ||
          X.access(e, n, {
            empty: k.Callbacks("once memory").add(function () {
              X.remove(e, [t + "queue", n]);
            }),
          })
        );
      },
    }),
    k.fn.extend({
      queue: function (t, n) {
        var e = 2;
        return (
          "string" != typeof t && ((n = t), (t = "fx"), e--),
          arguments.length < e
            ? k.queue(this[0], t)
            : void 0 === n
            ? this
            : this.each(function () {
                var e = k.queue(this, t, n);
                k._queueHooks(this, t),
                  "fx" === t && "inprogress" !== e[0] && k.dequeue(this, t);
              })
        );
      },
      dequeue: function (e) {
        return this.each(function () {
          k.dequeue(this, e);
        });
      },
      clearQueue: function (e) {
        return this.queue(e || "fx", []);
      },
      promise: function (e, t) {
        function n() {
          --i || o.resolveWith(a, [a]);
        }
        var r,
          i = 1,
          o = k.Deferred(),
          a = this,
          s = this.length;
        for (
          "string" != typeof e && ((t = e), (e = void 0)), e = e || "fx";
          s--;

        )
          (r = X.get(a[s], e + "queueHooks")) &&
            r.empty &&
            (i++, r.empty.add(n));
        return n(), o.promise(t);
      },
    });
  function Q(e, t, n, r) {
    var i,
      o,
      a = {};
    for (o in t) (a[o] = e.style[o]), (e.style[o] = t[o]);
    for (o in ((i = n.apply(e, r || [])), t)) e.style[o] = a[o];
    return i;
  }
  var J = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    K = new RegExp("^(?:([+-])=|)(" + J + ")([a-z%]*)$", "i"),
    Z = ["Top", "Right", "Bottom", "Left"],
    ee = function (e, t) {
      return (
        "none" === (e = t || e).style.display ||
        ("" === e.style.display &&
          k.contains(e.ownerDocument, e) &&
          "none" === k.css(e, "display"))
      );
    };
  function te(e, t, n, r) {
    var i,
      o = 1,
      a = 20,
      s = r
        ? function () {
            return r.cur();
          }
        : function () {
            return k.css(e, t, "");
          },
      u = s(),
      l = (n && n[3]) || (k.cssNumber[t] ? "" : "px"),
      c = (k.cssNumber[t] || ("px" !== l && +u)) && K.exec(k.css(e, t));
    if (c && c[3] !== l)
      for (
        l = l || c[3], n = n || [], c = +u || 1;
        (c /= o = o || ".5"),
          k.style(e, t, c + l),
          o !== (o = s() / u) && 1 !== o && --a;

      );
    return (
      n &&
        ((c = +c || +u || 0),
        (i = n[1] ? c + (n[1] + 1) * n[2] : +n[2]),
        r && ((r.unit = l), (r.start = c), (r.end = i))),
      i
    );
  }
  var ne = {};
  function re(e, t) {
    for (var n, r, i = [], o = 0, a = e.length; o < a; o++)
      (r = e[o]).style &&
        ((n = r.style.display),
        t
          ? ("none" === n &&
              ((i[o] = X.get(r, "display") || null),
              i[o] || (r.style.display = "")),
            "" === r.style.display &&
              ee(r) &&
              (i[o] =
                ((f = l = u = void 0),
                (l = (s = r).ownerDocument),
                (c = s.nodeName),
                (f = ne[c]) ||
                  ((u = l.body.appendChild(l.createElement(c))),
                  (f = k.css(u, "display")),
                  u.parentNode.removeChild(u),
                  "none" === f && (f = "block"),
                  (ne[c] = f)))))
          : "none" !== n && ((i[o] = "none"), X.set(r, "display", n)));
    var s, u, l, c, f;
    for (o = 0; o < a; o++) null != i[o] && (e[o].style.display = i[o]);
    return e;
  }
  k.fn.extend({
    show: function () {
      return re(this, !0);
    },
    hide: function () {
      return re(this);
    },
    toggle: function (e) {
      return "boolean" == typeof e
        ? e
          ? this.show()
          : this.hide()
        : this.each(function () {
            ee(this) ? k(this).show() : k(this).hide();
          });
    },
  });
  var ie = /^(?:checkbox|radio)$/i,
    oe = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
    ae = /^$|\/(?:java|ecma)script/i,
    se = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      thead: [1, "<table>", "</table>"],
      col: [2, "<table><colgroup>", "</colgroup></table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: [0, "", ""],
    };
  function ue(e, t) {
    var n;
    return (
      (n =
        void 0 !== e.getElementsByTagName
          ? e.getElementsByTagName(t || "*")
          : void 0 !== e.querySelectorAll
          ? e.querySelectorAll(t || "*")
          : []),
      void 0 === t || (t && k.nodeName(e, t)) ? k.merge([e], n) : n
    );
  }
  function le(e, t) {
    for (var n = 0, r = e.length; n < r; n++)
      X.set(e[n], "globalEval", !t || X.get(t[n], "globalEval"));
  }
  (se.optgroup = se.option),
    (se.tbody = se.tfoot = se.colgroup = se.caption = se.thead),
    (se.th = se.td);
  var ce,
    fe,
    pe = /<|&#?\w+;/;
  function de(e, t, n, r, i) {
    for (
      var o,
        a,
        s,
        u,
        l,
        c,
        f = t.createDocumentFragment(),
        p = [],
        d = 0,
        h = e.length;
      d < h;
      d++
    )
      if ((o = e[d]) || 0 === o)
        if ("object" === k.type(o)) k.merge(p, o.nodeType ? [o] : o);
        else if (pe.test(o)) {
          for (
            a = a || f.appendChild(t.createElement("div")),
              s = (oe.exec(o) || ["", ""])[1].toLowerCase(),
              u = se[s] || se._default,
              a.innerHTML = u[1] + k.htmlPrefilter(o) + u[2],
              c = u[0];
            c--;

          )
            a = a.lastChild;
          k.merge(p, a.childNodes), ((a = f.firstChild).textContent = "");
        } else p.push(t.createTextNode(o));
    for (f.textContent = "", d = 0; (o = p[d++]); )
      if (r && -1 < k.inArray(o, r)) i && i.push(o);
      else if (
        ((l = k.contains(o.ownerDocument, o)),
        (a = ue(f.appendChild(o), "script")),
        l && le(a),
        n)
      )
        for (c = 0; (o = a[c++]); ) ae.test(o.type || "") && n.push(o);
    return f;
  }
  (ce = E.createDocumentFragment().appendChild(E.createElement("div"))),
    (fe = E.createElement("input")).setAttribute("type", "radio"),
    fe.setAttribute("checked", "checked"),
    fe.setAttribute("name", "t"),
    ce.appendChild(fe),
    (m.checkClone = ce.cloneNode(!0).cloneNode(!0).lastChild.checked),
    (ce.innerHTML = "<textarea>x</textarea>"),
    (m.noCloneChecked = !!ce.cloneNode(!0).lastChild.defaultValue);
  var he = E.documentElement,
    ge = /^key/,
    me = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
    ve = /^([^.]*)(?:\.(.+)|)/;
  function ye() {
    return !0;
  }
  function xe() {
    return !1;
  }
  function be() {
    try {
      return E.activeElement;
    } catch (e) {}
  }
  function we(e, t, n, r, i, o) {
    var a, s;
    if ("object" == typeof t) {
      for (s in ("string" != typeof n && ((r = r || n), (n = void 0)), t))
        we(e, s, n, r, t[s], o);
      return e;
    }
    if (
      (null == r && null == i
        ? ((i = n), (r = n = void 0))
        : null == i &&
          ("string" == typeof n
            ? ((i = r), (r = void 0))
            : ((i = r), (r = n), (n = void 0))),
      !1 === i)
    )
      i = xe;
    else if (!i) return e;
    return (
      1 === o &&
        ((a = i),
        ((i = function (e) {
          return k().off(e), a.apply(this, arguments);
        }).guid = a.guid || (a.guid = k.guid++))),
      e.each(function () {
        k.event.add(this, t, i, r, n);
      })
    );
  }
  (k.event = {
    global: {},
    add: function (t, e, n, r, i) {
      var o,
        a,
        s,
        u,
        l,
        c,
        f,
        p,
        d,
        h,
        g,
        m = X.get(t);
      if (m)
        for (
          n.handler && ((n = (o = n).handler), (i = o.selector)),
            i && k.find.matchesSelector(he, i),
            n.guid || (n.guid = k.guid++),
            (u = m.events) || (u = m.events = {}),
            (a = m.handle) ||
              (a = m.handle = function (e) {
                return void 0 !== k && k.event.triggered !== e.type
                  ? k.event.dispatch.apply(t, arguments)
                  : void 0;
              }),
            l = (e = (e || "").match(O) || [""]).length;
          l--;

        )
          (d = g = (s = ve.exec(e[l]) || [])[1]),
            (h = (s[2] || "").split(".").sort()),
            d &&
              ((f = k.event.special[d] || {}),
              (d = (i ? f.delegateType : f.bindType) || d),
              (f = k.event.special[d] || {}),
              (c = k.extend(
                {
                  type: d,
                  origType: g,
                  data: r,
                  handler: n,
                  guid: n.guid,
                  selector: i,
                  needsContext: i && k.expr.match.needsContext.test(i),
                  namespace: h.join("."),
                },
                o
              )),
              (p = u[d]) ||
                (((p = u[d] = []).delegateCount = 0),
                (f.setup && !1 !== f.setup.call(t, r, h, a)) ||
                  (t.addEventListener && t.addEventListener(d, a))),
              f.add &&
                (f.add.call(t, c), c.handler.guid || (c.handler.guid = n.guid)),
              i ? p.splice(p.delegateCount++, 0, c) : p.push(c),
              (k.event.global[d] = !0));
    },
    remove: function (e, t, n, r, i) {
      var o,
        a,
        s,
        u,
        l,
        c,
        f,
        p,
        d,
        h,
        g,
        m = X.hasData(e) && X.get(e);
      if (m && (u = m.events)) {
        for (l = (t = (t || "").match(O) || [""]).length; l--; )
          if (
            ((d = g = (s = ve.exec(t[l]) || [])[1]),
            (h = (s[2] || "").split(".").sort()),
            d)
          ) {
            for (
              f = k.event.special[d] || {},
                p = u[(d = (r ? f.delegateType : f.bindType) || d)] || [],
                s =
                  s[2] &&
                  new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                a = o = p.length;
              o--;

            )
              (c = p[o]),
                (!i && g !== c.origType) ||
                  (n && n.guid !== c.guid) ||
                  (s && !s.test(c.namespace)) ||
                  (r && r !== c.selector && ("**" !== r || !c.selector)) ||
                  (p.splice(o, 1),
                  c.selector && p.delegateCount--,
                  f.remove && f.remove.call(e, c));
            a &&
              !p.length &&
              ((f.teardown && !1 !== f.teardown.call(e, h, m.handle)) ||
                k.removeEvent(e, d, m.handle),
              delete u[d]);
          } else for (d in u) k.event.remove(e, d + t[l], n, r, !0);
        k.isEmptyObject(u) && X.remove(e, "handle events");
      }
    },
    dispatch: function (e) {
      var t,
        n,
        r,
        i,
        o,
        a,
        s = k.event.fix(e),
        u = new Array(arguments.length),
        l = (X.get(this, "events") || {})[s.type] || [],
        c = k.event.special[s.type] || {};
      for (u[0] = s, t = 1; t < arguments.length; t++) u[t] = arguments[t];
      if (
        ((s.delegateTarget = this),
        !c.preDispatch || !1 !== c.preDispatch.call(this, s))
      ) {
        for (
          a = k.event.handlers.call(this, s, l), t = 0;
          (i = a[t++]) && !s.isPropagationStopped();

        )
          for (
            s.currentTarget = i.elem, n = 0;
            (o = i.handlers[n++]) && !s.isImmediatePropagationStopped();

          )
            (s.rnamespace && !s.rnamespace.test(o.namespace)) ||
              ((s.handleObj = o),
              (s.data = o.data),
              void 0 !==
                (r = (
                  (k.event.special[o.origType] || {}).handle || o.handler
                ).apply(i.elem, u)) &&
                !1 === (s.result = r) &&
                (s.preventDefault(), s.stopPropagation()));
        return c.postDispatch && c.postDispatch.call(this, s), s.result;
      }
    },
    handlers: function (e, t) {
      var n,
        r,
        i,
        o,
        a,
        s = [],
        u = t.delegateCount,
        l = e.target;
      if (u && l.nodeType && !("click" === e.type && 1 <= e.button))
        for (; l !== this; l = l.parentNode || this)
          if (1 === l.nodeType && ("click" !== e.type || !0 !== l.disabled)) {
            for (o = [], a = {}, n = 0; n < u; n++)
              void 0 === a[(i = (r = t[n]).selector + " ")] &&
                (a[i] = r.needsContext
                  ? -1 < k(i, this).index(l)
                  : k.find(i, this, null, [l]).length),
                a[i] && o.push(r);
            o.length &&
              s.push({
                elem: l,
                handlers: o,
              });
          }
      return (
        (l = this),
        u < t.length &&
          s.push({
            elem: l,
            handlers: t.slice(u),
          }),
        s
      );
    },
    addProp: function (t, e) {
      Object.defineProperty(k.Event.prototype, t, {
        enumerable: !0,
        configurable: !0,
        get: k.isFunction(e)
          ? function () {
              if (this.originalEvent) return e(this.originalEvent);
            }
          : function () {
              if (this.originalEvent) return this.originalEvent[t];
            },
        set: function (e) {
          Object.defineProperty(this, t, {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: e,
          });
        },
      });
    },
    fix: function (e) {
      return e[k.expando] ? e : new k.Event(e);
    },
    special: {
      load: {
        noBubble: !0,
      },
      focus: {
        trigger: function () {
          if (this !== be() && this.focus) return this.focus(), !1;
        },
        delegateType: "focusin",
      },
      blur: {
        trigger: function () {
          if (this === be() && this.blur) return this.blur(), !1;
        },
        delegateType: "focusout",
      },
      click: {
        trigger: function () {
          if (
            "checkbox" === this.type &&
            this.click &&
            k.nodeName(this, "input")
          )
            return this.click(), !1;
        },
        _default: function (e) {
          return k.nodeName(e.target, "a");
        },
      },
      beforeunload: {
        postDispatch: function (e) {
          void 0 !== e.result &&
            e.originalEvent &&
            (e.originalEvent.returnValue = e.result);
        },
      },
    },
  }),
    (k.removeEvent = function (e, t, n) {
      e.removeEventListener && e.removeEventListener(t, n);
    }),
    (k.Event = function (e, t) {
      return this instanceof k.Event
        ? (e && e.type
            ? ((this.originalEvent = e),
              (this.type = e.type),
              (this.isDefaultPrevented =
                e.defaultPrevented ||
                (void 0 === e.defaultPrevented && !1 === e.returnValue)
                  ? ye
                  : xe),
              (this.target =
                e.target && 3 === e.target.nodeType
                  ? e.target.parentNode
                  : e.target),
              (this.currentTarget = e.currentTarget),
              (this.relatedTarget = e.relatedTarget))
            : (this.type = e),
          t && k.extend(this, t),
          (this.timeStamp = (e && e.timeStamp) || k.now()),
          void (this[k.expando] = !0))
        : new k.Event(e, t);
    }),
    (k.Event.prototype = {
      constructor: k.Event,
      isDefaultPrevented: xe,
      isPropagationStopped: xe,
      isImmediatePropagationStopped: xe,
      isSimulated: !1,
      preventDefault: function () {
        var e = this.originalEvent;
        (this.isDefaultPrevented = ye),
          e && !this.isSimulated && e.preventDefault();
      },
      stopPropagation: function () {
        var e = this.originalEvent;
        (this.isPropagationStopped = ye),
          e && !this.isSimulated && e.stopPropagation();
      },
      stopImmediatePropagation: function () {
        var e = this.originalEvent;
        (this.isImmediatePropagationStopped = ye),
          e && !this.isSimulated && e.stopImmediatePropagation(),
          this.stopPropagation();
      },
    }),
    k.each(
      {
        altKey: !0,
        bubbles: !0,
        cancelable: !0,
        changedTouches: !0,
        ctrlKey: !0,
        detail: !0,
        eventPhase: !0,
        metaKey: !0,
        pageX: !0,
        pageY: !0,
        shiftKey: !0,
        view: !0,
        char: !0,
        charCode: !0,
        key: !0,
        keyCode: !0,
        button: !0,
        buttons: !0,
        clientX: !0,
        clientY: !0,
        offsetX: !0,
        offsetY: !0,
        pointerId: !0,
        pointerType: !0,
        screenX: !0,
        screenY: !0,
        targetTouches: !0,
        toElement: !0,
        touches: !0,
        which: function (e) {
          var t = e.button;
          return null == e.which && ge.test(e.type)
            ? null != e.charCode
              ? e.charCode
              : e.keyCode
            : !e.which && void 0 !== t && me.test(e.type)
            ? 1 & t
              ? 1
              : 2 & t
              ? 3
              : 4 & t
              ? 2
              : 0
            : e.which;
        },
      },
      k.event.addProp
    ),
    k.each(
      {
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout",
      },
      function (e, i) {
        k.event.special[e] = {
          delegateType: i,
          bindType: i,
          handle: function (e) {
            var t,
              n = e.relatedTarget,
              r = e.handleObj;
            return (
              (n && (n === this || k.contains(this, n))) ||
                ((e.type = r.origType),
                (t = r.handler.apply(this, arguments)),
                (e.type = i)),
              t
            );
          },
        };
      }
    ),
    k.fn.extend({
      on: function (e, t, n, r) {
        return we(this, e, t, n, r);
      },
      one: function (e, t, n, r) {
        return we(this, e, t, n, r, 1);
      },
      off: function (e, t, n) {
        var r, i;
        if (e && e.preventDefault && e.handleObj)
          return (
            (r = e.handleObj),
            k(e.delegateTarget).off(
              r.namespace ? r.origType + "." + r.namespace : r.origType,
              r.selector,
              r.handler
            ),
            this
          );
        if ("object" != typeof e)
          return (
            (!1 !== t && "function" != typeof t) || ((n = t), (t = void 0)),
            !1 === n && (n = xe),
            this.each(function () {
              k.event.remove(this, e, n, t);
            })
          );
        for (i in e) this.off(i, t, e[i]);
        return this;
      },
    });
  var Te = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
    Ce = /<script|<style|<link/i,
    Ee = /checked\s*(?:[^=]|=\s*.checked.)/i,
    ke = /^true\/(.*)/,
    Ne = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
  function Se(e, t) {
    return (
      (k.nodeName(e, "table") &&
        k.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") &&
        e.getElementsByTagName("tbody")[0]) ||
      e
    );
  }
  function De(e) {
    return (e.type = (null !== e.getAttribute("type")) + "/" + e.type), e;
  }
  function je(e) {
    var t = ke.exec(e.type);
    return t ? (e.type = t[1]) : e.removeAttribute("type"), e;
  }
  function Ae(e, t) {
    var n, r, i, o, a, s, u, l;
    if (1 === t.nodeType) {
      if (
        X.hasData(e) &&
        ((o = X.access(e)), (a = X.set(t, o)), (l = o.events))
      )
        for (i in (delete a.handle, (a.events = {}), l))
          for (n = 0, r = l[i].length; n < r; n++) k.event.add(t, i, l[i][n]);
      U.hasData(e) && ((s = U.access(e)), (u = k.extend({}, s)), U.set(t, u));
    }
  }
  function qe(n, r, i, o) {
    r = g.apply([], r);
    var e,
      t,
      a,
      s,
      u,
      l,
      c = 0,
      f = n.length,
      p = f - 1,
      d = r[0],
      h = k.isFunction(d);
    if (h || (1 < f && "string" == typeof d && !m.checkClone && Ee.test(d)))
      return n.each(function (e) {
        var t = n.eq(e);
        h && (r[0] = d.call(this, e, t.html())), qe(t, r, i, o);
      });
    if (
      f &&
      ((t = (e = de(r, n[0].ownerDocument, !1, n, o)).firstChild),
      1 === e.childNodes.length && (e = t),
      t || o)
    ) {
      for (s = (a = k.map(ue(e, "script"), De)).length; c < f; c++)
        (u = e),
          c !== p &&
            ((u = k.clone(u, !0, !0)), s && k.merge(a, ue(u, "script"))),
          i.call(n[c], u, c);
      if (s)
        for (l = a[a.length - 1].ownerDocument, k.map(a, je), c = 0; c < s; c++)
          (u = a[c]),
            ae.test(u.type || "") &&
              !X.access(u, "globalEval") &&
              k.contains(l, u) &&
              (u.src
                ? k._evalUrl && k._evalUrl(u.src)
                : v(u.textContent.replace(Ne, ""), l));
    }
    return n;
  }
  function Le(e, t, n) {
    for (var r, i = t ? k.filter(t, e) : e, o = 0; null != (r = i[o]); o++)
      n || 1 !== r.nodeType || k.cleanData(ue(r)),
        r.parentNode &&
          (n && k.contains(r.ownerDocument, r) && le(ue(r, "script")),
          r.parentNode.removeChild(r));
    return e;
  }
  k.extend({
    htmlPrefilter: function (e) {
      return e.replace(Te, "<$1></$2>");
    },
    clone: function (e, t, n) {
      var r,
        i,
        o,
        a,
        s,
        u,
        l,
        c = e.cloneNode(!0),
        f = k.contains(e.ownerDocument, e);
      if (
        !(
          m.noCloneChecked ||
          (1 !== e.nodeType && 11 !== e.nodeType) ||
          k.isXMLDoc(e)
        )
      )
        for (a = ue(c), r = 0, i = (o = ue(e)).length; r < i; r++)
          (s = o[r]),
            (u = a[r]),
            void 0,
            "input" === (l = u.nodeName.toLowerCase()) && ie.test(s.type)
              ? (u.checked = s.checked)
              : ("input" !== l && "textarea" !== l) ||
                (u.defaultValue = s.defaultValue);
      if (t)
        if (n)
          for (o = o || ue(e), a = a || ue(c), r = 0, i = o.length; r < i; r++)
            Ae(o[r], a[r]);
        else Ae(e, c);
      return (
        0 < (a = ue(c, "script")).length && le(a, !f && ue(e, "script")), c
      );
    },
    cleanData: function (e) {
      for (var t, n, r, i = k.event.special, o = 0; void 0 !== (n = e[o]); o++)
        if (B(n)) {
          if ((t = n[X.expando])) {
            if (t.events)
              for (r in t.events)
                i[r] ? k.event.remove(n, r) : k.removeEvent(n, r, t.handle);
            n[X.expando] = void 0;
          }
          n[U.expando] && (n[U.expando] = void 0);
        }
    },
  }),
    k.fn.extend({
      detach: function (e) {
        return Le(this, e, !0);
      },
      remove: function (e) {
        return Le(this, e);
      },
      text: function (e) {
        return _(
          this,
          function (e) {
            return void 0 === e
              ? k.text(this)
              : this.empty().each(function () {
                  (1 !== this.nodeType &&
                    11 !== this.nodeType &&
                    9 !== this.nodeType) ||
                    (this.textContent = e);
                });
          },
          null,
          e,
          arguments.length
        );
      },
      append: function () {
        return qe(this, arguments, function (e) {
          (1 !== this.nodeType &&
            11 !== this.nodeType &&
            9 !== this.nodeType) ||
            Se(this, e).appendChild(e);
        });
      },
      prepend: function () {
        return qe(this, arguments, function (e) {
          if (
            1 === this.nodeType ||
            11 === this.nodeType ||
            9 === this.nodeType
          ) {
            var t = Se(this, e);
            t.insertBefore(e, t.firstChild);
          }
        });
      },
      before: function () {
        return qe(this, arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this);
        });
      },
      after: function () {
        return qe(this, arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
        });
      },
      empty: function () {
        for (var e, t = 0; null != (e = this[t]); t++)
          1 === e.nodeType && (k.cleanData(ue(e, !1)), (e.textContent = ""));
        return this;
      },
      clone: function (e, t) {
        return (
          (e = null != e && e),
          (t = null == t ? e : t),
          this.map(function () {
            return k.clone(this, e, t);
          })
        );
      },
      html: function (e) {
        return _(
          this,
          function (e) {
            var t = this[0] || {},
              n = 0,
              r = this.length;
            if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
            if (
              "string" == typeof e &&
              !Ce.test(e) &&
              !se[(oe.exec(e) || ["", ""])[1].toLowerCase()]
            ) {
              e = k.htmlPrefilter(e);
              try {
                for (; n < r; n++)
                  1 === (t = this[n] || {}).nodeType &&
                    (k.cleanData(ue(t, !1)), (t.innerHTML = e));
                t = 0;
              } catch (e) {}
            }
            t && this.empty().append(e);
          },
          null,
          e,
          arguments.length
        );
      },
      replaceWith: function () {
        var n = [];
        return qe(
          this,
          arguments,
          function (e) {
            var t = this.parentNode;
            k.inArray(this, n) < 0 &&
              (k.cleanData(ue(this)), t && t.replaceChild(e, this));
          },
          n
        );
      },
    }),
    k.each(
      {
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith",
      },
      function (e, a) {
        k.fn[e] = function (e) {
          for (var t, n = [], r = k(e), i = r.length - 1, o = 0; o <= i; o++)
            (t = o === i ? this : this.clone(!0)),
              k(r[o])[a](t),
              u.apply(n, t.get());
          return this.pushStack(n);
        };
      }
    );
  var He,
    Fe,
    Oe,
    Pe,
    Re,
    Me,
    Ie = /^margin/,
    We = new RegExp("^(" + J + ")(?!px)[a-z%]+$", "i"),
    $e = function (e) {
      var t = e.ownerDocument.defaultView;
      return (t && t.opener) || (t = C), t.getComputedStyle(e);
    };
  function Be() {
    if (Me) {
      (Me.style.cssText =
        "box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%"),
        (Me.innerHTML = ""),
        he.appendChild(Re);
      var e = C.getComputedStyle(Me);
      (He = "1%" !== e.top),
        (Pe = "2px" === e.marginLeft),
        (Fe = "4px" === e.width),
        (Me.style.marginRight = "50%"),
        (Oe = "4px" === e.marginRight),
        he.removeChild(Re),
        (Me = null);
    }
  }
  function _e(e, t, n) {
    var r,
      i,
      o,
      a,
      s = e.style;
    return (
      (n = n || $e(e)) &&
        ("" !== (a = n.getPropertyValue(t) || n[t]) ||
          k.contains(e.ownerDocument, e) ||
          (a = k.style(e, t)),
        !m.pixelMarginRight() &&
          We.test(a) &&
          Ie.test(t) &&
          ((r = s.width),
          (i = s.minWidth),
          (o = s.maxWidth),
          (s.minWidth = s.maxWidth = s.width = a),
          (a = n.width),
          (s.width = r),
          (s.minWidth = i),
          (s.maxWidth = o))),
      void 0 !== a ? a + "" : a
    );
  }
  function ze(e, t) {
    return {
      get: function () {
        return e()
          ? void delete this.get
          : (this.get = t).apply(this, arguments);
      },
    };
  }
  (Re = E.createElement("div")),
    (Me = E.createElement("div")).style &&
      ((Me.style.backgroundClip = "content-box"),
      (Me.cloneNode(!0).style.backgroundClip = ""),
      (m.clearCloneStyle = "content-box" === Me.style.backgroundClip),
      (Re.style.cssText =
        "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute"),
      Re.appendChild(Me),
      k.extend(m, {
        pixelPosition: function () {
          return Be(), He;
        },
        boxSizingReliable: function () {
          return Be(), Fe;
        },
        pixelMarginRight: function () {
          return Be(), Oe;
        },
        reliableMarginLeft: function () {
          return Be(), Pe;
        },
      }));
  var Xe = /^(none|table(?!-c[ea]).+)/,
    Ue = {
      position: "absolute",
      visibility: "hidden",
      display: "block",
    },
    Ve = {
      letterSpacing: "0",
      fontWeight: "400",
    },
    Ge = ["Webkit", "Moz", "ms"],
    Ye = E.createElement("div").style;
  function Qe(e) {
    if (e in Ye) return e;
    for (var t = e[0].toUpperCase() + e.slice(1), n = Ge.length; n--; )
      if ((e = Ge[n] + t) in Ye) return e;
  }
  function Je(e, t, n) {
    var r = K.exec(t);
    return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t;
  }
  function Ke(e, t, n, r, i) {
    var o,
      a = 0;
    for (
      o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0;
      o < 4;
      o += 2
    )
      "margin" === n && (a += k.css(e, n + Z[o], !0, i)),
        r
          ? ("content" === n && (a -= k.css(e, "padding" + Z[o], !0, i)),
            "margin" !== n && (a -= k.css(e, "border" + Z[o] + "Width", !0, i)))
          : ((a += k.css(e, "padding" + Z[o], !0, i)),
            "padding" !== n &&
              (a += k.css(e, "border" + Z[o] + "Width", !0, i)));
    return a;
  }
  function Ze(e, t, n) {
    var r,
      i = !0,
      o = $e(e),
      a = "border-box" === k.css(e, "boxSizing", !1, o);
    if (
      (e.getClientRects().length && (r = e.getBoundingClientRect()[t]),
      r <= 0 || null == r)
    ) {
      if (
        (((r = _e(e, t, o)) < 0 || null == r) && (r = e.style[t]), We.test(r))
      )
        return r;
      (i = a && (m.boxSizingReliable() || r === e.style[t])),
        (r = parseFloat(r) || 0);
    }
    return r + Ke(e, t, n || (a ? "border" : "content"), i, o) + "px";
  }
  function et(e, t, n, r, i) {
    return new et.prototype.init(e, t, n, r, i);
  }
  k.extend({
    cssHooks: {
      opacity: {
        get: function (e, t) {
          if (t) {
            var n = _e(e, "opacity");
            return "" === n ? "1" : n;
          }
        },
      },
    },
    cssNumber: {
      animationIterationCount: !0,
      columnCount: !0,
      fillOpacity: !0,
      flexGrow: !0,
      flexShrink: !0,
      fontWeight: !0,
      lineHeight: !0,
      opacity: !0,
      order: !0,
      orphans: !0,
      widows: !0,
      zIndex: !0,
      zoom: !0,
    },
    cssProps: {
      float: "cssFloat",
    },
    style: function (e, t, n, r) {
      if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
        var i,
          o,
          a,
          s = k.camelCase(t),
          u = e.style;
        return (
          (t = k.cssProps[s] || (k.cssProps[s] = Qe(s) || s)),
          (a = k.cssHooks[t] || k.cssHooks[s]),
          void 0 === n
            ? a && "get" in a && void 0 !== (i = a.get(e, !1, r))
              ? i
              : u[t]
            : ("string" === (o = typeof n) &&
                (i = K.exec(n)) &&
                i[1] &&
                ((n = te(e, t, i)), (o = "number")),
              void (
                null != n &&
                n == n &&
                ("number" === o &&
                  (n += (i && i[3]) || (k.cssNumber[s] ? "" : "px")),
                m.clearCloneStyle ||
                  "" !== n ||
                  0 !== t.indexOf("background") ||
                  (u[t] = "inherit"),
                (a && "set" in a && void 0 === (n = a.set(e, n, r))) ||
                  (u[t] = n))
              ))
        );
      }
    },
    css: function (e, t, n, r) {
      var i,
        o,
        a,
        s = k.camelCase(t);
      return (
        (t = k.cssProps[s] || (k.cssProps[s] = Qe(s) || s)),
        (a = k.cssHooks[t] || k.cssHooks[s]) &&
          "get" in a &&
          (i = a.get(e, !0, n)),
        void 0 === i && (i = _e(e, t, r)),
        "normal" === i && t in Ve && (i = Ve[t]),
        "" === n || n
          ? ((o = parseFloat(i)), !0 === n || isFinite(o) ? o || 0 : i)
          : i
      );
    },
  }),
    k.each(["height", "width"], function (e, a) {
      k.cssHooks[a] = {
        get: function (e, t, n) {
          if (t)
            return !Xe.test(k.css(e, "display")) ||
              (e.getClientRects().length && e.getBoundingClientRect().width)
              ? Ze(e, a, n)
              : Q(e, Ue, function () {
                  return Ze(e, a, n);
                });
        },
        set: function (e, t, n) {
          var r,
            i = n && $e(e),
            o =
              n &&
              Ke(e, a, n, "border-box" === k.css(e, "boxSizing", !1, i), i);
          return (
            o &&
              (r = K.exec(t)) &&
              "px" !== (r[3] || "px") &&
              ((e.style[a] = t), (t = k.css(e, a))),
            Je(0, t, o)
          );
        },
      };
    }),
    (k.cssHooks.marginLeft = ze(m.reliableMarginLeft, function (e, t) {
      if (t)
        return (
          (parseFloat(_e(e, "marginLeft")) ||
            e.getBoundingClientRect().left -
              Q(
                e,
                {
                  marginLeft: 0,
                },
                function () {
                  return e.getBoundingClientRect().left;
                }
              )) + "px"
        );
    })),
    k.each(
      {
        margin: "",
        padding: "",
        border: "Width",
      },
      function (i, o) {
        (k.cssHooks[i + o] = {
          expand: function (e) {
            for (
              var t = 0, n = {}, r = "string" == typeof e ? e.split(" ") : [e];
              t < 4;
              t++
            )
              n[i + Z[t] + o] = r[t] || r[t - 2] || r[0];
            return n;
          },
        }),
          Ie.test(i) || (k.cssHooks[i + o].set = Je);
      }
    ),
    k.fn.extend({
      css: function (e, t) {
        return _(
          this,
          function (e, t, n) {
            var r,
              i,
              o = {},
              a = 0;
            if (k.isArray(t)) {
              for (r = $e(e), i = t.length; a < i; a++)
                o[t[a]] = k.css(e, t[a], !1, r);
              return o;
            }
            return void 0 !== n ? k.style(e, t, n) : k.css(e, t);
          },
          e,
          t,
          1 < arguments.length
        );
      },
    }),
    (((k.Tween = et).prototype = {
      constructor: et,
      init: function (e, t, n, r, i, o) {
        (this.elem = e),
          (this.prop = n),
          (this.easing = i || k.easing._default),
          (this.options = t),
          (this.start = this.now = this.cur()),
          (this.end = r),
          (this.unit = o || (k.cssNumber[n] ? "" : "px"));
      },
      cur: function () {
        var e = et.propHooks[this.prop];
        return e && e.get ? e.get(this) : et.propHooks._default.get(this);
      },
      run: function (e) {
        var t,
          n = et.propHooks[this.prop];
        return (
          this.options.duration
            ? (this.pos = t = k.easing[this.easing](
                e,
                this.options.duration * e,
                0,
                1,
                this.options.duration
              ))
            : (this.pos = t = e),
          (this.now = (this.end - this.start) * t + this.start),
          this.options.step &&
            this.options.step.call(this.elem, this.now, this),
          n && n.set ? n.set(this) : et.propHooks._default.set(this),
          this
        );
      },
    }).init.prototype = et.prototype),
    ((et.propHooks = {
      _default: {
        get: function (e) {
          var t;
          return 1 !== e.elem.nodeType ||
            (null != e.elem[e.prop] && null == e.elem.style[e.prop])
            ? e.elem[e.prop]
            : (t = k.css(e.elem, e.prop, "")) && "auto" !== t
            ? t
            : 0;
        },
        set: function (e) {
          k.fx.step[e.prop]
            ? k.fx.step[e.prop](e)
            : 1 !== e.elem.nodeType ||
              (null == e.elem.style[k.cssProps[e.prop]] && !k.cssHooks[e.prop])
            ? (e.elem[e.prop] = e.now)
            : k.style(e.elem, e.prop, e.now + e.unit);
        },
      },
    }).scrollTop = et.propHooks.scrollLeft = {
      set: function (e) {
        e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
      },
    }),
    (k.easing = {
      linear: function (e) {
        return e;
      },
      swing: function (e) {
        return 0.5 - Math.cos(e * Math.PI) / 2;
      },
      _default: "swing",
    }),
    (k.fx = et.prototype.init),
    (k.fx.step = {});
  var tt,
    nt,
    rt,
    it,
    ot = /^(?:toggle|show|hide)$/,
    at = /queueHooks$/;
  function st() {
    nt && (C.requestAnimationFrame(st), k.fx.tick());
  }
  function ut() {
    return (
      C.setTimeout(function () {
        tt = void 0;
      }),
      (tt = k.now())
    );
  }
  function lt(e, t) {
    var n,
      r = 0,
      i = {
        height: e,
      };
    for (t = t ? 1 : 0; r < 4; r += 2 - t)
      i["margin" + (n = Z[r])] = i["padding" + n] = e;
    return t && (i.opacity = i.width = e), i;
  }
  function ct(e, t, n) {
    for (
      var r,
        i = (ft.tweeners[t] || []).concat(ft.tweeners["*"]),
        o = 0,
        a = i.length;
      o < a;
      o++
    )
      if ((r = i[o].call(n, t, e))) return r;
  }
  function ft(o, e, t) {
    var n,
      a,
      r = 0,
      i = ft.prefilters.length,
      s = k.Deferred().always(function () {
        delete u.elem;
      }),
      u = function () {
        if (a) return !1;
        for (
          var e = tt || ut(),
            t = Math.max(0, l.startTime + l.duration - e),
            n = 1 - (t / l.duration || 0),
            r = 0,
            i = l.tweens.length;
          r < i;
          r++
        )
          l.tweens[r].run(n);
        return (
          s.notifyWith(o, [l, n, t]),
          n < 1 && i ? t : (s.resolveWith(o, [l]), !1)
        );
      },
      l = s.promise({
        elem: o,
        props: k.extend({}, e),
        opts: k.extend(
          !0,
          {
            specialEasing: {},
            easing: k.easing._default,
          },
          t
        ),
        originalProperties: e,
        originalOptions: t,
        startTime: tt || ut(),
        duration: t.duration,
        tweens: [],
        createTween: function (e, t) {
          var n = k.Tween(
            o,
            l.opts,
            e,
            t,
            l.opts.specialEasing[e] || l.opts.easing
          );
          return l.tweens.push(n), n;
        },
        stop: function (e) {
          var t = 0,
            n = e ? l.tweens.length : 0;
          if (a) return this;
          for (a = !0; t < n; t++) l.tweens[t].run(1);
          return (
            e
              ? (s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l, e]))
              : s.rejectWith(o, [l, e]),
            this
          );
        },
      }),
      c = l.props;
    for (
      (function (e, t) {
        var n, r, i, o, a;
        for (n in e)
          if (
            ((i = t[(r = k.camelCase(n))]),
            (o = e[n]),
            k.isArray(o) && ((i = o[1]), (o = e[n] = o[0])),
            n !== r && ((e[r] = o), delete e[n]),
            (a = k.cssHooks[r]) && ("expand" in a))
          )
            for (n in ((o = a.expand(o)), delete e[r], o))
              (n in e) || ((e[n] = o[n]), (t[n] = i));
          else t[r] = i;
      })(c, l.opts.specialEasing);
      r < i;
      r++
    )
      if ((n = ft.prefilters[r].call(l, o, c, l.opts)))
        return (
          k.isFunction(n.stop) &&
            (k._queueHooks(l.elem, l.opts.queue).stop = k.proxy(n.stop, n)),
          n
        );
    return (
      k.map(c, ct, l),
      k.isFunction(l.opts.start) && l.opts.start.call(o, l),
      k.fx.timer(
        k.extend(u, {
          elem: o,
          anim: l,
          queue: l.opts.queue,
        })
      ),
      l
        .progress(l.opts.progress)
        .done(l.opts.done, l.opts.complete)
        .fail(l.opts.fail)
        .always(l.opts.always)
    );
  }
  (k.Animation = k.extend(ft, {
    tweeners: {
      "*": [
        function (e, t) {
          var n = this.createTween(e, t);
          return te(n.elem, e, K.exec(t), n), n;
        },
      ],
    },
    tweener: function (e, t) {
      for (
        var n,
          r = 0,
          i = (e = k.isFunction(e) ? ((t = e), ["*"]) : e.match(O)).length;
        r < i;
        r++
      )
        (n = e[r]),
          (ft.tweeners[n] = ft.tweeners[n] || []),
          ft.tweeners[n].unshift(t);
    },
    prefilters: [
      function (e, t, n) {
        var r,
          i,
          o,
          a,
          s,
          u,
          l,
          c,
          f = "width" in t || "height" in t,
          p = this,
          d = {},
          h = e.style,
          g = e.nodeType && ee(e),
          m = X.get(e, "fxshow");
        for (r in (n.queue ||
          (null == (a = k._queueHooks(e, "fx")).unqueued &&
            ((a.unqueued = 0),
            (s = a.empty.fire),
            (a.empty.fire = function () {
              a.unqueued || s();
            })),
          a.unqueued++,
          p.always(function () {
            p.always(function () {
              a.unqueued--, k.queue(e, "fx").length || a.empty.fire();
            });
          })),
        t))
          if (((i = t[r]), ot.test(i))) {
            if (
              (delete t[r],
              (o = o || "toggle" === i),
              i === (g ? "hide" : "show"))
            ) {
              if ("show" !== i || !m || void 0 === m[r]) continue;
              g = !0;
            }
            d[r] = (m && m[r]) || k.style(e, r);
          }
        if ((u = !k.isEmptyObject(t)) || !k.isEmptyObject(d))
          for (r in (f &&
            1 === e.nodeType &&
            ((n.overflow = [h.overflow, h.overflowX, h.overflowY]),
            null == (l = m && m.display) && (l = X.get(e, "display")),
            "none" === (c = k.css(e, "display")) &&
              (l
                ? (c = l)
                : (re([e], !0),
                  (l = e.style.display || l),
                  (c = k.css(e, "display")),
                  re([e]))),
            ("inline" === c || ("inline-block" === c && null != l)) &&
              "none" === k.css(e, "float") &&
              (u ||
                (p.done(function () {
                  h.display = l;
                }),
                null == l && ((c = h.display), (l = "none" === c ? "" : c))),
              (h.display = "inline-block"))),
          n.overflow &&
            ((h.overflow = "hidden"),
            p.always(function () {
              (h.overflow = n.overflow[0]),
                (h.overflowX = n.overflow[1]),
                (h.overflowY = n.overflow[2]);
            })),
          (u = !1),
          d))
            u ||
              (m
                ? "hidden" in m && (g = m.hidden)
                : (m = X.access(e, "fxshow", {
                    display: l,
                  })),
              o && (m.hidden = !g),
              g && re([e], !0),
              p.done(function () {
                for (r in (g || re([e]), X.remove(e, "fxshow"), d))
                  k.style(e, r, d[r]);
              })),
              (u = ct(g ? m[r] : 0, r, p)),
              r in m ||
                ((m[r] = u.start), g && ((u.end = u.start), (u.start = 0)));
      },
    ],
    prefilter: function (e, t) {
      t ? ft.prefilters.unshift(e) : ft.prefilters.push(e);
    },
  })),
    (k.speed = function (e, t, n) {
      var r =
        e && "object" == typeof e
          ? k.extend({}, e)
          : {
              complete: n || (!n && t) || (k.isFunction(e) && e),
              duration: e,
              easing: (n && t) || (t && !k.isFunction(t) && t),
            };
      return (
        k.fx.off || E.hidden
          ? (r.duration = 0)
          : "number" != typeof r.duration &&
            (r.duration in k.fx.speeds
              ? (r.duration = k.fx.speeds[r.duration])
              : (r.duration = k.fx.speeds._default)),
        (null != r.queue && !0 !== r.queue) || (r.queue = "fx"),
        (r.old = r.complete),
        (r.complete = function () {
          k.isFunction(r.old) && r.old.call(this),
            r.queue && k.dequeue(this, r.queue);
        }),
        r
      );
    }),
    k.fn.extend({
      fadeTo: function (e, t, n, r) {
        return this.filter(ee).css("opacity", 0).show().end().animate(
          {
            opacity: t,
          },
          e,
          n,
          r
        );
      },
      animate: function (t, e, n, r) {
        function i() {
          var e = ft(this, k.extend({}, t), a);
          (o || X.get(this, "finish")) && e.stop(!0);
        }
        var o = k.isEmptyObject(t),
          a = k.speed(e, n, r);
        return (
          (i.finish = i),
          o || !1 === a.queue ? this.each(i) : this.queue(a.queue, i)
        );
      },
      stop: function (i, e, o) {
        function a(e) {
          var t = e.stop;
          delete e.stop, t(o);
        }
        return (
          "string" != typeof i && ((o = e), (e = i), (i = void 0)),
          e && !1 !== i && this.queue(i || "fx", []),
          this.each(function () {
            var e = !0,
              t = null != i && i + "queueHooks",
              n = k.timers,
              r = X.get(this);
            if (t) r[t] && r[t].stop && a(r[t]);
            else for (t in r) r[t] && r[t].stop && at.test(t) && a(r[t]);
            for (t = n.length; t--; )
              n[t].elem !== this ||
                (null != i && n[t].queue !== i) ||
                (n[t].anim.stop(o), (e = !1), n.splice(t, 1));
            (!e && o) || k.dequeue(this, i);
          })
        );
      },
      finish: function (a) {
        return (
          !1 !== a && (a = a || "fx"),
          this.each(function () {
            var e,
              t = X.get(this),
              n = t[a + "queue"],
              r = t[a + "queueHooks"],
              i = k.timers,
              o = n ? n.length : 0;
            for (
              t.finish = !0,
                k.queue(this, a, []),
                r && r.stop && r.stop.call(this, !0),
                e = i.length;
              e--;

            )
              i[e].elem === this &&
                i[e].queue === a &&
                (i[e].anim.stop(!0), i.splice(e, 1));
            for (e = 0; e < o; e++)
              n[e] && n[e].finish && n[e].finish.call(this);
            delete t.finish;
          })
        );
      },
    }),
    k.each(["toggle", "show", "hide"], function (e, r) {
      var i = k.fn[r];
      k.fn[r] = function (e, t, n) {
        return null == e || "boolean" == typeof e
          ? i.apply(this, arguments)
          : this.animate(lt(r, !0), e, t, n);
      };
    }),
    k.each(
      {
        slideDown: lt("show"),
        slideUp: lt("hide"),
        slideToggle: lt("toggle"),
        fadeIn: {
          opacity: "show",
        },
        fadeOut: {
          opacity: "hide",
        },
        fadeToggle: {
          opacity: "toggle",
        },
      },
      function (e, r) {
        k.fn[e] = function (e, t, n) {
          return this.animate(r, e, t, n);
        };
      }
    ),
    (k.timers = []),
    (k.fx.tick = function () {
      var e,
        t = 0,
        n = k.timers;
      for (tt = k.now(); t < n.length; t++)
        (e = n[t])() || n[t] !== e || n.splice(t--, 1);
      n.length || k.fx.stop(), (tt = void 0);
    }),
    (k.fx.timer = function (e) {
      k.timers.push(e), e() ? k.fx.start() : k.timers.pop();
    }),
    (k.fx.interval = 13),
    (k.fx.start = function () {
      nt =
        nt ||
        (C.requestAnimationFrame
          ? C.requestAnimationFrame(st)
          : C.setInterval(k.fx.tick, k.fx.interval));
    }),
    (k.fx.stop = function () {
      C.cancelAnimationFrame ? C.cancelAnimationFrame(nt) : C.clearInterval(nt),
        (nt = null);
    }),
    (k.fx.speeds = {
      slow: 600,
      fast: 200,
      _default: 400,
    }),
    (k.fn.delay = function (r, e) {
      return (
        (r = (k.fx && k.fx.speeds[r]) || r),
        (e = e || "fx"),
        this.queue(e, function (e, t) {
          var n = C.setTimeout(e, r);
          t.stop = function () {
            C.clearTimeout(n);
          };
        })
      );
    }),
    (rt = E.createElement("input")),
    (it = E.createElement("select").appendChild(E.createElement("option"))),
    (rt.type = "checkbox"),
    (m.checkOn = "" !== rt.value),
    (m.optSelected = it.selected),
    ((rt = E.createElement("input")).value = "t"),
    (rt.type = "radio"),
    (m.radioValue = "t" === rt.value);
  var pt,
    dt = k.expr.attrHandle;
  k.fn.extend({
    attr: function (e, t) {
      return _(this, k.attr, e, t, 1 < arguments.length);
    },
    removeAttr: function (e) {
      return this.each(function () {
        k.removeAttr(this, e);
      });
    },
  }),
    k.extend({
      attr: function (e, t, n) {
        var r,
          i,
          o = e.nodeType;
        if (3 !== o && 8 !== o && 2 !== o)
          return void 0 === e.getAttribute
            ? k.prop(e, t, n)
            : ((1 === o && k.isXMLDoc(e)) ||
                (i =
                  k.attrHooks[t.toLowerCase()] ||
                  (k.expr.match.bool.test(t) ? pt : void 0)),
              void 0 !== n
                ? null === n
                  ? void k.removeAttr(e, t)
                  : i && "set" in i && void 0 !== (r = i.set(e, n, t))
                  ? r
                  : (e.setAttribute(t, n + ""), n)
                : i && "get" in i && null !== (r = i.get(e, t))
                ? r
                : null == (r = k.find.attr(e, t))
                ? void 0
                : r);
      },
      attrHooks: {
        type: {
          set: function (e, t) {
            if (!m.radioValue && "radio" === t && k.nodeName(e, "input")) {
              var n = e.value;
              return e.setAttribute("type", t), n && (e.value = n), t;
            }
          },
        },
      },
      removeAttr: function (e, t) {
        var n,
          r = 0,
          i = t && t.match(O);
        if (i && 1 === e.nodeType) for (; (n = i[r++]); ) e.removeAttribute(n);
      },
    }),
    (pt = {
      set: function (e, t, n) {
        return !1 === t ? k.removeAttr(e, n) : e.setAttribute(n, n), n;
      },
    }),
    k.each(k.expr.match.bool.source.match(/\w+/g), function (e, t) {
      var a = dt[t] || k.find.attr;
      dt[t] = function (e, t, n) {
        var r,
          i,
          o = t.toLowerCase();
        return (
          n ||
            ((i = dt[o]),
            (dt[o] = r),
            (r = null != a(e, t, n) ? o : null),
            (dt[o] = i)),
          r
        );
      };
    });
  var ht = /^(?:input|select|textarea|button)$/i,
    gt = /^(?:a|area)$/i;
  function mt(e) {
    return (e.match(O) || []).join(" ");
  }
  function vt(e) {
    return (e.getAttribute && e.getAttribute("class")) || "";
  }
  k.fn.extend({
    prop: function (e, t) {
      return _(this, k.prop, e, t, 1 < arguments.length);
    },
    removeProp: function (e) {
      return this.each(function () {
        delete this[k.propFix[e] || e];
      });
    },
  }),
    k.extend({
      prop: function (e, t, n) {
        var r,
          i,
          o = e.nodeType;
        if (3 !== o && 8 !== o && 2 !== o)
          return (
            (1 === o && k.isXMLDoc(e)) ||
              ((t = k.propFix[t] || t), (i = k.propHooks[t])),
            void 0 !== n
              ? i && "set" in i && void 0 !== (r = i.set(e, n, t))
                ? r
                : (e[t] = n)
              : i && "get" in i && null !== (r = i.get(e, t))
              ? r
              : e[t]
          );
      },
      propHooks: {
        tabIndex: {
          get: function (e) {
            var t = k.find.attr(e, "tabindex");
            return t
              ? parseInt(t, 10)
              : ht.test(e.nodeName) || (gt.test(e.nodeName) && e.href)
              ? 0
              : -1;
          },
        },
      },
      propFix: {
        for: "htmlFor",
        class: "className",
      },
    }),
    m.optSelected ||
      (k.propHooks.selected = {
        get: function (e) {
          var t = e.parentNode;
          return t && t.parentNode && t.parentNode.selectedIndex, null;
        },
        set: function (e) {
          var t = e.parentNode;
          t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex);
        },
      }),
    k.each(
      [
        "tabIndex",
        "readOnly",
        "maxLength",
        "cellSpacing",
        "cellPadding",
        "rowSpan",
        "colSpan",
        "useMap",
        "frameBorder",
        "contentEditable",
      ],
      function () {
        k.propFix[this.toLowerCase()] = this;
      }
    ),
    k.fn.extend({
      addClass: function (t) {
        var e,
          n,
          r,
          i,
          o,
          a,
          s,
          u = 0;
        if (k.isFunction(t))
          return this.each(function (e) {
            k(this).addClass(t.call(this, e, vt(this)));
          });
        if ("string" == typeof t && t)
          for (e = t.match(O) || []; (n = this[u++]); )
            if (((i = vt(n)), (r = 1 === n.nodeType && " " + mt(i) + " "))) {
              for (a = 0; (o = e[a++]); )
                r.indexOf(" " + o + " ") < 0 && (r += o + " ");
              i !== (s = mt(r)) && n.setAttribute("class", s);
            }
        return this;
      },
      removeClass: function (t) {
        var e,
          n,
          r,
          i,
          o,
          a,
          s,
          u = 0;
        if (k.isFunction(t))
          return this.each(function (e) {
            k(this).removeClass(t.call(this, e, vt(this)));
          });
        if (!arguments.length) return this.attr("class", "");
        if ("string" == typeof t && t)
          for (e = t.match(O) || []; (n = this[u++]); )
            if (((i = vt(n)), (r = 1 === n.nodeType && " " + mt(i) + " "))) {
              for (a = 0; (o = e[a++]); )
                for (; -1 < r.indexOf(" " + o + " "); )
                  r = r.replace(" " + o + " ", " ");
              i !== (s = mt(r)) && n.setAttribute("class", s);
            }
        return this;
      },
      toggleClass: function (i, t) {
        var o = typeof i;
        return "boolean" == typeof t && "string" == o
          ? t
            ? this.addClass(i)
            : this.removeClass(i)
          : k.isFunction(i)
          ? this.each(function (e) {
              k(this).toggleClass(i.call(this, e, vt(this), t), t);
            })
          : this.each(function () {
              var e, t, n, r;
              if ("string" == o)
                for (t = 0, n = k(this), r = i.match(O) || []; (e = r[t++]); )
                  n.hasClass(e) ? n.removeClass(e) : n.addClass(e);
              else
                (void 0 !== i && "boolean" != o) ||
                  ((e = vt(this)) && X.set(this, "__className__", e),
                  this.setAttribute &&
                    this.setAttribute(
                      "class",
                      e || !1 === i ? "" : X.get(this, "__className__") || ""
                    ));
            });
      },
      hasClass: function (e) {
        var t,
          n,
          r = 0;
        for (t = " " + e + " "; (n = this[r++]); )
          if (1 === n.nodeType && -1 < (" " + mt(vt(n)) + " ").indexOf(t))
            return !0;
        return !1;
      },
    });
  var yt = /\r/g;
  k.fn.extend({
    val: function (n) {
      var r,
        e,
        i,
        t = this[0];
      return arguments.length
        ? ((i = k.isFunction(n)),
          this.each(function (e) {
            var t;
            1 === this.nodeType &&
              (null == (t = i ? n.call(this, e, k(this).val()) : n)
                ? (t = "")
                : "number" == typeof t
                ? (t += "")
                : k.isArray(t) &&
                  (t = k.map(t, function (e) {
                    return null == e ? "" : e + "";
                  })),
              ((r =
                k.valHooks[this.type] ||
                k.valHooks[this.nodeName.toLowerCase()]) &&
                "set" in r &&
                void 0 !== r.set(this, t, "value")) ||
                (this.value = t));
          }))
        : t
        ? (r = k.valHooks[t.type] || k.valHooks[t.nodeName.toLowerCase()]) &&
          "get" in r &&
          void 0 !== (e = r.get(t, "value"))
          ? e
          : "string" == typeof (e = t.value)
          ? e.replace(yt, "")
          : null == e
          ? ""
          : e
        : void 0;
    },
  }),
    k.extend({
      valHooks: {
        option: {
          get: function (e) {
            var t = k.find.attr(e, "value");
            return null != t ? t : mt(k.text(e));
          },
        },
        select: {
          get: function (e) {
            var t,
              n,
              r,
              i = e.options,
              o = e.selectedIndex,
              a = "select-one" === e.type,
              s = a ? null : [],
              u = a ? o + 1 : i.length;
            for (r = o < 0 ? u : a ? o : 0; r < u; r++)
              if (
                ((n = i[r]).selected || r === o) &&
                !n.disabled &&
                (!n.parentNode.disabled ||
                  !k.nodeName(n.parentNode, "optgroup"))
              ) {
                if (((t = k(n).val()), a)) return t;
                s.push(t);
              }
            return s;
          },
          set: function (e, t) {
            for (
              var n, r, i = e.options, o = k.makeArray(t), a = i.length;
              a--;

            )
              ((r = i[a]).selected =
                -1 < k.inArray(k.valHooks.option.get(r), o)) && (n = !0);
            return n || (e.selectedIndex = -1), o;
          },
        },
      },
    }),
    k.each(["radio", "checkbox"], function () {
      (k.valHooks[this] = {
        set: function (e, t) {
          if (k.isArray(t)) return (e.checked = -1 < k.inArray(k(e).val(), t));
        },
      }),
        m.checkOn ||
          (k.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value;
          });
    });
  var xt = /^(?:focusinfocus|focusoutblur)$/;
  k.extend(k.event, {
    trigger: function (e, t, n, r) {
      var i,
        o,
        a,
        s,
        u,
        l,
        c,
        f = [n || E],
        p = h.call(e, "type") ? e.type : e,
        d = h.call(e, "namespace") ? e.namespace.split(".") : [];
      if (
        ((o = a = n = n || E),
        3 !== n.nodeType &&
          8 !== n.nodeType &&
          !xt.test(p + k.event.triggered) &&
          (-1 < p.indexOf(".") && ((p = (d = p.split(".")).shift()), d.sort()),
          (u = p.indexOf(":") < 0 && "on" + p),
          ((e = e[k.expando]
            ? e
            : new k.Event(p, "object" == typeof e && e)).isTrigger = r ? 2 : 3),
          (e.namespace = d.join(".")),
          (e.rnamespace = e.namespace
            ? new RegExp("(^|\\.)" + d.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (e.result = void 0),
          e.target || (e.target = n),
          (t = null == t ? [e] : k.makeArray(t, [e])),
          (c = k.event.special[p] || {}),
          r || !c.trigger || !1 !== c.trigger.apply(n, t)))
      ) {
        if (!r && !c.noBubble && !k.isWindow(n)) {
          for (
            s = c.delegateType || p, xt.test(s + p) || (o = o.parentNode);
            o;
            o = o.parentNode
          )
            f.push(o), (a = o);
          a === (n.ownerDocument || E) &&
            f.push(a.defaultView || a.parentWindow || C);
        }
        for (i = 0; (o = f[i++]) && !e.isPropagationStopped(); )
          (e.type = 1 < i ? s : c.bindType || p),
            (l = (X.get(o, "events") || {})[e.type] && X.get(o, "handle")) &&
              l.apply(o, t),
            (l = u && o[u]) &&
              l.apply &&
              B(o) &&
              ((e.result = l.apply(o, t)),
              !1 === e.result && e.preventDefault());
        return (
          (e.type = p),
          r ||
            e.isDefaultPrevented() ||
            (c._default && !1 !== c._default.apply(f.pop(), t)) ||
            !B(n) ||
            (u &&
              k.isFunction(n[p]) &&
              !k.isWindow(n) &&
              ((a = n[u]) && (n[u] = null),
              n[(k.event.triggered = p)](),
              (k.event.triggered = void 0),
              a && (n[u] = a))),
          e.result
        );
      }
    },
    simulate: function (e, t, n) {
      var r = k.extend(new k.Event(), n, {
        type: e,
        isSimulated: !0,
      });
      k.event.trigger(r, null, t);
    },
  }),
    k.fn.extend({
      trigger: function (e, t) {
        return this.each(function () {
          k.event.trigger(e, t, this);
        });
      },
      triggerHandler: function (e, t) {
        var n = this[0];
        if (n) return k.event.trigger(e, t, n, !0);
      },
    }),
    k.each(
      "blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(
        " "
      ),
      function (e, n) {
        k.fn[n] = function (e, t) {
          return 0 < arguments.length
            ? this.on(n, null, e, t)
            : this.trigger(n);
        };
      }
    ),
    k.fn.extend({
      hover: function (e, t) {
        return this.mouseenter(e).mouseleave(t || e);
      },
    }),
    (m.focusin = "onfocusin" in C),
    m.focusin ||
      k.each(
        {
          focus: "focusin",
          blur: "focusout",
        },
        function (n, r) {
          function i(e) {
            k.event.simulate(r, e.target, k.event.fix(e));
          }
          k.event.special[r] = {
            setup: function () {
              var e = this.ownerDocument || this,
                t = X.access(e, r);
              t || e.addEventListener(n, i, !0), X.access(e, r, (t || 0) + 1);
            },
            teardown: function () {
              var e = this.ownerDocument || this,
                t = X.access(e, r) - 1;
              t
                ? X.access(e, r, t)
                : (e.removeEventListener(n, i, !0), X.remove(e, r));
            },
          };
        }
      );
  var bt = C.location,
    wt = k.now(),
    Tt = /\?/;
  k.parseXML = function (e) {
    var t;
    if (!e || "string" != typeof e) return null;
    try {
      t = new C.DOMParser().parseFromString(e, "text/xml");
    } catch (e) {
      t = void 0;
    }
    return (
      (t && !t.getElementsByTagName("parsererror").length) ||
        k.error("Invalid XML: " + e),
      t
    );
  };
  var Ct = /\[\]$/,
    Et = /\r?\n/g,
    kt = /^(?:submit|button|image|reset|file)$/i,
    Nt = /^(?:input|select|textarea|keygen)/i;
  function St(n, e, r, i) {
    var t;
    if (k.isArray(e))
      k.each(e, function (e, t) {
        r || Ct.test(n)
          ? i(n, t)
          : St(
              n + "[" + ("object" == typeof t && null != t ? e : "") + "]",
              t,
              r,
              i
            );
      });
    else if (r || "object" !== k.type(e)) i(n, e);
    else for (t in e) St(n + "[" + t + "]", e[t], r, i);
  }
  (k.param = function (e, t) {
    function n(e, t) {
      var n = k.isFunction(t) ? t() : t;
      i[i.length] =
        encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n);
    }
    var r,
      i = [];
    if (k.isArray(e) || (e.jquery && !k.isPlainObject(e)))
      k.each(e, function () {
        n(this.name, this.value);
      });
    else for (r in e) St(r, e[r], t, n);
    return i.join("&");
  }),
    k.fn.extend({
      serialize: function () {
        return k.param(this.serializeArray());
      },
      serializeArray: function () {
        return this.map(function () {
          var e = k.prop(this, "elements");
          return e ? k.makeArray(e) : this;
        })
          .filter(function () {
            var e = this.type;
            return (
              this.name &&
              !k(this).is(":disabled") &&
              Nt.test(this.nodeName) &&
              !kt.test(e) &&
              (this.checked || !ie.test(e))
            );
          })
          .map(function (e, t) {
            var n = k(this).val();
            return null == n
              ? null
              : k.isArray(n)
              ? k.map(n, function (e) {
                  return {
                    name: t.name,
                    value: e.replace(Et, "\r\n"),
                  };
                })
              : {
                  name: t.name,
                  value: n.replace(Et, "\r\n"),
                };
          })
          .get();
      },
    });
  var Dt = /%20/g,
    jt = /#.*$/,
    At = /([?&])_=[^&]*/,
    qt = /^(.*?):[ \t]*([^\r\n]*)$/gm,
    Lt = /^(?:GET|HEAD)$/,
    Ht = /^\/\//,
    Ft = {},
    Ot = {},
    Pt = "*/".concat("*"),
    Rt = E.createElement("a");
  function Mt(o) {
    return function (e, t) {
      "string" != typeof e && ((t = e), (e = "*"));
      var n,
        r = 0,
        i = e.toLowerCase().match(O) || [];
      if (k.isFunction(t))
        for (; (n = i[r++]); )
          "+" === n[0]
            ? ((n = n.slice(1) || "*"), (o[n] = o[n] || []).unshift(t))
            : (o[n] = o[n] || []).push(t);
    };
  }
  function It(t, i, o, a) {
    var s = {},
      u = t === Ot;
    function l(e) {
      var r;
      return (
        (s[e] = !0),
        k.each(t[e] || [], function (e, t) {
          var n = t(i, o, a);
          return "string" != typeof n || u || s[n]
            ? u
              ? !(r = n)
              : void 0
            : (i.dataTypes.unshift(n), l(n), !1);
        }),
        r
      );
    }
    return l(i.dataTypes[0]) || (!s["*"] && l("*"));
  }
  function Wt(e, t) {
    var n,
      r,
      i = k.ajaxSettings.flatOptions || {};
    for (n in t) void 0 !== t[n] && ((i[n] ? e : (r = r || {}))[n] = t[n]);
    return r && k.extend(!0, e, r), e;
  }
  (Rt.href = bt.href),
    k.extend({
      active: 0,
      lastModified: {},
      etag: {},
      ajaxSettings: {
        url: bt.href,
        type: "GET",
        isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(
          bt.protocol
        ),
        global: !0,
        processData: !0,
        async: !0,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        accepts: {
          "*": Pt,
          text: "text/plain",
          html: "text/html",
          xml: "application/xml, text/xml",
          json: "application/json, text/javascript",
        },
        contents: {
          xml: /\bxml\b/,
          html: /\bhtml/,
          json: /\bjson\b/,
        },
        responseFields: {
          xml: "responseXML",
          text: "responseText",
          json: "responseJSON",
        },
        converters: {
          "* text": String,
          "text html": !0,
          "text json": JSON.parse,
          "text xml": k.parseXML,
        },
        flatOptions: {
          url: !0,
          context: !0,
        },
      },
      ajaxSetup: function (e, t) {
        return t ? Wt(Wt(e, k.ajaxSettings), t) : Wt(k.ajaxSettings, e);
      },
      ajaxPrefilter: Mt(Ft),
      ajaxTransport: Mt(Ot),
      ajax: function (e, t) {
        "object" == typeof e && ((t = e), (e = void 0)), (t = t || {});
        var c,
          f,
          p,
          n,
          d,
          r,
          h,
          g,
          i,
          o,
          m = k.ajaxSetup({}, t),
          v = m.context || m,
          y = m.context && (v.nodeType || v.jquery) ? k(v) : k.event,
          x = k.Deferred(),
          b = k.Callbacks("once memory"),
          w = m.statusCode || {},
          a = {},
          s = {},
          u = "canceled",
          T = {
            readyState: 0,
            getResponseHeader: function (e) {
              var t;
              if (h) {
                if (!n)
                  for (n = {}; (t = qt.exec(p)); ) n[t[1].toLowerCase()] = t[2];
                t = n[e.toLowerCase()];
              }
              return null == t ? null : t;
            },
            getAllResponseHeaders: function () {
              return h ? p : null;
            },
            setRequestHeader: function (e, t) {
              return (
                null == h &&
                  ((e = s[e.toLowerCase()] = s[e.toLowerCase()] || e),
                  (a[e] = t)),
                this
              );
            },
            overrideMimeType: function (e) {
              return null == h && (m.mimeType = e), this;
            },
            statusCode: function (e) {
              var t;
              if (e)
                if (h) T.always(e[T.status]);
                else for (t in e) w[t] = [w[t], e[t]];
              return this;
            },
            abort: function (e) {
              var t = e || u;
              return c && c.abort(t), l(0, t), this;
            },
          };
        if (
          (x.promise(T),
          (m.url = ((e || m.url || bt.href) + "").replace(
            Ht,
            bt.protocol + "//"
          )),
          (m.type = t.method || t.type || m.method || m.type),
          (m.dataTypes = (m.dataType || "*").toLowerCase().match(O) || [""]),
          null == m.crossDomain)
        ) {
          r = E.createElement("a");
          try {
            (r.href = m.url),
              (r.href = r.href),
              (m.crossDomain =
                Rt.protocol + "//" + Rt.host != r.protocol + "//" + r.host);
          } catch (e) {
            m.crossDomain = !0;
          }
        }
        if (
          (m.data &&
            m.processData &&
            "string" != typeof m.data &&
            (m.data = k.param(m.data, m.traditional)),
          It(Ft, m, t, T),
          h)
        )
          return T;
        for (i in ((g = k.event && m.global) &&
          0 == k.active++ &&
          k.event.trigger("ajaxStart"),
        (m.type = m.type.toUpperCase()),
        (m.hasContent = !Lt.test(m.type)),
        (f = m.url.replace(jt, "")),
        m.hasContent
          ? m.data &&
            m.processData &&
            0 ===
              (m.contentType || "").indexOf(
                "application/x-www-form-urlencoded"
              ) &&
            (m.data = m.data.replace(Dt, "+"))
          : ((o = m.url.slice(f.length)),
            m.data && ((f += (Tt.test(f) ? "&" : "?") + m.data), delete m.data),
            !1 === m.cache &&
              ((f = f.replace(At, "$1")),
              (o = (Tt.test(f) ? "&" : "?") + "_=" + wt++ + o)),
            (m.url = f + o)),
        m.ifModified &&
          (k.lastModified[f] &&
            T.setRequestHeader("If-Modified-Since", k.lastModified[f]),
          k.etag[f] && T.setRequestHeader("If-None-Match", k.etag[f])),
        ((m.data && m.hasContent && !1 !== m.contentType) || t.contentType) &&
          T.setRequestHeader("Content-Type", m.contentType),
        T.setRequestHeader(
          "Accept",
          m.dataTypes[0] && m.accepts[m.dataTypes[0]]
            ? m.accepts[m.dataTypes[0]] +
                ("*" !== m.dataTypes[0] ? ", " + Pt + "; q=0.01" : "")
            : m.accepts["*"]
        ),
        m.headers))
          T.setRequestHeader(i, m.headers[i]);
        if (m.beforeSend && (!1 === m.beforeSend.call(v, T, m) || h))
          return T.abort();
        if (
          ((u = "abort"),
          b.add(m.complete),
          T.done(m.success),
          T.fail(m.error),
          (c = It(Ot, m, t, T)))
        ) {
          if (((T.readyState = 1), g && y.trigger("ajaxSend", [T, m]), h))
            return T;
          m.async &&
            0 < m.timeout &&
            (d = C.setTimeout(function () {
              T.abort("timeout");
            }, m.timeout));
          try {
            (h = !1), c.send(a, l);
          } catch (e) {
            if (h) throw e;
            l(-1, e);
          }
        } else l(-1, "No Transport");
        function l(e, t, n, r) {
          var i,
            o,
            a,
            s,
            u,
            l = t;
          h ||
            ((h = !0),
            d && C.clearTimeout(d),
            (c = void 0),
            (p = r || ""),
            (T.readyState = 0 < e ? 4 : 0),
            (i = (200 <= e && e < 300) || 304 === e),
            n &&
              (s = (function (e, t, n) {
                for (
                  var r, i, o, a, s = e.contents, u = e.dataTypes;
                  "*" === u[0];

                )
                  u.shift(),
                    void 0 === r &&
                      (r = e.mimeType || t.getResponseHeader("Content-Type"));
                if (r)
                  for (i in s)
                    if (s[i] && s[i].test(r)) {
                      u.unshift(i);
                      break;
                    }
                if (u[0] in n) o = u[0];
                else {
                  for (i in n) {
                    if (!u[0] || e.converters[i + " " + u[0]]) {
                      o = i;
                      break;
                    }
                    a = a || i;
                  }
                  o = o || a;
                }
                if (o) return o !== u[0] && u.unshift(o), n[o];
              })(m, T, n)),
            (s = (function (e, t, n, r) {
              var i,
                o,
                a,
                s,
                u,
                l = {},
                c = e.dataTypes.slice();
              if (c[1])
                for (a in e.converters) l[a.toLowerCase()] = e.converters[a];
              for (o = c.shift(); o; )
                if (
                  (e.responseFields[o] && (n[e.responseFields[o]] = t),
                  !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
                  (u = o),
                  (o = c.shift()))
                )
                  if ("*" === o) o = u;
                  else if ("*" !== u && u !== o) {
                    if (!(a = l[u + " " + o] || l["* " + o]))
                      for (i in l)
                        if (
                          (s = i.split(" "))[1] === o &&
                          (a = l[u + " " + s[0]] || l["* " + s[0]])
                        ) {
                          !0 === a
                            ? (a = l[i])
                            : !0 !== l[i] && ((o = s[0]), c.unshift(s[1]));
                          break;
                        }
                    if (!0 !== a)
                      if (a && e.throws) t = a(t);
                      else
                        try {
                          t = a(t);
                        } catch (e) {
                          return {
                            state: "parsererror",
                            error: a
                              ? e
                              : "No conversion from " + u + " to " + o,
                          };
                        }
                  }
              return {
                state: "success",
                data: t,
              };
            })(m, s, T, i)),
            i
              ? (m.ifModified &&
                  ((u = T.getResponseHeader("Last-Modified")) &&
                    (k.lastModified[f] = u),
                  (u = T.getResponseHeader("etag")) && (k.etag[f] = u)),
                204 === e || "HEAD" === m.type
                  ? (l = "nocontent")
                  : 304 === e
                  ? (l = "notmodified")
                  : ((l = s.state), (o = s.data), (i = !(a = s.error))))
              : ((a = l), (!e && l) || ((l = "error"), e < 0 && (e = 0))),
            (T.status = e),
            (T.statusText = (t || l) + ""),
            i ? x.resolveWith(v, [o, l, T]) : x.rejectWith(v, [T, l, a]),
            T.statusCode(w),
            (w = void 0),
            g && y.trigger(i ? "ajaxSuccess" : "ajaxError", [T, m, i ? o : a]),
            b.fireWith(v, [T, l]),
            g &&
              (y.trigger("ajaxComplete", [T, m]),
              --k.active || k.event.trigger("ajaxStop")));
        }
        return T;
      },
      getJSON: function (e, t, n) {
        return k.get(e, t, n, "json");
      },
      getScript: function (e, t) {
        return k.get(e, void 0, t, "script");
      },
    }),
    k.each(["get", "post"], function (e, i) {
      k[i] = function (e, t, n, r) {
        return (
          k.isFunction(t) && ((r = r || n), (n = t), (t = void 0)),
          k.ajax(
            k.extend(
              {
                url: e,
                type: i,
                dataType: r,
                data: t,
                success: n,
              },
              k.isPlainObject(e) && e
            )
          )
        );
      };
    }),
    (k._evalUrl = function (e) {
      return k.ajax({
        url: e,
        type: "GET",
        dataType: "script",
        cache: !0,
        async: !1,
        global: !1,
        throws: !0,
      });
    }),
    k.fn.extend({
      wrapAll: function (e) {
        var t;
        return (
          this[0] &&
            (k.isFunction(e) && (e = e.call(this[0])),
            (t = k(e, this[0].ownerDocument).eq(0).clone(!0)),
            this[0].parentNode && t.insertBefore(this[0]),
            t
              .map(function () {
                for (var e = this; e.firstElementChild; )
                  e = e.firstElementChild;
                return e;
              })
              .append(this)),
          this
        );
      },
      wrapInner: function (n) {
        return k.isFunction(n)
          ? this.each(function (e) {
              k(this).wrapInner(n.call(this, e));
            })
          : this.each(function () {
              var e = k(this),
                t = e.contents();
              t.length ? t.wrapAll(n) : e.append(n);
            });
      },
      wrap: function (t) {
        var n = k.isFunction(t);
        return this.each(function (e) {
          k(this).wrapAll(n ? t.call(this, e) : t);
        });
      },
      unwrap: function (e) {
        return (
          this.parent(e)
            .not("body")
            .each(function () {
              k(this).replaceWith(this.childNodes);
            }),
          this
        );
      },
    }),
    (k.expr.pseudos.hidden = function (e) {
      return !k.expr.pseudos.visible(e);
    }),
    (k.expr.pseudos.visible = function (e) {
      return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length);
    }),
    (k.ajaxSettings.xhr = function () {
      try {
        return new C.XMLHttpRequest();
      } catch (e) {}
    });
  var $t = {
      0: 200,
      1223: 204,
    },
    Bt = k.ajaxSettings.xhr();
  (m.cors = !!Bt && "withCredentials" in Bt),
    (m.ajax = Bt = !!Bt),
    k.ajaxTransport(function (i) {
      var o, a;
      if (m.cors || (Bt && !i.crossDomain))
        return {
          send: function (e, t) {
            var n,
              r = i.xhr();
            if (
              (r.open(i.type, i.url, i.async, i.username, i.password),
              i.xhrFields)
            )
              for (n in i.xhrFields) r[n] = i.xhrFields[n];
            for (n in (i.mimeType &&
              r.overrideMimeType &&
              r.overrideMimeType(i.mimeType),
            i.crossDomain ||
              e["X-Requested-With"] ||
              (e["X-Requested-With"] = "XMLHttpRequest"),
            e))
              r.setRequestHeader(n, e[n]);
            (o = function (e) {
              return function () {
                o &&
                  ((o = a = r.onload = r.onerror = r.onabort = r.onreadystatechange = null),
                  "abort" === e
                    ? r.abort()
                    : "error" === e
                    ? "number" != typeof r.status
                      ? t(0, "error")
                      : t(r.status, r.statusText)
                    : t(
                        $t[r.status] || r.status,
                        r.statusText,
                        "text" !== (r.responseType || "text") ||
                          "string" != typeof r.responseText
                          ? {
                              binary: r.response,
                            }
                          : {
                              text: r.responseText,
                            },
                        r.getAllResponseHeaders()
                      ));
              };
            }),
              (r.onload = o()),
              (a = r.onerror = o("error")),
              void 0 !== r.onabort
                ? (r.onabort = a)
                : (r.onreadystatechange = function () {
                    4 === r.readyState &&
                      C.setTimeout(function () {
                        o && a();
                      });
                  }),
              (o = o("abort"));
            try {
              r.send((i.hasContent && i.data) || null);
            } catch (e) {
              if (o) throw e;
            }
          },
          abort: function () {
            o && o();
          },
        };
    }),
    k.ajaxPrefilter(function (e) {
      e.crossDomain && (e.contents.script = !1);
    }),
    k.ajaxSetup({
      accepts: {
        script:
          "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
      },
      contents: {
        script: /\b(?:java|ecma)script\b/,
      },
      converters: {
        "text script": function (e) {
          return k.globalEval(e), e;
        },
      },
    }),
    k.ajaxPrefilter("script", function (e) {
      void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET");
    }),
    k.ajaxTransport("script", function (n) {
      var r, i;
      if (n.crossDomain)
        return {
          send: function (e, t) {
            (r = k("<script>")
              .prop({
                charset: n.scriptCharset,
                src: n.url,
              })
              .on(
                "load error",
                (i = function (e) {
                  r.remove(),
                    (i = null),
                    e && t("error" === e.type ? 404 : 200, e.type);
                })
              )),
              E.head.appendChild(r[0]);
          },
          abort: function () {
            i && i();
          },
        };
    });
  var _t,
    zt = [],
    Xt = /(=)\?(?=&|$)|\?\?/;
  function Ut(e) {
    return k.isWindow(e) ? e : 9 === e.nodeType && e.defaultView;
  }
  k.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var e = zt.pop() || k.expando + "_" + wt++;
      return (this[e] = !0), e;
    },
  }),
    k.ajaxPrefilter("json jsonp", function (e, t, n) {
      var r,
        i,
        o,
        a =
          !1 !== e.jsonp &&
          (Xt.test(e.url)
            ? "url"
            : "string" == typeof e.data &&
              0 ===
                (e.contentType || "").indexOf(
                  "application/x-www-form-urlencoded"
                ) &&
              Xt.test(e.data) &&
              "data");
      if (a || "jsonp" === e.dataTypes[0])
        return (
          (r = e.jsonpCallback = k.isFunction(e.jsonpCallback)
            ? e.jsonpCallback()
            : e.jsonpCallback),
          a
            ? (e[a] = e[a].replace(Xt, "$1" + r))
            : !1 !== e.jsonp &&
              (e.url += (Tt.test(e.url) ? "&" : "?") + e.jsonp + "=" + r),
          (e.converters["script json"] = function () {
            return o || k.error(r + " was not called"), o[0];
          }),
          (e.dataTypes[0] = "json"),
          (i = C[r]),
          (C[r] = function () {
            o = arguments;
          }),
          n.always(function () {
            void 0 === i ? k(C).removeProp(r) : (C[r] = i),
              e[r] && ((e.jsonpCallback = t.jsonpCallback), zt.push(r)),
              o && k.isFunction(i) && i(o[0]),
              (o = i = void 0);
          }),
          "script"
        );
    }),
    (m.createHTMLDocument =
      (((_t = E.implementation.createHTMLDocument("").body).innerHTML =
        "<form></form><form></form>"),
      2 === _t.childNodes.length)),
    (k.parseHTML = function (e, t, n) {
      return "string" != typeof e
        ? []
        : ("boolean" == typeof t && ((n = t), (t = !1)),
          t ||
            (m.createHTMLDocument
              ? (((r = (t = E.implementation.createHTMLDocument(
                  ""
                )).createElement("base")).href = E.location.href),
                t.head.appendChild(r))
              : (t = E)),
          (o = !n && []),
          (i = S.exec(e))
            ? [t.createElement(i[1])]
            : ((i = de([e], t, o)),
              o && o.length && k(o).remove(),
              k.merge([], i.childNodes)));
      var r, i, o;
    }),
    (k.fn.load = function (e, t, n) {
      var r,
        i,
        o,
        a = this,
        s = e.indexOf(" ");
      return (
        -1 < s && ((r = mt(e.slice(s))), (e = e.slice(0, s))),
        k.isFunction(t)
          ? ((n = t), (t = void 0))
          : t && "object" == typeof t && (i = "POST"),
        0 < a.length &&
          k
            .ajax({
              url: e,
              type: i || "GET",
              dataType: "html",
              data: t,
            })
            .done(function (e) {
              (o = arguments),
                a.html(r ? k("<div>").append(k.parseHTML(e)).find(r) : e);
            })
            .always(
              n &&
                function (e, t) {
                  a.each(function () {
                    n.apply(this, o || [e.responseText, t, e]);
                  });
                }
            ),
        this
      );
    }),
    k.each(
      [
        "ajaxStart",
        "ajaxStop",
        "ajaxComplete",
        "ajaxError",
        "ajaxSuccess",
        "ajaxSend",
      ],
      function (e, t) {
        k.fn[t] = function (e) {
          return this.on(t, e);
        };
      }
    ),
    (k.expr.pseudos.animated = function (t) {
      return k.grep(k.timers, function (e) {
        return t === e.elem;
      }).length;
    }),
    (k.offset = {
      setOffset: function (e, t, n) {
        var r,
          i,
          o,
          a,
          s,
          u,
          l = k.css(e, "position"),
          c = k(e),
          f = {};
        "static" === l && (e.style.position = "relative"),
          (s = c.offset()),
          (o = k.css(e, "top")),
          (u = k.css(e, "left")),
          (i =
            ("absolute" === l || "fixed" === l) && -1 < (o + u).indexOf("auto")
              ? ((a = (r = c.position()).top), r.left)
              : ((a = parseFloat(o) || 0), parseFloat(u) || 0)),
          k.isFunction(t) && (t = t.call(e, n, k.extend({}, s))),
          null != t.top && (f.top = t.top - s.top + a),
          null != t.left && (f.left = t.left - s.left + i),
          "using" in t ? t.using.call(e, f) : c.css(f);
      },
    }),
    k.fn.extend({
      offset: function (t) {
        if (arguments.length)
          return void 0 === t
            ? this
            : this.each(function (e) {
                k.offset.setOffset(this, t, e);
              });
        var e,
          n,
          r,
          i,
          o = this[0];
        return o
          ? o.getClientRects().length
            ? (r = o.getBoundingClientRect()).width || r.height
              ? ((n = Ut((i = o.ownerDocument))),
                (e = i.documentElement),
                {
                  top: r.top + n.pageYOffset - e.clientTop,
                  left: r.left + n.pageXOffset - e.clientLeft,
                })
              : r
            : {
                top: 0,
                left: 0,
              }
          : void 0;
      },
      position: function () {
        if (this[0]) {
          var e,
            t,
            n = this[0],
            r = {
              top: 0,
              left: 0,
            };
          return (
            "fixed" === k.css(n, "position")
              ? (t = n.getBoundingClientRect())
              : ((e = this.offsetParent()),
                (t = this.offset()),
                k.nodeName(e[0], "html") || (r = e.offset()),
                (r = {
                  top: r.top + k.css(e[0], "borderTopWidth", !0),
                  left: r.left + k.css(e[0], "borderLeftWidth", !0),
                })),
            {
              top: t.top - r.top - k.css(n, "marginTop", !0),
              left: t.left - r.left - k.css(n, "marginLeft", !0),
            }
          );
        }
      },
      offsetParent: function () {
        return this.map(function () {
          for (
            var e = this.offsetParent;
            e && "static" === k.css(e, "position");

          )
            e = e.offsetParent;
          return e || he;
        });
      },
    }),
    k.each(
      {
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset",
      },
      function (t, i) {
        var o = "pageYOffset" === i;
        k.fn[t] = function (e) {
          return _(
            this,
            function (e, t, n) {
              var r = Ut(e);
              return void 0 === n
                ? r
                  ? r[i]
                  : e[t]
                : void (r
                    ? r.scrollTo(o ? r.pageXOffset : n, o ? n : r.pageYOffset)
                    : (e[t] = n));
            },
            t,
            e,
            arguments.length
          );
        };
      }
    ),
    k.each(["top", "left"], function (e, n) {
      k.cssHooks[n] = ze(m.pixelPosition, function (e, t) {
        if (t)
          return (t = _e(e, n)), We.test(t) ? k(e).position()[n] + "px" : t;
      });
    }),
    k.each(
      {
        Height: "height",
        Width: "width",
      },
      function (a, s) {
        k.each(
          {
            padding: "inner" + a,
            content: s,
            "": "outer" + a,
          },
          function (r, o) {
            k.fn[o] = function (e, t) {
              var n = arguments.length && (r || "boolean" != typeof e),
                i = r || (!0 === e || !0 === t ? "margin" : "border");
              return _(
                this,
                function (e, t, n) {
                  var r;
                  return k.isWindow(e)
                    ? 0 === o.indexOf("outer")
                      ? e["inner" + a]
                      : e.document.documentElement["client" + a]
                    : 9 === e.nodeType
                    ? ((r = e.documentElement),
                      Math.max(
                        e.body["scroll" + a],
                        r["scroll" + a],
                        e.body["offset" + a],
                        r["offset" + a],
                        r["client" + a]
                      ))
                    : void 0 === n
                    ? k.css(e, t, i)
                    : k.style(e, t, n, i);
                },
                s,
                n ? e : void 0,
                n
              );
            };
          }
        );
      }
    ),
    k.fn.extend({
      bind: function (e, t, n) {
        return this.on(e, null, t, n);
      },
      unbind: function (e, t) {
        return this.off(e, null, t);
      },
      delegate: function (e, t, n, r) {
        return this.on(t, e, n, r);
      },
      undelegate: function (e, t, n) {
        return 1 === arguments.length
          ? this.off(e, "**")
          : this.off(t, e || "**", n);
      },
    }),
    (k.parseJSON = JSON.parse),
    "function" == typeof define &&
      define.amd &&
      define("jquery", [], function () {
        return k;
      });
  var Vt = C.jQuery,
    Gt = C.$;
  return (
    (k.noConflict = function (e) {
      return C.$ === k && (C.$ = Gt), e && C.jQuery === k && (C.jQuery = Vt), k;
    }),
    e || (C.jQuery = C.$ = k),
    k
  );
});
!(function (t) {
  "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery);
})(function (D) {
  function t() {
    (this._curInst = null),
      (this._keyEvent = !1),
      (this._disabledInputs = []),
      (this._datepickerShowing = !1),
      (this._inDialog = !1),
      (this._mainDivId = "ui-datepicker-div"),
      (this._inlineClass = "ui-datepicker-inline"),
      (this._appendClass = "ui-datepicker-append"),
      (this._triggerClass = "ui-datepicker-trigger"),
      (this._dialogClass = "ui-datepicker-dialog"),
      (this._disableClass = "ui-datepicker-disabled"),
      (this._unselectableClass = "ui-datepicker-unselectable"),
      (this._currentClass = "ui-datepicker-current-day"),
      (this._dayOverClass = "ui-datepicker-days-cell-over"),
      (this.regional = []),
      (this.regional[""] = {
        closeText: "Done",
        prevText: "Prev",
        nextText: "Next",
        currentText: "Today",
        monthNames: [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ],
        monthNamesShort: [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ],
        dayNames: [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ],
        dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
        weekHeader: "Wk",
        dateFormat: "mm/dd/yy",
        firstDay: 0,
        isRTL: !1,
        showMonthAfterYear: !1,
        yearSuffix: "",
      }),
      (this._defaults = {
        showOn: "focus",
        showAnim: "fadeIn",
        showOptions: {},
        defaultDate: null,
        appendText: "",
        buttonText: "...",
        buttonImage: "",
        buttonImageOnly: !1,
        hideIfNoPrevNext: !1,
        navigationAsDateFormat: !1,
        gotoCurrent: !1,
        changeMonth: !1,
        changeYear: !1,
        yearRange: "c-10:c+10",
        showOtherMonths: !1,
        selectOtherMonths: !1,
        showWeek: !1,
        calculateWeek: this.iso8601Week,
        shortYearCutoff: "+10",
        minDate: null,
        maxDate: null,
        duration: "fast",
        beforeShowDay: null,
        beforeShow: null,
        onSelect: null,
        onChangeMonthYear: null,
        onClose: null,
        numberOfMonths: 1,
        showCurrentAtPos: 0,
        stepMonths: 1,
        stepBigMonths: 12,
        altField: "",
        altFormat: "",
        constrainInput: !0,
        showButtonPanel: !1,
        autoSize: !1,
        disabled: !1,
      }),
      D.extend(this._defaults, this.regional[""]),
      (this.regional.en = D.extend(!0, {}, this.regional[""])),
      (this.regional["en-US"] = D.extend(!0, {}, this.regional.en)),
      (this.dpDiv = i(
        D(
          "<div id='" +
            this._mainDivId +
            "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"
        )
      ));
  }
  function i(t) {
    var e =
      "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
    return t
      .on("mouseout", e, function () {
        D(this).removeClass("ui-state-hover"),
          -1 !== this.className.indexOf("ui-datepicker-prev") &&
            D(this).removeClass("ui-datepicker-prev-hover"),
          -1 !== this.className.indexOf("ui-datepicker-next") &&
            D(this).removeClass("ui-datepicker-next-hover");
      })
      .on("mouseover", e, o);
  }
  function o() {
    D.datepicker._isDisabledDatepicker(
      _.inline ? _.dpDiv.parent()[0] : _.input[0]
    ) ||
      (D(this)
        .parents(".ui-datepicker-calendar")
        .find("a")
        .removeClass("ui-state-hover"),
      D(this).addClass("ui-state-hover"),
      -1 !== this.className.indexOf("ui-datepicker-prev") &&
        D(this).addClass("ui-datepicker-prev-hover"),
      -1 !== this.className.indexOf("ui-datepicker-next") &&
        D(this).addClass("ui-datepicker-next-hover"));
  }
  function u(t, e) {
    for (var i in (D.extend(t, e), e)) null == e[i] && (t[i] = e[i]);
    return t;
  }
  (D.ui = D.ui || {}), (D.ui.version = "1.12.1");
  var e,
    s,
    n,
    r,
    k,
    C,
    a,
    h,
    l,
    c,
    d,
    x,
    p,
    f = 0,
    g = Array.prototype.slice;
  function I(t, e, i) {
    return [
      parseFloat(t[0]) * (d.test(t[0]) ? e / 100 : 1),
      parseFloat(t[1]) * (d.test(t[1]) ? i / 100 : 1),
    ];
  }
  function P(t, e) {
    return parseInt(D.css(t, e), 10) || 0;
  }
  (D.cleanData =
    ((p = D.cleanData),
    function (t) {
      var e, i, s;
      for (s = 0; null != (i = t[s]); s++)
        try {
          (e = D._data(i, "events")) &&
            e.remove &&
            D(i).triggerHandler("remove");
        } catch (t) {}
      p(t);
    })),
    (D.widget = function (t, i, e) {
      var s,
        n,
        o,
        r = {},
        a = t.split(".")[0],
        h = a + "-" + (t = t.split(".")[1]);
      return (
        e || ((e = i), (i = D.Widget)),
        D.isArray(e) && (e = D.extend.apply(null, [{}].concat(e))),
        (D.expr[":"][h.toLowerCase()] = function (t) {
          return !!D.data(t, h);
        }),
        (D[a] = D[a] || {}),
        (s = D[a][t]),
        (n = D[a][t] = function (t, e) {
          return this._createWidget
            ? void (arguments.length && this._createWidget(t, e))
            : new n(t, e);
        }),
        D.extend(n, s, {
          version: e.version,
          _proto: D.extend({}, e),
          _childConstructors: [],
        }),
        ((o = new i()).options = D.widget.extend({}, o.options)),
        D.each(e, function (e, s) {
          return D.isFunction(s)
            ? void (r[e] = function () {
                var t,
                  e = this._super,
                  i = this._superApply;
                return (
                  (this._super = n),
                  (this._superApply = o),
                  (t = s.apply(this, arguments)),
                  (this._super = e),
                  (this._superApply = i),
                  t
                );
              })
            : void (r[e] = s);
          function n() {
            return i.prototype[e].apply(this, arguments);
          }
          function o(t) {
            return i.prototype[e].apply(this, t);
          }
        }),
        (n.prototype = D.widget.extend(
          o,
          {
            widgetEventPrefix: (s && o.widgetEventPrefix) || t,
          },
          r,
          {
            constructor: n,
            namespace: a,
            widgetName: t,
            widgetFullName: h,
          }
        )),
        s
          ? (D.each(s._childConstructors, function (t, e) {
              var i = e.prototype;
              D.widget(i.namespace + "." + i.widgetName, n, e._proto);
            }),
            delete s._childConstructors)
          : i._childConstructors.push(n),
        D.widget.bridge(t, n),
        n
      );
    }),
    (D.widget.extend = function (t) {
      for (var e, i, s = g.call(arguments, 1), n = 0, o = s.length; n < o; n++)
        for (e in s[n])
          (i = s[n][e]),
            s[n].hasOwnProperty(e) &&
              void 0 !== i &&
              (t[e] = D.isPlainObject(i)
                ? D.isPlainObject(t[e])
                  ? D.widget.extend({}, t[e], i)
                  : D.widget.extend({}, i)
                : i);
      return t;
    }),
    (D.widget.bridge = function (o, e) {
      var r = e.prototype.widgetFullName || o;
      D.fn[o] = function (i) {
        var t = "string" == typeof i,
          s = g.call(arguments, 1),
          n = this;
        return (
          t
            ? this.length || "instance" !== i
              ? this.each(function () {
                  var t,
                    e = D.data(this, r);
                  return "instance" === i
                    ? ((n = e), !1)
                    : e
                    ? D.isFunction(e[i]) && "_" !== i.charAt(0)
                      ? (t = e[i].apply(e, s)) !== e && void 0 !== t
                        ? ((n = t && t.jquery ? n.pushStack(t.get()) : t), !1)
                        : void 0
                      : D.error(
                          "no such method '" +
                            i +
                            "' for " +
                            o +
                            " widget instance"
                        )
                    : D.error(
                        "cannot call methods on " +
                          o +
                          " prior to initialization; attempted to call method '" +
                          i +
                          "'"
                      );
                })
              : (n = void 0)
            : (s.length && (i = D.widget.extend.apply(null, [i].concat(s))),
              this.each(function () {
                var t = D.data(this, r);
                t
                  ? (t.option(i || {}), t._init && t._init())
                  : D.data(this, r, new e(i, this));
              })),
          n
        );
      };
    }),
    (D.Widget = function () {}),
    (D.Widget._childConstructors = []),
    (D.Widget.prototype = {
      widgetName: "widget",
      widgetEventPrefix: "",
      defaultElement: "<div>",
      options: {
        classes: {},
        disabled: !1,
        create: null,
      },
      _createWidget: function (t, e) {
        (e = D(e || this.defaultElement || this)[0]),
          (this.element = D(e)),
          (this.uuid = f++),
          (this.eventNamespace = "." + this.widgetName + this.uuid),
          (this.bindings = D()),
          (this.hoverable = D()),
          (this.focusable = D()),
          (this.classesElementLookup = {}),
          e !== this &&
            (D.data(e, this.widgetFullName, this),
            this._on(!0, this.element, {
              remove: function (t) {
                t.target === e && this.destroy();
              },
            }),
            (this.document = D(e.style ? e.ownerDocument : e.document || e)),
            (this.window = D(
              this.document[0].defaultView || this.document[0].parentWindow
            ))),
          (this.options = D.widget.extend(
            {},
            this.options,
            this._getCreateOptions(),
            t
          )),
          this._create(),
          this.options.disabled &&
            this._setOptionDisabled(this.options.disabled),
          this._trigger("create", null, this._getCreateEventData()),
          this._init();
      },
      _getCreateOptions: function () {
        return {};
      },
      _getCreateEventData: D.noop,
      _create: D.noop,
      _init: D.noop,
      destroy: function () {
        var i = this;
        this._destroy(),
          D.each(this.classesElementLookup, function (t, e) {
            i._removeClass(e, t);
          }),
          this.element.off(this.eventNamespace).removeData(this.widgetFullName),
          this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),
          this.bindings.off(this.eventNamespace);
      },
      _destroy: D.noop,
      widget: function () {
        return this.element;
      },
      option: function (t, e) {
        var i,
          s,
          n,
          o = t;
        if (0 === arguments.length) return D.widget.extend({}, this.options);
        if ("string" == typeof t)
          if (((o = {}), (t = (i = t.split(".")).shift()), i.length)) {
            for (
              s = o[t] = D.widget.extend({}, this.options[t]), n = 0;
              i.length - 1 > n;
              n++
            )
              (s[i[n]] = s[i[n]] || {}), (s = s[i[n]]);
            if (((t = i.pop()), 1 === arguments.length))
              return void 0 === s[t] ? null : s[t];
            s[t] = e;
          } else {
            if (1 === arguments.length)
              return void 0 === this.options[t] ? null : this.options[t];
            o[t] = e;
          }
        return this._setOptions(o), this;
      },
      _setOptions: function (t) {
        var e;
        for (e in t) this._setOption(e, t[e]);
        return this;
      },
      _setOption: function (t, e) {
        return (
          "classes" === t && this._setOptionClasses(e),
          (this.options[t] = e),
          "disabled" === t && this._setOptionDisabled(e),
          this
        );
      },
      _setOptionClasses: function (t) {
        var e, i, s;
        for (e in t)
          (s = this.classesElementLookup[e]),
            t[e] !== this.options.classes[e] &&
              s &&
              s.length &&
              ((i = D(s.get())),
              this._removeClass(s, e),
              i.addClass(
                this._classes({
                  element: i,
                  keys: e,
                  classes: t,
                  add: !0,
                })
              ));
      },
      _setOptionDisabled: function (t) {
        this._toggleClass(
          this.widget(),
          this.widgetFullName + "-disabled",
          null,
          !!t
        ),
          t &&
            (this._removeClass(this.hoverable, null, "ui-state-hover"),
            this._removeClass(this.focusable, null, "ui-state-focus"));
      },
      enable: function () {
        return this._setOptions({
          disabled: !1,
        });
      },
      disable: function () {
        return this._setOptions({
          disabled: !0,
        });
      },
      _classes: function (n) {
        function t(t, e) {
          var i, s;
          for (s = 0; t.length > s; s++)
            (i = r.classesElementLookup[t[s]] || D()),
              (i = n.add
                ? D(D.unique(i.get().concat(n.element.get())))
                : D(i.not(n.element).get())),
              (r.classesElementLookup[t[s]] = i),
              o.push(t[s]),
              e && n.classes[t[s]] && o.push(n.classes[t[s]]);
        }
        var o = [],
          r = this;
        return (
          (n = D.extend(
            {
              element: this.element,
              classes: this.options.classes || {},
            },
            n
          )),
          this._on(n.element, {
            remove: "_untrackClassesElement",
          }),
          n.keys && t(n.keys.match(/\S+/g) || [], !0),
          n.extra && t(n.extra.match(/\S+/g) || []),
          o.join(" ")
        );
      },
      _untrackClassesElement: function (i) {
        var s = this;
        D.each(s.classesElementLookup, function (t, e) {
          -1 !== D.inArray(i.target, e) &&
            (s.classesElementLookup[t] = D(e.not(i.target).get()));
        });
      },
      _removeClass: function (t, e, i) {
        return this._toggleClass(t, e, i, !1);
      },
      _addClass: function (t, e, i) {
        return this._toggleClass(t, e, i, !0);
      },
      _toggleClass: function (t, e, i, s) {
        s = "boolean" == typeof s ? s : i;
        var n = "string" == typeof t || null === t,
          o = {
            extra: n ? e : i,
            keys: n ? t : e,
            element: n ? this.element : t,
            add: s,
          };
        return o.element.toggleClass(this._classes(o), s), this;
      },
      _on: function (r, a, t) {
        var h,
          l = this;
        "boolean" != typeof r && ((t = a), (a = r), (r = !1)),
          t
            ? ((a = h = D(a)), (this.bindings = this.bindings.add(a)))
            : ((t = a), (a = this.element), (h = this.widget())),
          D.each(t, function (t, e) {
            function i() {
              return r ||
                (!0 !== l.options.disabled &&
                  !D(this).hasClass("ui-state-disabled"))
                ? ("string" == typeof e ? l[e] : e).apply(l, arguments)
                : void 0;
            }
            "string" != typeof e &&
              (i.guid = e.guid = e.guid || i.guid || D.guid++);
            var s = t.match(/^([\w:-]*)\s*(.*)$/),
              n = s[1] + l.eventNamespace,
              o = s[2];
            o ? h.on(n, o, i) : a.on(n, i);
          });
      },
      _off: function (t, e) {
        (e =
          (e || "").split(" ").join(this.eventNamespace + " ") +
          this.eventNamespace),
          t.off(e).off(e),
          (this.bindings = D(this.bindings.not(t).get())),
          (this.focusable = D(this.focusable.not(t).get())),
          (this.hoverable = D(this.hoverable.not(t).get()));
      },
      _delay: function (t, e) {
        var i = this;
        return setTimeout(function () {
          return ("string" == typeof t ? i[t] : t).apply(i, arguments);
        }, e || 0);
      },
      _hoverable: function (t) {
        (this.hoverable = this.hoverable.add(t)),
          this._on(t, {
            mouseenter: function (t) {
              this._addClass(D(t.currentTarget), null, "ui-state-hover");
            },
            mouseleave: function (t) {
              this._removeClass(D(t.currentTarget), null, "ui-state-hover");
            },
          });
      },
      _focusable: function (t) {
        (this.focusable = this.focusable.add(t)),
          this._on(t, {
            focusin: function (t) {
              this._addClass(D(t.currentTarget), null, "ui-state-focus");
            },
            focusout: function (t) {
              this._removeClass(D(t.currentTarget), null, "ui-state-focus");
            },
          });
      },
      _trigger: function (t, e, i) {
        var s,
          n,
          o = this.options[t];
        if (
          ((i = i || {}),
          ((e = D.Event(e)).type = (t === this.widgetEventPrefix
            ? t
            : this.widgetEventPrefix + t
          ).toLowerCase()),
          (e.target = this.element[0]),
          (n = e.originalEvent))
        )
          for (s in n) s in e || (e[s] = n[s]);
        return (
          this.element.trigger(e, i),
          !(
            (D.isFunction(o) &&
              !1 === o.apply(this.element[0], [e].concat(i))) ||
            e.isDefaultPrevented()
          )
        );
      },
    }),
    D.each(
      {
        show: "fadeIn",
        hide: "fadeOut",
      },
      function (o, r) {
        D.Widget.prototype["_" + o] = function (e, t, i) {
          "string" == typeof t &&
            (t = {
              effect: t,
            });
          var s,
            n = t ? (!0 === t || "number" == typeof t ? r : t.effect || r) : o;
          "number" == typeof (t = t || {}) &&
            (t = {
              duration: t,
            }),
            (s = !D.isEmptyObject(t)),
            (t.complete = i),
            t.delay && e.delay(t.delay),
            s && D.effects && D.effects.effect[n]
              ? e[o](t)
              : n !== o && e[n]
              ? e[n](t.duration, t.easing, i)
              : e.queue(function (t) {
                  D(this)[o](), i && i.call(e[0]), t();
                });
        };
      }
    ),
    D.widget,
    (k = Math.max),
    (C = Math.abs),
    (a = /left|center|right/),
    (h = /top|center|bottom/),
    (l = /[\+\-]\d+(\.[\d]+)?%?/),
    (c = /^\w+/),
    (d = /%$/),
    (x = D.fn.position),
    (D.position = {
      scrollbarWidth: function () {
        if (void 0 !== r) return r;
        var t,
          e,
          i = D(
            "<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"
          ),
          s = i.children()[0];
        return (
          D("body").append(i),
          (t = s.offsetWidth),
          i.css("overflow", "scroll"),
          t === (e = s.offsetWidth) && (e = i[0].clientWidth),
          i.remove(),
          (r = t - e)
        );
      },
      getScrollInfo: function (t) {
        var e = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
          i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
          s =
            "scroll" === e ||
            ("auto" === e && t.width < t.element[0].scrollWidth);
        return {
          width:
            "scroll" === i ||
            ("auto" === i && t.height < t.element[0].scrollHeight)
              ? D.position.scrollbarWidth()
              : 0,
          height: s ? D.position.scrollbarWidth() : 0,
        };
      },
      getWithinInfo: function (t) {
        var e = D(t || window),
          i = D.isWindow(e[0]),
          s = !!e[0] && 9 === e[0].nodeType;
        return {
          element: e,
          isWindow: i,
          isDocument: s,
          offset:
            i || s
              ? {
                  left: 0,
                  top: 0,
                }
              : D(t).offset(),
          scrollLeft: e.scrollLeft(),
          scrollTop: e.scrollTop(),
          width: e.outerWidth(),
          height: e.outerHeight(),
        };
      },
    }),
    (D.fn.position = function (u) {
      if (!u || !u.of) return x.apply(this, arguments);
      u = D.extend({}, u);
      var d,
        p,
        f,
        g,
        m,
        t,
        _ = D(u.of),
        v = D.position.getWithinInfo(u.within),
        b = D.position.getScrollInfo(v),
        y = (u.collision || "flip").split(" "),
        w = {};
      return (
        (t = (function (t) {
          var e = t[0];
          return 9 === e.nodeType
            ? {
                width: t.width(),
                height: t.height(),
                offset: {
                  top: 0,
                  left: 0,
                },
              }
            : D.isWindow(e)
            ? {
                width: t.width(),
                height: t.height(),
                offset: {
                  top: t.scrollTop(),
                  left: t.scrollLeft(),
                },
              }
            : e.preventDefault
            ? {
                width: 0,
                height: 0,
                offset: {
                  top: e.pageY,
                  left: e.pageX,
                },
              }
            : {
                width: t.outerWidth(),
                height: t.outerHeight(),
                offset: t.offset(),
              };
        })(_)),
        _[0].preventDefault && (u.at = "left top"),
        (p = t.width),
        (f = t.height),
        (g = t.offset),
        (m = D.extend({}, g)),
        D.each(["my", "at"], function () {
          var t,
            e,
            i = (u[this] || "").split(" ");
          1 === i.length &&
            (i = a.test(i[0])
              ? i.concat(["center"])
              : h.test(i[0])
              ? ["center"].concat(i)
              : ["center", "center"]),
            (i[0] = a.test(i[0]) ? i[0] : "center"),
            (i[1] = h.test(i[1]) ? i[1] : "center"),
            (t = l.exec(i[0])),
            (e = l.exec(i[1])),
            (w[this] = [t ? t[0] : 0, e ? e[0] : 0]),
            (u[this] = [c.exec(i[0])[0], c.exec(i[1])[0]]);
        }),
        1 === y.length && (y[1] = y[0]),
        "right" === u.at[0]
          ? (m.left += p)
          : "center" === u.at[0] && (m.left += p / 2),
        "bottom" === u.at[1]
          ? (m.top += f)
          : "center" === u.at[1] && (m.top += f / 2),
        (d = I(w.at, p, f)),
        (m.left += d[0]),
        (m.top += d[1]),
        this.each(function () {
          var i,
            t,
            r = D(this),
            a = r.outerWidth(),
            h = r.outerHeight(),
            e = P(this, "marginLeft"),
            s = P(this, "marginTop"),
            n = a + e + P(this, "marginRight") + b.width,
            o = h + s + P(this, "marginBottom") + b.height,
            l = D.extend({}, m),
            c = I(w.my, r.outerWidth(), r.outerHeight());
          "right" === u.my[0]
            ? (l.left -= a)
            : "center" === u.my[0] && (l.left -= a / 2),
            "bottom" === u.my[1]
              ? (l.top -= h)
              : "center" === u.my[1] && (l.top -= h / 2),
            (l.left += c[0]),
            (l.top += c[1]),
            (i = {
              marginLeft: e,
              marginTop: s,
            }),
            D.each(["left", "top"], function (t, e) {
              D.ui.position[y[t]] &&
                D.ui.position[y[t]][e](l, {
                  targetWidth: p,
                  targetHeight: f,
                  elemWidth: a,
                  elemHeight: h,
                  collisionPosition: i,
                  collisionWidth: n,
                  collisionHeight: o,
                  offset: [d[0] + c[0], d[1] + c[1]],
                  my: u.my,
                  at: u.at,
                  within: v,
                  elem: r,
                });
            }),
            u.using &&
              (t = function (t) {
                var e = g.left - l.left,
                  i = e + p - a,
                  s = g.top - l.top,
                  n = s + f - h,
                  o = {
                    target: {
                      element: _,
                      left: g.left,
                      top: g.top,
                      width: p,
                      height: f,
                    },
                    element: {
                      element: r,
                      left: l.left,
                      top: l.top,
                      width: a,
                      height: h,
                    },
                    horizontal: i < 0 ? "left" : 0 < e ? "right" : "center",
                    vertical: n < 0 ? "top" : 0 < s ? "bottom" : "middle",
                  };
                p < a && p > C(e + i) && (o.horizontal = "center"),
                  f < h && f > C(s + n) && (o.vertical = "middle"),
                  (o.important =
                    k(C(e), C(i)) > k(C(s), C(n)) ? "horizontal" : "vertical"),
                  u.using.call(this, t, o);
              }),
            r.offset(
              D.extend(l, {
                using: t,
              })
            );
        })
      );
    }),
    (D.ui.position = {
      fit: {
        left: function (t, e) {
          var i,
            s = e.within,
            n = s.isWindow ? s.scrollLeft : s.offset.left,
            o = s.width,
            r = t.left - e.collisionPosition.marginLeft,
            a = n - r,
            h = r + e.collisionWidth - o - n;
          e.collisionWidth > o
            ? 0 < a && h <= 0
              ? ((i = t.left + a + e.collisionWidth - o - n), (t.left += a - i))
              : (t.left =
                  0 < h && a <= 0 ? n : h < a ? n + o - e.collisionWidth : n)
            : 0 < a
            ? (t.left += a)
            : 0 < h
            ? (t.left -= h)
            : (t.left = k(t.left - r, t.left));
        },
        top: function (t, e) {
          var i,
            s = e.within,
            n = s.isWindow ? s.scrollTop : s.offset.top,
            o = e.within.height,
            r = t.top - e.collisionPosition.marginTop,
            a = n - r,
            h = r + e.collisionHeight - o - n;
          e.collisionHeight > o
            ? 0 < a && h <= 0
              ? ((i = t.top + a + e.collisionHeight - o - n), (t.top += a - i))
              : (t.top =
                  0 < h && a <= 0 ? n : h < a ? n + o - e.collisionHeight : n)
            : 0 < a
            ? (t.top += a)
            : 0 < h
            ? (t.top -= h)
            : (t.top = k(t.top - r, t.top));
        },
      },
      flip: {
        left: function (t, e) {
          var i,
            s,
            n = e.within,
            o = n.offset.left + n.scrollLeft,
            r = n.width,
            a = n.isWindow ? n.scrollLeft : n.offset.left,
            h = t.left - e.collisionPosition.marginLeft,
            l = h - a,
            c = h + e.collisionWidth - r - a,
            u =
              "left" === e.my[0]
                ? -e.elemWidth
                : "right" === e.my[0]
                ? e.elemWidth
                : 0,
            d =
              "left" === e.at[0]
                ? e.targetWidth
                : "right" === e.at[0]
                ? -e.targetWidth
                : 0,
            p = -2 * e.offset[0];
          l < 0
            ? ((i = t.left + u + d + p + e.collisionWidth - r - o) < 0 ||
                C(l) > i) &&
              (t.left += u + d + p)
            : 0 < c &&
              (0 <
                (s = t.left - e.collisionPosition.marginLeft + u + d + p - a) ||
                c > C(s)) &&
              (t.left += u + d + p);
        },
        top: function (t, e) {
          var i,
            s,
            n = e.within,
            o = n.offset.top + n.scrollTop,
            r = n.height,
            a = n.isWindow ? n.scrollTop : n.offset.top,
            h = t.top - e.collisionPosition.marginTop,
            l = h - a,
            c = h + e.collisionHeight - r - a,
            u =
              "top" === e.my[1]
                ? -e.elemHeight
                : "bottom" === e.my[1]
                ? e.elemHeight
                : 0,
            d =
              "top" === e.at[1]
                ? e.targetHeight
                : "bottom" === e.at[1]
                ? -e.targetHeight
                : 0,
            p = -2 * e.offset[1];
          l < 0
            ? ((s = t.top + u + d + p + e.collisionHeight - r - o) < 0 ||
                C(l) > s) &&
              (t.top += u + d + p)
            : 0 < c &&
              (0 <
                (i = t.top - e.collisionPosition.marginTop + u + d + p - a) ||
                c > C(i)) &&
              (t.top += u + d + p);
        },
      },
      flipfit: {
        left: function () {
          D.ui.position.flip.left.apply(this, arguments),
            D.ui.position.fit.left.apply(this, arguments);
        },
        top: function () {
          D.ui.position.flip.top.apply(this, arguments),
            D.ui.position.fit.top.apply(this, arguments);
        },
      },
    }),
    D.ui.position,
    D.extend(D.expr[":"], {
      data: D.expr.createPseudo
        ? D.expr.createPseudo(function (e) {
            return function (t) {
              return !!D.data(t, e);
            };
          })
        : function (t, e, i) {
            return !!D.data(t, i[3]);
          },
    }),
    D.fn.extend({
      disableSelection:
        ((n =
          "onselectstart" in document.createElement("div")
            ? "selectstart"
            : "mousedown"),
        function () {
          return this.on(n + ".ui-disableSelection", function (t) {
            t.preventDefault();
          });
        }),
      enableSelection: function () {
        return this.off(".ui-disableSelection");
      },
    }),
    (D.ui.focusable = function (t, e) {
      var i,
        s,
        n,
        o,
        r,
        a = t.nodeName.toLowerCase();
      return "area" === a
        ? ((s = (i = t.parentNode).name),
          !(!t.href || !s || "map" !== i.nodeName.toLowerCase()) &&
            0 < (n = D("img[usemap='#" + s + "']")).length &&
            n.is(":visible"))
        : (/^(input|select|textarea|button|object)$/.test(a)
            ? (o = !t.disabled) &&
              (r = D(t).closest("fieldset")[0]) &&
              (o = !r.disabled)
            : (o = ("a" === a && t.href) || e),
          o &&
            D(t).is(":visible") &&
            (function (t) {
              for (var e = t.css("visibility"); "inherit" === e; )
                e = (t = t.parent()).css("visibility");
              return "hidden" !== e;
            })(D(t)));
    }),
    D.extend(D.expr[":"], {
      focusable: function (t) {
        return D.ui.focusable(t, null != D.attr(t, "tabindex"));
      },
    }),
    D.ui.focusable,
    (D.fn.form = function () {
      return "string" == typeof this[0].form
        ? this.closest("form")
        : D(this[0].form);
    }),
    (D.ui.formResetMixin = {
      _formResetHandler: function () {
        var e = D(this);
        setTimeout(function () {
          var t = e.data("ui-form-reset-instances");
          D.each(t, function () {
            this.refresh();
          });
        });
      },
      _bindFormResetHandler: function () {
        if (((this.form = this.element.form()), this.form.length)) {
          var t = this.form.data("ui-form-reset-instances") || [];
          t.length ||
            this.form.on("reset.ui-form-reset", this._formResetHandler),
            t.push(this),
            this.form.data("ui-form-reset-instances", t);
        }
      },
      _unbindFormResetHandler: function () {
        if (this.form.length) {
          var t = this.form.data("ui-form-reset-instances");
          t.splice(D.inArray(this, t), 1),
            t.length
              ? this.form.data("ui-form-reset-instances", t)
              : this.form
                  .removeData("ui-form-reset-instances")
                  .off("reset.ui-form-reset");
        }
      },
    }),
    (D.ui.keyCode = {
      BACKSPACE: 8,
      COMMA: 188,
      DELETE: 46,
      DOWN: 40,
      END: 35,
      ENTER: 13,
      ESCAPE: 27,
      HOME: 36,
      LEFT: 37,
      PAGE_DOWN: 34,
      PAGE_UP: 33,
      PERIOD: 190,
      RIGHT: 39,
      SPACE: 32,
      TAB: 9,
      UP: 38,
    }),
    (D.ui.escapeSelector =
      ((s = /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g),
      function (t) {
        return t.replace(s, "\\$1");
      })),
    (D.fn.labels = function () {
      var t, e, i, s, n;
      return this[0].labels && this[0].labels.length
        ? this.pushStack(this[0].labels)
        : ((s = this.eq(0).parents("label")),
          (i = this.attr("id")) &&
            ((n = (t = this.eq(0).parents().last()).add(
              t.length ? t.siblings() : this.siblings()
            )),
            (e = "label[for='" + D.ui.escapeSelector(i) + "']"),
            (s = s.add(n.find(e).addBack(e)))),
          this.pushStack(s));
    }),
    (D.fn.scrollParent = function (t) {
      var e = this.css("position"),
        i = "absolute" === e,
        s = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
        n = this.parents()
          .filter(function () {
            var t = D(this);
            return (
              (!i || "static" !== t.css("position")) &&
              s.test(
                t.css("overflow") + t.css("overflow-y") + t.css("overflow-x")
              )
            );
          })
          .eq(0);
      return "fixed" !== e && n.length
        ? n
        : D(this[0].ownerDocument || document);
    }),
    D.extend(D.expr[":"], {
      tabbable: function (t) {
        var e = D.attr(t, "tabindex"),
          i = null != e;
        return (!i || 0 <= e) && D.ui.focusable(t, i);
      },
    }),
    D.fn.extend({
      uniqueId:
        ((e = 0),
        function () {
          return this.each(function () {
            this.id || (this.id = "ui-id-" + ++e);
          });
        }),
      removeUniqueId: function () {
        return this.each(function () {
          /^ui-id-\d+$/.test(this.id) && D(this).removeAttr("id");
        });
      },
    }),
    (D.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()));
  var m = !1;
  D(document).on("mouseup", function () {
    m = !1;
  }),
    D.widget("ui.mouse", {
      version: "1.12.1",
      options: {
        cancel: "input, textarea, button, select, option",
        distance: 1,
        delay: 0,
      },
      _mouseInit: function () {
        var e = this;
        this.element
          .on("mousedown." + this.widgetName, function (t) {
            return e._mouseDown(t);
          })
          .on("click." + this.widgetName, function (t) {
            return !0 === D.data(t.target, e.widgetName + ".preventClickEvent")
              ? (D.removeData(t.target, e.widgetName + ".preventClickEvent"),
                t.stopImmediatePropagation(),
                !1)
              : void 0;
          }),
          (this.started = !1);
      },
      _mouseDestroy: function () {
        this.element.off("." + this.widgetName),
          this._mouseMoveDelegate &&
            this.document
              .off("mousemove." + this.widgetName, this._mouseMoveDelegate)
              .off("mouseup." + this.widgetName, this._mouseUpDelegate);
      },
      _mouseDown: function (t) {
        if (!m) {
          (this._mouseMoved = !1),
            this._mouseStarted && this._mouseUp(t),
            (this._mouseDownEvent = t);
          var e = this,
            i = 1 === t.which,
            s =
              !("string" != typeof this.options.cancel || !t.target.nodeName) &&
              D(t.target).closest(this.options.cancel).length;
          return (
            i &&
              !s &&
              this._mouseCapture(t) &&
              ((this.mouseDelayMet = !this.options.delay),
              this.mouseDelayMet ||
                (this._mouseDelayTimer = setTimeout(function () {
                  e.mouseDelayMet = !0;
                }, this.options.delay)),
              this._mouseDistanceMet(t) &&
              this._mouseDelayMet(t) &&
              ((this._mouseStarted = !1 !== this._mouseStart(t)),
              !this._mouseStarted)
                ? t.preventDefault()
                : (!0 ===
                    D.data(t.target, this.widgetName + ".preventClickEvent") &&
                    D.removeData(
                      t.target,
                      this.widgetName + ".preventClickEvent"
                    ),
                  (this._mouseMoveDelegate = function (t) {
                    return e._mouseMove(t);
                  }),
                  (this._mouseUpDelegate = function (t) {
                    return e._mouseUp(t);
                  }),
                  this.document
                    .on("mousemove." + this.widgetName, this._mouseMoveDelegate)
                    .on("mouseup." + this.widgetName, this._mouseUpDelegate),
                  t.preventDefault(),
                  (m = !0))),
            !0
          );
        }
      },
      _mouseMove: function (t) {
        if (this._mouseMoved) {
          if (
            D.ui.ie &&
            (!document.documentMode || document.documentMode < 9) &&
            !t.button
          )
            return this._mouseUp(t);
          if (!t.which)
            if (
              t.originalEvent.altKey ||
              t.originalEvent.ctrlKey ||
              t.originalEvent.metaKey ||
              t.originalEvent.shiftKey
            )
              this.ignoreMissingWhich = !0;
            else if (!this.ignoreMissingWhich) return this._mouseUp(t);
        }
        return (
          (t.which || t.button) && (this._mouseMoved = !0),
          this._mouseStarted
            ? (this._mouseDrag(t), t.preventDefault())
            : (this._mouseDistanceMet(t) &&
                this._mouseDelayMet(t) &&
                ((this._mouseStarted =
                  !1 !== this._mouseStart(this._mouseDownEvent, t)),
                this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)),
              !this._mouseStarted)
        );
      },
      _mouseUp: function (t) {
        this.document
          .off("mousemove." + this.widgetName, this._mouseMoveDelegate)
          .off("mouseup." + this.widgetName, this._mouseUpDelegate),
          this._mouseStarted &&
            ((this._mouseStarted = !1),
            t.target === this._mouseDownEvent.target &&
              D.data(t.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(t)),
          this._mouseDelayTimer &&
            (clearTimeout(this._mouseDelayTimer), delete this._mouseDelayTimer),
          (this.ignoreMissingWhich = !1),
          (m = !1),
          t.preventDefault();
      },
      _mouseDistanceMet: function (t) {
        return (
          Math.max(
            Math.abs(this._mouseDownEvent.pageX - t.pageX),
            Math.abs(this._mouseDownEvent.pageY - t.pageY)
          ) >= this.options.distance
        );
      },
      _mouseDelayMet: function () {
        return this.mouseDelayMet;
      },
      _mouseStart: function () {},
      _mouseDrag: function () {},
      _mouseStop: function () {},
      _mouseCapture: function () {
        return !0;
      },
    }),
    (D.ui.plugin = {
      add: function (t, e, i) {
        var s,
          n = D.ui[t].prototype;
        for (s in i)
          (n.plugins[s] = n.plugins[s] || []), n.plugins[s].push([e, i[s]]);
      },
      call: function (t, e, i, s) {
        var n,
          o = t.plugins[e];
        if (
          o &&
          (s ||
            (t.element[0].parentNode &&
              11 !== t.element[0].parentNode.nodeType))
        )
          for (n = 0; o.length > n; n++)
            t.options[o[n][0]] && o[n][1].apply(t.element, i);
      },
    }),
    (D.ui.safeActiveElement = function (e) {
      var i;
      try {
        i = e.activeElement;
      } catch (t) {
        i = e.body;
      }
      return (i = i || e.body).nodeName || (i = e.body), i;
    }),
    (D.ui.safeBlur = function (t) {
      t && "body" !== t.nodeName.toLowerCase() && D(t).trigger("blur");
    }),
    D.widget("ui.draggable", D.ui.mouse, {
      version: "1.12.1",
      widgetEventPrefix: "drag",
      options: {
        addClasses: !0,
        appendTo: "parent",
        axis: !1,
        connectToSortable: !1,
        containment: !1,
        cursor: "auto",
        cursorAt: !1,
        grid: !1,
        handle: !1,
        helper: "original",
        iframeFix: !1,
        opacity: !1,
        refreshPositions: !1,
        revert: !1,
        revertDuration: 500,
        scope: "default",
        scroll: !0,
        scrollSensitivity: 20,
        scrollSpeed: 20,
        snap: !1,
        snapMode: "both",
        snapTolerance: 20,
        stack: !1,
        zIndex: !1,
        drag: null,
        start: null,
        stop: null,
      },
      _create: function () {
        "original" === this.options.helper && this._setPositionRelative(),
          this.options.addClasses && this._addClass("ui-draggable"),
          this._setHandleClassName(),
          this._mouseInit();
      },
      _setOption: function (t, e) {
        this._super(t, e),
          "handle" === t &&
            (this._removeHandleClassName(), this._setHandleClassName());
      },
      _destroy: function () {
        return (this.helper || this.element).is(".ui-draggable-dragging")
          ? void (this.destroyOnClear = !0)
          : (this._removeHandleClassName(), void this._mouseDestroy());
      },
      _mouseCapture: function (t) {
        var e = this.options;
        return (
          !(
            this.helper ||
            e.disabled ||
            0 < D(t.target).closest(".ui-resizable-handle").length
          ) &&
          ((this.handle = this._getHandle(t)),
          !!this.handle &&
            (this._blurActiveElement(t),
            this._blockFrames(!0 === e.iframeFix ? "iframe" : e.iframeFix),
            !0))
        );
      },
      _blockFrames: function (t) {
        this.iframeBlocks = this.document.find(t).map(function () {
          var t = D(this);
          return D("<div>")
            .css("position", "absolute")
            .appendTo(t.parent())
            .outerWidth(t.outerWidth())
            .outerHeight(t.outerHeight())
            .offset(t.offset())[0];
        });
      },
      _unblockFrames: function () {
        this.iframeBlocks &&
          (this.iframeBlocks.remove(), delete this.iframeBlocks);
      },
      _blurActiveElement: function (t) {
        var e = D.ui.safeActiveElement(this.document[0]);
        D(t.target).closest(e).length || D.ui.safeBlur(e);
      },
      _mouseStart: function (t) {
        var e = this.options;
        return (
          (this.helper = this._createHelper(t)),
          this._addClass(this.helper, "ui-draggable-dragging"),
          this._cacheHelperProportions(),
          D.ui.ddmanager && (D.ui.ddmanager.current = this),
          this._cacheMargins(),
          (this.cssPosition = this.helper.css("position")),
          (this.scrollParent = this.helper.scrollParent(!0)),
          (this.offsetParent = this.helper.offsetParent()),
          (this.hasFixedAncestor =
            0 <
            this.helper.parents().filter(function () {
              return "fixed" === D(this).css("position");
            }).length),
          (this.positionAbs = this.element.offset()),
          this._refreshOffsets(t),
          (this.originalPosition = this.position = this._generatePosition(
            t,
            !1
          )),
          (this.originalPageX = t.pageX),
          (this.originalPageY = t.pageY),
          e.cursorAt && this._adjustOffsetFromHelper(e.cursorAt),
          this._setContainment(),
          !1 === this._trigger("start", t)
            ? (this._clear(), !1)
            : (this._cacheHelperProportions(),
              D.ui.ddmanager &&
                !e.dropBehaviour &&
                D.ui.ddmanager.prepareOffsets(this, t),
              this._mouseDrag(t, !0),
              D.ui.ddmanager && D.ui.ddmanager.dragStart(this, t),
              !0)
        );
      },
      _refreshOffsets: function (t) {
        (this.offset = {
          top: this.positionAbs.top - this.margins.top,
          left: this.positionAbs.left - this.margins.left,
          scroll: !1,
          parent: this._getParentOffset(),
          relative: this._getRelativeOffset(),
        }),
          (this.offset.click = {
            left: t.pageX - this.offset.left,
            top: t.pageY - this.offset.top,
          });
      },
      _mouseDrag: function (t, e) {
        if (
          (this.hasFixedAncestor &&
            (this.offset.parent = this._getParentOffset()),
          (this.position = this._generatePosition(t, !0)),
          (this.positionAbs = this._convertPositionTo("absolute")),
          !e)
        ) {
          var i = this._uiHash();
          if (!1 === this._trigger("drag", t, i))
            return this._mouseUp(new D.Event("mouseup", t)), !1;
          this.position = i.position;
        }
        return (
          (this.helper[0].style.left = this.position.left + "px"),
          (this.helper[0].style.top = this.position.top + "px"),
          D.ui.ddmanager && D.ui.ddmanager.drag(this, t),
          !1
        );
      },
      _mouseStop: function (t) {
        var e = this,
          i = !1;
        return (
          D.ui.ddmanager &&
            !this.options.dropBehaviour &&
            (i = D.ui.ddmanager.drop(this, t)),
          this.dropped && ((i = this.dropped), (this.dropped = !1)),
          ("invalid" === this.options.revert && !i) ||
          ("valid" === this.options.revert && i) ||
          !0 === this.options.revert ||
          (D.isFunction(this.options.revert) &&
            this.options.revert.call(this.element, i))
            ? D(this.helper).animate(
                this.originalPosition,
                parseInt(this.options.revertDuration, 10),
                function () {
                  !1 !== e._trigger("stop", t) && e._clear();
                }
              )
            : !1 !== this._trigger("stop", t) && this._clear(),
          !1
        );
      },
      _mouseUp: function (t) {
        return (
          this._unblockFrames(),
          D.ui.ddmanager && D.ui.ddmanager.dragStop(this, t),
          this.handleElement.is(t.target) && this.element.trigger("focus"),
          D.ui.mouse.prototype._mouseUp.call(this, t)
        );
      },
      cancel: function () {
        return (
          this.helper.is(".ui-draggable-dragging")
            ? this._mouseUp(
                new D.Event("mouseup", {
                  target: this.element[0],
                })
              )
            : this._clear(),
          this
        );
      },
      _getHandle: function (t) {
        return (
          !this.options.handle ||
          !!D(t.target).closest(this.element.find(this.options.handle)).length
        );
      },
      _setHandleClassName: function () {
        (this.handleElement = this.options.handle
          ? this.element.find(this.options.handle)
          : this.element),
          this._addClass(this.handleElement, "ui-draggable-handle");
      },
      _removeHandleClassName: function () {
        this._removeClass(this.handleElement, "ui-draggable-handle");
      },
      _createHelper: function (t) {
        var e = this.options,
          i = D.isFunction(e.helper),
          s = i
            ? D(e.helper.apply(this.element[0], [t]))
            : "clone" === e.helper
            ? this.element.clone().removeAttr("id")
            : this.element;
        return (
          s.parents("body").length ||
            s.appendTo(
              "parent" === e.appendTo ? this.element[0].parentNode : e.appendTo
            ),
          i && s[0] === this.element[0] && this._setPositionRelative(),
          s[0] === this.element[0] ||
            /(fixed|absolute)/.test(s.css("position")) ||
            s.css("position", "absolute"),
          s
        );
      },
      _setPositionRelative: function () {
        /^(?:r|a|f)/.test(this.element.css("position")) ||
          (this.element[0].style.position = "relative");
      },
      _adjustOffsetFromHelper: function (t) {
        "string" == typeof t && (t = t.split(" ")),
          D.isArray(t) &&
            (t = {
              left: +t[0],
              top: +t[1] || 0,
            }),
          "left" in t && (this.offset.click.left = t.left + this.margins.left),
          "right" in t &&
            (this.offset.click.left =
              this.helperProportions.width - t.right + this.margins.left),
          "top" in t && (this.offset.click.top = t.top + this.margins.top),
          "bottom" in t &&
            (this.offset.click.top =
              this.helperProportions.height - t.bottom + this.margins.top);
      },
      _isRootNode: function (t) {
        return /(html|body)/i.test(t.tagName) || t === this.document[0];
      },
      _getParentOffset: function () {
        var t = this.offsetParent.offset(),
          e = this.document[0];
        return (
          "absolute" === this.cssPosition &&
            this.scrollParent[0] !== e &&
            D.contains(this.scrollParent[0], this.offsetParent[0]) &&
            ((t.left += this.scrollParent.scrollLeft()),
            (t.top += this.scrollParent.scrollTop())),
          this._isRootNode(this.offsetParent[0]) &&
            (t = {
              top: 0,
              left: 0,
            }),
          {
            top:
              t.top +
              (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
            left:
              t.left +
              (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0),
          }
        );
      },
      _getRelativeOffset: function () {
        if ("relative" !== this.cssPosition)
          return {
            top: 0,
            left: 0,
          };
        var t = this.element.position(),
          e = this._isRootNode(this.scrollParent[0]);
        return {
          top:
            t.top -
            (parseInt(this.helper.css("top"), 10) || 0) +
            (e ? 0 : this.scrollParent.scrollTop()),
          left:
            t.left -
            (parseInt(this.helper.css("left"), 10) || 0) +
            (e ? 0 : this.scrollParent.scrollLeft()),
        };
      },
      _cacheMargins: function () {
        this.margins = {
          left: parseInt(this.element.css("marginLeft"), 10) || 0,
          top: parseInt(this.element.css("marginTop"), 10) || 0,
          right: parseInt(this.element.css("marginRight"), 10) || 0,
          bottom: parseInt(this.element.css("marginBottom"), 10) || 0,
        };
      },
      _cacheHelperProportions: function () {
        this.helperProportions = {
          width: this.helper.outerWidth(),
          height: this.helper.outerHeight(),
        };
      },
      _setContainment: function () {
        var t,
          e,
          i,
          s = this.options,
          n = this.document[0];
        return (
          (this.relativeContainer = null),
          s.containment
            ? "window" === s.containment
              ? void (this.containment = [
                  D(window).scrollLeft() -
                    this.offset.relative.left -
                    this.offset.parent.left,
                  D(window).scrollTop() -
                    this.offset.relative.top -
                    this.offset.parent.top,
                  D(window).scrollLeft() +
                    D(window).width() -
                    this.helperProportions.width -
                    this.margins.left,
                  D(window).scrollTop() +
                    (D(window).height() || n.body.parentNode.scrollHeight) -
                    this.helperProportions.height -
                    this.margins.top,
                ])
              : "document" === s.containment
              ? void (this.containment = [
                  0,
                  0,
                  D(n).width() -
                    this.helperProportions.width -
                    this.margins.left,
                  (D(n).height() || n.body.parentNode.scrollHeight) -
                    this.helperProportions.height -
                    this.margins.top,
                ])
              : s.containment.constructor === Array
              ? void (this.containment = s.containment)
              : ("parent" === s.containment &&
                  (s.containment = this.helper[0].parentNode),
                void (
                  (i = (e = D(s.containment))[0]) &&
                  ((t = /(scroll|auto)/.test(e.css("overflow"))),
                  (this.containment = [
                    (parseInt(e.css("borderLeftWidth"), 10) || 0) +
                      (parseInt(e.css("paddingLeft"), 10) || 0),
                    (parseInt(e.css("borderTopWidth"), 10) || 0) +
                      (parseInt(e.css("paddingTop"), 10) || 0),
                    (t
                      ? Math.max(i.scrollWidth, i.offsetWidth)
                      : i.offsetWidth) -
                      (parseInt(e.css("borderRightWidth"), 10) || 0) -
                      (parseInt(e.css("paddingRight"), 10) || 0) -
                      this.helperProportions.width -
                      this.margins.left -
                      this.margins.right,
                    (t
                      ? Math.max(i.scrollHeight, i.offsetHeight)
                      : i.offsetHeight) -
                      (parseInt(e.css("borderBottomWidth"), 10) || 0) -
                      (parseInt(e.css("paddingBottom"), 10) || 0) -
                      this.helperProportions.height -
                      this.margins.top -
                      this.margins.bottom,
                  ]),
                  (this.relativeContainer = e))
                ))
            : void (this.containment = null)
        );
      },
      _convertPositionTo: function (t, e) {
        e = e || this.position;
        var i = "absolute" === t ? 1 : -1,
          s = this._isRootNode(this.scrollParent[0]);
        return {
          top:
            e.top +
            this.offset.relative.top * i +
            this.offset.parent.top * i -
            ("fixed" === this.cssPosition
              ? -this.offset.scroll.top
              : s
              ? 0
              : this.offset.scroll.top) *
              i,
          left:
            e.left +
            this.offset.relative.left * i +
            this.offset.parent.left * i -
            ("fixed" === this.cssPosition
              ? -this.offset.scroll.left
              : s
              ? 0
              : this.offset.scroll.left) *
              i,
        };
      },
      _generatePosition: function (t, e) {
        var i,
          s,
          n,
          o,
          r = this.options,
          a = this._isRootNode(this.scrollParent[0]),
          h = t.pageX,
          l = t.pageY;
        return (
          (a && this.offset.scroll) ||
            (this.offset.scroll = {
              top: this.scrollParent.scrollTop(),
              left: this.scrollParent.scrollLeft(),
            }),
          e &&
            (this.containment &&
              ((i = this.relativeContainer
                ? ((s = this.relativeContainer.offset()),
                  [
                    this.containment[0] + s.left,
                    this.containment[1] + s.top,
                    this.containment[2] + s.left,
                    this.containment[3] + s.top,
                  ])
                : this.containment),
              t.pageX - this.offset.click.left < i[0] &&
                (h = i[0] + this.offset.click.left),
              t.pageY - this.offset.click.top < i[1] &&
                (l = i[1] + this.offset.click.top),
              t.pageX - this.offset.click.left > i[2] &&
                (h = i[2] + this.offset.click.left),
              t.pageY - this.offset.click.top > i[3] &&
                (l = i[3] + this.offset.click.top)),
            r.grid &&
              ((n = r.grid[1]
                ? this.originalPageY +
                  Math.round((l - this.originalPageY) / r.grid[1]) * r.grid[1]
                : this.originalPageY),
              (l = i
                ? n - this.offset.click.top >= i[1] ||
                  n - this.offset.click.top > i[3]
                  ? n
                  : n - this.offset.click.top >= i[1]
                  ? n - r.grid[1]
                  : n + r.grid[1]
                : n),
              (o = r.grid[0]
                ? this.originalPageX +
                  Math.round((h - this.originalPageX) / r.grid[0]) * r.grid[0]
                : this.originalPageX),
              (h = i
                ? o - this.offset.click.left >= i[0] ||
                  o - this.offset.click.left > i[2]
                  ? o
                  : o - this.offset.click.left >= i[0]
                  ? o - r.grid[0]
                  : o + r.grid[0]
                : o)),
            "y" === r.axis && (h = this.originalPageX),
            "x" === r.axis && (l = this.originalPageY)),
          {
            top:
              l -
              this.offset.click.top -
              this.offset.relative.top -
              this.offset.parent.top +
              ("fixed" === this.cssPosition
                ? -this.offset.scroll.top
                : a
                ? 0
                : this.offset.scroll.top),
            left:
              h -
              this.offset.click.left -
              this.offset.relative.left -
              this.offset.parent.left +
              ("fixed" === this.cssPosition
                ? -this.offset.scroll.left
                : a
                ? 0
                : this.offset.scroll.left),
          }
        );
      },
      _clear: function () {
        this._removeClass(this.helper, "ui-draggable-dragging"),
          this.helper[0] === this.element[0] ||
            this.cancelHelperRemoval ||
            this.helper.remove(),
          (this.helper = null),
          (this.cancelHelperRemoval = !1),
          this.destroyOnClear && this.destroy();
      },
      _trigger: function (t, e, i) {
        return (
          (i = i || this._uiHash()),
          D.ui.plugin.call(this, t, [e, i, this], !0),
          /^(drag|start|stop)/.test(t) &&
            ((this.positionAbs = this._convertPositionTo("absolute")),
            (i.offset = this.positionAbs)),
          D.Widget.prototype._trigger.call(this, t, e, i)
        );
      },
      plugins: {},
      _uiHash: function () {
        return {
          helper: this.helper,
          position: this.position,
          originalPosition: this.originalPosition,
          offset: this.positionAbs,
        };
      },
    }),
    D.ui.plugin.add("draggable", "connectToSortable", {
      start: function (e, t, i) {
        var s = D.extend({}, t, {
          item: i.element,
        });
        (i.sortables = []),
          D(i.options.connectToSortable).each(function () {
            var t = D(this).sortable("instance");
            t &&
              !t.options.disabled &&
              (i.sortables.push(t),
              t.refreshPositions(),
              t._trigger("activate", e, s));
          });
      },
      stop: function (e, t, i) {
        var s = D.extend({}, t, {
          item: i.element,
        });
        (i.cancelHelperRemoval = !1),
          D.each(i.sortables, function () {
            var t = this;
            t.isOver
              ? ((t.isOver = 0),
                (i.cancelHelperRemoval = !0),
                (t.cancelHelperRemoval = !1),
                (t._storedCSS = {
                  position: t.placeholder.css("position"),
                  top: t.placeholder.css("top"),
                  left: t.placeholder.css("left"),
                }),
                t._mouseStop(e),
                (t.options.helper = t.options._helper))
              : ((t.cancelHelperRemoval = !0), t._trigger("deactivate", e, s));
          });
      },
      drag: function (i, s, n) {
        D.each(n.sortables, function () {
          var t = !1,
            e = this;
          (e.positionAbs = n.positionAbs),
            (e.helperProportions = n.helperProportions),
            (e.offset.click = n.offset.click),
            e._intersectsWith(e.containerCache) &&
              ((t = !0),
              D.each(n.sortables, function () {
                return (
                  (this.positionAbs = n.positionAbs),
                  (this.helperProportions = n.helperProportions),
                  (this.offset.click = n.offset.click),
                  this !== e &&
                    this._intersectsWith(this.containerCache) &&
                    D.contains(e.element[0], this.element[0]) &&
                    (t = !1),
                  t
                );
              })),
            t
              ? (e.isOver ||
                  ((e.isOver = 1),
                  (n._parent = s.helper.parent()),
                  (e.currentItem = s.helper
                    .appendTo(e.element)
                    .data("ui-sortable-item", !0)),
                  (e.options._helper = e.options.helper),
                  (e.options.helper = function () {
                    return s.helper[0];
                  }),
                  (i.target = e.currentItem[0]),
                  e._mouseCapture(i, !0),
                  e._mouseStart(i, !0, !0),
                  (e.offset.click.top = n.offset.click.top),
                  (e.offset.click.left = n.offset.click.left),
                  (e.offset.parent.left -=
                    n.offset.parent.left - e.offset.parent.left),
                  (e.offset.parent.top -=
                    n.offset.parent.top - e.offset.parent.top),
                  n._trigger("toSortable", i),
                  (n.dropped = e.element),
                  D.each(n.sortables, function () {
                    this.refreshPositions();
                  }),
                  (n.currentItem = n.element),
                  (e.fromOutside = n)),
                e.currentItem && (e._mouseDrag(i), (s.position = e.position)))
              : e.isOver &&
                ((e.isOver = 0),
                (e.cancelHelperRemoval = !0),
                (e.options._revert = e.options.revert),
                (e.options.revert = !1),
                e._trigger("out", i, e._uiHash(e)),
                e._mouseStop(i, !0),
                (e.options.revert = e.options._revert),
                (e.options.helper = e.options._helper),
                e.placeholder && e.placeholder.remove(),
                s.helper.appendTo(n._parent),
                n._refreshOffsets(i),
                (s.position = n._generatePosition(i, !0)),
                n._trigger("fromSortable", i),
                (n.dropped = !1),
                D.each(n.sortables, function () {
                  this.refreshPositions();
                }));
        });
      },
    }),
    D.ui.plugin.add("draggable", "cursor", {
      start: function (t, e, i) {
        var s = D("body"),
          n = i.options;
        s.css("cursor") && (n._cursor = s.css("cursor")),
          s.css("cursor", n.cursor);
      },
      stop: function (t, e, i) {
        var s = i.options;
        s._cursor && D("body").css("cursor", s._cursor);
      },
    }),
    D.ui.plugin.add("draggable", "opacity", {
      start: function (t, e, i) {
        var s = D(e.helper),
          n = i.options;
        s.css("opacity") && (n._opacity = s.css("opacity")),
          s.css("opacity", n.opacity);
      },
      stop: function (t, e, i) {
        var s = i.options;
        s._opacity && D(e.helper).css("opacity", s._opacity);
      },
    }),
    D.ui.plugin.add("draggable", "scroll", {
      start: function (t, e, i) {
        i.scrollParentNotHidden ||
          (i.scrollParentNotHidden = i.helper.scrollParent(!1)),
          i.scrollParentNotHidden[0] !== i.document[0] &&
            "HTML" !== i.scrollParentNotHidden[0].tagName &&
            (i.overflowOffset = i.scrollParentNotHidden.offset());
      },
      drag: function (t, e, i) {
        var s = i.options,
          n = !1,
          o = i.scrollParentNotHidden[0],
          r = i.document[0];
        o !== r && "HTML" !== o.tagName
          ? ((s.axis && "x" === s.axis) ||
              (i.overflowOffset.top + o.offsetHeight - t.pageY <
              s.scrollSensitivity
                ? (o.scrollTop = n = o.scrollTop + s.scrollSpeed)
                : t.pageY - i.overflowOffset.top < s.scrollSensitivity &&
                  (o.scrollTop = n = o.scrollTop - s.scrollSpeed)),
            (s.axis && "y" === s.axis) ||
              (i.overflowOffset.left + o.offsetWidth - t.pageX <
              s.scrollSensitivity
                ? (o.scrollLeft = n = o.scrollLeft + s.scrollSpeed)
                : t.pageX - i.overflowOffset.left < s.scrollSensitivity &&
                  (o.scrollLeft = n = o.scrollLeft - s.scrollSpeed)))
          : ((s.axis && "x" === s.axis) ||
              (t.pageY - D(r).scrollTop() < s.scrollSensitivity
                ? (n = D(r).scrollTop(D(r).scrollTop() - s.scrollSpeed))
                : D(window).height() - (t.pageY - D(r).scrollTop()) <
                    s.scrollSensitivity &&
                  (n = D(r).scrollTop(D(r).scrollTop() + s.scrollSpeed))),
            (s.axis && "y" === s.axis) ||
              (t.pageX - D(r).scrollLeft() < s.scrollSensitivity
                ? (n = D(r).scrollLeft(D(r).scrollLeft() - s.scrollSpeed))
                : D(window).width() - (t.pageX - D(r).scrollLeft()) <
                    s.scrollSensitivity &&
                  (n = D(r).scrollLeft(D(r).scrollLeft() + s.scrollSpeed)))),
          !1 !== n &&
            D.ui.ddmanager &&
            !s.dropBehaviour &&
            D.ui.ddmanager.prepareOffsets(i, t);
      },
    }),
    D.ui.plugin.add("draggable", "snap", {
      start: function (t, e, i) {
        var s = i.options;
        (i.snapElements = []),
          D(
            s.snap.constructor !== String
              ? s.snap.items || ":data(ui-draggable)"
              : s.snap
          ).each(function () {
            var t = D(this),
              e = t.offset();
            this !== i.element[0] &&
              i.snapElements.push({
                item: this,
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: e.top,
                left: e.left,
              });
          });
      },
      drag: function (t, e, i) {
        var s,
          n,
          o,
          r,
          a,
          h,
          l,
          c,
          u,
          d,
          p = i.options,
          f = p.snapTolerance,
          g = e.offset.left,
          m = g + i.helperProportions.width,
          _ = e.offset.top,
          v = _ + i.helperProportions.height;
        for (u = i.snapElements.length - 1; 0 <= u; u--)
          (h =
            (a = i.snapElements[u].left - i.margins.left) +
            i.snapElements[u].width),
            (c =
              (l = i.snapElements[u].top - i.margins.top) +
              i.snapElements[u].height),
            m < a - f ||
            h + f < g ||
            v < l - f ||
            c + f < _ ||
            !D.contains(
              i.snapElements[u].item.ownerDocument,
              i.snapElements[u].item
            )
              ? (i.snapElements[u].snapping &&
                  i.options.snap.release &&
                  i.options.snap.release.call(
                    i.element,
                    t,
                    D.extend(i._uiHash(), {
                      snapItem: i.snapElements[u].item,
                    })
                  ),
                (i.snapElements[u].snapping = !1))
              : ("inner" !== p.snapMode &&
                  ((s = f >= Math.abs(l - v)),
                  (n = f >= Math.abs(c - _)),
                  (o = f >= Math.abs(a - m)),
                  (r = f >= Math.abs(h - g)),
                  s &&
                    (e.position.top = i._convertPositionTo("relative", {
                      top: l - i.helperProportions.height,
                      left: 0,
                    }).top),
                  n &&
                    (e.position.top = i._convertPositionTo("relative", {
                      top: c,
                      left: 0,
                    }).top),
                  o &&
                    (e.position.left = i._convertPositionTo("relative", {
                      top: 0,
                      left: a - i.helperProportions.width,
                    }).left),
                  r &&
                    (e.position.left = i._convertPositionTo("relative", {
                      top: 0,
                      left: h,
                    }).left)),
                (d = s || n || o || r),
                "outer" !== p.snapMode &&
                  ((s = f >= Math.abs(l - _)),
                  (n = f >= Math.abs(c - v)),
                  (o = f >= Math.abs(a - g)),
                  (r = f >= Math.abs(h - m)),
                  s &&
                    (e.position.top = i._convertPositionTo("relative", {
                      top: l,
                      left: 0,
                    }).top),
                  n &&
                    (e.position.top = i._convertPositionTo("relative", {
                      top: c - i.helperProportions.height,
                      left: 0,
                    }).top),
                  o &&
                    (e.position.left = i._convertPositionTo("relative", {
                      top: 0,
                      left: a,
                    }).left),
                  r &&
                    (e.position.left = i._convertPositionTo("relative", {
                      top: 0,
                      left: h - i.helperProportions.width,
                    }).left)),
                !i.snapElements[u].snapping &&
                  (s || n || o || r || d) &&
                  i.options.snap.snap &&
                  i.options.snap.snap.call(
                    i.element,
                    t,
                    D.extend(i._uiHash(), {
                      snapItem: i.snapElements[u].item,
                    })
                  ),
                (i.snapElements[u].snapping = s || n || o || r || d));
      },
    }),
    D.ui.plugin.add("draggable", "stack", {
      start: function (t, e, i) {
        var s,
          n = i.options,
          o = D.makeArray(D(n.stack)).sort(function (t, e) {
            return (
              (parseInt(D(t).css("zIndex"), 10) || 0) -
              (parseInt(D(e).css("zIndex"), 10) || 0)
            );
          });
        o.length &&
          ((s = parseInt(D(o[0]).css("zIndex"), 10) || 0),
          D(o).each(function (t) {
            D(this).css("zIndex", s + t);
          }),
          this.css("zIndex", s + o.length));
      },
    }),
    D.ui.plugin.add("draggable", "zIndex", {
      start: function (t, e, i) {
        var s = D(e.helper),
          n = i.options;
        s.css("zIndex") && (n._zIndex = s.css("zIndex")),
          s.css("zIndex", n.zIndex);
      },
      stop: function (t, e, i) {
        var s = i.options;
        s._zIndex && D(e.helper).css("zIndex", s._zIndex);
      },
    }),
    D.ui.draggable,
    D.widget("ui.droppable", {
      version: "1.12.1",
      widgetEventPrefix: "drop",
      options: {
        accept: "*",
        addClasses: !0,
        greedy: !1,
        scope: "default",
        tolerance: "intersect",
        activate: null,
        deactivate: null,
        drop: null,
        out: null,
        over: null,
      },
      _create: function () {
        var t,
          e = this.options,
          i = e.accept;
        (this.isover = !1),
          (this.isout = !0),
          (this.accept = D.isFunction(i)
            ? i
            : function (t) {
                return t.is(i);
              }),
          (this.proportions = function () {
            return arguments.length
              ? void (t = arguments[0])
              : t ||
                  (t = {
                    width: this.element[0].offsetWidth,
                    height: this.element[0].offsetHeight,
                  });
          }),
          this._addToManager(e.scope),
          e.addClasses && this._addClass("ui-droppable");
      },
      _addToManager: function (t) {
        (D.ui.ddmanager.droppables[t] = D.ui.ddmanager.droppables[t] || []),
          D.ui.ddmanager.droppables[t].push(this);
      },
      _splice: function (t) {
        for (var e = 0; t.length > e; e++) t[e] === this && t.splice(e, 1);
      },
      _destroy: function () {
        var t = D.ui.ddmanager.droppables[this.options.scope];
        this._splice(t);
      },
      _setOption: function (t, e) {
        if ("accept" === t)
          this.accept = D.isFunction(e)
            ? e
            : function (t) {
                return t.is(e);
              };
        else if ("scope" === t) {
          var i = D.ui.ddmanager.droppables[this.options.scope];
          this._splice(i), this._addToManager(e);
        }
        this._super(t, e);
      },
      _activate: function (t) {
        var e = D.ui.ddmanager.current;
        this._addActiveClass(), e && this._trigger("activate", t, this.ui(e));
      },
      _deactivate: function (t) {
        var e = D.ui.ddmanager.current;
        this._removeActiveClass(),
          e && this._trigger("deactivate", t, this.ui(e));
      },
      _over: function (t) {
        var e = D.ui.ddmanager.current;
        e &&
          (e.currentItem || e.element)[0] !== this.element[0] &&
          this.accept.call(this.element[0], e.currentItem || e.element) &&
          (this._addHoverClass(), this._trigger("over", t, this.ui(e)));
      },
      _out: function (t) {
        var e = D.ui.ddmanager.current;
        e &&
          (e.currentItem || e.element)[0] !== this.element[0] &&
          this.accept.call(this.element[0], e.currentItem || e.element) &&
          (this._removeHoverClass(), this._trigger("out", t, this.ui(e)));
      },
      _drop: function (e, t) {
        var i = t || D.ui.ddmanager.current,
          s = !1;
        return (
          !(!i || (i.currentItem || i.element)[0] === this.element[0]) &&
          (this.element
            .find(":data(ui-droppable)")
            .not(".ui-draggable-dragging")
            .each(function () {
              var t = D(this).droppable("instance");
              return t.options.greedy &&
                !t.options.disabled &&
                t.options.scope === i.options.scope &&
                t.accept.call(t.element[0], i.currentItem || i.element) &&
                v(
                  i,
                  D.extend(t, {
                    offset: t.element.offset(),
                  }),
                  t.options.tolerance,
                  e
                )
                ? !(s = !0)
                : void 0;
            }),
          !s &&
            !!this.accept.call(this.element[0], i.currentItem || i.element) &&
            (this._removeActiveClass(),
            this._removeHoverClass(),
            this._trigger("drop", e, this.ui(i)),
            this.element))
        );
      },
      ui: function (t) {
        return {
          draggable: t.currentItem || t.element,
          helper: t.helper,
          position: t.position,
          offset: t.positionAbs,
        };
      },
      _addHoverClass: function () {
        this._addClass("ui-droppable-hover");
      },
      _removeHoverClass: function () {
        this._removeClass("ui-droppable-hover");
      },
      _addActiveClass: function () {
        this._addClass("ui-droppable-active");
      },
      _removeActiveClass: function () {
        this._removeClass("ui-droppable-active");
      },
    });
  var _,
    v = (D.ui.intersect = function (t, e, i, s) {
      if (!e.offset) return !1;
      var n = (t.positionAbs || t.position.absolute).left + t.margins.left,
        o = (t.positionAbs || t.position.absolute).top + t.margins.top,
        r = n + t.helperProportions.width,
        a = o + t.helperProportions.height,
        h = e.offset.left,
        l = e.offset.top,
        c = h + e.proportions().width,
        u = l + e.proportions().height;
      switch (i) {
        case "fit":
          return h <= n && r <= c && l <= o && a <= u;
        case "intersect":
          return (
            n + t.helperProportions.width / 2 > h &&
            c > r - t.helperProportions.width / 2 &&
            o + t.helperProportions.height / 2 > l &&
            u > a - t.helperProportions.height / 2
          );
        case "pointer":
          return (
            b(s.pageY, l, e.proportions().height) &&
            b(s.pageX, h, e.proportions().width)
          );
        case "touch":
          return (
            ((l <= o && o <= u) || (l <= a && a <= u) || (o < l && u < a)) &&
            ((h <= n && n <= c) || (h <= r && r <= c) || (n < h && c < r))
          );
        default:
          return !1;
      }
    });
  function b(t, e, i) {
    return e <= t && t < e + i;
  }
  !(D.ui.ddmanager = {
    current: null,
    droppables: {
      default: [],
    },
    prepareOffsets: function (t, e) {
      var i,
        s,
        n = D.ui.ddmanager.droppables[t.options.scope] || [],
        o = e ? e.type : null,
        r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
      t: for (i = 0; n.length > i; i++)
        if (
          !(
            n[i].options.disabled ||
            (t &&
              !n[i].accept.call(n[i].element[0], t.currentItem || t.element))
          )
        ) {
          for (s = 0; r.length > s; s++)
            if (r[s] === n[i].element[0]) {
              n[i].proportions().height = 0;
              continue t;
            }
          (n[i].visible = "none" !== n[i].element.css("display")),
            n[i].visible &&
              ("mousedown" === o && n[i]._activate.call(n[i], e),
              (n[i].offset = n[i].element.offset()),
              n[i].proportions({
                width: n[i].element[0].offsetWidth,
                height: n[i].element[0].offsetHeight,
              }));
        }
    },
    drop: function (t, e) {
      var i = !1;
      return (
        D.each(
          (D.ui.ddmanager.droppables[t.options.scope] || []).slice(),
          function () {
            this.options &&
              (!this.options.disabled &&
                this.visible &&
                v(t, this, this.options.tolerance, e) &&
                (i = this._drop.call(this, e) || i),
              !this.options.disabled &&
                this.visible &&
                this.accept.call(this.element[0], t.currentItem || t.element) &&
                ((this.isout = !0),
                (this.isover = !1),
                this._deactivate.call(this, e)));
          }
        ),
        i
      );
    },
    dragStart: function (t, e) {
      t.element.parentsUntil("body").on("scroll.droppable", function () {
        t.options.refreshPositions || D.ui.ddmanager.prepareOffsets(t, e);
      });
    },
    drag: function (o, r) {
      o.options.refreshPositions && D.ui.ddmanager.prepareOffsets(o, r),
        D.each(D.ui.ddmanager.droppables[o.options.scope] || [], function () {
          if (!this.options.disabled && !this.greedyChild && this.visible) {
            var t,
              e,
              i,
              s = v(o, this, this.options.tolerance, r),
              n =
                !s && this.isover
                  ? "isout"
                  : s && !this.isover
                  ? "isover"
                  : null;
            n &&
              (this.options.greedy &&
                ((e = this.options.scope),
                (i = this.element
                  .parents(":data(ui-droppable)")
                  .filter(function () {
                    return D(this).droppable("instance").options.scope === e;
                  })).length &&
                  ((t = D(i[0]).droppable("instance")).greedyChild =
                    "isover" === n)),
              t &&
                "isover" === n &&
                ((t.isover = !1), (t.isout = !0), t._out.call(t, r)),
              (this[n] = !0),
              (this["isout" === n ? "isover" : "isout"] = !1),
              this["isover" === n ? "_over" : "_out"].call(this, r),
              t &&
                "isout" === n &&
                ((t.isout = !1), (t.isover = !0), t._over.call(t, r)));
          }
        });
    },
    dragStop: function (t, e) {
      t.element.parentsUntil("body").off("scroll.droppable"),
        t.options.refreshPositions || D.ui.ddmanager.prepareOffsets(t, e);
    },
  }) !== D.uiBackCompat &&
    D.widget("ui.droppable", D.ui.droppable, {
      options: {
        hoverClass: !1,
        activeClass: !1,
      },
      _addActiveClass: function () {
        this._super(),
          this.options.activeClass &&
            this.element.addClass(this.options.activeClass);
      },
      _removeActiveClass: function () {
        this._super(),
          this.options.activeClass &&
            this.element.removeClass(this.options.activeClass);
      },
      _addHoverClass: function () {
        this._super(),
          this.options.hoverClass &&
            this.element.addClass(this.options.hoverClass);
      },
      _removeHoverClass: function () {
        this._super(),
          this.options.hoverClass &&
            this.element.removeClass(this.options.hoverClass);
      },
    }),
    D.ui.droppable,
    D.widget("ui.resizable", D.ui.mouse, {
      version: "1.12.1",
      widgetEventPrefix: "resize",
      options: {
        alsoResize: !1,
        animate: !1,
        animateDuration: "slow",
        animateEasing: "swing",
        aspectRatio: !1,
        autoHide: !1,
        classes: {
          "ui-resizable-se": "ui-icon ui-icon-gripsmall-diagonal-se",
        },
        containment: !1,
        ghost: !1,
        grid: !1,
        handles: "e,s,se",
        helper: !1,
        maxHeight: null,
        maxWidth: null,
        minHeight: 10,
        minWidth: 10,
        zIndex: 90,
        resize: null,
        start: null,
        stop: null,
      },
      _num: function (t) {
        return parseFloat(t) || 0;
      },
      _isNumber: function (t) {
        return !isNaN(parseFloat(t));
      },
      _hasScroll: function (t, e) {
        if ("hidden" === D(t).css("overflow")) return !1;
        var i = e && "left" === e ? "scrollLeft" : "scrollTop",
          s = !1;
        return 0 < t[i] || ((t[i] = 1), (s = 0 < t[i]), (t[i] = 0), s);
      },
      _create: function () {
        var t,
          e = this.options,
          i = this;
        this._addClass("ui-resizable"),
          D.extend(this, {
            _aspectRatio: !!e.aspectRatio,
            aspectRatio: e.aspectRatio,
            originalElement: this.element,
            _proportionallyResizeElements: [],
            _helper:
              e.helper || e.ghost || e.animate
                ? e.helper || "ui-resizable-helper"
                : null,
          }),
          this.element[0].nodeName.match(
            /^(canvas|textarea|input|select|button|img)$/i
          ) &&
            (this.element.wrap(
              D("<div class='ui-wrapper' style='overflow: hidden;'></div>").css(
                {
                  position: this.element.css("position"),
                  width: this.element.outerWidth(),
                  height: this.element.outerHeight(),
                  top: this.element.css("top"),
                  left: this.element.css("left"),
                }
              )
            ),
            (this.element = this.element
              .parent()
              .data("ui-resizable", this.element.resizable("instance"))),
            (this.elementIsWrapper = !0),
            (t = {
              marginTop: this.originalElement.css("marginTop"),
              marginRight: this.originalElement.css("marginRight"),
              marginBottom: this.originalElement.css("marginBottom"),
              marginLeft: this.originalElement.css("marginLeft"),
            }),
            this.element.css(t),
            this.originalElement.css("margin", 0),
            (this.originalResizeStyle = this.originalElement.css("resize")),
            this.originalElement.css("resize", "none"),
            this._proportionallyResizeElements.push(
              this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block",
              })
            ),
            this.originalElement.css(t),
            this._proportionallyResize()),
          this._setupHandles(),
          e.autoHide &&
            D(this.element)
              .on("mouseenter", function () {
                e.disabled ||
                  (i._removeClass("ui-resizable-autohide"), i._handles.show());
              })
              .on("mouseleave", function () {
                e.disabled ||
                  i.resizing ||
                  (i._addClass("ui-resizable-autohide"), i._handles.hide());
              }),
          this._mouseInit();
      },
      _destroy: function () {
        this._mouseDestroy();
        function t(t) {
          D(t)
            .removeData("resizable")
            .removeData("ui-resizable")
            .off(".resizable")
            .find(".ui-resizable-handle")
            .remove();
        }
        var e;
        return (
          this.elementIsWrapper &&
            (t(this.element),
            (e = this.element),
            this.originalElement
              .css({
                position: e.css("position"),
                width: e.outerWidth(),
                height: e.outerHeight(),
                top: e.css("top"),
                left: e.css("left"),
              })
              .insertAfter(e),
            e.remove()),
          this.originalElement.css("resize", this.originalResizeStyle),
          t(this.originalElement),
          this
        );
      },
      _setOption: function (t, e) {
        switch ((this._super(t, e), t)) {
          case "handles":
            this._removeHandles(), this._setupHandles();
        }
      },
      _setupHandles: function () {
        var t,
          e,
          i,
          s,
          n,
          o = this.options,
          r = this;
        if (
          ((this.handles =
            o.handles ||
            (D(".ui-resizable-handle", this.element).length
              ? {
                  n: ".ui-resizable-n",
                  e: ".ui-resizable-e",
                  s: ".ui-resizable-s",
                  w: ".ui-resizable-w",
                  se: ".ui-resizable-se",
                  sw: ".ui-resizable-sw",
                  ne: ".ui-resizable-ne",
                  nw: ".ui-resizable-nw",
                }
              : "e,s,se")),
          (this._handles = D()),
          this.handles.constructor === String)
        )
          for (
            "all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"),
              i = this.handles.split(","),
              this.handles = {},
              e = 0;
            i.length > e;
            e++
          )
            (s = "ui-resizable-" + (t = D.trim(i[e]))),
              (n = D("<div>")),
              this._addClass(n, "ui-resizable-handle " + s),
              n.css({
                zIndex: o.zIndex,
              }),
              (this.handles[t] = ".ui-resizable-" + t),
              this.element.append(n);
        (this._renderAxis = function (t) {
          var e, i, s, n;
          for (e in ((t = t || this.element), this.handles))
            this.handles[e].constructor === String
              ? (this.handles[e] = this.element
                  .children(this.handles[e])
                  .first()
                  .show())
              : (this.handles[e].jquery || this.handles[e].nodeType) &&
                ((this.handles[e] = D(this.handles[e])),
                this._on(this.handles[e], {
                  mousedown: r._mouseDown,
                })),
              this.elementIsWrapper &&
                this.originalElement[0].nodeName.match(
                  /^(textarea|input|select|button)$/i
                ) &&
                ((i = D(this.handles[e], this.element)),
                (n = /sw|ne|nw|se|n|s/.test(e)
                  ? i.outerHeight()
                  : i.outerWidth()),
                (s = [
                  "padding",
                  /ne|nw|n/.test(e)
                    ? "Top"
                    : /se|sw|s/.test(e)
                    ? "Bottom"
                    : /^e$/.test(e)
                    ? "Right"
                    : "Left",
                ].join("")),
                t.css(s, n),
                this._proportionallyResize()),
              (this._handles = this._handles.add(this.handles[e]));
        }),
          this._renderAxis(this.element),
          (this._handles = this._handles.add(
            this.element.find(".ui-resizable-handle")
          )),
          this._handles.disableSelection(),
          this._handles.on("mouseover", function () {
            r.resizing ||
              (this.className &&
                (n = this.className.match(
                  /ui-resizable-(se|sw|ne|nw|n|e|s|w)/i
                )),
              (r.axis = n && n[1] ? n[1] : "se"));
          }),
          o.autoHide &&
            (this._handles.hide(), this._addClass("ui-resizable-autohide"));
      },
      _removeHandles: function () {
        this._handles.remove();
      },
      _mouseCapture: function (t) {
        var e,
          i,
          s = !1;
        for (e in this.handles)
          ((i = D(this.handles[e])[0]) !== t.target &&
            !D.contains(i, t.target)) ||
            (s = !0);
        return !this.options.disabled && s;
      },
      _mouseStart: function (t) {
        var e,
          i,
          s,
          n = this.options,
          o = this.element;
        return (
          (this.resizing = !0),
          this._renderProxy(),
          (e = this._num(this.helper.css("left"))),
          (i = this._num(this.helper.css("top"))),
          n.containment &&
            ((e += D(n.containment).scrollLeft() || 0),
            (i += D(n.containment).scrollTop() || 0)),
          (this.offset = this.helper.offset()),
          (this.position = {
            left: e,
            top: i,
          }),
          (this.size = this._helper
            ? {
                width: this.helper.width(),
                height: this.helper.height(),
              }
            : {
                width: o.width(),
                height: o.height(),
              }),
          (this.originalSize = this._helper
            ? {
                width: o.outerWidth(),
                height: o.outerHeight(),
              }
            : {
                width: o.width(),
                height: o.height(),
              }),
          (this.sizeDiff = {
            width: o.outerWidth() - o.width(),
            height: o.outerHeight() - o.height(),
          }),
          (this.originalPosition = {
            left: e,
            top: i,
          }),
          (this.originalMousePosition = {
            left: t.pageX,
            top: t.pageY,
          }),
          (this.aspectRatio =
            "number" == typeof n.aspectRatio
              ? n.aspectRatio
              : this.originalSize.width / this.originalSize.height || 1),
          (s = D(".ui-resizable-" + this.axis).css("cursor")),
          D("body").css("cursor", "auto" === s ? this.axis + "-resize" : s),
          this._addClass("ui-resizable-resizing"),
          this._propagate("start", t),
          !0
        );
      },
      _mouseDrag: function (t) {
        var e,
          i,
          s = this.originalMousePosition,
          n = this.axis,
          o = t.pageX - s.left || 0,
          r = t.pageY - s.top || 0,
          a = this._change[n];
        return (
          this._updatePrevProperties(),
          a &&
            ((e = a.apply(this, [t, o, r])),
            this._updateVirtualBoundaries(t.shiftKey),
            (this._aspectRatio || t.shiftKey) && (e = this._updateRatio(e, t)),
            (e = this._respectSize(e, t)),
            this._updateCache(e),
            this._propagate("resize", t),
            (i = this._applyChanges()),
            !this._helper &&
              this._proportionallyResizeElements.length &&
              this._proportionallyResize(),
            D.isEmptyObject(i) ||
              (this._updatePrevProperties(),
              this._trigger("resize", t, this.ui()),
              this._applyChanges())),
          !1
        );
      },
      _mouseStop: function (t) {
        this.resizing = !1;
        var e,
          i,
          s,
          n,
          o,
          r,
          a,
          h = this.options,
          l = this;
        return (
          this._helper &&
            ((s =
              (i =
                (e = this._proportionallyResizeElements).length &&
                /textarea/i.test(e[0].nodeName)) &&
              this._hasScroll(e[0], "left")
                ? 0
                : l.sizeDiff.height),
            (n = i ? 0 : l.sizeDiff.width),
            (o = {
              width: l.helper.width() - n,
              height: l.helper.height() - s,
            }),
            (r =
              parseFloat(l.element.css("left")) +
                (l.position.left - l.originalPosition.left) || null),
            (a =
              parseFloat(l.element.css("top")) +
                (l.position.top - l.originalPosition.top) || null),
            h.animate ||
              this.element.css(
                D.extend(o, {
                  top: a,
                  left: r,
                })
              ),
            l.helper.height(l.size.height),
            l.helper.width(l.size.width),
            this._helper && !h.animate && this._proportionallyResize()),
          D("body").css("cursor", "auto"),
          this._removeClass("ui-resizable-resizing"),
          this._propagate("stop", t),
          this._helper && this.helper.remove(),
          !1
        );
      },
      _updatePrevProperties: function () {
        (this.prevPosition = {
          top: this.position.top,
          left: this.position.left,
        }),
          (this.prevSize = {
            width: this.size.width,
            height: this.size.height,
          });
      },
      _applyChanges: function () {
        var t = {};
        return (
          this.position.top !== this.prevPosition.top &&
            (t.top = this.position.top + "px"),
          this.position.left !== this.prevPosition.left &&
            (t.left = this.position.left + "px"),
          this.size.width !== this.prevSize.width &&
            (t.width = this.size.width + "px"),
          this.size.height !== this.prevSize.height &&
            (t.height = this.size.height + "px"),
          this.helper.css(t),
          t
        );
      },
      _updateVirtualBoundaries: function (t) {
        var e,
          i,
          s,
          n,
          o,
          r = this.options;
        (o = {
          minWidth: this._isNumber(r.minWidth) ? r.minWidth : 0,
          maxWidth: this._isNumber(r.maxWidth) ? r.maxWidth : 1 / 0,
          minHeight: this._isNumber(r.minHeight) ? r.minHeight : 0,
          maxHeight: this._isNumber(r.maxHeight) ? r.maxHeight : 1 / 0,
        }),
          (this._aspectRatio || t) &&
            ((e = o.minHeight * this.aspectRatio),
            (s = o.minWidth / this.aspectRatio),
            (i = o.maxHeight * this.aspectRatio),
            (n = o.maxWidth / this.aspectRatio),
            e > o.minWidth && (o.minWidth = e),
            s > o.minHeight && (o.minHeight = s),
            o.maxWidth > i && (o.maxWidth = i),
            o.maxHeight > n && (o.maxHeight = n)),
          (this._vBoundaries = o);
      },
      _updateCache: function (t) {
        (this.offset = this.helper.offset()),
          this._isNumber(t.left) && (this.position.left = t.left),
          this._isNumber(t.top) && (this.position.top = t.top),
          this._isNumber(t.height) && (this.size.height = t.height),
          this._isNumber(t.width) && (this.size.width = t.width);
      },
      _updateRatio: function (t) {
        var e = this.position,
          i = this.size,
          s = this.axis;
        return (
          this._isNumber(t.height)
            ? (t.width = t.height * this.aspectRatio)
            : this._isNumber(t.width) &&
              (t.height = t.width / this.aspectRatio),
          "sw" === s &&
            ((t.left = e.left + (i.width - t.width)), (t.top = null)),
          "nw" === s &&
            ((t.top = e.top + (i.height - t.height)),
            (t.left = e.left + (i.width - t.width))),
          t
        );
      },
      _respectSize: function (t) {
        var e = this._vBoundaries,
          i = this.axis,
          s = this._isNumber(t.width) && e.maxWidth && e.maxWidth < t.width,
          n = this._isNumber(t.height) && e.maxHeight && e.maxHeight < t.height,
          o = this._isNumber(t.width) && e.minWidth && e.minWidth > t.width,
          r = this._isNumber(t.height) && e.minHeight && e.minHeight > t.height,
          a = this.originalPosition.left + this.originalSize.width,
          h = this.originalPosition.top + this.originalSize.height,
          l = /sw|nw|w/.test(i),
          c = /nw|ne|n/.test(i);
        return (
          o && (t.width = e.minWidth),
          r && (t.height = e.minHeight),
          s && (t.width = e.maxWidth),
          n && (t.height = e.maxHeight),
          o && l && (t.left = a - e.minWidth),
          s && l && (t.left = a - e.maxWidth),
          r && c && (t.top = h - e.minHeight),
          n && c && (t.top = h - e.maxHeight),
          t.width || t.height || t.left || !t.top
            ? t.width || t.height || t.top || !t.left || (t.left = null)
            : (t.top = null),
          t
        );
      },
      _getPaddingPlusBorderDimensions: function (t) {
        for (
          var e = 0,
            i = [],
            s = [
              t.css("borderTopWidth"),
              t.css("borderRightWidth"),
              t.css("borderBottomWidth"),
              t.css("borderLeftWidth"),
            ],
            n = [
              t.css("paddingTop"),
              t.css("paddingRight"),
              t.css("paddingBottom"),
              t.css("paddingLeft"),
            ];
          e < 4;
          e++
        )
          (i[e] = parseFloat(s[e]) || 0), (i[e] += parseFloat(n[e]) || 0);
        return {
          height: i[0] + i[2],
          width: i[1] + i[3],
        };
      },
      _proportionallyResize: function () {
        if (this._proportionallyResizeElements.length)
          for (
            var t, e = 0, i = this.helper || this.element;
            this._proportionallyResizeElements.length > e;
            e++
          )
            (t = this._proportionallyResizeElements[e]),
              this.outerDimensions ||
                (this.outerDimensions = this._getPaddingPlusBorderDimensions(
                  t
                )),
              t.css({
                height: i.height() - this.outerDimensions.height || 0,
                width: i.width() - this.outerDimensions.width || 0,
              });
      },
      _renderProxy: function () {
        var t = this.element,
          e = this.options;
        (this.elementOffset = t.offset()),
          this._helper
            ? ((this.helper =
                this.helper || D("<div style='overflow:hidden;'></div>")),
              this._addClass(this.helper, this._helper),
              this.helper.css({
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++e.zIndex,
              }),
              this.helper.appendTo("body").disableSelection())
            : (this.helper = this.element);
      },
      _change: {
        e: function (t, e) {
          return {
            width: this.originalSize.width + e,
          };
        },
        w: function (t, e) {
          var i = this.originalSize;
          return {
            left: this.originalPosition.left + e,
            width: i.width - e,
          };
        },
        n: function (t, e, i) {
          var s = this.originalSize;
          return {
            top: this.originalPosition.top + i,
            height: s.height - i,
          };
        },
        s: function (t, e, i) {
          return {
            height: this.originalSize.height + i,
          };
        },
        se: function (t, e, i) {
          return D.extend(
            this._change.s.apply(this, arguments),
            this._change.e.apply(this, [t, e, i])
          );
        },
        sw: function (t, e, i) {
          return D.extend(
            this._change.s.apply(this, arguments),
            this._change.w.apply(this, [t, e, i])
          );
        },
        ne: function (t, e, i) {
          return D.extend(
            this._change.n.apply(this, arguments),
            this._change.e.apply(this, [t, e, i])
          );
        },
        nw: function (t, e, i) {
          return D.extend(
            this._change.n.apply(this, arguments),
            this._change.w.apply(this, [t, e, i])
          );
        },
      },
      _propagate: function (t, e) {
        D.ui.plugin.call(this, t, [e, this.ui()]),
          "resize" !== t && this._trigger(t, e, this.ui());
      },
      plugins: {},
      ui: function () {
        return {
          originalElement: this.originalElement,
          element: this.element,
          helper: this.helper,
          position: this.position,
          size: this.size,
          originalSize: this.originalSize,
          originalPosition: this.originalPosition,
        };
      },
    }),
    D.ui.plugin.add("resizable", "animate", {
      stop: function (e) {
        var i = D(this).resizable("instance"),
          t = i.options,
          s = i._proportionallyResizeElements,
          n = s.length && /textarea/i.test(s[0].nodeName),
          o = n && i._hasScroll(s[0], "left") ? 0 : i.sizeDiff.height,
          r = n ? 0 : i.sizeDiff.width,
          a = {
            width: i.size.width - r,
            height: i.size.height - o,
          },
          h =
            parseFloat(i.element.css("left")) +
              (i.position.left - i.originalPosition.left) || null,
          l =
            parseFloat(i.element.css("top")) +
              (i.position.top - i.originalPosition.top) || null;
        i.element.animate(
          D.extend(
            a,
            l && h
              ? {
                  top: l,
                  left: h,
                }
              : {}
          ),
          {
            duration: t.animateDuration,
            easing: t.animateEasing,
            step: function () {
              var t = {
                width: parseFloat(i.element.css("width")),
                height: parseFloat(i.element.css("height")),
                top: parseFloat(i.element.css("top")),
                left: parseFloat(i.element.css("left")),
              };
              s &&
                s.length &&
                D(s[0]).css({
                  width: t.width,
                  height: t.height,
                }),
                i._updateCache(t),
                i._propagate("resize", e);
            },
          }
        );
      },
    }),
    D.ui.plugin.add("resizable", "containment", {
      start: function () {
        var i,
          s,
          t,
          e,
          n,
          o,
          r,
          a = D(this).resizable("instance"),
          h = a.options,
          l = a.element,
          c = h.containment,
          u =
            c instanceof D
              ? c.get(0)
              : /parent/.test(c)
              ? l.parent().get(0)
              : c;
        u &&
          ((a.containerElement = D(u)),
          /document/.test(c) || c === document
            ? ((a.containerOffset = {
                left: 0,
                top: 0,
              }),
              (a.containerPosition = {
                left: 0,
                top: 0,
              }),
              (a.parentData = {
                element: D(document),
                left: 0,
                top: 0,
                width: D(document).width(),
                height:
                  D(document).height() || document.body.parentNode.scrollHeight,
              }))
            : ((i = D(u)),
              (s = []),
              D(["Top", "Right", "Left", "Bottom"]).each(function (t, e) {
                s[t] = a._num(i.css("padding" + e));
              }),
              (a.containerOffset = i.offset()),
              (a.containerPosition = i.position()),
              (a.containerSize = {
                height: i.innerHeight() - s[3],
                width: i.innerWidth() - s[1],
              }),
              (t = a.containerOffset),
              (e = a.containerSize.height),
              (n = a.containerSize.width),
              (o = a._hasScroll(u, "left") ? u.scrollWidth : n),
              (r = a._hasScroll(u) ? u.scrollHeight : e),
              (a.parentData = {
                element: u,
                left: t.left,
                top: t.top,
                width: o,
                height: r,
              })));
      },
      resize: function (t) {
        var e,
          i,
          s,
          n,
          o = D(this).resizable("instance"),
          r = o.options,
          a = o.containerOffset,
          h = o.position,
          l = o._aspectRatio || t.shiftKey,
          c = {
            top: 0,
            left: 0,
          },
          u = o.containerElement,
          d = !0;
        u[0] !== document && /static/.test(u.css("position")) && (c = a),
          h.left < (o._helper ? a.left : 0) &&
            ((o.size.width =
              o.size.width +
              (o._helper
                ? o.position.left - a.left
                : o.position.left - c.left)),
            l && ((o.size.height = o.size.width / o.aspectRatio), (d = !1)),
            (o.position.left = r.helper ? a.left : 0)),
          h.top < (o._helper ? a.top : 0) &&
            ((o.size.height =
              o.size.height +
              (o._helper ? o.position.top - a.top : o.position.top)),
            l && ((o.size.width = o.size.height * o.aspectRatio), (d = !1)),
            (o.position.top = o._helper ? a.top : 0)),
          (s = o.containerElement.get(0) === o.element.parent().get(0)),
          (n = /relative|absolute/.test(o.containerElement.css("position"))),
          s && n
            ? ((o.offset.left = o.parentData.left + o.position.left),
              (o.offset.top = o.parentData.top + o.position.top))
            : ((o.offset.left = o.element.offset().left),
              (o.offset.top = o.element.offset().top)),
          (e = Math.abs(
            o.sizeDiff.width +
              (o._helper ? o.offset.left - c.left : o.offset.left - a.left)
          )),
          (i = Math.abs(
            o.sizeDiff.height +
              (o._helper ? o.offset.top - c.top : o.offset.top - a.top)
          )),
          e + o.size.width >= o.parentData.width &&
            ((o.size.width = o.parentData.width - e),
            l && ((o.size.height = o.size.width / o.aspectRatio), (d = !1))),
          i + o.size.height >= o.parentData.height &&
            ((o.size.height = o.parentData.height - i),
            l && ((o.size.width = o.size.height * o.aspectRatio), (d = !1))),
          d ||
            ((o.position.left = o.prevPosition.left),
            (o.position.top = o.prevPosition.top),
            (o.size.width = o.prevSize.width),
            (o.size.height = o.prevSize.height));
      },
      stop: function () {
        var t = D(this).resizable("instance"),
          e = t.options,
          i = t.containerOffset,
          s = t.containerPosition,
          n = t.containerElement,
          o = D(t.helper),
          r = o.offset(),
          a = o.outerWidth() - t.sizeDiff.width,
          h = o.outerHeight() - t.sizeDiff.height;
        t._helper &&
          !e.animate &&
          /relative/.test(n.css("position")) &&
          D(this).css({
            left: r.left - s.left - i.left,
            width: a,
            height: h,
          }),
          t._helper &&
            !e.animate &&
            /static/.test(n.css("position")) &&
            D(this).css({
              left: r.left - s.left - i.left,
              width: a,
              height: h,
            });
      },
    }),
    D.ui.plugin.add("resizable", "alsoResize", {
      start: function () {
        var t = D(this).resizable("instance").options;
        D(t.alsoResize).each(function () {
          var t = D(this);
          t.data("ui-resizable-alsoresize", {
            width: parseFloat(t.width()),
            height: parseFloat(t.height()),
            left: parseFloat(t.css("left")),
            top: parseFloat(t.css("top")),
          });
        });
      },
      resize: function (t, i) {
        var e = D(this).resizable("instance"),
          s = e.options,
          n = e.originalSize,
          o = e.originalPosition,
          r = {
            height: e.size.height - n.height || 0,
            width: e.size.width - n.width || 0,
            top: e.position.top - o.top || 0,
            left: e.position.left - o.left || 0,
          };
        D(s.alsoResize).each(function () {
          var t = D(this),
            s = D(this).data("ui-resizable-alsoresize"),
            n = {},
            e = t.parents(i.originalElement[0]).length
              ? ["width", "height"]
              : ["width", "height", "top", "left"];
          D.each(e, function (t, e) {
            var i = (s[e] || 0) + (r[e] || 0);
            i && 0 <= i && (n[e] = i || null);
          }),
            t.css(n);
        });
      },
      stop: function () {
        D(this).removeData("ui-resizable-alsoresize");
      },
    }),
    D.ui.plugin.add("resizable", "ghost", {
      start: function () {
        var t = D(this).resizable("instance"),
          e = t.size;
        (t.ghost = t.originalElement.clone()),
          t.ghost.css({
            opacity: 0.25,
            display: "block",
            position: "relative",
            height: e.height,
            width: e.width,
            margin: 0,
            left: 0,
            top: 0,
          }),
          t._addClass(t.ghost, "ui-resizable-ghost"),
          !1 !== D.uiBackCompat &&
            "string" == typeof t.options.ghost &&
            t.ghost.addClass(this.options.ghost),
          t.ghost.appendTo(t.helper);
      },
      resize: function () {
        var t = D(this).resizable("instance");
        t.ghost &&
          t.ghost.css({
            position: "relative",
            height: t.size.height,
            width: t.size.width,
          });
      },
      stop: function () {
        var t = D(this).resizable("instance");
        t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0));
      },
    }),
    D.ui.plugin.add("resizable", "grid", {
      resize: function () {
        var t,
          e = D(this).resizable("instance"),
          i = e.options,
          s = e.size,
          n = e.originalSize,
          o = e.originalPosition,
          r = e.axis,
          a = "number" == typeof i.grid ? [i.grid, i.grid] : i.grid,
          h = a[0] || 1,
          l = a[1] || 1,
          c = Math.round((s.width - n.width) / h) * h,
          u = Math.round((s.height - n.height) / l) * l,
          d = n.width + c,
          p = n.height + u,
          f = i.maxWidth && d > i.maxWidth,
          g = i.maxHeight && p > i.maxHeight,
          m = i.minWidth && i.minWidth > d,
          _ = i.minHeight && i.minHeight > p;
        (i.grid = a),
          m && (d += h),
          _ && (p += l),
          f && (d -= h),
          g && (p -= l),
          /^(se|s|e)$/.test(r)
            ? ((e.size.width = d), (e.size.height = p))
            : /^(ne)$/.test(r)
            ? ((e.size.width = d),
              (e.size.height = p),
              (e.position.top = o.top - u))
            : /^(sw)$/.test(r)
            ? ((e.size.width = d),
              (e.size.height = p),
              (e.position.left = o.left - c))
            : ((p - l <= 0 || d - h <= 0) &&
                (t = e._getPaddingPlusBorderDimensions(this)),
              0 < p - l
                ? ((e.size.height = p), (e.position.top = o.top - u))
                : ((p = l - t.height),
                  (e.size.height = p),
                  (e.position.top = o.top + n.height - p)),
              0 < d - h
                ? ((e.size.width = d), (e.position.left = o.left - c))
                : ((d = h - t.width),
                  (e.size.width = d),
                  (e.position.left = o.left + n.width - d)));
      },
    }),
    D.ui.resizable,
    D.widget("ui.selectable", D.ui.mouse, {
      version: "1.12.1",
      options: {
        appendTo: "body",
        autoRefresh: !0,
        distance: 0,
        filter: "*",
        tolerance: "touch",
        selected: null,
        selecting: null,
        start: null,
        stop: null,
        unselected: null,
        unselecting: null,
      },
      _create: function () {
        var s = this;
        this._addClass("ui-selectable"),
          (this.dragged = !1),
          (this.refresh = function () {
            (s.elementPos = D(s.element[0]).offset()),
              (s.selectees = D(s.options.filter, s.element[0])),
              s._addClass(s.selectees, "ui-selectee"),
              s.selectees.each(function () {
                var t = D(this),
                  e = t.offset(),
                  i = {
                    left: e.left - s.elementPos.left,
                    top: e.top - s.elementPos.top,
                  };
                D.data(this, "selectable-item", {
                  element: this,
                  $element: t,
                  left: i.left,
                  top: i.top,
                  right: i.left + t.outerWidth(),
                  bottom: i.top + t.outerHeight(),
                  startselected: !1,
                  selected: t.hasClass("ui-selected"),
                  selecting: t.hasClass("ui-selecting"),
                  unselecting: t.hasClass("ui-unselecting"),
                });
              });
          }),
          this.refresh(),
          this._mouseInit(),
          (this.helper = D("<div>")),
          this._addClass(this.helper, "ui-selectable-helper");
      },
      _destroy: function () {
        this.selectees.removeData("selectable-item"), this._mouseDestroy();
      },
      _mouseStart: function (i) {
        var s = this,
          t = this.options;
        (this.opos = [i.pageX, i.pageY]),
          (this.elementPos = D(this.element[0]).offset()),
          this.options.disabled ||
            ((this.selectees = D(t.filter, this.element[0])),
            this._trigger("start", i),
            D(t.appendTo).append(this.helper),
            this.helper.css({
              left: i.pageX,
              top: i.pageY,
              width: 0,
              height: 0,
            }),
            t.autoRefresh && this.refresh(),
            this.selectees.filter(".ui-selected").each(function () {
              var t = D.data(this, "selectable-item");
              (t.startselected = !0),
                i.metaKey ||
                  i.ctrlKey ||
                  (s._removeClass(t.$element, "ui-selected"),
                  (t.selected = !1),
                  s._addClass(t.$element, "ui-unselecting"),
                  (t.unselecting = !0),
                  s._trigger("unselecting", i, {
                    unselecting: t.element,
                  }));
            }),
            D(i.target)
              .parents()
              .addBack()
              .each(function () {
                var t,
                  e = D.data(this, "selectable-item");
                return e
                  ? ((t =
                      (!i.metaKey && !i.ctrlKey) ||
                      !e.$element.hasClass("ui-selected")),
                    s
                      ._removeClass(
                        e.$element,
                        t ? "ui-unselecting" : "ui-selected"
                      )
                      ._addClass(
                        e.$element,
                        t ? "ui-selecting" : "ui-unselecting"
                      ),
                    (e.unselecting = !t),
                    (e.selecting = t),
                    (e.selected = t)
                      ? s._trigger("selecting", i, {
                          selecting: e.element,
                        })
                      : s._trigger("unselecting", i, {
                          unselecting: e.element,
                        }),
                    !1)
                  : void 0;
              }));
      },
      _mouseDrag: function (s) {
        if (((this.dragged = !0), !this.options.disabled)) {
          var t,
            n = this,
            o = this.options,
            r = this.opos[0],
            a = this.opos[1],
            h = s.pageX,
            l = s.pageY;
          return (
            h < r && ((t = h), (h = r), (r = t)),
            l < a && ((t = l), (l = a), (a = t)),
            this.helper.css({
              left: r,
              top: a,
              width: h - r,
              height: l - a,
            }),
            this.selectees.each(function () {
              var t = D.data(this, "selectable-item"),
                e = !1,
                i = {};
              t &&
                t.element !== n.element[0] &&
                ((i.left = t.left + n.elementPos.left),
                (i.right = t.right + n.elementPos.left),
                (i.top = t.top + n.elementPos.top),
                (i.bottom = t.bottom + n.elementPos.top),
                "touch" === o.tolerance
                  ? (e = !(
                      i.left > h ||
                      r > i.right ||
                      i.top > l ||
                      a > i.bottom
                    ))
                  : "fit" === o.tolerance &&
                    (e =
                      i.left > r && h > i.right && i.top > a && l > i.bottom),
                e
                  ? (t.selected &&
                      (n._removeClass(t.$element, "ui-selected"),
                      (t.selected = !1)),
                    t.unselecting &&
                      (n._removeClass(t.$element, "ui-unselecting"),
                      (t.unselecting = !1)),
                    t.selecting ||
                      (n._addClass(t.$element, "ui-selecting"),
                      (t.selecting = !0),
                      n._trigger("selecting", s, {
                        selecting: t.element,
                      })))
                  : (t.selecting &&
                      ((s.metaKey || s.ctrlKey) && t.startselected
                        ? (n._removeClass(t.$element, "ui-selecting"),
                          (t.selecting = !1),
                          n._addClass(t.$element, "ui-selected"),
                          (t.selected = !0))
                        : (n._removeClass(t.$element, "ui-selecting"),
                          (t.selecting = !1),
                          t.startselected &&
                            (n._addClass(t.$element, "ui-unselecting"),
                            (t.unselecting = !0)),
                          n._trigger("unselecting", s, {
                            unselecting: t.element,
                          }))),
                    t.selected &&
                      (s.metaKey ||
                        s.ctrlKey ||
                        t.startselected ||
                        (n._removeClass(t.$element, "ui-selected"),
                        (t.selected = !1),
                        n._addClass(t.$element, "ui-unselecting"),
                        (t.unselecting = !0),
                        n._trigger("unselecting", s, {
                          unselecting: t.element,
                        })))));
            }),
            !1
          );
        }
      },
      _mouseStop: function (e) {
        var i = this;
        return (
          (this.dragged = !1),
          D(".ui-unselecting", this.element[0]).each(function () {
            var t = D.data(this, "selectable-item");
            i._removeClass(t.$element, "ui-unselecting"),
              (t.unselecting = !1),
              (t.startselected = !1),
              i._trigger("unselected", e, {
                unselected: t.element,
              });
          }),
          D(".ui-selecting", this.element[0]).each(function () {
            var t = D.data(this, "selectable-item");
            i
              ._removeClass(t.$element, "ui-selecting")
              ._addClass(t.$element, "ui-selected"),
              (t.selecting = !1),
              (t.selected = !0),
              (t.startselected = !0),
              i._trigger("selected", e, {
                selected: t.element,
              });
          }),
          this._trigger("stop", e),
          this.helper.remove(),
          !1
        );
      },
    }),
    D.widget("ui.sortable", D.ui.mouse, {
      version: "1.12.1",
      widgetEventPrefix: "sort",
      ready: !1,
      options: {
        appendTo: "parent",
        axis: !1,
        connectWith: !1,
        containment: !1,
        cursor: "auto",
        cursorAt: !1,
        dropOnEmpty: !0,
        forcePlaceholderSize: !1,
        forceHelperSize: !1,
        grid: !1,
        handle: !1,
        helper: "original",
        items: "> *",
        opacity: !1,
        placeholder: !1,
        revert: !1,
        scroll: !0,
        scrollSensitivity: 20,
        scrollSpeed: 20,
        scope: "default",
        tolerance: "intersect",
        zIndex: 1e3,
        activate: null,
        beforeStop: null,
        change: null,
        deactivate: null,
        out: null,
        over: null,
        receive: null,
        remove: null,
        sort: null,
        start: null,
        stop: null,
        update: null,
      },
      _isOverAxis: function (t, e, i) {
        return e <= t && t < e + i;
      },
      _isFloating: function (t) {
        return (
          /left|right/.test(t.css("float")) ||
          /inline|table-cell/.test(t.css("display"))
        );
      },
      _create: function () {
        (this.containerCache = {}),
          this._addClass("ui-sortable"),
          this.refresh(),
          (this.offset = this.element.offset()),
          this._mouseInit(),
          this._setHandleClassName(),
          (this.ready = !0);
      },
      _setOption: function (t, e) {
        this._super(t, e), "handle" === t && this._setHandleClassName();
      },
      _setHandleClassName: function () {
        var t = this;
        this._removeClass(
          this.element.find(".ui-sortable-handle"),
          "ui-sortable-handle"
        ),
          D.each(this.items, function () {
            t._addClass(
              this.instance.options.handle
                ? this.item.find(this.instance.options.handle)
                : this.item,
              "ui-sortable-handle"
            );
          });
      },
      _destroy: function () {
        this._mouseDestroy();
        for (var t = this.items.length - 1; 0 <= t; t--)
          this.items[t].item.removeData(this.widgetName + "-item");
        return this;
      },
      _mouseCapture: function (t, e) {
        var i = null,
          s = !1,
          n = this;
        return (
          !this.reverting &&
          !this.options.disabled &&
          "static" !== this.options.type &&
          (this._refreshItems(t),
          D(t.target)
            .parents()
            .each(function () {
              return D.data(this, n.widgetName + "-item") === n
                ? ((i = D(this)), !1)
                : void 0;
            }),
          D.data(t.target, n.widgetName + "-item") === n && (i = D(t.target)),
          !!i &&
            !(
              this.options.handle &&
              !e &&
              (D(this.options.handle, i)
                .find("*")
                .addBack()
                .each(function () {
                  this === t.target && (s = !0);
                }),
              !s)
            ) &&
            ((this.currentItem = i), this._removeCurrentsFromItems(), !0))
        );
      },
      _mouseStart: function (t, e, i) {
        var s,
          n,
          o = this.options;
        if (
          ((this.currentContainer = this).refreshPositions(),
          (this.helper = this._createHelper(t)),
          this._cacheHelperProportions(),
          this._cacheMargins(),
          (this.scrollParent = this.helper.scrollParent()),
          (this.offset = this.currentItem.offset()),
          (this.offset = {
            top: this.offset.top - this.margins.top,
            left: this.offset.left - this.margins.left,
          }),
          D.extend(this.offset, {
            click: {
              left: t.pageX - this.offset.left,
              top: t.pageY - this.offset.top,
            },
            parent: this._getParentOffset(),
            relative: this._getRelativeOffset(),
          }),
          this.helper.css("position", "absolute"),
          (this.cssPosition = this.helper.css("position")),
          (this.originalPosition = this._generatePosition(t)),
          (this.originalPageX = t.pageX),
          (this.originalPageY = t.pageY),
          o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt),
          (this.domPosition = {
            prev: this.currentItem.prev()[0],
            parent: this.currentItem.parent()[0],
          }),
          this.helper[0] !== this.currentItem[0] && this.currentItem.hide(),
          this._createPlaceholder(),
          o.containment && this._setContainment(),
          o.cursor &&
            "auto" !== o.cursor &&
            ((n = this.document.find("body")),
            (this.storedCursor = n.css("cursor")),
            n.css("cursor", o.cursor),
            (this.storedStylesheet = D(
              "<style>*{ cursor: " + o.cursor + " !important; }</style>"
            ).appendTo(n))),
          o.opacity &&
            (this.helper.css("opacity") &&
              (this._storedOpacity = this.helper.css("opacity")),
            this.helper.css("opacity", o.opacity)),
          o.zIndex &&
            (this.helper.css("zIndex") &&
              (this._storedZIndex = this.helper.css("zIndex")),
            this.helper.css("zIndex", o.zIndex)),
          this.scrollParent[0] !== this.document[0] &&
            "HTML" !== this.scrollParent[0].tagName &&
            (this.overflowOffset = this.scrollParent.offset()),
          this._trigger("start", t, this._uiHash()),
          this._preserveHelperProportions || this._cacheHelperProportions(),
          !i)
        )
          for (s = this.containers.length - 1; 0 <= s; s--)
            this.containers[s]._trigger("activate", t, this._uiHash(this));
        return (
          D.ui.ddmanager && (D.ui.ddmanager.current = this),
          D.ui.ddmanager &&
            !o.dropBehaviour &&
            D.ui.ddmanager.prepareOffsets(this, t),
          (this.dragging = !0),
          this._addClass(this.helper, "ui-sortable-helper"),
          this._mouseDrag(t),
          !0
        );
      },
      _mouseDrag: function (t) {
        var e,
          i,
          s,
          n,
          o = this.options,
          r = !1;
        for (
          this.position = this._generatePosition(t),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs),
            this.options.scroll &&
              (this.scrollParent[0] !== this.document[0] &&
              "HTML" !== this.scrollParent[0].tagName
                ? (this.overflowOffset.top +
                    this.scrollParent[0].offsetHeight -
                    t.pageY <
                  o.scrollSensitivity
                    ? (this.scrollParent[0].scrollTop = r =
                        this.scrollParent[0].scrollTop + o.scrollSpeed)
                    : t.pageY - this.overflowOffset.top < o.scrollSensitivity &&
                      (this.scrollParent[0].scrollTop = r =
                        this.scrollParent[0].scrollTop - o.scrollSpeed),
                  this.overflowOffset.left +
                    this.scrollParent[0].offsetWidth -
                    t.pageX <
                  o.scrollSensitivity
                    ? (this.scrollParent[0].scrollLeft = r =
                        this.scrollParent[0].scrollLeft + o.scrollSpeed)
                    : t.pageX - this.overflowOffset.left <
                        o.scrollSensitivity &&
                      (this.scrollParent[0].scrollLeft = r =
                        this.scrollParent[0].scrollLeft - o.scrollSpeed))
                : (t.pageY - this.document.scrollTop() < o.scrollSensitivity
                    ? (r = this.document.scrollTop(
                        this.document.scrollTop() - o.scrollSpeed
                      ))
                    : this.window.height() -
                        (t.pageY - this.document.scrollTop()) <
                        o.scrollSensitivity &&
                      (r = this.document.scrollTop(
                        this.document.scrollTop() + o.scrollSpeed
                      )),
                  t.pageX - this.document.scrollLeft() < o.scrollSensitivity
                    ? (r = this.document.scrollLeft(
                        this.document.scrollLeft() - o.scrollSpeed
                      ))
                    : this.window.width() -
                        (t.pageX - this.document.scrollLeft()) <
                        o.scrollSensitivity &&
                      (r = this.document.scrollLeft(
                        this.document.scrollLeft() + o.scrollSpeed
                      ))),
              !1 !== r &&
                D.ui.ddmanager &&
                !o.dropBehaviour &&
                D.ui.ddmanager.prepareOffsets(this, t)),
            this.positionAbs = this._convertPositionTo("absolute"),
            (this.options.axis && "y" === this.options.axis) ||
              (this.helper[0].style.left = this.position.left + "px"),
            (this.options.axis && "x" === this.options.axis) ||
              (this.helper[0].style.top = this.position.top + "px"),
            e = this.items.length - 1;
          0 <= e;
          e--
        )
          if (
            ((s = (i = this.items[e]).item[0]),
            (n = this._intersectsWithPointer(i)) &&
              i.instance === this.currentContainer &&
              s !== this.currentItem[0] &&
              this.placeholder[1 === n ? "next" : "prev"]()[0] !== s &&
              !D.contains(this.placeholder[0], s) &&
              ("semi-dynamic" !== this.options.type ||
                !D.contains(this.element[0], s)))
          ) {
            if (
              ((this.direction = 1 === n ? "down" : "up"),
              "pointer" !== this.options.tolerance &&
                !this._intersectsWithSides(i))
            )
              break;
            this._rearrange(t, i), this._trigger("change", t, this._uiHash());
            break;
          }
        return (
          this._contactContainers(t),
          D.ui.ddmanager && D.ui.ddmanager.drag(this, t),
          this._trigger("sort", t, this._uiHash()),
          (this.lastPositionAbs = this.positionAbs),
          !1
        );
      },
      _mouseStop: function (t, e) {
        if (t) {
          if (
            (D.ui.ddmanager &&
              !this.options.dropBehaviour &&
              D.ui.ddmanager.drop(this, t),
            this.options.revert)
          ) {
            var i = this,
              s = this.placeholder.offset(),
              n = this.options.axis,
              o = {};
            (n && "x" !== n) ||
              (o.left =
                s.left -
                this.offset.parent.left -
                this.margins.left +
                (this.offsetParent[0] === this.document[0].body
                  ? 0
                  : this.offsetParent[0].scrollLeft)),
              (n && "y" !== n) ||
                (o.top =
                  s.top -
                  this.offset.parent.top -
                  this.margins.top +
                  (this.offsetParent[0] === this.document[0].body
                    ? 0
                    : this.offsetParent[0].scrollTop)),
              (this.reverting = !0),
              D(this.helper).animate(
                o,
                parseInt(this.options.revert, 10) || 500,
                function () {
                  i._clear(t);
                }
              );
          } else this._clear(t, e);
          return !1;
        }
      },
      cancel: function () {
        if (this.dragging) {
          this._mouseUp(
            new D.Event("mouseup", {
              target: null,
            })
          ),
            "original" === this.options.helper
              ? (this.currentItem.css(this._storedCSS),
                this._removeClass(this.currentItem, "ui-sortable-helper"))
              : this.currentItem.show();
          for (var t = this.containers.length - 1; 0 <= t; t--)
            this.containers[t]._trigger("deactivate", null, this._uiHash(this)),
              this.containers[t].containerCache.over &&
                (this.containers[t]._trigger("out", null, this._uiHash(this)),
                (this.containers[t].containerCache.over = 0));
        }
        return (
          this.placeholder &&
            (this.placeholder[0].parentNode &&
              this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            "original" !== this.options.helper &&
              this.helper &&
              this.helper[0].parentNode &&
              this.helper.remove(),
            D.extend(this, {
              helper: null,
              dragging: !1,
              reverting: !1,
              _noFinalSort: null,
            }),
            this.domPosition.prev
              ? D(this.domPosition.prev).after(this.currentItem)
              : D(this.domPosition.parent).prepend(this.currentItem)),
          this
        );
      },
      serialize: function (e) {
        var t = this._getItemsAsjQuery(e && e.connected),
          i = [];
        return (
          (e = e || {}),
          D(t).each(function () {
            var t = (D(e.item || this).attr(e.attribute || "id") || "").match(
              e.expression || /(.+)[\-=_](.+)/
            );
            t &&
              i.push(
                (e.key || t[1] + "[]") +
                  "=" +
                  (e.key && e.expression ? t[1] : t[2])
              );
          }),
          !i.length && e.key && i.push(e.key + "="),
          i.join("&")
        );
      },
      toArray: function (t) {
        var e = this._getItemsAsjQuery(t && t.connected),
          i = [];
        return (
          (t = t || {}),
          e.each(function () {
            i.push(D(t.item || this).attr(t.attribute || "id") || "");
          }),
          i
        );
      },
      _intersectsWith: function (t) {
        var e = this.positionAbs.left,
          i = e + this.helperProportions.width,
          s = this.positionAbs.top,
          n = s + this.helperProportions.height,
          o = t.left,
          r = o + t.width,
          a = t.top,
          h = a + t.height,
          l = this.offset.click.top,
          c = this.offset.click.left,
          u = "x" === this.options.axis || (a < s + l && s + l < h),
          d = "y" === this.options.axis || (o < e + c && e + c < r),
          p = u && d;
        return "pointer" === this.options.tolerance ||
          this.options.forcePointerForContainers ||
          ("pointer" !== this.options.tolerance &&
            this.helperProportions[this.floating ? "width" : "height"] >
              t[this.floating ? "width" : "height"])
          ? p
          : e + this.helperProportions.width / 2 > o &&
              r > i - this.helperProportions.width / 2 &&
              s + this.helperProportions.height / 2 > a &&
              h > n - this.helperProportions.height / 2;
      },
      _intersectsWithPointer: function (t) {
        var e,
          i,
          s =
            "x" === this.options.axis ||
            this._isOverAxis(
              this.positionAbs.top + this.offset.click.top,
              t.top,
              t.height
            ),
          n =
            "y" === this.options.axis ||
            this._isOverAxis(
              this.positionAbs.left + this.offset.click.left,
              t.left,
              t.width
            );
        return (
          !!(s && n) &&
          ((e = this._getDragVerticalDirection()),
          (i = this._getDragHorizontalDirection()),
          this.floating
            ? "right" === i || "down" === e
              ? 2
              : 1
            : e && ("down" === e ? 2 : 1))
        );
      },
      _intersectsWithSides: function (t) {
        var e = this._isOverAxis(
            this.positionAbs.top + this.offset.click.top,
            t.top + t.height / 2,
            t.height
          ),
          i = this._isOverAxis(
            this.positionAbs.left + this.offset.click.left,
            t.left + t.width / 2,
            t.width
          ),
          s = this._getDragVerticalDirection(),
          n = this._getDragHorizontalDirection();
        return this.floating && n
          ? ("right" === n && i) || ("left" === n && !i)
          : s && (("down" === s && e) || ("up" === s && !e));
      },
      _getDragVerticalDirection: function () {
        var t = this.positionAbs.top - this.lastPositionAbs.top;
        return 0 != t && (0 < t ? "down" : "up");
      },
      _getDragHorizontalDirection: function () {
        var t = this.positionAbs.left - this.lastPositionAbs.left;
        return 0 != t && (0 < t ? "right" : "left");
      },
      refresh: function (t) {
        return (
          this._refreshItems(t),
          this._setHandleClassName(),
          this.refreshPositions(),
          this
        );
      },
      _connectWith: function () {
        var t = this.options;
        return t.connectWith.constructor === String
          ? [t.connectWith]
          : t.connectWith;
      },
      _getItemsAsjQuery: function (t) {
        function e() {
          r.push(this);
        }
        var i,
          s,
          n,
          o,
          r = [],
          a = [],
          h = this._connectWith();
        if (h && t)
          for (i = h.length - 1; 0 <= i; i--)
            for (s = (n = D(h[i], this.document[0])).length - 1; 0 <= s; s--)
              (o = D.data(n[s], this.widgetFullName)) &&
                o !== this &&
                !o.options.disabled &&
                a.push([
                  D.isFunction(o.options.items)
                    ? o.options.items.call(o.element)
                    : D(o.options.items, o.element)
                        .not(".ui-sortable-helper")
                        .not(".ui-sortable-placeholder"),
                  o,
                ]);
        for (
          a.push([
            D.isFunction(this.options.items)
              ? this.options.items.call(this.element, null, {
                  options: this.options,
                  item: this.currentItem,
                })
              : D(this.options.items, this.element)
                  .not(".ui-sortable-helper")
                  .not(".ui-sortable-placeholder"),
            this,
          ]),
            i = a.length - 1;
          0 <= i;
          i--
        )
          a[i][0].each(e);
        return D(r);
      },
      _removeCurrentsFromItems: function () {
        var i = this.currentItem.find(":data(" + this.widgetName + "-item)");
        this.items = D.grep(this.items, function (t) {
          for (var e = 0; i.length > e; e++) if (i[e] === t.item[0]) return !1;
          return !0;
        });
      },
      _refreshItems: function (t) {
        (this.items = []), (this.containers = [this]);
        var e,
          i,
          s,
          n,
          o,
          r,
          a,
          h,
          l = this.items,
          c = [
            [
              D.isFunction(this.options.items)
                ? this.options.items.call(this.element[0], t, {
                    item: this.currentItem,
                  })
                : D(this.options.items, this.element),
              this,
            ],
          ],
          u = this._connectWith();
        if (u && this.ready)
          for (e = u.length - 1; 0 <= e; e--)
            for (i = (s = D(u[e], this.document[0])).length - 1; 0 <= i; i--)
              (n = D.data(s[i], this.widgetFullName)) &&
                n !== this &&
                !n.options.disabled &&
                (c.push([
                  D.isFunction(n.options.items)
                    ? n.options.items.call(n.element[0], t, {
                        item: this.currentItem,
                      })
                    : D(n.options.items, n.element),
                  n,
                ]),
                this.containers.push(n));
        for (e = c.length - 1; 0 <= e; e--)
          for (o = c[e][1], i = 0, h = (r = c[e][0]).length; i < h; i++)
            (a = D(r[i])).data(this.widgetName + "-item", o),
              l.push({
                item: a,
                instance: o,
                width: 0,
                height: 0,
                left: 0,
                top: 0,
              });
      },
      refreshPositions: function (t) {
        var e, i, s, n;
        for (
          this.floating =
            !!this.items.length &&
            ("x" === this.options.axis || this._isFloating(this.items[0].item)),
            this.offsetParent &&
              this.helper &&
              (this.offset.parent = this._getParentOffset()),
            e = this.items.length - 1;
          0 <= e;
          e--
        )
          ((i = this.items[e]).instance !== this.currentContainer &&
            this.currentContainer &&
            i.item[0] !== this.currentItem[0]) ||
            ((s = this.options.toleranceElement
              ? D(this.options.toleranceElement, i.item)
              : i.item),
            t || ((i.width = s.outerWidth()), (i.height = s.outerHeight())),
            (n = s.offset()),
            (i.left = n.left),
            (i.top = n.top));
        if (this.options.custom && this.options.custom.refreshContainers)
          this.options.custom.refreshContainers.call(this);
        else
          for (e = this.containers.length - 1; 0 <= e; e--)
            (n = this.containers[e].element.offset()),
              (this.containers[e].containerCache.left = n.left),
              (this.containers[e].containerCache.top = n.top),
              (this.containers[e].containerCache.width = this.containers[
                e
              ].element.outerWidth()),
              (this.containers[e].containerCache.height = this.containers[
                e
              ].element.outerHeight());
        return this;
      },
      _createPlaceholder: function (i) {
        var s,
          n = (i = i || this).options;
        (n.placeholder && n.placeholder.constructor !== String) ||
          ((s = n.placeholder),
          (n.placeholder = {
            element: function () {
              var t = i.currentItem[0].nodeName.toLowerCase(),
                e = D("<" + t + ">", i.document[0]);
              return (
                i
                  ._addClass(
                    e,
                    "ui-sortable-placeholder",
                    s || i.currentItem[0].className
                  )
                  ._removeClass(e, "ui-sortable-helper"),
                "tbody" === t
                  ? i._createTrPlaceholder(
                      i.currentItem.find("tr").eq(0),
                      D("<tr>", i.document[0]).appendTo(e)
                    )
                  : "tr" === t
                  ? i._createTrPlaceholder(i.currentItem, e)
                  : "img" === t && e.attr("src", i.currentItem.attr("src")),
                s || e.css("visibility", "hidden"),
                e
              );
            },
            update: function (t, e) {
              (s && !n.forcePlaceholderSize) ||
                (e.height() ||
                  e.height(
                    i.currentItem.innerHeight() -
                      parseInt(i.currentItem.css("paddingTop") || 0, 10) -
                      parseInt(i.currentItem.css("paddingBottom") || 0, 10)
                  ),
                e.width() ||
                  e.width(
                    i.currentItem.innerWidth() -
                      parseInt(i.currentItem.css("paddingLeft") || 0, 10) -
                      parseInt(i.currentItem.css("paddingRight") || 0, 10)
                  ));
            },
          })),
          (i.placeholder = D(
            n.placeholder.element.call(i.element, i.currentItem)
          )),
          i.currentItem.after(i.placeholder),
          n.placeholder.update(i, i.placeholder);
      },
      _createTrPlaceholder: function (t, e) {
        var i = this;
        t.children().each(function () {
          D("<td>&#160;</td>", i.document[0])
            .attr("colspan", D(this).attr("colspan") || 1)
            .appendTo(e);
        });
      },
      _contactContainers: function (t) {
        var e,
          i,
          s,
          n,
          o,
          r,
          a,
          h,
          l,
          c,
          u = null,
          d = null;
        for (e = this.containers.length - 1; 0 <= e; e--)
          if (!D.contains(this.currentItem[0], this.containers[e].element[0]))
            if (this._intersectsWith(this.containers[e].containerCache)) {
              if (u && D.contains(this.containers[e].element[0], u.element[0]))
                continue;
              (u = this.containers[e]), (d = e);
            } else
              this.containers[e].containerCache.over &&
                (this.containers[e]._trigger("out", t, this._uiHash(this)),
                (this.containers[e].containerCache.over = 0));
        if (u)
          if (1 === this.containers.length)
            this.containers[d].containerCache.over ||
              (this.containers[d]._trigger("over", t, this._uiHash(this)),
              (this.containers[d].containerCache.over = 1));
          else {
            for (
              s = 1e4,
                n = null,
                o = (l = u.floating || this._isFloating(this.currentItem))
                  ? "left"
                  : "top",
                r = l ? "width" : "height",
                c = l ? "pageX" : "pageY",
                i = this.items.length - 1;
              0 <= i;
              i--
            )
              D.contains(
                this.containers[d].element[0],
                this.items[i].item[0]
              ) &&
                this.items[i].item[0] !== this.currentItem[0] &&
                ((a = this.items[i].item.offset()[o]),
                (h = !1),
                t[c] - a > this.items[i][r] / 2 && (h = !0),
                s > Math.abs(t[c] - a) &&
                  ((s = Math.abs(t[c] - a)),
                  (n = this.items[i]),
                  (this.direction = h ? "up" : "down")));
            if (!n && !this.options.dropOnEmpty) return;
            if (this.currentContainer === this.containers[d])
              return void (
                this.currentContainer.containerCache.over ||
                (this.containers[d]._trigger("over", t, this._uiHash()),
                (this.currentContainer.containerCache.over = 1))
              );
            n
              ? this._rearrange(t, n, null, !0)
              : this._rearrange(t, null, this.containers[d].element, !0),
              this._trigger("change", t, this._uiHash()),
              this.containers[d]._trigger("change", t, this._uiHash(this)),
              (this.currentContainer = this.containers[d]),
              this.options.placeholder.update(
                this.currentContainer,
                this.placeholder
              ),
              this.containers[d]._trigger("over", t, this._uiHash(this)),
              (this.containers[d].containerCache.over = 1);
          }
      },
      _createHelper: function (t) {
        var e = this.options,
          i = D.isFunction(e.helper)
            ? D(e.helper.apply(this.element[0], [t, this.currentItem]))
            : "clone" === e.helper
            ? this.currentItem.clone()
            : this.currentItem;
        return (
          i.parents("body").length ||
            D(
              "parent" !== e.appendTo
                ? e.appendTo
                : this.currentItem[0].parentNode
            )[0].appendChild(i[0]),
          i[0] === this.currentItem[0] &&
            (this._storedCSS = {
              width: this.currentItem[0].style.width,
              height: this.currentItem[0].style.height,
              position: this.currentItem.css("position"),
              top: this.currentItem.css("top"),
              left: this.currentItem.css("left"),
            }),
          (i[0].style.width && !e.forceHelperSize) ||
            i.width(this.currentItem.width()),
          (i[0].style.height && !e.forceHelperSize) ||
            i.height(this.currentItem.height()),
          i
        );
      },
      _adjustOffsetFromHelper: function (t) {
        "string" == typeof t && (t = t.split(" ")),
          D.isArray(t) &&
            (t = {
              left: +t[0],
              top: +t[1] || 0,
            }),
          "left" in t && (this.offset.click.left = t.left + this.margins.left),
          "right" in t &&
            (this.offset.click.left =
              this.helperProportions.width - t.right + this.margins.left),
          "top" in t && (this.offset.click.top = t.top + this.margins.top),
          "bottom" in t &&
            (this.offset.click.top =
              this.helperProportions.height - t.bottom + this.margins.top);
      },
      _getParentOffset: function () {
        this.offsetParent = this.helper.offsetParent();
        var t = this.offsetParent.offset();
        return (
          "absolute" === this.cssPosition &&
            this.scrollParent[0] !== this.document[0] &&
            D.contains(this.scrollParent[0], this.offsetParent[0]) &&
            ((t.left += this.scrollParent.scrollLeft()),
            (t.top += this.scrollParent.scrollTop())),
          (this.offsetParent[0] === this.document[0].body ||
            (this.offsetParent[0].tagName &&
              "html" === this.offsetParent[0].tagName.toLowerCase() &&
              D.ui.ie)) &&
            (t = {
              top: 0,
              left: 0,
            }),
          {
            top:
              t.top +
              (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
            left:
              t.left +
              (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0),
          }
        );
      },
      _getRelativeOffset: function () {
        if ("relative" !== this.cssPosition)
          return {
            top: 0,
            left: 0,
          };
        var t = this.currentItem.position();
        return {
          top:
            t.top -
            (parseInt(this.helper.css("top"), 10) || 0) +
            this.scrollParent.scrollTop(),
          left:
            t.left -
            (parseInt(this.helper.css("left"), 10) || 0) +
            this.scrollParent.scrollLeft(),
        };
      },
      _cacheMargins: function () {
        this.margins = {
          left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
          top: parseInt(this.currentItem.css("marginTop"), 10) || 0,
        };
      },
      _cacheHelperProportions: function () {
        this.helperProportions = {
          width: this.helper.outerWidth(),
          height: this.helper.outerHeight(),
        };
      },
      _setContainment: function () {
        var t,
          e,
          i,
          s = this.options;
        "parent" === s.containment &&
          (s.containment = this.helper[0].parentNode),
          ("document" !== s.containment && "window" !== s.containment) ||
            (this.containment = [
              0 - this.offset.relative.left - this.offset.parent.left,
              0 - this.offset.relative.top - this.offset.parent.top,
              "document" === s.containment
                ? this.document.width()
                : this.window.width() -
                  this.helperProportions.width -
                  this.margins.left,
              ("document" === s.containment
                ? this.document.height() ||
                  document.body.parentNode.scrollHeight
                : this.window.height() ||
                  this.document[0].body.parentNode.scrollHeight) -
                this.helperProportions.height -
                this.margins.top,
            ]),
          /^(document|window|parent)$/.test(s.containment) ||
            ((t = D(s.containment)[0]),
            (e = D(s.containment).offset()),
            (i = "hidden" !== D(t).css("overflow")),
            (this.containment = [
              e.left +
                (parseInt(D(t).css("borderLeftWidth"), 10) || 0) +
                (parseInt(D(t).css("paddingLeft"), 10) || 0) -
                this.margins.left,
              e.top +
                (parseInt(D(t).css("borderTopWidth"), 10) || 0) +
                (parseInt(D(t).css("paddingTop"), 10) || 0) -
                this.margins.top,
              e.left +
                (i ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) -
                (parseInt(D(t).css("borderLeftWidth"), 10) || 0) -
                (parseInt(D(t).css("paddingRight"), 10) || 0) -
                this.helperProportions.width -
                this.margins.left,
              e.top +
                (i
                  ? Math.max(t.scrollHeight, t.offsetHeight)
                  : t.offsetHeight) -
                (parseInt(D(t).css("borderTopWidth"), 10) || 0) -
                (parseInt(D(t).css("paddingBottom"), 10) || 0) -
                this.helperProportions.height -
                this.margins.top,
            ]));
      },
      _convertPositionTo: function (t, e) {
        e = e || this.position;
        var i = "absolute" === t ? 1 : -1,
          s =
            "absolute" !== this.cssPosition ||
            (this.scrollParent[0] !== this.document[0] &&
              D.contains(this.scrollParent[0], this.offsetParent[0]))
              ? this.scrollParent
              : this.offsetParent,
          n = /(html|body)/i.test(s[0].tagName);
        return {
          top:
            e.top +
            this.offset.relative.top * i +
            this.offset.parent.top * i -
            ("fixed" === this.cssPosition
              ? -this.scrollParent.scrollTop()
              : n
              ? 0
              : s.scrollTop()) *
              i,
          left:
            e.left +
            this.offset.relative.left * i +
            this.offset.parent.left * i -
            ("fixed" === this.cssPosition
              ? -this.scrollParent.scrollLeft()
              : n
              ? 0
              : s.scrollLeft()) *
              i,
        };
      },
      _generatePosition: function (t) {
        var e,
          i,
          s = this.options,
          n = t.pageX,
          o = t.pageY,
          r =
            "absolute" !== this.cssPosition ||
            (this.scrollParent[0] !== this.document[0] &&
              D.contains(this.scrollParent[0], this.offsetParent[0]))
              ? this.scrollParent
              : this.offsetParent,
          a = /(html|body)/i.test(r[0].tagName);
        return (
          "relative" !== this.cssPosition ||
            (this.scrollParent[0] !== this.document[0] &&
              this.scrollParent[0] !== this.offsetParent[0]) ||
            (this.offset.relative = this._getRelativeOffset()),
          this.originalPosition &&
            (this.containment &&
              (t.pageX - this.offset.click.left < this.containment[0] &&
                (n = this.containment[0] + this.offset.click.left),
              t.pageY - this.offset.click.top < this.containment[1] &&
                (o = this.containment[1] + this.offset.click.top),
              t.pageX - this.offset.click.left > this.containment[2] &&
                (n = this.containment[2] + this.offset.click.left),
              t.pageY - this.offset.click.top > this.containment[3] &&
                (o = this.containment[3] + this.offset.click.top)),
            s.grid &&
              ((e =
                this.originalPageY +
                Math.round((o - this.originalPageY) / s.grid[1]) * s.grid[1]),
              (o = this.containment
                ? e - this.offset.click.top >= this.containment[1] &&
                  e - this.offset.click.top <= this.containment[3]
                  ? e
                  : e - this.offset.click.top >= this.containment[1]
                  ? e - s.grid[1]
                  : e + s.grid[1]
                : e),
              (i =
                this.originalPageX +
                Math.round((n - this.originalPageX) / s.grid[0]) * s.grid[0]),
              (n = this.containment
                ? i - this.offset.click.left >= this.containment[0] &&
                  i - this.offset.click.left <= this.containment[2]
                  ? i
                  : i - this.offset.click.left >= this.containment[0]
                  ? i - s.grid[0]
                  : i + s.grid[0]
                : i))),
          {
            top:
              o -
              this.offset.click.top -
              this.offset.relative.top -
              this.offset.parent.top +
              ("fixed" === this.cssPosition
                ? -this.scrollParent.scrollTop()
                : a
                ? 0
                : r.scrollTop()),
            left:
              n -
              this.offset.click.left -
              this.offset.relative.left -
              this.offset.parent.left +
              ("fixed" === this.cssPosition
                ? -this.scrollParent.scrollLeft()
                : a
                ? 0
                : r.scrollLeft()),
          }
        );
      },
      _rearrange: function (t, e, i, s) {
        i
          ? i[0].appendChild(this.placeholder[0])
          : e.item[0].parentNode.insertBefore(
              this.placeholder[0],
              "down" === this.direction ? e.item[0] : e.item[0].nextSibling
            ),
          (this.counter = this.counter ? ++this.counter : 1);
        var n = this.counter;
        this._delay(function () {
          n === this.counter && this.refreshPositions(!s);
        });
      },
      _clear: function (t, e) {
        function i(e, i, s) {
          return function (t) {
            s._trigger(e, t, i._uiHash(i));
          };
        }
        this.reverting = !1;
        var s,
          n = [];
        if (
          (!this._noFinalSort &&
            this.currentItem.parent().length &&
            this.placeholder.before(this.currentItem),
          (this._noFinalSort = null),
          this.helper[0] === this.currentItem[0])
        ) {
          for (s in this._storedCSS)
            ("auto" !== this._storedCSS[s] &&
              "static" !== this._storedCSS[s]) ||
              (this._storedCSS[s] = "");
          this.currentItem.css(this._storedCSS),
            this._removeClass(this.currentItem, "ui-sortable-helper");
        } else this.currentItem.show();
        for (
          this.fromOutside &&
            !e &&
            n.push(function (t) {
              this._trigger("receive", t, this._uiHash(this.fromOutside));
            }),
            (!this.fromOutside &&
              this.domPosition.prev ===
                this.currentItem.prev().not(".ui-sortable-helper")[0] &&
              this.domPosition.parent === this.currentItem.parent()[0]) ||
              e ||
              n.push(function (t) {
                this._trigger("update", t, this._uiHash());
              }),
            this !== this.currentContainer &&
              (e ||
                (n.push(function (t) {
                  this._trigger("remove", t, this._uiHash());
                }),
                n.push(
                  function (e) {
                    return function (t) {
                      e._trigger("receive", t, this._uiHash(this));
                    };
                  }.call(this, this.currentContainer)
                ),
                n.push(
                  function (e) {
                    return function (t) {
                      e._trigger("update", t, this._uiHash(this));
                    };
                  }.call(this, this.currentContainer)
                ))),
            s = this.containers.length - 1;
          0 <= s;
          s--
        )
          e || n.push(i("deactivate", this, this.containers[s])),
            this.containers[s].containerCache.over &&
              (n.push(i("out", this, this.containers[s])),
              (this.containers[s].containerCache.over = 0));
        if (
          (this.storedCursor &&
            (this.document.find("body").css("cursor", this.storedCursor),
            this.storedStylesheet.remove()),
          this._storedOpacity &&
            this.helper.css("opacity", this._storedOpacity),
          this._storedZIndex &&
            this.helper.css(
              "zIndex",
              "auto" === this._storedZIndex ? "" : this._storedZIndex
            ),
          (this.dragging = !1),
          e || this._trigger("beforeStop", t, this._uiHash()),
          this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
          this.cancelHelperRemoval ||
            (this.helper[0] !== this.currentItem[0] && this.helper.remove(),
            (this.helper = null)),
          !e)
        ) {
          for (s = 0; n.length > s; s++) n[s].call(this, t);
          this._trigger("stop", t, this._uiHash());
        }
        return (this.fromOutside = !1), !this.cancelHelperRemoval;
      },
      _trigger: function () {
        !1 === D.Widget.prototype._trigger.apply(this, arguments) &&
          this.cancel();
      },
      _uiHash: function (t) {
        var e = t || this;
        return {
          helper: e.helper,
          placeholder: e.placeholder || D([]),
          position: e.position,
          originalPosition: e.originalPosition,
          offset: e.positionAbs,
          item: e.currentItem,
          sender: t ? t.element : null,
        };
      },
    }),
    D.extend(D.ui, {
      datepicker: {
        version: "1.12.1",
      },
    }),
    D.extend(t.prototype, {
      markerClassName: "hasDatepicker",
      maxRows: 4,
      _widgetDatepicker: function () {
        return this.dpDiv;
      },
      setDefaults: function (t) {
        return u(this._defaults, t || {}), this;
      },
      _attachDatepicker: function (t, e) {
        var i, s, n;
        (s = "div" === (i = t.nodeName.toLowerCase()) || "span" === i),
          t.id || ((this.uuid += 1), (t.id = "dp" + this.uuid)),
          ((n = this._newInst(D(t), s)).settings = D.extend({}, e || {})),
          "input" === i
            ? this._connectDatepicker(t, n)
            : s && this._inlineDatepicker(t, n);
      },
      _newInst: function (t, e) {
        return {
          id: t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"),
          input: t,
          selectedDay: 0,
          selectedMonth: 0,
          selectedYear: 0,
          drawMonth: 0,
          drawYear: 0,
          inline: e,
          dpDiv: e
            ? i(
                D(
                  "<div class='" +
                    this._inlineClass +
                    " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"
                )
              )
            : this.dpDiv,
        };
      },
      _connectDatepicker: function (t, e) {
        var i = D(t);
        (e.append = D([])),
          (e.trigger = D([])),
          i.hasClass(this.markerClassName) ||
            (this._attachments(i, e),
            i
              .addClass(this.markerClassName)
              .on("keydown", this._doKeyDown)
              .on("keypress", this._doKeyPress)
              .on("keyup", this._doKeyUp),
            this._autoSize(e),
            D.data(t, "datepicker", e),
            e.settings.disabled && this._disableDatepicker(t));
      },
      _attachments: function (t, e) {
        var i,
          s,
          n,
          o = this._get(e, "appendText"),
          r = this._get(e, "isRTL");
        e.append && e.append.remove(),
          o &&
            ((e.append = D(
              "<span class='" + this._appendClass + "'>" + o + "</span>"
            )),
            t[r ? "before" : "after"](e.append)),
          t.off("focus", this._showDatepicker),
          e.trigger && e.trigger.remove(),
          ("focus" !== (i = this._get(e, "showOn")) && "both" !== i) ||
            t.on("focus", this._showDatepicker),
          ("button" !== i && "both" !== i) ||
            ((s = this._get(e, "buttonText")),
            (n = this._get(e, "buttonImage")),
            (e.trigger = D(
              this._get(e, "buttonImageOnly")
                ? D("<img/>").addClass(this._triggerClass).attr({
                    src: n,
                    alt: s,
                    title: s,
                  })
                : D("<button type='button'></button>")
                    .addClass(this._triggerClass)
                    .html(
                      n
                        ? D("<img/>").attr({
                            src: n,
                            alt: s,
                            title: s,
                          })
                        : s
                    )
            )),
            t[r ? "before" : "after"](e.trigger),
            e.trigger.on("click", function () {
              return (
                D.datepicker._datepickerShowing &&
                D.datepicker._lastInput === t[0]
                  ? D.datepicker._hideDatepicker()
                  : (D.datepicker._datepickerShowing &&
                      D.datepicker._lastInput !== t[0] &&
                      D.datepicker._hideDatepicker(),
                    D.datepicker._showDatepicker(t[0])),
                !1
              );
            }));
      },
      _autoSize: function (t) {
        if (this._get(t, "autoSize") && !t.inline) {
          var e,
            i,
            s,
            n,
            o = new Date(2009, 11, 20),
            r = this._get(t, "dateFormat");
          r.match(/[DM]/) &&
            ((e = function (t) {
              for (n = s = i = 0; t.length > n; n++)
                t[n].length > i && ((i = t[n].length), (s = n));
              return s;
            }),
            o.setMonth(
              e(this._get(t, r.match(/MM/) ? "monthNames" : "monthNamesShort"))
            ),
            o.setDate(
              e(this._get(t, r.match(/DD/) ? "dayNames" : "dayNamesShort")) +
                20 -
                o.getDay()
            )),
            t.input.attr("size", this._formatDate(t, o).length);
        }
      },
      _inlineDatepicker: function (t, e) {
        var i = D(t);
        i.hasClass(this.markerClassName) ||
          (i.addClass(this.markerClassName).append(e.dpDiv),
          D.data(t, "datepicker", e),
          this._setDate(e, this._getDefaultDate(e), !0),
          this._updateDatepicker(e),
          this._updateAlternate(e),
          e.settings.disabled && this._disableDatepicker(t),
          e.dpDiv.css("display", "block"));
      },
      _dialogDatepicker: function (t, e, i, s, n) {
        var o,
          r,
          a,
          h,
          l,
          c = this._dialogInst;
        return (
          c ||
            ((this.uuid += 1),
            (o = "dp" + this.uuid),
            (this._dialogInput = D(
              "<input type='text' id='" +
                o +
                "' style='position: absolute; top: -100px; width: 0px;'/>"
            )),
            this._dialogInput.on("keydown", this._doKeyDown),
            D("body").append(this._dialogInput),
            ((c = this._dialogInst = this._newInst(
              this._dialogInput,
              !1
            )).settings = {}),
            D.data(this._dialogInput[0], "datepicker", c)),
          u(c.settings, s || {}),
          (e = e && e.constructor === Date ? this._formatDate(c, e) : e),
          this._dialogInput.val(e),
          (this._pos = n ? (n.length ? n : [n.pageX, n.pageY]) : null),
          this._pos ||
            ((r = document.documentElement.clientWidth),
            (a = document.documentElement.clientHeight),
            (h =
              document.documentElement.scrollLeft || document.body.scrollLeft),
            (l = document.documentElement.scrollTop || document.body.scrollTop),
            (this._pos = [r / 2 - 100 + h, a / 2 - 150 + l])),
          this._dialogInput
            .css("left", this._pos[0] + 20 + "px")
            .css("top", this._pos[1] + "px"),
          (c.settings.onSelect = i),
          (this._inDialog = !0),
          this.dpDiv.addClass(this._dialogClass),
          this._showDatepicker(this._dialogInput[0]),
          D.blockUI && D.blockUI(this.dpDiv),
          D.data(this._dialogInput[0], "datepicker", c),
          this
        );
      },
      _destroyDatepicker: function (t) {
        var e,
          i = D(t),
          s = D.data(t, "datepicker");
        i.hasClass(this.markerClassName) &&
          ((e = t.nodeName.toLowerCase()),
          D.removeData(t, "datepicker"),
          "input" === e
            ? (s.append.remove(),
              s.trigger.remove(),
              i
                .removeClass(this.markerClassName)
                .off("focus", this._showDatepicker)
                .off("keydown", this._doKeyDown)
                .off("keypress", this._doKeyPress)
                .off("keyup", this._doKeyUp))
            : ("div" !== e && "span" !== e) ||
              i.removeClass(this.markerClassName).empty(),
          _ === s && (_ = null));
      },
      _enableDatepicker: function (e) {
        var t,
          i,
          s = D(e),
          n = D.data(e, "datepicker");
        s.hasClass(this.markerClassName) &&
          ("input" === (t = e.nodeName.toLowerCase())
            ? ((e.disabled = !1),
              n.trigger
                .filter("button")
                .each(function () {
                  this.disabled = !1;
                })
                .end()
                .filter("img")
                .css({
                  opacity: "1.0",
                  cursor: "",
                }))
            : ("div" !== t && "span" !== t) ||
              ((i = s.children("." + this._inlineClass))
                .children()
                .removeClass("ui-state-disabled"),
              i
                .find("select.ui-datepicker-month, select.ui-datepicker-year")
                .prop("disabled", !1)),
          (this._disabledInputs = D.map(this._disabledInputs, function (t) {
            return t === e ? null : t;
          })));
      },
      _disableDatepicker: function (e) {
        var t,
          i,
          s = D(e),
          n = D.data(e, "datepicker");
        s.hasClass(this.markerClassName) &&
          ("input" === (t = e.nodeName.toLowerCase())
            ? ((e.disabled = !0),
              n.trigger
                .filter("button")
                .each(function () {
                  this.disabled = !0;
                })
                .end()
                .filter("img")
                .css({
                  opacity: "0.5",
                  cursor: "default",
                }))
            : ("div" !== t && "span" !== t) ||
              ((i = s.children("." + this._inlineClass))
                .children()
                .addClass("ui-state-disabled"),
              i
                .find("select.ui-datepicker-month, select.ui-datepicker-year")
                .prop("disabled", !0)),
          (this._disabledInputs = D.map(this._disabledInputs, function (t) {
            return t === e ? null : t;
          })),
          (this._disabledInputs[this._disabledInputs.length] = e));
      },
      _isDisabledDatepicker: function (t) {
        if (!t) return !1;
        for (var e = 0; this._disabledInputs.length > e; e++)
          if (this._disabledInputs[e] === t) return !0;
        return !1;
      },
      _getInst: function (t) {
        try {
          return D.data(t, "datepicker");
        } catch (t) {
          throw "Missing instance data for this datepicker";
        }
      },
      _optionDatepicker: function (t, e, i) {
        var s,
          n,
          o,
          r,
          a = this._getInst(t);
        return 2 === arguments.length && "string" == typeof e
          ? "defaults" === e
            ? D.extend({}, D.datepicker._defaults)
            : a
            ? "all" === e
              ? D.extend({}, a.settings)
              : this._get(a, e)
            : null
          : ((s = e || {}),
            "string" == typeof e && ((s = {})[e] = i),
            void (
              a &&
              (this._curInst === a && this._hideDatepicker(),
              (n = this._getDateDatepicker(t, !0)),
              (o = this._getMinMaxDate(a, "min")),
              (r = this._getMinMaxDate(a, "max")),
              u(a.settings, s),
              null !== o &&
                void 0 !== s.dateFormat &&
                void 0 === s.minDate &&
                (a.settings.minDate = this._formatDate(a, o)),
              null !== r &&
                void 0 !== s.dateFormat &&
                void 0 === s.maxDate &&
                (a.settings.maxDate = this._formatDate(a, r)),
              "disabled" in s &&
                (s.disabled
                  ? this._disableDatepicker(t)
                  : this._enableDatepicker(t)),
              this._attachments(D(t), a),
              this._autoSize(a),
              this._setDate(a, n),
              this._updateAlternate(a),
              this._updateDatepicker(a))
            ));
      },
      _changeDatepicker: function (t, e, i) {
        this._optionDatepicker(t, e, i);
      },
      _refreshDatepicker: function (t) {
        var e = this._getInst(t);
        e && this._updateDatepicker(e);
      },
      _setDateDatepicker: function (t, e) {
        var i = this._getInst(t);
        i &&
          (this._setDate(i, e),
          this._updateDatepicker(i),
          this._updateAlternate(i));
      },
      _getDateDatepicker: function (t, e) {
        var i = this._getInst(t);
        return (
          i && !i.inline && this._setDateFromField(i, e),
          i ? this._getDate(i) : null
        );
      },
      _doKeyDown: function (t) {
        var e,
          i,
          s,
          n = D.datepicker._getInst(t.target),
          o = !0,
          r = n.dpDiv.is(".ui-datepicker-rtl");
        if (((n._keyEvent = !0), D.datepicker._datepickerShowing))
          switch (t.keyCode) {
            case 9:
              D.datepicker._hideDatepicker(), (o = !1);
              break;
            case 13:
              return (
                (s = D(
                  "td." +
                    D.datepicker._dayOverClass +
                    ":not(." +
                    D.datepicker._currentClass +
                    ")",
                  n.dpDiv
                ))[0] &&
                  D.datepicker._selectDay(
                    t.target,
                    n.selectedMonth,
                    n.selectedYear,
                    s[0]
                  ),
                (e = D.datepicker._get(n, "onSelect"))
                  ? ((i = D.datepicker._formatDate(n)),
                    e.apply(n.input ? n.input[0] : null, [i, n]))
                  : D.datepicker._hideDatepicker(),
                !1
              );
            case 27:
              D.datepicker._hideDatepicker();
              break;
            case 33:
              D.datepicker._adjustDate(
                t.target,
                t.ctrlKey
                  ? -D.datepicker._get(n, "stepBigMonths")
                  : -D.datepicker._get(n, "stepMonths"),
                "M"
              );
              break;
            case 34:
              D.datepicker._adjustDate(
                t.target,
                t.ctrlKey
                  ? +D.datepicker._get(n, "stepBigMonths")
                  : +D.datepicker._get(n, "stepMonths"),
                "M"
              );
              break;
            case 35:
              (t.ctrlKey || t.metaKey) && D.datepicker._clearDate(t.target),
                (o = t.ctrlKey || t.metaKey);
              break;
            case 36:
              (t.ctrlKey || t.metaKey) && D.datepicker._gotoToday(t.target),
                (o = t.ctrlKey || t.metaKey);
              break;
            case 37:
              (t.ctrlKey || t.metaKey) &&
                D.datepicker._adjustDate(t.target, r ? 1 : -1, "D"),
                (o = t.ctrlKey || t.metaKey),
                t.originalEvent.altKey &&
                  D.datepicker._adjustDate(
                    t.target,
                    t.ctrlKey
                      ? -D.datepicker._get(n, "stepBigMonths")
                      : -D.datepicker._get(n, "stepMonths"),
                    "M"
                  );
              break;
            case 38:
              (t.ctrlKey || t.metaKey) &&
                D.datepicker._adjustDate(t.target, -7, "D"),
                (o = t.ctrlKey || t.metaKey);
              break;
            case 39:
              (t.ctrlKey || t.metaKey) &&
                D.datepicker._adjustDate(t.target, r ? -1 : 1, "D"),
                (o = t.ctrlKey || t.metaKey),
                t.originalEvent.altKey &&
                  D.datepicker._adjustDate(
                    t.target,
                    t.ctrlKey
                      ? +D.datepicker._get(n, "stepBigMonths")
                      : +D.datepicker._get(n, "stepMonths"),
                    "M"
                  );
              break;
            case 40:
              (t.ctrlKey || t.metaKey) &&
                D.datepicker._adjustDate(t.target, 7, "D"),
                (o = t.ctrlKey || t.metaKey);
              break;
            default:
              o = !1;
          }
        else
          36 === t.keyCode && t.ctrlKey
            ? D.datepicker._showDatepicker(this)
            : (o = !1);
        o && (t.preventDefault(), t.stopPropagation());
      },
      _doKeyPress: function (t) {
        var e,
          i,
          s = D.datepicker._getInst(t.target);
        return D.datepicker._get(s, "constrainInput")
          ? ((e = D.datepicker._possibleChars(
              D.datepicker._get(s, "dateFormat")
            )),
            (i = String.fromCharCode(
              null == t.charCode ? t.keyCode : t.charCode
            )),
            t.ctrlKey || t.metaKey || i < " " || !e || -1 < e.indexOf(i))
          : void 0;
      },
      _doKeyUp: function (t) {
        var e = D.datepicker._getInst(t.target);
        if (e.input.val() !== e.lastVal)
          try {
            D.datepicker.parseDate(
              D.datepicker._get(e, "dateFormat"),
              e.input ? e.input.val() : null,
              D.datepicker._getFormatConfig(e)
            ) &&
              (D.datepicker._setDateFromField(e),
              D.datepicker._updateAlternate(e),
              D.datepicker._updateDatepicker(e));
          } catch (t) {}
        return !0;
      },
      _showDatepicker: function (t) {
        var e, i, s, n, o, r, a;
        "input" !== (t = t.target || t).nodeName.toLowerCase() &&
          (t = D("input", t.parentNode)[0]),
          D.datepicker._isDisabledDatepicker(t) ||
            D.datepicker._lastInput === t ||
            ((e = D.datepicker._getInst(t)),
            D.datepicker._curInst &&
              D.datepicker._curInst !== e &&
              (D.datepicker._curInst.dpDiv.stop(!0, !0),
              e &&
                D.datepicker._datepickerShowing &&
                D.datepicker._hideDatepicker(D.datepicker._curInst.input[0])),
            !1 !==
              (s = (i = D.datepicker._get(e, "beforeShow"))
                ? i.apply(t, [t, e])
                : {}) &&
              (u(e.settings, s),
              (e.lastVal = null),
              (D.datepicker._lastInput = t),
              D.datepicker._setDateFromField(e),
              D.datepicker._inDialog && (t.value = ""),
              D.datepicker._pos ||
                ((D.datepicker._pos = D.datepicker._findPos(t)),
                (D.datepicker._pos[1] += t.offsetHeight)),
              (n = !1),
              D(t)
                .parents()
                .each(function () {
                  return !(n |= "fixed" === D(this).css("position"));
                }),
              (o = {
                left: D.datepicker._pos[0],
                top: D.datepicker._pos[1],
              }),
              (D.datepicker._pos = null),
              e.dpDiv.empty(),
              e.dpDiv.css({
                position: "absolute",
                display: "block",
                top: "-1000px",
              }),
              D.datepicker._updateDatepicker(e),
              (o = D.datepicker._checkOffset(e, o, n)),
              e.dpDiv.css({
                position:
                  D.datepicker._inDialog && D.blockUI
                    ? "static"
                    : n
                    ? "fixed"
                    : "absolute",
                display: "none",
                left: o.left + "px",
                top: o.top + "px",
              }),
              e.inline ||
                ((r = D.datepicker._get(e, "showAnim")),
                (a = D.datepicker._get(e, "duration")),
                e.dpDiv.css(
                  "z-index",
                  (function (t) {
                    for (var e, i; t.length && t[0] !== document; ) {
                      if (
                        ("absolute" === (e = t.css("position")) ||
                          "relative" === e ||
                          "fixed" === e) &&
                        ((i = parseInt(t.css("zIndex"), 10)),
                        !isNaN(i) && 0 !== i)
                      )
                        return i;
                      t = t.parent();
                    }
                    return 0;
                  })(D(t)) + 1
                ),
                (D.datepicker._datepickerShowing = !0),
                D.effects && D.effects.effect[r]
                  ? e.dpDiv.show(r, D.datepicker._get(e, "showOptions"), a)
                  : e.dpDiv[r || "show"](r ? a : null),
                D.datepicker._shouldFocusInput(e) && e.input.trigger("focus"),
                (D.datepicker._curInst = e))));
      },
      _updateDatepicker: function (t) {
        (this.maxRows = 4),
          (_ = t).dpDiv.empty().append(this._generateHTML(t)),
          this._attachHandlers(t);
        var e,
          i = this._getNumberOfMonths(t),
          s = i[1],
          n = t.dpDiv.find("." + this._dayOverClass + " a");
        0 < n.length && o.apply(n.get(0)),
          t.dpDiv
            .removeClass(
              "ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4"
            )
            .width(""),
          1 < s &&
            t.dpDiv
              .addClass("ui-datepicker-multi-" + s)
              .css("width", 17 * s + "em"),
          t.dpDiv[(1 !== i[0] || 1 !== i[1] ? "add" : "remove") + "Class"](
            "ui-datepicker-multi"
          ),
          t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"](
            "ui-datepicker-rtl"
          ),
          t === D.datepicker._curInst &&
            D.datepicker._datepickerShowing &&
            D.datepicker._shouldFocusInput(t) &&
            t.input.trigger("focus"),
          t.yearshtml &&
            ((e = t.yearshtml),
            setTimeout(function () {
              e === t.yearshtml &&
                t.yearshtml &&
                t.dpDiv
                  .find("select.ui-datepicker-year:first")
                  .replaceWith(t.yearshtml),
                (e = t.yearshtml = null);
            }, 0));
      },
      _shouldFocusInput: function (t) {
        return (
          t.input &&
          t.input.is(":visible") &&
          !t.input.is(":disabled") &&
          !t.input.is(":focus")
        );
      },
      _checkOffset: function (t, e, i) {
        var s = t.dpDiv.outerWidth(),
          n = t.dpDiv.outerHeight(),
          o = t.input ? t.input.outerWidth() : 0,
          r = t.input ? t.input.outerHeight() : 0,
          a =
            document.documentElement.clientWidth +
            (i ? 0 : D(document).scrollLeft()),
          h =
            document.documentElement.clientHeight +
            (i ? 0 : D(document).scrollTop());
        return (
          (e.left -= this._get(t, "isRTL") ? s - o : 0),
          (e.left -=
            i && e.left === t.input.offset().left
              ? D(document).scrollLeft()
              : 0),
          (e.top -=
            i && e.top === t.input.offset().top + r
              ? D(document).scrollTop()
              : 0),
          (e.left -= Math.min(
            e.left,
            e.left + s > a && s < a ? Math.abs(e.left + s - a) : 0
          )),
          (e.top -= Math.min(
            e.top,
            e.top + n > h && n < h ? Math.abs(n + r) : 0
          )),
          e
        );
      },
      _findPos: function (t) {
        for (
          var e, i = this._getInst(t), s = this._get(i, "isRTL");
          t &&
          ("hidden" === t.type || 1 !== t.nodeType || D.expr.filters.hidden(t));

        )
          t = t[s ? "previousSibling" : "nextSibling"];
        return [(e = D(t).offset()).left, e.top];
      },
      _hideDatepicker: function (t) {
        var e,
          i,
          s,
          n,
          o = this._curInst;
        !o ||
          (t && o !== D.data(t, "datepicker")) ||
          (this._datepickerShowing &&
            ((e = this._get(o, "showAnim")),
            (i = this._get(o, "duration")),
            (s = function () {
              D.datepicker._tidyDialog(o);
            }),
            D.effects && (D.effects.effect[e] || D.effects[e])
              ? o.dpDiv.hide(e, D.datepicker._get(o, "showOptions"), i, s)
              : o.dpDiv[
                  "slideDown" === e
                    ? "slideUp"
                    : "fadeIn" === e
                    ? "fadeOut"
                    : "hide"
                ](e ? i : null, s),
            e || s(),
            (this._datepickerShowing = !1),
            (n = this._get(o, "onClose")) &&
              n.apply(o.input ? o.input[0] : null, [
                o.input ? o.input.val() : "",
                o,
              ]),
            (this._lastInput = null),
            this._inDialog &&
              (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px",
              }),
              D.blockUI && (D.unblockUI(), D("body").append(this.dpDiv))),
            (this._inDialog = !1)));
      },
      _tidyDialog: function (t) {
        t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar");
      },
      _checkExternalClick: function (t) {
        if (D.datepicker._curInst) {
          var e = D(t.target),
            i = D.datepicker._getInst(e[0]);
          ((e[0].id === D.datepicker._mainDivId ||
            0 !== e.parents("#" + D.datepicker._mainDivId).length ||
            e.hasClass(D.datepicker.markerClassName) ||
            e.closest("." + D.datepicker._triggerClass).length ||
            !D.datepicker._datepickerShowing ||
            (D.datepicker._inDialog && D.blockUI)) &&
            (!e.hasClass(D.datepicker.markerClassName) ||
              D.datepicker._curInst === i)) ||
            D.datepicker._hideDatepicker();
        }
      },
      _adjustDate: function (t, e, i) {
        var s = D(t),
          n = this._getInst(s[0]);
        this._isDisabledDatepicker(s[0]) ||
          (this._adjustInstDate(
            n,
            e + ("M" === i ? this._get(n, "showCurrentAtPos") : 0),
            i
          ),
          this._updateDatepicker(n));
      },
      _gotoToday: function (t) {
        var e,
          i = D(t),
          s = this._getInst(i[0]);
        this._get(s, "gotoCurrent") && s.currentDay
          ? ((s.selectedDay = s.currentDay),
            (s.drawMonth = s.selectedMonth = s.currentMonth),
            (s.drawYear = s.selectedYear = s.currentYear))
          : ((e = new Date()),
            (s.selectedDay = e.getDate()),
            (s.drawMonth = s.selectedMonth = e.getMonth()),
            (s.drawYear = s.selectedYear = e.getFullYear())),
          this._notifyChange(s),
          this._adjustDate(i);
      },
      _selectMonthYear: function (t, e, i) {
        var s = D(t),
          n = this._getInst(s[0]);
        (n["selected" + ("M" === i ? "Month" : "Year")] = n[
          "draw" + ("M" === i ? "Month" : "Year")
        ] = parseInt(e.options[e.selectedIndex].value, 10)),
          this._notifyChange(n),
          this._adjustDate(s);
      },
      _selectDay: function (t, e, i, s) {
        var n,
          o = D(t);
        D(s).hasClass(this._unselectableClass) ||
          this._isDisabledDatepicker(o[0]) ||
          (((n = this._getInst(o[0])).selectedDay = n.currentDay = D(
            "a",
            s
          ).html()),
          (n.selectedMonth = n.currentMonth = e),
          (n.selectedYear = n.currentYear = i),
          this._selectDate(
            t,
            this._formatDate(n, n.currentDay, n.currentMonth, n.currentYear)
          ));
      },
      _clearDate: function (t) {
        var e = D(t);
        this._selectDate(e, "");
      },
      _selectDate: function (t, e) {
        var i,
          s = D(t),
          n = this._getInst(s[0]);
        (e = null != e ? e : this._formatDate(n)),
          n.input && n.input.val(e),
          this._updateAlternate(n),
          (i = this._get(n, "onSelect"))
            ? i.apply(n.input ? n.input[0] : null, [e, n])
            : n.input && n.input.trigger("change"),
          n.inline
            ? this._updateDatepicker(n)
            : (this._hideDatepicker(),
              (this._lastInput = n.input[0]),
              "object" != typeof n.input[0] && n.input.trigger("focus"),
              (this._lastInput = null));
      },
      _updateAlternate: function (t) {
        var e,
          i,
          s,
          n = this._get(t, "altField");
        n &&
          ((e = this._get(t, "altFormat") || this._get(t, "dateFormat")),
          (i = this._getDate(t)),
          (s = this.formatDate(e, i, this._getFormatConfig(t))),
          D(n).val(s));
      },
      noWeekends: function (t) {
        var e = t.getDay();
        return [0 < e && e < 6, ""];
      },
      iso8601Week: function (t) {
        var e,
          i = new Date(t.getTime());
        return (
          i.setDate(i.getDate() + 4 - (i.getDay() || 7)),
          (e = i.getTime()),
          i.setMonth(0),
          i.setDate(1),
          Math.floor(Math.round((e - i) / 864e5) / 7) + 1
        );
      },
      parseDate: function (i, o, t) {
        if (null == i || null == o) throw "Invalid arguments";
        if ("" === (o = "object" == typeof o ? "" + o : o + "")) return null;
        function r(t) {
          var e = i.length > a + 1 && i.charAt(a + 1) === t;
          return e && a++, e;
        }
        function e(t) {
          var e = r(t),
            i =
              "@" === t
                ? 14
                : "!" === t
                ? 20
                : "y" === t && e
                ? 4
                : "o" === t
                ? 3
                : 2,
            s = RegExp("^\\d{" + ("y" === t ? i : 1) + "," + i + "}"),
            n = o.substring(u).match(s);
          if (!n) throw "Missing number at position " + u;
          return (u += n[0].length), parseInt(n[0], 10);
        }
        function s(t, e, i) {
          var s = -1,
            n = D.map(r(t) ? i : e, function (t, e) {
              return [[e, t]];
            }).sort(function (t, e) {
              return -(t[1].length - e[1].length);
            });
          if (
            (D.each(n, function (t, e) {
              var i = e[1];
              return o.substr(u, i.length).toLowerCase() === i.toLowerCase()
                ? ((s = e[0]), (u += i.length), !1)
                : void 0;
            }),
            -1 !== s)
          )
            return s + 1;
          throw "Unknown name at position " + u;
        }
        function n() {
          if (o.charAt(u) !== i.charAt(a))
            throw "Unexpected literal at position " + u;
          u++;
        }
        var a,
          h,
          l,
          c,
          u = 0,
          d = (t ? t.shortYearCutoff : null) || this._defaults.shortYearCutoff,
          p =
            "string" != typeof d
              ? d
              : (new Date().getFullYear() % 100) + parseInt(d, 10),
          f = (t ? t.dayNamesShort : null) || this._defaults.dayNamesShort,
          g = (t ? t.dayNames : null) || this._defaults.dayNames,
          m = (t ? t.monthNamesShort : null) || this._defaults.monthNamesShort,
          _ = (t ? t.monthNames : null) || this._defaults.monthNames,
          v = -1,
          b = -1,
          y = -1,
          w = -1,
          k = !1;
        for (a = 0; i.length > a; a++)
          if (k) "'" !== i.charAt(a) || r("'") ? n() : (k = !1);
          else
            switch (i.charAt(a)) {
              case "d":
                y = e("d");
                break;
              case "D":
                s("D", f, g);
                break;
              case "o":
                w = e("o");
                break;
              case "m":
                b = e("m");
                break;
              case "M":
                b = s("M", m, _);
                break;
              case "y":
                v = e("y");
                break;
              case "@":
                (v = (c = new Date(e("@"))).getFullYear()),
                  (b = c.getMonth() + 1),
                  (y = c.getDate());
                break;
              case "!":
                (v = (c = new Date(
                  (e("!") - this._ticksTo1970) / 1e4
                )).getFullYear()),
                  (b = c.getMonth() + 1),
                  (y = c.getDate());
                break;
              case "'":
                r("'") ? n() : (k = !0);
                break;
              default:
                n();
            }
        if (o.length > u && ((l = o.substr(u)), !/^\s+/.test(l)))
          throw "Extra/unparsed characters found in date: " + l;
        if (
          (-1 === v
            ? (v = new Date().getFullYear())
            : v < 100 &&
              (v +=
                new Date().getFullYear() -
                (new Date().getFullYear() % 100) +
                (v <= p ? 0 : -100)),
          -1 < w)
        )
          for (b = 1, y = w; !(y <= (h = this._getDaysInMonth(v, b - 1))); )
            b++, (y -= h);
        if (
          (c = this._daylightSavingAdjust(
            new Date(v, b - 1, y)
          )).getFullYear() !== v ||
          c.getMonth() + 1 !== b ||
          c.getDate() !== y
        )
          throw "Invalid date";
        return c;
      },
      ATOM: "yy-mm-dd",
      COOKIE: "D, dd M yy",
      ISO_8601: "yy-mm-dd",
      RFC_822: "D, d M y",
      RFC_850: "DD, dd-M-y",
      RFC_1036: "D, d M y",
      RFC_1123: "D, d M yy",
      RFC_2822: "D, d M yy",
      RSS: "D, d M y",
      TICKS: "!",
      TIMESTAMP: "@",
      W3C: "yy-mm-dd",
      _ticksTo1970:
        864e9 *
        (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
      formatDate: function (i, t, e) {
        if (!t) return "";
        function n(t) {
          var e = i.length > r + 1 && i.charAt(r + 1) === t;
          return e && r++, e;
        }
        function s(t, e, i) {
          var s = "" + e;
          if (n(t)) for (; i > s.length; ) s = "0" + s;
          return s;
        }
        function o(t, e, i, s) {
          return n(t) ? s[e] : i[e];
        }
        var r,
          a = (e ? e.dayNamesShort : null) || this._defaults.dayNamesShort,
          h = (e ? e.dayNames : null) || this._defaults.dayNames,
          l = (e ? e.monthNamesShort : null) || this._defaults.monthNamesShort,
          c = (e ? e.monthNames : null) || this._defaults.monthNames,
          u = "",
          d = !1;
        if (t)
          for (r = 0; i.length > r; r++)
            if (d)
              "'" !== i.charAt(r) || n("'") ? (u += i.charAt(r)) : (d = !1);
            else
              switch (i.charAt(r)) {
                case "d":
                  u += s("d", t.getDate(), 2);
                  break;
                case "D":
                  u += o("D", t.getDay(), a, h);
                  break;
                case "o":
                  u += s(
                    "o",
                    Math.round(
                      (new Date(
                        t.getFullYear(),
                        t.getMonth(),
                        t.getDate()
                      ).getTime() -
                        new Date(t.getFullYear(), 0, 0).getTime()) /
                        864e5
                    ),
                    3
                  );
                  break;
                case "m":
                  u += s("m", t.getMonth() + 1, 2);
                  break;
                case "M":
                  u += o("M", t.getMonth(), l, c);
                  break;
                case "y":
                  u += n("y")
                    ? t.getFullYear()
                    : (t.getFullYear() % 100 < 10 ? "0" : "") +
                      (t.getFullYear() % 100);
                  break;
                case "@":
                  u += t.getTime();
                  break;
                case "!":
                  u += 1e4 * t.getTime() + this._ticksTo1970;
                  break;
                case "'":
                  n("'") ? (u += "'") : (d = !0);
                  break;
                default:
                  u += i.charAt(r);
              }
        return u;
      },
      _possibleChars: function (i) {
        function t(t) {
          var e = i.length > s + 1 && i.charAt(s + 1) === t;
          return e && s++, e;
        }
        var s,
          e = "",
          n = !1;
        for (s = 0; i.length > s; s++)
          if (n) "'" !== i.charAt(s) || t("'") ? (e += i.charAt(s)) : (n = !1);
          else
            switch (i.charAt(s)) {
              case "d":
              case "m":
              case "y":
              case "@":
                e += "0123456789";
                break;
              case "D":
              case "M":
                return null;
              case "'":
                t("'") ? (e += "'") : (n = !0);
                break;
              default:
                e += i.charAt(s);
            }
        return e;
      },
      _get: function (t, e) {
        return void 0 !== t.settings[e] ? t.settings[e] : this._defaults[e];
      },
      _setDateFromField: function (t, e) {
        if (t.input.val() !== t.lastVal) {
          var i = this._get(t, "dateFormat"),
            s = (t.lastVal = t.input ? t.input.val() : null),
            n = this._getDefaultDate(t),
            o = n,
            r = this._getFormatConfig(t);
          try {
            o = this.parseDate(i, s, r) || n;
          } catch (t) {
            s = e ? "" : s;
          }
          (t.selectedDay = o.getDate()),
            (t.drawMonth = t.selectedMonth = o.getMonth()),
            (t.drawYear = t.selectedYear = o.getFullYear()),
            (t.currentDay = s ? o.getDate() : 0),
            (t.currentMonth = s ? o.getMonth() : 0),
            (t.currentYear = s ? o.getFullYear() : 0),
            this._adjustInstDate(t);
        }
      },
      _getDefaultDate: function (t) {
        return this._restrictMinMax(
          t,
          this._determineDate(t, this._get(t, "defaultDate"), new Date())
        );
      },
      _determineDate: function (a, t, e) {
        var i,
          s,
          n =
            null == t || "" === t
              ? e
              : "string" == typeof t
              ? (function (t) {
                  try {
                    return D.datepicker.parseDate(
                      D.datepicker._get(a, "dateFormat"),
                      t,
                      D.datepicker._getFormatConfig(a)
                    );
                  } catch (t) {}
                  for (
                    var e =
                        (t.toLowerCase().match(/^c/)
                          ? D.datepicker._getDate(a)
                          : null) || new Date(),
                      i = e.getFullYear(),
                      s = e.getMonth(),
                      n = e.getDate(),
                      o = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,
                      r = o.exec(t);
                    r;

                  ) {
                    switch (r[2] || "d") {
                      case "d":
                      case "D":
                        n += parseInt(r[1], 10);
                        break;
                      case "w":
                      case "W":
                        n += 7 * parseInt(r[1], 10);
                        break;
                      case "m":
                      case "M":
                        (s += parseInt(r[1], 10)),
                          (n = Math.min(n, D.datepicker._getDaysInMonth(i, s)));
                        break;
                      case "y":
                      case "Y":
                        (i += parseInt(r[1], 10)),
                          (n = Math.min(n, D.datepicker._getDaysInMonth(i, s)));
                    }
                    r = o.exec(t);
                  }
                  return new Date(i, s, n);
                })(t)
              : "number" == typeof t
              ? isNaN(t)
                ? e
                : ((i = t), (s = new Date()).setDate(s.getDate() + i), s)
              : new Date(t.getTime());
        return (
          (n = n && "Invalid Date" == "" + n ? e : n) &&
            (n.setHours(0),
            n.setMinutes(0),
            n.setSeconds(0),
            n.setMilliseconds(0)),
          this._daylightSavingAdjust(n)
        );
      },
      _daylightSavingAdjust: function (t) {
        return t
          ? (t.setHours(12 < t.getHours() ? t.getHours() + 2 : 0), t)
          : null;
      },
      _setDate: function (t, e, i) {
        var s = !e,
          n = t.selectedMonth,
          o = t.selectedYear,
          r = this._restrictMinMax(t, this._determineDate(t, e, new Date()));
        (t.selectedDay = t.currentDay = r.getDate()),
          (t.drawMonth = t.selectedMonth = t.currentMonth = r.getMonth()),
          (t.drawYear = t.selectedYear = t.currentYear = r.getFullYear()),
          (n === t.selectedMonth && o === t.selectedYear) ||
            i ||
            this._notifyChange(t),
          this._adjustInstDate(t),
          t.input && t.input.val(s ? "" : this._formatDate(t));
      },
      _getDate: function (t) {
        return !t.currentYear || (t.input && "" === t.input.val())
          ? null
          : this._daylightSavingAdjust(
              new Date(t.currentYear, t.currentMonth, t.currentDay)
            );
      },
      _attachHandlers: function (t) {
        var e = this._get(t, "stepMonths"),
          i = "#" + t.id.replace(/\\\\/g, "\\");
        t.dpDiv.find("[data-handler]").map(function () {
          var t = {
            prev: function () {
              D.datepicker._adjustDate(i, -e, "M");
            },
            next: function () {
              D.datepicker._adjustDate(i, +e, "M");
            },
            hide: function () {
              D.datepicker._hideDatepicker();
            },
            today: function () {
              D.datepicker._gotoToday(i);
            },
            selectDay: function () {
              return (
                D.datepicker._selectDay(
                  i,
                  +this.getAttribute("data-month"),
                  +this.getAttribute("data-year"),
                  this
                ),
                !1
              );
            },
            selectMonth: function () {
              return D.datepicker._selectMonthYear(i, this, "M"), !1;
            },
            selectYear: function () {
              return D.datepicker._selectMonthYear(i, this, "Y"), !1;
            },
          };
          D(this).on(
            this.getAttribute("data-event"),
            t[this.getAttribute("data-handler")]
          );
        });
      },
      _generateHTML: function (t) {
        var e,
          i,
          s,
          n,
          o,
          r,
          a,
          h,
          l,
          c,
          u,
          d,
          p,
          f,
          g,
          m,
          _,
          v,
          b,
          y,
          w,
          k,
          D,
          C,
          x,
          I,
          P,
          M,
          S,
          T,
          z,
          H,
          N,
          A,
          W,
          O,
          F,
          E,
          R,
          Y = new Date(),
          L = this._daylightSavingAdjust(
            new Date(Y.getFullYear(), Y.getMonth(), Y.getDate())
          ),
          B = this._get(t, "isRTL"),
          j = this._get(t, "showButtonPanel"),
          K = this._get(t, "hideIfNoPrevNext"),
          U = this._get(t, "navigationAsDateFormat"),
          q = this._getNumberOfMonths(t),
          X = this._get(t, "showCurrentAtPos"),
          $ = this._get(t, "stepMonths"),
          V = 1 !== q[0] || 1 !== q[1],
          G = this._daylightSavingAdjust(
            t.currentDay
              ? new Date(t.currentYear, t.currentMonth, t.currentDay)
              : new Date(9999, 9, 9)
          ),
          Q = this._getMinMaxDate(t, "min"),
          J = this._getMinMaxDate(t, "max"),
          Z = t.drawMonth - X,
          tt = t.drawYear;
        if ((Z < 0 && ((Z += 12), tt--), J))
          for (
            e = this._daylightSavingAdjust(
              new Date(
                J.getFullYear(),
                J.getMonth() - q[0] * q[1] + 1,
                J.getDate()
              )
            ),
              e = Q && e < Q ? Q : e;
            this._daylightSavingAdjust(new Date(tt, Z, 1)) > e;

          )
            --Z < 0 && ((Z = 11), tt--);
        for (
          t.drawMonth = Z,
            t.drawYear = tt,
            i = this._get(t, "prevText"),
            i = U
              ? this.formatDate(
                  i,
                  this._daylightSavingAdjust(new Date(tt, Z - $, 1)),
                  this._getFormatConfig(t)
                )
              : i,
            s = this._canAdjustMonth(t, -1, tt, Z)
              ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" +
                i +
                "'><span class='ui-icon ui-icon-circle-triangle-" +
                (B ? "e" : "w") +
                "'>" +
                i +
                "</span></a>"
              : K
              ? ""
              : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" +
                i +
                "'><span class='ui-icon ui-icon-circle-triangle-" +
                (B ? "e" : "w") +
                "'>" +
                i +
                "</span></a>",
            n = this._get(t, "nextText"),
            n = U
              ? this.formatDate(
                  n,
                  this._daylightSavingAdjust(new Date(tt, Z + $, 1)),
                  this._getFormatConfig(t)
                )
              : n,
            o = this._canAdjustMonth(t, 1, tt, Z)
              ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" +
                n +
                "'><span class='ui-icon ui-icon-circle-triangle-" +
                (B ? "w" : "e") +
                "'>" +
                n +
                "</span></a>"
              : K
              ? ""
              : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" +
                n +
                "'><span class='ui-icon ui-icon-circle-triangle-" +
                (B ? "w" : "e") +
                "'>" +
                n +
                "</span></a>",
            r = this._get(t, "currentText"),
            a = this._get(t, "gotoCurrent") && t.currentDay ? G : L,
            r = U ? this.formatDate(r, a, this._getFormatConfig(t)) : r,
            h = t.inline
              ? ""
              : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" +
                this._get(t, "closeText") +
                "</button>",
            l = j
              ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" +
                (B ? h : "") +
                (this._isInRange(t, a)
                  ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" +
                    r +
                    "</button>"
                  : "") +
                (B ? "" : h) +
                "</div>"
              : "",
            c = parseInt(this._get(t, "firstDay"), 10),
            c = isNaN(c) ? 0 : c,
            u = this._get(t, "showWeek"),
            d = this._get(t, "dayNames"),
            p = this._get(t, "dayNamesMin"),
            f = this._get(t, "monthNames"),
            g = this._get(t, "monthNamesShort"),
            m = this._get(t, "beforeShowDay"),
            _ = this._get(t, "showOtherMonths"),
            v = this._get(t, "selectOtherMonths"),
            b = this._getDefaultDate(t),
            y = "",
            k = 0;
          q[0] > k;
          k++
        ) {
          for (D = "", this.maxRows = 4, C = 0; q[1] > C; C++) {
            if (
              ((x = this._daylightSavingAdjust(new Date(tt, Z, t.selectedDay))),
              (I = " ui-corner-all"),
              (P = ""),
              V)
            ) {
              if (((P += "<div class='ui-datepicker-group"), 1 < q[1]))
                switch (C) {
                  case 0:
                    (P += " ui-datepicker-group-first"),
                      (I = " ui-corner-" + (B ? "right" : "left"));
                    break;
                  case q[1] - 1:
                    (P += " ui-datepicker-group-last"),
                      (I = " ui-corner-" + (B ? "left" : "right"));
                    break;
                  default:
                    (P += " ui-datepicker-group-middle"), (I = "");
                }
              P += "'>";
            }
            for (
              P +=
                "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" +
                I +
                "'>" +
                (/all|left/.test(I) && 0 === k ? (B ? o : s) : "") +
                (/all|right/.test(I) && 0 === k ? (B ? s : o) : "") +
                this._generateMonthYearHeader(
                  t,
                  Z,
                  tt,
                  Q,
                  J,
                  0 < k || 0 < C,
                  f,
                  g
                ) +
                "</div><table class='ui-datepicker-calendar'><thead><tr>",
                M = u
                  ? "<th class='ui-datepicker-week-col'>" +
                    this._get(t, "weekHeader") +
                    "</th>"
                  : "",
                w = 0;
              w < 7;
              w++
            )
              M +=
                "<th scope='col'" +
                (5 <= (w + c + 6) % 7
                  ? " class='ui-datepicker-week-end'"
                  : "") +
                "><span title='" +
                d[(S = (w + c) % 7)] +
                "'>" +
                p[S] +
                "</span></th>";
            for (
              P += M + "</tr></thead><tbody>",
                T = this._getDaysInMonth(tt, Z),
                tt === t.selectedYear &&
                  Z === t.selectedMonth &&
                  (t.selectedDay = Math.min(t.selectedDay, T)),
                z = (this._getFirstDayOfMonth(tt, Z) - c + 7) % 7,
                H = Math.ceil((z + T) / 7),
                N = V && this.maxRows > H ? this.maxRows : H,
                this.maxRows = N,
                A = this._daylightSavingAdjust(new Date(tt, Z, 1 - z)),
                W = 0;
              W < N;
              W++
            ) {
              for (
                P += "<tr>",
                  O = u
                    ? "<td class='ui-datepicker-week-col'>" +
                      this._get(t, "calculateWeek")(A) +
                      "</td>"
                    : "",
                  w = 0;
                w < 7;
                w++
              )
                (F = m ? m.apply(t.input ? t.input[0] : null, [A]) : [!0, ""]),
                  (R =
                    ((E = A.getMonth() !== Z) && !v) ||
                    !F[0] ||
                    (Q && A < Q) ||
                    (J && J < A)),
                  (O +=
                    "<td class='" +
                    (5 <= (w + c + 6) % 7 ? " ui-datepicker-week-end" : "") +
                    (E ? " ui-datepicker-other-month" : "") +
                    ((A.getTime() === x.getTime() &&
                      Z === t.selectedMonth &&
                      t._keyEvent) ||
                    (b.getTime() === A.getTime() && b.getTime() === x.getTime())
                      ? " " + this._dayOverClass
                      : "") +
                    (R
                      ? " " + this._unselectableClass + " ui-state-disabled"
                      : "") +
                    (E && !_
                      ? ""
                      : " " +
                        F[1] +
                        (A.getTime() === G.getTime()
                          ? " " + this._currentClass
                          : "") +
                        (A.getTime() === L.getTime()
                          ? " ui-datepicker-today"
                          : "")) +
                    "'" +
                    ((E && !_) || !F[2]
                      ? ""
                      : " title='" + F[2].replace(/'/g, "&#39;") + "'") +
                    (R
                      ? ""
                      : " data-handler='selectDay' data-event='click' data-month='" +
                        A.getMonth() +
                        "' data-year='" +
                        A.getFullYear() +
                        "'") +
                    ">" +
                    (E && !_
                      ? "&#xa0;"
                      : R
                      ? "<span class='ui-state-default'>" +
                        A.getDate() +
                        "</span>"
                      : "<a class='ui-state-default" +
                        (A.getTime() === L.getTime()
                          ? " ui-state-highlight"
                          : "") +
                        (A.getTime() === G.getTime()
                          ? " ui-state-active"
                          : "") +
                        (E ? " ui-priority-secondary" : "") +
                        "' href='#'>" +
                        A.getDate() +
                        "</a>") +
                    "</td>"),
                  A.setDate(A.getDate() + 1),
                  (A = this._daylightSavingAdjust(A));
              P += O + "</tr>";
            }
            11 < ++Z && ((Z = 0), tt++),
              (D += P +=
                "</tbody></table>" +
                (V
                  ? "</div>" +
                    (0 < q[0] && C === q[1] - 1
                      ? "<div class='ui-datepicker-row-break'></div>"
                      : "")
                  : ""));
          }
          y += D;
        }
        return (y += l), (t._keyEvent = !1), y;
      },
      _generateMonthYearHeader: function (t, e, i, s, n, o, r, a) {
        var h,
          l,
          c,
          u,
          d,
          p,
          f,
          g,
          m = this._get(t, "changeMonth"),
          _ = this._get(t, "changeYear"),
          v = this._get(t, "showMonthAfterYear"),
          b = "<div class='ui-datepicker-title'>",
          y = "";
        if (o || !m)
          y += "<span class='ui-datepicker-month'>" + r[e] + "</span>";
        else {
          for (
            h = s && s.getFullYear() === i,
              l = n && n.getFullYear() === i,
              y +=
                "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",
              c = 0;
            c < 12;
            c++
          )
            (!h || c >= s.getMonth()) &&
              (!l || n.getMonth() >= c) &&
              (y +=
                "<option value='" +
                c +
                "'" +
                (c === e ? " selected='selected'" : "") +
                ">" +
                a[c] +
                "</option>");
          y += "</select>";
        }
        if ((v || (b += y + (!o && m && _ ? "" : "&#xa0;")), !t.yearshtml))
          if (((t.yearshtml = ""), o || !_))
            b += "<span class='ui-datepicker-year'>" + i + "</span>";
          else {
            for (
              u = this._get(t, "yearRange").split(":"),
                d = new Date().getFullYear(),
                f = (p = function (t) {
                  var e = t.match(/c[+\-].*/)
                    ? i + parseInt(t.substring(1), 10)
                    : t.match(/[+\-].*/)
                    ? d + parseInt(t, 10)
                    : parseInt(t, 10);
                  return isNaN(e) ? d : e;
                })(u[0]),
                g = Math.max(f, p(u[1] || "")),
                f = s ? Math.max(f, s.getFullYear()) : f,
                g = n ? Math.min(g, n.getFullYear()) : g,
                t.yearshtml +=
                  "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";
              f <= g;
              f++
            )
              t.yearshtml +=
                "<option value='" +
                f +
                "'" +
                (f === i ? " selected='selected'" : "") +
                ">" +
                f +
                "</option>";
            (t.yearshtml += "</select>"),
              (b += t.yearshtml),
              (t.yearshtml = null);
          }
        return (
          (b += this._get(t, "yearSuffix")),
          v && (b += (!o && m && _ ? "" : "&#xa0;") + y),
          b + "</div>"
        );
      },
      _adjustInstDate: function (t, e, i) {
        var s = t.selectedYear + ("Y" === i ? e : 0),
          n = t.selectedMonth + ("M" === i ? e : 0),
          o =
            Math.min(t.selectedDay, this._getDaysInMonth(s, n)) +
            ("D" === i ? e : 0),
          r = this._restrictMinMax(
            t,
            this._daylightSavingAdjust(new Date(s, n, o))
          );
        (t.selectedDay = r.getDate()),
          (t.drawMonth = t.selectedMonth = r.getMonth()),
          (t.drawYear = t.selectedYear = r.getFullYear()),
          ("M" !== i && "Y" !== i) || this._notifyChange(t);
      },
      _restrictMinMax: function (t, e) {
        var i = this._getMinMaxDate(t, "min"),
          s = this._getMinMaxDate(t, "max"),
          n = i && e < i ? i : e;
        return s && s < n ? s : n;
      },
      _notifyChange: function (t) {
        var e = this._get(t, "onChangeMonthYear");
        e &&
          e.apply(t.input ? t.input[0] : null, [
            t.selectedYear,
            t.selectedMonth + 1,
            t,
          ]);
      },
      _getNumberOfMonths: function (t) {
        var e = this._get(t, "numberOfMonths");
        return null == e ? [1, 1] : "number" == typeof e ? [1, e] : e;
      },
      _getMinMaxDate: function (t, e) {
        return this._determineDate(t, this._get(t, e + "Date"), null);
      },
      _getDaysInMonth: function (t, e) {
        return 32 - this._daylightSavingAdjust(new Date(t, e, 32)).getDate();
      },
      _getFirstDayOfMonth: function (t, e) {
        return new Date(t, e, 1).getDay();
      },
      _canAdjustMonth: function (t, e, i, s) {
        var n = this._getNumberOfMonths(t),
          o = this._daylightSavingAdjust(
            new Date(i, s + (e < 0 ? e : n[0] * n[1]), 1)
          );
        return (
          e < 0 &&
            o.setDate(this._getDaysInMonth(o.getFullYear(), o.getMonth())),
          this._isInRange(t, o)
        );
      },
      _isInRange: function (t, e) {
        var i,
          s,
          n = this._getMinMaxDate(t, "min"),
          o = this._getMinMaxDate(t, "max"),
          r = null,
          a = null,
          h = this._get(t, "yearRange");
        return (
          h &&
            ((i = h.split(":")),
            (s = new Date().getFullYear()),
            (r = parseInt(i[0], 10)),
            (a = parseInt(i[1], 10)),
            i[0].match(/[+\-].*/) && (r += s),
            i[1].match(/[+\-].*/) && (a += s)),
          (!n || e.getTime() >= n.getTime()) &&
            (!o || e.getTime() <= o.getTime()) &&
            (!r || e.getFullYear() >= r) &&
            (!a || a >= e.getFullYear())
        );
      },
      _getFormatConfig: function (t) {
        var e = this._get(t, "shortYearCutoff");
        return {
          shortYearCutoff: (e =
            "string" != typeof e
              ? e
              : (new Date().getFullYear() % 100) + parseInt(e, 10)),
          dayNamesShort: this._get(t, "dayNamesShort"),
          dayNames: this._get(t, "dayNames"),
          monthNamesShort: this._get(t, "monthNamesShort"),
          monthNames: this._get(t, "monthNames"),
        };
      },
      _formatDate: function (t, e, i, s) {
        e ||
          ((t.currentDay = t.selectedDay),
          (t.currentMonth = t.selectedMonth),
          (t.currentYear = t.selectedYear));
        var n = e
          ? "object" == typeof e
            ? e
            : this._daylightSavingAdjust(new Date(s, i, e))
          : this._daylightSavingAdjust(
              new Date(t.currentYear, t.currentMonth, t.currentDay)
            );
        return this.formatDate(
          this._get(t, "dateFormat"),
          n,
          this._getFormatConfig(t)
        );
      },
    }),
    (D.fn.datepicker = function (t) {
      if (!this.length) return this;
      D.datepicker.initialized ||
        (D(document).on("mousedown", D.datepicker._checkExternalClick),
        (D.datepicker.initialized = !0)),
        0 === D("#" + D.datepicker._mainDivId).length &&
          D("body").append(D.datepicker.dpDiv);
      var e = Array.prototype.slice.call(arguments, 1);
      return "string" != typeof t ||
        ("isDisabled" !== t && "getDate" !== t && "widget" !== t)
        ? "option" === t &&
          2 === arguments.length &&
          "string" == typeof arguments[1]
          ? D.datepicker["_" + t + "Datepicker"].apply(
              D.datepicker,
              [this[0]].concat(e)
            )
          : this.each(function () {
              "string" == typeof t
                ? D.datepicker["_" + t + "Datepicker"].apply(
                    D.datepicker,
                    [this].concat(e)
                  )
                : D.datepicker._attachDatepicker(this, t);
            })
        : D.datepicker["_" + t + "Datepicker"].apply(
            D.datepicker,
            [this[0]].concat(e)
          );
    }),
    (D.datepicker = new t()),
    (D.datepicker.initialized = !1),
    (D.datepicker.uuid = new Date().getTime()),
    (D.datepicker.version = "1.12.1"),
    D.datepicker,
    D.widget("ui.menu", {
      version: "1.12.1",
      defaultElement: "<ul>",
      delay: 300,
      options: {
        icons: {
          submenu: "ui-icon-caret-1-e",
        },
        items: "> *",
        menus: "ul",
        position: {
          my: "left top",
          at: "right top",
        },
        role: "menu",
        blur: null,
        focus: null,
        select: null,
      },
      _create: function () {
        (this.activeMenu = this.element),
          (this.mouseHandled = !1),
          this.element.uniqueId().attr({
            role: this.options.role,
            tabIndex: 0,
          }),
          this._addClass("ui-menu", "ui-widget ui-widget-content"),
          this._on({
            "mousedown .ui-menu-item": function (t) {
              t.preventDefault();
            },
            "click .ui-menu-item": function (t) {
              var e = D(t.target),
                i = D(D.ui.safeActiveElement(this.document[0]));
              !this.mouseHandled &&
                e.not(".ui-state-disabled").length &&
                (this.select(t),
                t.isPropagationStopped() || (this.mouseHandled = !0),
                e.has(".ui-menu").length
                  ? this.expand(t)
                  : !this.element.is(":focus") &&
                    i.closest(".ui-menu").length &&
                    (this.element.trigger("focus", [!0]),
                    this.active &&
                      1 === this.active.parents(".ui-menu").length &&
                      clearTimeout(this.timer)));
            },
            "mouseenter .ui-menu-item": function (t) {
              if (!this.previousFilter) {
                var e = D(t.target).closest(".ui-menu-item"),
                  i = D(t.currentTarget);
                e[0] === i[0] &&
                  (this._removeClass(
                    i.siblings().children(".ui-state-active"),
                    null,
                    "ui-state-active"
                  ),
                  this.focus(t, i));
              }
            },
            mouseleave: "collapseAll",
            "mouseleave .ui-menu": "collapseAll",
            focus: function (t, e) {
              var i =
                this.active || this.element.find(this.options.items).eq(0);
              e || this.focus(t, i);
            },
            blur: function (t) {
              this._delay(function () {
                D.contains(
                  this.element[0],
                  D.ui.safeActiveElement(this.document[0])
                ) || this.collapseAll(t);
              });
            },
            keydown: "_keydown",
          }),
          this.refresh(),
          this._on(this.document, {
            click: function (t) {
              this._closeOnDocumentClick(t) && this.collapseAll(t),
                (this.mouseHandled = !1);
            },
          });
      },
      _destroy: function () {
        var t = this.element
          .find(".ui-menu-item")
          .removeAttr("role aria-disabled")
          .children(".ui-menu-item-wrapper")
          .removeUniqueId()
          .removeAttr("tabIndex role aria-haspopup");
        this.element
          .removeAttr("aria-activedescendant")
          .find(".ui-menu")
          .addBack()
          .removeAttr(
            "role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex"
          )
          .removeUniqueId()
          .show(),
          t.children().each(function () {
            var t = D(this);
            t.data("ui-menu-submenu-caret") && t.remove();
          });
      },
      _keydown: function (t) {
        var e,
          i,
          s,
          n,
          o = !0;
        switch (t.keyCode) {
          case D.ui.keyCode.PAGE_UP:
            this.previousPage(t);
            break;
          case D.ui.keyCode.PAGE_DOWN:
            this.nextPage(t);
            break;
          case D.ui.keyCode.HOME:
            this._move("first", "first", t);
            break;
          case D.ui.keyCode.END:
            this._move("last", "last", t);
            break;
          case D.ui.keyCode.UP:
            this.previous(t);
            break;
          case D.ui.keyCode.DOWN:
            this.next(t);
            break;
          case D.ui.keyCode.LEFT:
            this.collapse(t);
            break;
          case D.ui.keyCode.RIGHT:
            this.active &&
              !this.active.is(".ui-state-disabled") &&
              this.expand(t);
            break;
          case D.ui.keyCode.ENTER:
          case D.ui.keyCode.SPACE:
            this._activate(t);
            break;
          case D.ui.keyCode.ESCAPE:
            this.collapse(t);
            break;
          default:
            (o = !1),
              (i = this.previousFilter || ""),
              (n = !1),
              (s =
                96 <= t.keyCode && t.keyCode <= 105
                  ? "" + (t.keyCode - 96)
                  : String.fromCharCode(t.keyCode)),
              clearTimeout(this.filterTimer),
              s === i ? (n = !0) : (s = i + s),
              (e = this._filterMenuItems(s)),
              (e =
                n && -1 !== e.index(this.active.next())
                  ? this.active.nextAll(".ui-menu-item")
                  : e).length ||
                ((s = String.fromCharCode(t.keyCode)),
                (e = this._filterMenuItems(s))),
              e.length
                ? (this.focus(t, e),
                  (this.previousFilter = s),
                  (this.filterTimer = this._delay(function () {
                    delete this.previousFilter;
                  }, 1e3)))
                : delete this.previousFilter;
        }
        o && t.preventDefault();
      },
      _activate: function (t) {
        this.active &&
          !this.active.is(".ui-state-disabled") &&
          (this.active.children("[aria-haspopup='true']").length
            ? this.expand(t)
            : this.select(t));
      },
      refresh: function () {
        var t,
          e,
          i,
          s,
          n = this,
          o = this.options.icons.submenu,
          r = this.element.find(this.options.menus);
        this._toggleClass(
          "ui-menu-icons",
          null,
          !!this.element.find(".ui-icon").length
        ),
          (e = r
            .filter(":not(.ui-menu)")
            .hide()
            .attr({
              role: this.options.role,
              "aria-hidden": "true",
              "aria-expanded": "false",
            })
            .each(function () {
              var t = D(this),
                e = t.prev(),
                i = D("<span>").data("ui-menu-submenu-caret", !0);
              n._addClass(i, "ui-menu-icon", "ui-icon " + o),
                e.attr("aria-haspopup", "true").prepend(i),
                t.attr("aria-labelledby", e.attr("id"));
            })),
          this._addClass(e, "ui-menu", "ui-widget ui-widget-content ui-front"),
          (t = r.add(this.element).find(this.options.items))
            .not(".ui-menu-item")
            .each(function () {
              var t = D(this);
              n._isDivider(t) &&
                n._addClass(t, "ui-menu-divider", "ui-widget-content");
            }),
          (s = (i = t.not(".ui-menu-item, .ui-menu-divider"))
            .children()
            .not(".ui-menu")
            .uniqueId()
            .attr({
              tabIndex: -1,
              role: this._itemRole(),
            })),
          this._addClass(i, "ui-menu-item")._addClass(
            s,
            "ui-menu-item-wrapper"
          ),
          t.filter(".ui-state-disabled").attr("aria-disabled", "true"),
          this.active &&
            !D.contains(this.element[0], this.active[0]) &&
            this.blur();
      },
      _itemRole: function () {
        return {
          menu: "menuitem",
          listbox: "option",
        }[this.options.role];
      },
      _setOption: function (t, e) {
        if ("icons" === t) {
          var i = this.element.find(".ui-menu-icon");
          this._removeClass(i, null, this.options.icons.submenu)._addClass(
            i,
            null,
            e.submenu
          );
        }
        this._super(t, e);
      },
      _setOptionDisabled: function (t) {
        this._super(t),
          this.element.attr("aria-disabled", t + ""),
          this._toggleClass(null, "ui-state-disabled", !!t);
      },
      focus: function (t, e) {
        var i, s, n;
        this.blur(t, t && "focus" === t.type),
          this._scrollIntoView(e),
          (this.active = e.first()),
          (s = this.active.children(".ui-menu-item-wrapper")),
          this._addClass(s, null, "ui-state-active"),
          this.options.role &&
            this.element.attr("aria-activedescendant", s.attr("id")),
          (n = this.active
            .parent()
            .closest(".ui-menu-item")
            .children(".ui-menu-item-wrapper")),
          this._addClass(n, null, "ui-state-active"),
          t && "keydown" === t.type
            ? this._close()
            : (this.timer = this._delay(function () {
                this._close();
              }, this.delay)),
          (i = e.children(".ui-menu")).length &&
            t &&
            /^mouse/.test(t.type) &&
            this._startOpening(i),
          (this.activeMenu = e.parent()),
          this._trigger("focus", t, {
            item: e,
          });
      },
      _scrollIntoView: function (t) {
        var e, i, s, n, o, r;
        this._hasScroll() &&
          ((e = parseFloat(D.css(this.activeMenu[0], "borderTopWidth")) || 0),
          (i = parseFloat(D.css(this.activeMenu[0], "paddingTop")) || 0),
          (s = t.offset().top - this.activeMenu.offset().top - e - i),
          (n = this.activeMenu.scrollTop()),
          (o = this.activeMenu.height()),
          (r = t.outerHeight()),
          s < 0
            ? this.activeMenu.scrollTop(n + s)
            : o < s + r && this.activeMenu.scrollTop(n + s - o + r));
      },
      blur: function (t, e) {
        e || clearTimeout(this.timer),
          this.active &&
            (this._removeClass(
              this.active.children(".ui-menu-item-wrapper"),
              null,
              "ui-state-active"
            ),
            this._trigger("blur", t, {
              item: this.active,
            }),
            (this.active = null));
      },
      _startOpening: function (t) {
        clearTimeout(this.timer),
          "true" === t.attr("aria-hidden") &&
            (this.timer = this._delay(function () {
              this._close(), this._open(t);
            }, this.delay));
      },
      _open: function (t) {
        var e = D.extend(
          {
            of: this.active,
          },
          this.options.position
        );
        clearTimeout(this.timer),
          this.element
            .find(".ui-menu")
            .not(t.parents(".ui-menu"))
            .hide()
            .attr("aria-hidden", "true"),
          t
            .show()
            .removeAttr("aria-hidden")
            .attr("aria-expanded", "true")
            .position(e);
      },
      collapseAll: function (e, i) {
        clearTimeout(this.timer),
          (this.timer = this._delay(function () {
            var t = i
              ? this.element
              : D(e && e.target).closest(this.element.find(".ui-menu"));
            t.length || (t = this.element),
              this._close(t),
              this.blur(e),
              this._removeClass(
                t.find(".ui-state-active"),
                null,
                "ui-state-active"
              ),
              (this.activeMenu = t);
          }, this.delay));
      },
      _close: function (t) {
        (t = t || (this.active ? this.active.parent() : this.element))
          .find(".ui-menu")
          .hide()
          .attr("aria-hidden", "true")
          .attr("aria-expanded", "false");
      },
      _closeOnDocumentClick: function (t) {
        return !D(t.target).closest(".ui-menu").length;
      },
      _isDivider: function (t) {
        return !/[^\-\u2014\u2013\s]/.test(t.text());
      },
      collapse: function (t) {
        var e =
          this.active &&
          this.active.parent().closest(".ui-menu-item", this.element);
        e && e.length && (this._close(), this.focus(t, e));
      },
      expand: function (t) {
        var e =
          this.active &&
          this.active.children(".ui-menu ").find(this.options.items).first();
        e &&
          e.length &&
          (this._open(e.parent()),
          this._delay(function () {
            this.focus(t, e);
          }));
      },
      next: function (t) {
        this._move("next", "first", t);
      },
      previous: function (t) {
        this._move("prev", "last", t);
      },
      isFirstItem: function () {
        return this.active && !this.active.prevAll(".ui-menu-item").length;
      },
      isLastItem: function () {
        return this.active && !this.active.nextAll(".ui-menu-item").length;
      },
      _move: function (t, e, i) {
        var s;
        this.active &&
          (s =
            "first" === t || "last" === t
              ? this.active["first" === t ? "prevAll" : "nextAll"](
                  ".ui-menu-item"
                ).eq(-1)
              : this.active[t + "All"](".ui-menu-item").eq(0)),
          (s && s.length && this.active) ||
            (s = this.activeMenu.find(this.options.items)[e]()),
          this.focus(i, s);
      },
      nextPage: function (t) {
        var e, i, s;
        return this.active
          ? void (
              this.isLastItem() ||
              (this._hasScroll()
                ? ((i = this.active.offset().top),
                  (s = this.element.height()),
                  this.active.nextAll(".ui-menu-item").each(function () {
                    return (e = D(this)).offset().top - i - s < 0;
                  }),
                  this.focus(t, e))
                : this.focus(
                    t,
                    this.activeMenu
                      .find(this.options.items)
                      [this.active ? "last" : "first"]()
                  ))
            )
          : void this.next(t);
      },
      previousPage: function (t) {
        var e, i, s;
        return this.active
          ? void (
              this.isFirstItem() ||
              (this._hasScroll()
                ? ((i = this.active.offset().top),
                  (s = this.element.height()),
                  this.active.prevAll(".ui-menu-item").each(function () {
                    return 0 < (e = D(this)).offset().top - i + s;
                  }),
                  this.focus(t, e))
                : this.focus(
                    t,
                    this.activeMenu.find(this.options.items).first()
                  ))
            )
          : void this.next(t);
      },
      _hasScroll: function () {
        return this.element.outerHeight() < this.element.prop("scrollHeight");
      },
      select: function (t) {
        this.active = this.active || D(t.target).closest(".ui-menu-item");
        var e = {
          item: this.active,
        };
        this.active.has(".ui-menu").length || this.collapseAll(t, !0),
          this._trigger("select", t, e);
      },
      _filterMenuItems: function (t) {
        var e = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"),
          i = RegExp("^" + e, "i");
        return this.activeMenu
          .find(this.options.items)
          .filter(".ui-menu-item")
          .filter(function () {
            return i.test(
              D.trim(D(this).children(".ui-menu-item-wrapper").text())
            );
          });
      },
    }),
    D.widget("ui.selectmenu", [
      D.ui.formResetMixin,
      {
        version: "1.12.1",
        defaultElement: "<select>",
        options: {
          appendTo: null,
          classes: {
            "ui-selectmenu-button-open": "ui-corner-top",
            "ui-selectmenu-button-closed": "ui-corner-all",
          },
          disabled: null,
          icons: {
            button: "ui-icon-triangle-1-s",
          },
          position: {
            my: "left top",
            at: "left bottom",
            collision: "none",
          },
          width: !1,
          change: null,
          close: null,
          focus: null,
          open: null,
          select: null,
        },
        _create: function () {
          var t = this.element.uniqueId().attr("id");
          (this.ids = {
            element: t,
            button: t + "-button",
            menu: t + "-menu",
          }),
            this._drawButton(),
            this._drawMenu(),
            this._bindFormResetHandler(),
            (this._rendered = !1),
            (this.menuItems = D());
        },
        _drawButton: function () {
          var t,
            e = this,
            i = this._parseOption(
              this.element.find("option:selected"),
              this.element[0].selectedIndex
            );
          (this.labels = this.element.labels().attr("for", this.ids.button)),
            this._on(this.labels, {
              click: function (t) {
                this.button.focus(), t.preventDefault();
              },
            }),
            this.element.hide(),
            (this.button = D("<span>", {
              tabindex: this.options.disabled ? -1 : 0,
              id: this.ids.button,
              role: "combobox",
              "aria-expanded": "false",
              "aria-autocomplete": "list",
              "aria-owns": this.ids.menu,
              "aria-haspopup": "true",
              title: this.element.attr("title"),
            }).insertAfter(this.element)),
            this._addClass(
              this.button,
              "ui-selectmenu-button ui-selectmenu-button-closed",
              "ui-button ui-widget"
            ),
            (t = D("<span>").appendTo(this.button)),
            this._addClass(
              t,
              "ui-selectmenu-icon",
              "ui-icon " + this.options.icons.button
            ),
            (this.buttonItem = this._renderButtonItem(i).appendTo(this.button)),
            !1 !== this.options.width && this._resizeButton(),
            this._on(this.button, this._buttonEvents),
            this.button.one("focusin", function () {
              e._rendered || e._refreshMenu();
            });
        },
        _drawMenu: function () {
          var s = this;
          (this.menu = D("<ul>", {
            "aria-hidden": "true",
            "aria-labelledby": this.ids.button,
            id: this.ids.menu,
          })),
            (this.menuWrap = D("<div>").append(this.menu)),
            this._addClass(this.menuWrap, "ui-selectmenu-menu", "ui-front"),
            this.menuWrap.appendTo(this._appendTo()),
            (this.menuInstance = this.menu
              .menu({
                classes: {
                  "ui-menu": "ui-corner-bottom",
                },
                role: "listbox",
                select: function (t, e) {
                  t.preventDefault(),
                    s._setSelection(),
                    s._select(e.item.data("ui-selectmenu-item"), t);
                },
                focus: function (t, e) {
                  var i = e.item.data("ui-selectmenu-item");
                  null != s.focusIndex &&
                    i.index !== s.focusIndex &&
                    (s._trigger("focus", t, {
                      item: i,
                    }),
                    s.isOpen || s._select(i, t)),
                    (s.focusIndex = i.index),
                    s.button.attr(
                      "aria-activedescendant",
                      s.menuItems.eq(i.index).attr("id")
                    );
                },
              })
              .menu("instance")),
            this.menuInstance._off(this.menu, "mouseleave"),
            (this.menuInstance._closeOnDocumentClick = function () {
              return !1;
            }),
            (this.menuInstance._isDivider = function () {
              return !1;
            });
        },
        refresh: function () {
          this._refreshMenu(),
            this.buttonItem.replaceWith(
              (this.buttonItem = this._renderButtonItem(
                this._getSelectedItem().data("ui-selectmenu-item") || {}
              ))
            ),
            null === this.options.width && this._resizeButton();
        },
        _refreshMenu: function () {
          var t,
            e = this.element.find("option");
          this.menu.empty(),
            this._parseOptions(e),
            this._renderMenu(this.menu, this.items),
            this.menuInstance.refresh(),
            (this.menuItems = this.menu
              .find("li")
              .not(".ui-selectmenu-optgroup")
              .find(".ui-menu-item-wrapper")),
            (this._rendered = !0),
            e.length &&
              ((t = this._getSelectedItem()),
              this.menuInstance.focus(null, t),
              this._setAria(t.data("ui-selectmenu-item")),
              this._setOption("disabled", this.element.prop("disabled")));
        },
        open: function (t) {
          this.options.disabled ||
            (this._rendered
              ? (this._removeClass(
                  this.menu.find(".ui-state-active"),
                  null,
                  "ui-state-active"
                ),
                this.menuInstance.focus(null, this._getSelectedItem()))
              : this._refreshMenu(),
            this.menuItems.length &&
              ((this.isOpen = !0),
              this._toggleAttr(),
              this._resizeMenu(),
              this._position(),
              this._on(this.document, this._documentClick),
              this._trigger("open", t)));
        },
        _position: function () {
          this.menuWrap.position(
            D.extend(
              {
                of: this.button,
              },
              this.options.position
            )
          );
        },
        close: function (t) {
          this.isOpen &&
            ((this.isOpen = !1),
            this._toggleAttr(),
            (this.range = null),
            this._off(this.document),
            this._trigger("close", t));
        },
        widget: function () {
          return this.button;
        },
        menuWidget: function () {
          return this.menu;
        },
        _renderButtonItem: function (t) {
          var e = D("<span>");
          return (
            this._setText(e, t.label),
            this._addClass(e, "ui-selectmenu-text"),
            e
          );
        },
        _renderMenu: function (s, t) {
          var n = this,
            o = "";
          D.each(t, function (t, e) {
            var i;
            e.optgroup !== o &&
              ((i = D("<li>", {
                text: e.optgroup,
              })),
              n._addClass(
                i,
                "ui-selectmenu-optgroup",
                "ui-menu-divider" +
                  (e.element.parent("optgroup").prop("disabled")
                    ? " ui-state-disabled"
                    : "")
              ),
              i.appendTo(s),
              (o = e.optgroup)),
              n._renderItemData(s, e);
          });
        },
        _renderItemData: function (t, e) {
          return this._renderItem(t, e).data("ui-selectmenu-item", e);
        },
        _renderItem: function (t, e) {
          var i = D("<li>"),
            s = D("<div>", {
              title: e.element.attr("title"),
            });
          return (
            e.disabled && this._addClass(i, null, "ui-state-disabled"),
            this._setText(s, e.label),
            i.append(s).appendTo(t)
          );
        },
        _setText: function (t, e) {
          e ? t.text(e) : t.html("&#160;");
        },
        _move: function (t, e) {
          var i,
            s,
            n = ".ui-menu-item";
          this.isOpen
            ? (i = this.menuItems.eq(this.focusIndex).parent("li"))
            : ((i = this.menuItems
                .eq(this.element[0].selectedIndex)
                .parent("li")),
              (n += ":not(.ui-state-disabled)")),
            (s =
              "first" === t || "last" === t
                ? i["first" === t ? "prevAll" : "nextAll"](n).eq(-1)
                : i[t + "All"](n).eq(0)).length &&
              this.menuInstance.focus(e, s);
        },
        _getSelectedItem: function () {
          return this.menuItems.eq(this.element[0].selectedIndex).parent("li");
        },
        _toggle: function (t) {
          this[this.isOpen ? "close" : "open"](t);
        },
        _setSelection: function () {
          var t;
          this.range &&
            (window.getSelection
              ? ((t = window.getSelection()).removeAllRanges(),
                t.addRange(this.range))
              : this.range.select(),
            this.button.focus());
        },
        _documentClick: {
          mousedown: function (t) {
            this.isOpen &&
              (D(t.target).closest(
                ".ui-selectmenu-menu, #" + D.ui.escapeSelector(this.ids.button)
              ).length ||
                this.close(t));
          },
        },
        _buttonEvents: {
          mousedown: function () {
            var t;
            window.getSelection
              ? (t = window.getSelection()).rangeCount &&
                (this.range = t.getRangeAt(0))
              : (this.range = document.selection.createRange());
          },
          click: function (t) {
            this._setSelection(), this._toggle(t);
          },
          keydown: function (t) {
            var e = !0;
            switch (t.keyCode) {
              case D.ui.keyCode.TAB:
              case D.ui.keyCode.ESCAPE:
                this.close(t), (e = !1);
                break;
              case D.ui.keyCode.ENTER:
                this.isOpen && this._selectFocusedItem(t);
                break;
              case D.ui.keyCode.UP:
                t.altKey ? this._toggle(t) : this._move("prev", t);
                break;
              case D.ui.keyCode.DOWN:
                t.altKey ? this._toggle(t) : this._move("next", t);
                break;
              case D.ui.keyCode.SPACE:
                this.isOpen ? this._selectFocusedItem(t) : this._toggle(t);
                break;
              case D.ui.keyCode.LEFT:
                this._move("prev", t);
                break;
              case D.ui.keyCode.RIGHT:
                this._move("next", t);
                break;
              case D.ui.keyCode.HOME:
              case D.ui.keyCode.PAGE_UP:
                this._move("first", t);
                break;
              case D.ui.keyCode.END:
              case D.ui.keyCode.PAGE_DOWN:
                this._move("last", t);
                break;
              default:
                this.menu.trigger(t), (e = !1);
            }
            e && t.preventDefault();
          },
        },
        _selectFocusedItem: function (t) {
          var e = this.menuItems.eq(this.focusIndex).parent("li");
          e.hasClass("ui-state-disabled") ||
            this._select(e.data("ui-selectmenu-item"), t);
        },
        _select: function (t, e) {
          var i = this.element[0].selectedIndex;
          (this.element[0].selectedIndex = t.index),
            this.buttonItem.replaceWith(
              (this.buttonItem = this._renderButtonItem(t))
            ),
            this._setAria(t),
            this._trigger("select", e, {
              item: t,
            }),
            t.index !== i &&
              this._trigger("change", e, {
                item: t,
              }),
            this.close(e);
        },
        _setAria: function (t) {
          var e = this.menuItems.eq(t.index).attr("id");
          this.button.attr({
            "aria-labelledby": e,
            "aria-activedescendant": e,
          }),
            this.menu.attr("aria-activedescendant", e);
        },
        _setOption: function (t, e) {
          if ("icons" === t) {
            var i = this.button.find("span.ui-icon");
            this._removeClass(i, null, this.options.icons.button)._addClass(
              i,
              null,
              e.button
            );
          }
          this._super(t, e),
            "appendTo" === t && this.menuWrap.appendTo(this._appendTo()),
            "width" === t && this._resizeButton();
        },
        _setOptionDisabled: function (t) {
          this._super(t),
            this.menuInstance.option("disabled", t),
            this.button.attr("aria-disabled", t),
            this._toggleClass(this.button, null, "ui-state-disabled", t),
            this.element.prop("disabled", t),
            t
              ? (this.button.attr("tabindex", -1), this.close())
              : this.button.attr("tabindex", 0);
        },
        _appendTo: function () {
          var t = this.options.appendTo;
          return (
            ((t =
              t &&
              (t.jquery || t.nodeType ? D(t) : this.document.find(t).eq(0))) &&
              t[0]) ||
              (t = this.element.closest(".ui-front, dialog")),
            t.length || (t = this.document[0].body),
            t
          );
        },
        _toggleAttr: function () {
          this.button.attr("aria-expanded", this.isOpen),
            this._removeClass(
              this.button,
              "ui-selectmenu-button-" + (this.isOpen ? "closed" : "open")
            )
              ._addClass(
                this.button,
                "ui-selectmenu-button-" + (this.isOpen ? "open" : "closed")
              )
              ._toggleClass(
                this.menuWrap,
                "ui-selectmenu-open",
                null,
                this.isOpen
              ),
            this.menu.attr("aria-hidden", !this.isOpen);
        },
        _resizeButton: function () {
          var t = this.options.width;
          return !1 === t
            ? void this.button.css("width", "")
            : (null === t &&
                ((t = this.element.show().outerWidth()), this.element.hide()),
              void this.button.outerWidth(t));
        },
        _resizeMenu: function () {
          this.menu.outerWidth(
            Math.max(
              this.button.outerWidth(),
              this.menu.width("").outerWidth() + 1
            )
          );
        },
        _getCreateOptions: function () {
          var t = this._super();
          return (t.disabled = this.element.prop("disabled")), t;
        },
        _parseOptions: function (t) {
          var i = this,
            s = [];
          t.each(function (t, e) {
            s.push(i._parseOption(D(e), t));
          }),
            (this.items = s);
        },
        _parseOption: function (t, e) {
          var i = t.parent("optgroup");
          return {
            element: t,
            index: e,
            value: t.val(),
            label: t.text(),
            optgroup: i.attr("label") || "",
            disabled: i.prop("disabled") || t.prop("disabled"),
          };
        },
        _destroy: function () {
          this._unbindFormResetHandler(),
            this.menuWrap.remove(),
            this.button.remove(),
            this.element.show(),
            this.element.removeUniqueId(),
            this.labels.attr("for", this.ids.element);
        },
      },
    ]);
  var y,
    w,
    M,
    S,
    T,
    z,
    H,
    N,
    A,
    W,
    O,
    F,
    E,
    R,
    Y,
    L,
    B,
    j,
    K,
    U,
    q,
    X = "ui-effects-",
    $ = "ui-effects-style",
    V = "ui-effects-animated",
    G = D;
  function Q(t, e, i, s) {
    return (
      D.isPlainObject(t) && (t = (e = t).effect),
      (t = {
        effect: t,
      }),
      null == e && (e = {}),
      D.isFunction(e) && ((s = e), (i = null), (e = {})),
      ("number" != typeof e && !D.fx.speeds[e]) || ((s = i), (i = e), (e = {})),
      D.isFunction(i) && ((s = i), (i = null)),
      e && D.extend(t, e),
      (i = i || e.duration),
      (t.duration = D.fx.off
        ? 0
        : "number" == typeof i
        ? i
        : i in D.fx.speeds
        ? D.fx.speeds[i]
        : D.fx.speeds._default),
      (t.complete = s || e.complete),
      t
    );
  }
  function J(t) {
    return (
      !(t && "number" != typeof t && !D.fx.speeds[t]) ||
      ("string" == typeof t && !D.effects.effect[t]) ||
      !!D.isFunction(t) ||
      ("object" == typeof t && !t.effect)
    );
  }
  function Z(t, e) {
    var i = e.outerWidth(),
      s = e.outerHeight(),
      n = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(
        t
      ) || ["", 0, i, s, 0];
    return {
      top: parseFloat(n[1]) || 0,
      right: "auto" === n[2] ? i : parseFloat(n[2]),
      bottom: "auto" === n[3] ? s : parseFloat(n[3]),
      left: parseFloat(n[4]) || 0,
    };
  }
  function tt(t) {
    var e,
      i,
      s = t.ownerDocument.defaultView
        ? t.ownerDocument.defaultView.getComputedStyle(t, null)
        : t.currentStyle,
      n = {};
    if (s && s.length && s[0] && s[s[0]])
      for (i = s.length; i--; )
        "string" == typeof s[(e = s[i])] && (n[D.camelCase(e)] = s[e]);
    else for (e in s) "string" == typeof s[e] && (n[e] = s[e]);
    return n;
  }
  function et(t, e, i) {
    var s = j[e.type] || {};
    return null == t
      ? i || !e.def
        ? null
        : e.def
      : ((t = s.floor ? ~~t : parseFloat(t)),
        isNaN(t)
          ? e.def
          : s.mod
          ? (t + s.mod) % s.mod
          : t < 0
          ? 0
          : t > s.max
          ? s.max
          : t);
  }
  function it(r) {
    var a = L(),
      h = (a._rgba = []);
    return (
      (r = r.toLowerCase()),
      q(Y, function (t, e) {
        var i,
          s = e.re.exec(r),
          n = s && e.parse(s),
          o = e.space || "rgba";
        return n
          ? ((i = a[o](n)),
            (a[B[o].cache] = i[B[o].cache]),
            (h = a._rgba = i._rgba),
            !1)
          : F;
      }),
      h.length
        ? ("0,0,0,0" === h.join() && O.extend(h, E.transparent), a)
        : E[r]
    );
  }
  function st(t, e, i) {
    return 6 * (i = (i + 1) % 1) < 1
      ? t + 6 * (e - t) * i
      : 2 * i < 1
      ? e
      : 3 * i < 2
      ? t + 6 * (e - t) * (2 / 3 - i)
      : t;
  }
  (D.effects = {
    effect: {},
  }),
    (R = /^([\-+])=\s*(\d+\.?\d*)/),
    (Y = [
      {
        re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
        parse: function (t) {
          return [t[1], t[2], t[3], t[4]];
        },
      },
      {
        re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
        parse: function (t) {
          return [2.55 * t[1], 2.55 * t[2], 2.55 * t[3], t[4]];
        },
      },
      {
        re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
        parse: function (t) {
          return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)];
        },
      },
      {
        re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
        parse: function (t) {
          return [
            parseInt(t[1] + t[1], 16),
            parseInt(t[2] + t[2], 16),
            parseInt(t[3] + t[3], 16),
          ];
        },
      },
      {
        re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
        space: "hsla",
        parse: function (t) {
          return [t[1], t[2] / 100, t[3] / 100, t[4]];
        },
      },
    ]),
    (L = (O = G).Color = function (t, e, i, s) {
      return new O.Color.fn.parse(t, e, i, s);
    }),
    (B = {
      rgba: {
        props: {
          red: {
            idx: 0,
            type: "byte",
          },
          green: {
            idx: 1,
            type: "byte",
          },
          blue: {
            idx: 2,
            type: "byte",
          },
        },
      },
      hsla: {
        props: {
          hue: {
            idx: 0,
            type: "degrees",
          },
          saturation: {
            idx: 1,
            type: "percent",
          },
          lightness: {
            idx: 2,
            type: "percent",
          },
        },
      },
    }),
    (j = {
      byte: {
        floor: !0,
        max: 255,
      },
      percent: {
        max: 1,
      },
      degrees: {
        mod: 360,
        floor: !0,
      },
    }),
    (K = L.support = {}),
    (U = O("<p>")[0]),
    (q = O.each),
    (U.style.cssText = "background-color:rgba(1,1,1,.5)"),
    (K.rgba = -1 < U.style.backgroundColor.indexOf("rgba")),
    q(B, function (t, e) {
      (e.cache = "_" + t),
        (e.props.alpha = {
          idx: 3,
          type: "percent",
          def: 1,
        });
    }),
    (L.fn = O.extend(L.prototype, {
      parse: function (n, t, e, i) {
        if (n === F) return (this._rgba = [null, null, null, null]), this;
        (n.jquery || n.nodeType) && ((n = O(n).css(t)), (t = F));
        var o = this,
          s = O.type(n),
          r = (this._rgba = []);
        return (
          t !== F && ((n = [n, t, e, i]), (s = "array")),
          "string" === s
            ? this.parse(it(n) || E._default)
            : "array" === s
            ? (q(B.rgba.props, function (t, e) {
                r[e.idx] = et(n[e.idx], e);
              }),
              this)
            : "object" === s
            ? (q(
                B,
                n instanceof L
                  ? function (t, e) {
                      n[e.cache] && (o[e.cache] = n[e.cache].slice());
                    }
                  : function (t, i) {
                      var s = i.cache;
                      q(i.props, function (t, e) {
                        if (!o[s] && i.to) {
                          if ("alpha" === t || null == n[t]) return;
                          o[s] = i.to(o._rgba);
                        }
                        o[s][e.idx] = et(n[t], e, !0);
                      }),
                        o[s] &&
                          O.inArray(null, o[s].slice(0, 3)) < 0 &&
                          ((o[s][3] = 1), i.from && (o._rgba = i.from(o[s])));
                    }
              ),
              this)
            : F
        );
      },
      is: function (t) {
        var n = L(t),
          o = !0,
          r = this;
        return (
          q(B, function (t, e) {
            var i,
              s = n[e.cache];
            return (
              s &&
                ((i = r[e.cache] || (e.to && e.to(r._rgba)) || []),
                q(e.props, function (t, e) {
                  return null != s[e.idx] ? (o = s[e.idx] === i[e.idx]) : F;
                })),
              o
            );
          }),
          o
        );
      },
      _space: function () {
        var i = [],
          s = this;
        return (
          q(B, function (t, e) {
            s[e.cache] && i.push(t);
          }),
          i.pop()
        );
      },
      transition: function (t, r) {
        var a = L(t),
          e = a._space(),
          i = B[e],
          s = 0 === this.alpha() ? L("transparent") : this,
          h = s[i.cache] || i.to(s._rgba),
          l = h.slice();
        return (
          (a = a[i.cache]),
          q(i.props, function (t, e) {
            var i = e.idx,
              s = h[i],
              n = a[i],
              o = j[e.type] || {};
            null !== n &&
              (null === s
                ? (l[i] = n)
                : (o.mod &&
                    (n - s > o.mod / 2
                      ? (s += o.mod)
                      : s - n > o.mod / 2 && (s -= o.mod)),
                  (l[i] = et((n - s) * r + s, e))));
          }),
          this[e](l)
        );
      },
      blend: function (t) {
        if (1 === this._rgba[3]) return this;
        var e = this._rgba.slice(),
          i = e.pop(),
          s = L(t)._rgba;
        return L(
          O.map(e, function (t, e) {
            return (1 - i) * s[e] + i * t;
          })
        );
      },
      toRgbaString: function () {
        var t = "rgba(",
          e = O.map(this._rgba, function (t, e) {
            return null == t ? (2 < e ? 1 : 0) : t;
          });
        return 1 === e[3] && (e.pop(), (t = "rgb(")), t + e.join() + ")";
      },
      toHslaString: function () {
        var t = "hsla(",
          e = O.map(this.hsla(), function (t, e) {
            return (
              null == t && (t = 2 < e ? 1 : 0),
              e && e < 3 && (t = Math.round(100 * t) + "%"),
              t
            );
          });
        return 1 === e[3] && (e.pop(), (t = "hsl(")), t + e.join() + ")";
      },
      toHexString: function (t) {
        var e = this._rgba.slice(),
          i = e.pop();
        return (
          t && e.push(~~(255 * i)),
          "#" +
            O.map(e, function (t) {
              return 1 === (t = (t || 0).toString(16)).length ? "0" + t : t;
            }).join("")
        );
      },
      toString: function () {
        return 0 === this._rgba[3] ? "transparent" : this.toRgbaString();
      },
    })),
    (L.fn.parse.prototype = L.fn),
    (B.hsla.to = function (t) {
      if (null == t[0] || null == t[1] || null == t[2])
        return [null, null, null, t[3]];
      var e,
        i,
        s = t[0] / 255,
        n = t[1] / 255,
        o = t[2] / 255,
        r = t[3],
        a = Math.max(s, n, o),
        h = Math.min(s, n, o),
        l = a - h,
        c = a + h,
        u = 0.5 * c;
      return (
        (e =
          h === a
            ? 0
            : s === a
            ? (60 * (n - o)) / l + 360
            : n === a
            ? (60 * (o - s)) / l + 120
            : (60 * (s - n)) / l + 240),
        (i = 0 == l ? 0 : u <= 0.5 ? l / c : l / (2 - c)),
        [Math.round(e) % 360, i, u, null == r ? 1 : r]
      );
    }),
    (B.hsla.from = function (t) {
      if (null == t[0] || null == t[1] || null == t[2])
        return [null, null, null, t[3]];
      var e = t[0] / 360,
        i = t[1],
        s = t[2],
        n = t[3],
        o = s <= 0.5 ? s * (1 + i) : s + i - s * i,
        r = 2 * s - o;
      return [
        Math.round(255 * st(r, o, e + 1 / 3)),
        Math.round(255 * st(r, o, e)),
        Math.round(255 * st(r, o, e - 1 / 3)),
        n,
      ];
    }),
    q(B, function (h, t) {
      var i = t.props,
        r = t.cache,
        a = t.to,
        l = t.from;
      (L.fn[h] = function (t) {
        if ((a && !this[r] && (this[r] = a(this._rgba)), t === F))
          return this[r].slice();
        var e,
          s = O.type(t),
          n = "array" === s || "object" === s ? t : arguments,
          o = this[r].slice();
        return (
          q(i, function (t, e) {
            var i = n["object" === s ? t : e.idx];
            null == i && (i = o[e.idx]), (o[e.idx] = et(i, e));
          }),
          l ? (((e = L(l(o)))[r] = o), e) : L(o)
        );
      }),
        q(i, function (r, a) {
          L.fn[r] ||
            (L.fn[r] = function (t) {
              var e,
                i = O.type(t),
                s = "alpha" === r ? (this._hsla ? "hsla" : "rgba") : h,
                n = this[s](),
                o = n[a.idx];
              return "undefined" === i
                ? o
                : ("function" === i && ((t = t.call(this, o)), (i = O.type(t))),
                  null == t && a.empty
                    ? this
                    : ("string" === i &&
                        (e = R.exec(t)) &&
                        (t = o + parseFloat(e[2]) * ("+" === e[1] ? 1 : -1)),
                      (n[a.idx] = t),
                      this[s](n)));
            });
        });
    }),
    (L.hook = function (t) {
      var e = t.split(" ");
      q(e, function (t, o) {
        (O.cssHooks[o] = {
          set: function (t, e) {
            var i,
              s,
              n = "";
            if (
              "transparent" !== e &&
              ("string" !== O.type(e) || (i = it(e)))
            ) {
              if (((e = L(i || e)), !K.rgba && 1 !== e._rgba[3])) {
                for (
                  s = "backgroundColor" === o ? t.parentNode : t;
                  ("" === n || "transparent" === n) && s && s.style;

                )
                  try {
                    (n = O.css(s, "backgroundColor")), (s = s.parentNode);
                  } catch (t) {}
                e = e.blend(n && "transparent" !== n ? n : "_default");
              }
              e = e.toRgbaString();
            }
            try {
              t.style[o] = e;
            } catch (t) {}
          },
        }),
          (O.fx.step[o] = function (t) {
            t.colorInit ||
              ((t.start = L(t.elem, o)),
              (t.end = L(t.end)),
              (t.colorInit = !0)),
              O.cssHooks[o].set(t.elem, t.start.transition(t.end, t.pos));
          });
      });
    }),
    L.hook(
      "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"
    ),
    (O.cssHooks.borderColor = {
      expand: function (i) {
        var s = {};
        return (
          q(["Top", "Right", "Bottom", "Left"], function (t, e) {
            s["border" + e + "Color"] = i;
          }),
          s
        );
      },
    }),
    (E = O.Color.names = {
      aqua: "#00ffff",
      black: "#000000",
      blue: "#0000ff",
      fuchsia: "#ff00ff",
      gray: "#808080",
      green: "#008000",
      lime: "#00ff00",
      maroon: "#800000",
      navy: "#000080",
      olive: "#808000",
      purple: "#800080",
      red: "#ff0000",
      silver: "#c0c0c0",
      teal: "#008080",
      white: "#ffffff",
      yellow: "#ffff00",
      transparent: [null, null, null, 0],
      _default: "#ffffff",
    }),
    (A = ["add", "remove", "toggle"]),
    (W = {
      border: 1,
      borderBottom: 1,
      borderColor: 1,
      borderLeft: 1,
      borderRight: 1,
      borderTop: 1,
      borderWidth: 1,
      margin: 1,
      padding: 1,
    }),
    D.each(
      [
        "borderLeftStyle",
        "borderRightStyle",
        "borderBottomStyle",
        "borderTopStyle",
      ],
      function (t, e) {
        D.fx.step[e] = function (t) {
          (("none" !== t.end && !t.setAttr) || (1 === t.pos && !t.setAttr)) &&
            (G.style(t.elem, e, t.end), (t.setAttr = !0));
        };
      }
    ),
    D.fn.addBack ||
      (D.fn.addBack = function (t) {
        return this.add(
          null == t ? this.prevObject : this.prevObject.filter(t)
        );
      }),
    (D.effects.animateClass = function (n, t, e, i) {
      var o = D.speed(t, e, i);
      return this.queue(function () {
        var t,
          i = D(this),
          e = i.attr("class") || "",
          s = o.children ? i.find("*").addBack() : i;
        (s = s.map(function () {
          return {
            el: D(this),
            start: tt(this),
          };
        })),
          (t = function () {
            D.each(A, function (t, e) {
              n[e] && i[e + "Class"](n[e]);
            });
          })(),
          (s = s.map(function () {
            return (
              (this.end = tt(this.el[0])),
              (this.diff = (function (t, e) {
                var i,
                  s,
                  n = {};
                for (i in e)
                  (s = e[i]),
                    t[i] !== s &&
                      (W[i] ||
                        (!D.fx.step[i] && isNaN(parseFloat(s))) ||
                        (n[i] = s));
                return n;
              })(this.start, this.end)),
              this
            );
          })),
          i.attr("class", e),
          (s = s.map(function () {
            var t = this,
              e = D.Deferred(),
              i = D.extend({}, o, {
                queue: !1,
                complete: function () {
                  e.resolve(t);
                },
              });
            return this.el.animate(this.diff, i), e.promise();
          })),
          D.when.apply(D, s.get()).done(function () {
            t(),
              D.each(arguments, function () {
                var e = this.el;
                D.each(this.diff, function (t) {
                  e.css(t, "");
                });
              }),
              o.complete.call(i[0]);
          });
      });
    }),
    D.fn.extend({
      addClass:
        ((N = D.fn.addClass),
        function (t, e, i, s) {
          return e
            ? D.effects.animateClass.call(
                this,
                {
                  add: t,
                },
                e,
                i,
                s
              )
            : N.apply(this, arguments);
        }),
      removeClass:
        ((H = D.fn.removeClass),
        function (t, e, i, s) {
          return 1 < arguments.length
            ? D.effects.animateClass.call(
                this,
                {
                  remove: t,
                },
                e,
                i,
                s
              )
            : H.apply(this, arguments);
        }),
      toggleClass:
        ((z = D.fn.toggleClass),
        function (t, e, i, s, n) {
          return "boolean" == typeof e || void 0 === e
            ? i
              ? D.effects.animateClass.call(
                  this,
                  e
                    ? {
                        add: t,
                      }
                    : {
                        remove: t,
                      },
                  i,
                  s,
                  n
                )
              : z.apply(this, arguments)
            : D.effects.animateClass.call(
                this,
                {
                  toggle: t,
                },
                e,
                i,
                s
              );
        }),
      switchClass: function (t, e, i, s, n) {
        return D.effects.animateClass.call(
          this,
          {
            add: e,
            remove: t,
          },
          i,
          s,
          n
        );
      },
    }),
    D.expr &&
      D.expr.filters &&
      D.expr.filters.animated &&
      (D.expr.filters.animated =
        ((T = D.expr.filters.animated),
        function (t) {
          return !!D(t).data(V) || T(t);
        })),
    !1 !== D.uiBackCompat &&
      D.extend(D.effects, {
        save: function (t, e) {
          for (var i = 0, s = e.length; i < s; i++)
            null !== e[i] && t.data(X + e[i], t[0].style[e[i]]);
        },
        restore: function (t, e) {
          for (var i, s = 0, n = e.length; s < n; s++)
            null !== e[s] && ((i = t.data(X + e[s])), t.css(e[s], i));
        },
        setMode: function (t, e) {
          return "toggle" === e && (e = t.is(":hidden") ? "show" : "hide"), e;
        },
        createWrapper: function (i) {
          if (i.parent().is(".ui-effects-wrapper")) return i.parent();
          var s = {
              width: i.outerWidth(!0),
              height: i.outerHeight(!0),
              float: i.css("float"),
            },
            t = D("<div></div>").addClass("ui-effects-wrapper").css({
              fontSize: "100%",
              background: "transparent",
              border: "none",
              margin: 0,
              padding: 0,
            }),
            e = {
              width: i.width(),
              height: i.height(),
            },
            n = document.activeElement;
          try {
            n.id;
          } catch (t) {
            n = document.body;
          }
          return (
            i.wrap(t),
            (i[0] !== n && !D.contains(i[0], n)) || D(n).trigger("focus"),
            (t = i.parent()),
            "static" === i.css("position")
              ? (t.css({
                  position: "relative",
                }),
                i.css({
                  position: "relative",
                }))
              : (D.extend(s, {
                  position: i.css("position"),
                  zIndex: i.css("z-index"),
                }),
                D.each(["top", "left", "bottom", "right"], function (t, e) {
                  (s[e] = i.css(e)),
                    isNaN(parseInt(s[e], 10)) && (s[e] = "auto");
                }),
                i.css({
                  position: "relative",
                  top: 0,
                  left: 0,
                  right: "auto",
                  bottom: "auto",
                })),
            i.css(e),
            t.css(s).show()
          );
        },
        removeWrapper: function (t) {
          var e = document.activeElement;
          return (
            t.parent().is(".ui-effects-wrapper") &&
              (t.parent().replaceWith(t),
              (t[0] !== e && !D.contains(t[0], e)) || D(e).trigger("focus")),
            t
          );
        },
      }),
    D.extend(D.effects, {
      version: "1.12.1",
      define: function (t, e, i) {
        return (
          i || ((i = e), (e = "effect")),
          (D.effects.effect[t] = i),
          (D.effects.effect[t].mode = e),
          i
        );
      },
      scaledDimensions: function (t, e, i) {
        if (0 === e)
          return {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0,
          };
        var s = "horizontal" !== i ? (e || 100) / 100 : 1,
          n = "vertical" !== i ? (e || 100) / 100 : 1;
        return {
          height: t.height() * n,
          width: t.width() * s,
          outerHeight: t.outerHeight() * n,
          outerWidth: t.outerWidth() * s,
        };
      },
      clipToBox: function (t) {
        return {
          width: t.clip.right - t.clip.left,
          height: t.clip.bottom - t.clip.top,
          left: t.clip.left,
          top: t.clip.top,
        };
      },
      unshift: function (t, e, i) {
        var s = t.queue();
        1 < e && s.splice.apply(s, [1, 0].concat(s.splice(e, i))), t.dequeue();
      },
      saveStyle: function (t) {
        t.data($, t[0].style.cssText);
      },
      restoreStyle: function (t) {
        (t[0].style.cssText = t.data($) || ""), t.removeData($);
      },
      mode: function (t, e) {
        var i = t.is(":hidden");
        return (
          "toggle" === e && (e = i ? "show" : "hide"),
          (i ? "hide" === e : "show" === e) && (e = "none"),
          e
        );
      },
      getBaseline: function (t, e) {
        var i, s;
        switch (t[0]) {
          case "top":
            i = 0;
            break;
          case "middle":
            i = 0.5;
            break;
          case "bottom":
            i = 1;
            break;
          default:
            i = t[0] / e.height;
        }
        switch (t[1]) {
          case "left":
            s = 0;
            break;
          case "center":
            s = 0.5;
            break;
          case "right":
            s = 1;
            break;
          default:
            s = t[1] / e.width;
        }
        return {
          x: s,
          y: i,
        };
      },
      createPlaceholder: function (t) {
        var e,
          i = t.css("position"),
          s = t.position();
        return (
          t
            .css({
              marginTop: t.css("marginTop"),
              marginBottom: t.css("marginBottom"),
              marginLeft: t.css("marginLeft"),
              marginRight: t.css("marginRight"),
            })
            .outerWidth(t.outerWidth())
            .outerHeight(t.outerHeight()),
          /^(static|relative)/.test(i) &&
            ((i = "absolute"),
            (e = D("<" + t[0].nodeName + ">")
              .insertAfter(t)
              .css({
                display: /^(inline|ruby)/.test(t.css("display"))
                  ? "inline-block"
                  : "block",
                visibility: "hidden",
                marginTop: t.css("marginTop"),
                marginBottom: t.css("marginBottom"),
                marginLeft: t.css("marginLeft"),
                marginRight: t.css("marginRight"),
                float: t.css("float"),
              })
              .outerWidth(t.outerWidth())
              .outerHeight(t.outerHeight())
              .addClass("ui-effects-placeholder")),
            t.data(X + "placeholder", e)),
          t.css({
            position: i,
            left: s.left,
            top: s.top,
          }),
          e
        );
      },
      removePlaceholder: function (t) {
        var e = X + "placeholder",
          i = t.data(e);
        i && (i.remove(), t.removeData(e));
      },
      cleanUp: function (t) {
        D.effects.restoreStyle(t), D.effects.removePlaceholder(t);
      },
      setTransition: function (s, t, n, o) {
        return (
          (o = o || {}),
          D.each(t, function (t, e) {
            var i = s.cssUnit(e);
            0 < i[0] && (o[e] = i[0] * n + i[1]);
          }),
          o
        );
      },
    }),
    D.fn.extend({
      effect: function () {
        function t(t) {
          function e() {
            D.isFunction(a) && a.call(i[0]), D.isFunction(t) && t();
          }
          var i = D(this);
          (s.mode = l.shift()),
            !1 === D.uiBackCompat || o
              ? "none" === s.mode
                ? (i[h](), e())
                : n.call(i[0], s, function () {
                    i.removeData(V),
                      D.effects.cleanUp(i),
                      "hide" === s.mode && i.hide(),
                      e();
                  })
              : (i.is(":hidden") ? "hide" === h : "show" === h)
              ? (i[h](), e())
              : n.call(i[0], s, e);
        }
        function e(t) {
          var e = D(this),
            i = D.effects.mode(e, h) || o;
          e.data(V, !0),
            l.push(i),
            o && ("show" === i || (i === o && "hide" === i)) && e.show(),
            (o && "none" === i) || D.effects.saveStyle(e),
            D.isFunction(t) && t();
        }
        var s = Q.apply(this, arguments),
          n = D.effects.effect[s.effect],
          o = n.mode,
          i = s.queue,
          r = i || "fx",
          a = s.complete,
          h = s.mode,
          l = [];
        return D.fx.off || !n
          ? h
            ? this[h](s.duration, a)
            : this.each(function () {
                a && a.call(this);
              })
          : !1 === i
          ? this.each(e).each(t)
          : this.queue(r, e).queue(r, t);
      },
      show:
        ((S = D.fn.show),
        function (t) {
          if (J(t)) return S.apply(this, arguments);
          var e = Q.apply(this, arguments);
          return (e.mode = "show"), this.effect.call(this, e);
        }),
      hide:
        ((M = D.fn.hide),
        function (t) {
          if (J(t)) return M.apply(this, arguments);
          var e = Q.apply(this, arguments);
          return (e.mode = "hide"), this.effect.call(this, e);
        }),
      toggle:
        ((w = D.fn.toggle),
        function (t) {
          if (J(t) || "boolean" == typeof t) return w.apply(this, arguments);
          var e = Q.apply(this, arguments);
          return (e.mode = "toggle"), this.effect.call(this, e);
        }),
      cssUnit: function (t) {
        var i = this.css(t),
          s = [];
        return (
          D.each(["em", "px", "%", "pt"], function (t, e) {
            0 < i.indexOf(e) && (s = [parseFloat(i), e]);
          }),
          s
        );
      },
      cssClip: function (t) {
        return t
          ? this.css(
              "clip",
              "rect(" +
                t.top +
                "px " +
                t.right +
                "px " +
                t.bottom +
                "px " +
                t.left +
                "px)"
            )
          : Z(this.css("clip"), this);
      },
      transfer: function (t, e) {
        var i = D(this),
          s = D(t.to),
          n = "fixed" === s.css("position"),
          o = D("body"),
          r = n ? o.scrollTop() : 0,
          a = n ? o.scrollLeft() : 0,
          h = s.offset(),
          l = {
            top: h.top - r,
            left: h.left - a,
            height: s.innerHeight(),
            width: s.innerWidth(),
          },
          c = i.offset(),
          u = D("<div class='ui-effects-transfer'></div>")
            .appendTo("body")
            .addClass(t.className)
            .css({
              top: c.top - r,
              left: c.left - a,
              height: i.innerHeight(),
              width: i.innerWidth(),
              position: n ? "fixed" : "absolute",
            })
            .animate(l, t.duration, t.easing, function () {
              u.remove(), D.isFunction(e) && e();
            });
      },
    }),
    (D.fx.step.clip = function (t) {
      t.clipInit ||
        ((t.start = D(t.elem).cssClip()),
        "string" == typeof t.end && (t.end = Z(t.end, t.elem)),
        (t.clipInit = !0)),
        D(t.elem).cssClip({
          top: t.pos * (t.end.top - t.start.top) + t.start.top,
          right: t.pos * (t.end.right - t.start.right) + t.start.right,
          bottom: t.pos * (t.end.bottom - t.start.bottom) + t.start.bottom,
          left: t.pos * (t.end.left - t.start.left) + t.start.left,
        });
    }),
    (y = {}),
    D.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function (e, t) {
      y[t] = function (t) {
        return Math.pow(t, e + 2);
      };
    }),
    D.extend(y, {
      Sine: function (t) {
        return 1 - Math.cos((t * Math.PI) / 2);
      },
      Circ: function (t) {
        return 1 - Math.sqrt(1 - t * t);
      },
      Elastic: function (t) {
        return 0 === t || 1 === t
          ? t
          : -Math.pow(2, 8 * (t - 1)) *
              Math.sin(((80 * (t - 1) - 7.5) * Math.PI) / 15);
      },
      Back: function (t) {
        return t * t * (3 * t - 2);
      },
      Bounce: function (t) {
        for (var e, i = 4; ((e = Math.pow(2, --i)) - 1) / 11 > t; );
        return (
          1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * e - 2) / 22 - t, 2)
        );
      },
    }),
    D.each(y, function (t, e) {
      (D.easing["easeIn" + t] = e),
        (D.easing["easeOut" + t] = function (t) {
          return 1 - e(1 - t);
        }),
        (D.easing["easeInOut" + t] = function (t) {
          return t < 0.5 ? e(2 * t) / 2 : 1 - e(-2 * t + 2) / 2;
        });
    }),
    D.effects,
    D.effects.define("shake", function (t, e) {
      var i = 1,
        s = D(this),
        n = t.direction || "left",
        o = t.distance || 20,
        r = t.times || 3,
        a = 2 * r + 1,
        h = Math.round(t.duration / a),
        l = "up" === n || "down" === n ? "top" : "left",
        c = "up" === n || "left" === n,
        u = {},
        d = {},
        p = {},
        f = s.queue().length;
      for (
        D.effects.createPlaceholder(s),
          u[l] = (c ? "-=" : "+=") + o,
          d[l] = (c ? "+=" : "-=") + 2 * o,
          p[l] = (c ? "-=" : "+=") + 2 * o,
          s.animate(u, h, t.easing);
        i < r;
        i++
      )
        s.animate(d, h, t.easing).animate(p, h, t.easing);
      s
        .animate(d, h, t.easing)
        .animate(u, h / 2, t.easing)
        .queue(e),
        D.effects.unshift(s, f, 1 + a);
    });
});
!(function (t) {
  function e(o, t) {
    if (!(1 < o.originalEvent.touches.length)) {
      o.preventDefault();
      var e = o.originalEvent.changedTouches[0],
        u = document.createEvent("MouseEvents");
      u.initMouseEvent(
        t,
        !0,
        !0,
        window,
        1,
        e.screenX,
        e.screenY,
        e.clientX,
        e.clientY,
        !1,
        !1,
        !1,
        !1,
        0,
        null
      ),
        o.target.dispatchEvent(u);
    }
  }
  if (((t.support.touch = "ontouchend" in document), t.support.touch)) {
    var u,
      o = t.ui.mouse.prototype,
      n = o._mouseInit,
      c = o._mouseDestroy;
    (o._touchStart = function (o) {
      !u &&
        this._mouseCapture(o.originalEvent.changedTouches[0]) &&
        ((u = !0),
        (this._touchMoved = !1),
        e(o, "mouseover"),
        e(o, "mousemove"),
        e(o, "mousedown"));
    }),
      (o._touchMove = function (o) {
        u && ((this._touchMoved = !0), e(o, "mousemove"));
      }),
      (o._touchEnd = function (o) {
        u &&
          (e(o, "mouseup"),
          e(o, "mouseout"),
          this._touchMoved || e(o, "click"),
          (u = !1));
      }),
      (o._mouseInit = function () {
        var o = this;
        o.element.bind({
          touchstart: t.proxy(o, "_touchStart"),
          touchmove: t.proxy(o, "_touchMove"),
          touchend: t.proxy(o, "_touchEnd"),
        }),
          n.call(o);
      }),
      (o._mouseDestroy = function () {
        var o = this;
        o.element.unbind({
          touchstart: t.proxy(o, "_touchStart"),
          touchmove: t.proxy(o, "_touchMove"),
          touchend: t.proxy(o, "_touchEnd"),
        }),
          c.call(o);
      });
  }
})(jQuery);
!(function (n) {
  n.fn.pTooltip = function (t) {
    var e = {
      tipCloseDelay: 500,
      findToolTip: function (t) {
        return n("#" + t.attr("title"));
      },
      tipPosition: function (t) {
        return {
          my: "left center",
          at: "right+15 center",
          of: t,
          collision: "fit flip",
        };
      },
    };
    return (
      n.extend(e, t),
      this.each(function () {
        var i = n(this),
          o = e.findToolTip(i);
        if (0 === o.length) throw "No element with ID " + i.attr("title");
        i.removeAttr("title"),
          i.mouseover(function () {
            n(":visible:data(pTooltip)").hide();
            var t = n.extend(o.data("pTooltip"), {
              mouseEntered: !1,
              uid: 0,
            });
            o.data("pTooltip", t), o.show().position(e.tipPosition(i));
          }),
          i.mouseleave(function () {
            var t = n.now(),
              i = n.extend(o.data("pTooltip"), {
                uid: t,
              });
            o.data("pTooltip", i),
              setTimeout(function () {
                !(function (t, i) {
                  var o = t.data("pTooltip");
                  i !== o.uid || o.mouseEntered || t.hide();
                })(o, t);
              }, e.tipCloseDelay);
          }),
          o.mouseover(function () {
            var t = n.extend(o.data("pTooltip"), {
              mouseEntered: !0,
            });
            o.data("pTooltip", t);
          }),
          o.mouseleave(function () {
            o.hide();
          }),
          o
            .hide()
            .addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content");
      })
    );
  };
})(jQuery);
!(function (e) {
  "function" == typeof define && define.amd
    ? define(["jquery"], e)
    : "object" == typeof exports
    ? (module.exports = e)
    : e(jQuery);
})(function (d) {
  var c,
    m,
    e = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
    t =
      "onwheel" in document || 9 <= document.documentMode
        ? ["wheel"]
        : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
    g = Array.prototype.slice;
  if (d.event.fixHooks)
    for (var i = e.length; i; ) d.event.fixHooks[e[--i]] = d.event.mouseHooks;
  var w = (d.event.special.mousewheel = {
    version: "3.1.12",
    setup: function () {
      if (this.addEventListener)
        for (var e = t.length; e; ) this.addEventListener(t[--e], n, !1);
      else this.onmousewheel = n;
      d.data(this, "mousewheel-line-height", w.getLineHeight(this)),
        d.data(this, "mousewheel-page-height", w.getPageHeight(this));
    },
    teardown: function () {
      if (this.removeEventListener)
        for (var e = t.length; e; ) this.removeEventListener(t[--e], n, !1);
      else this.onmousewheel = null;
      d.removeData(this, "mousewheel-line-height"),
        d.removeData(this, "mousewheel-page-height");
    },
    getLineHeight: function (e) {
      var t = d(e),
        i = t["offsetParent" in d.fn ? "offsetParent" : "parent"]();
      return (
        i.length || (i = d("body")),
        parseInt(i.css("fontSize"), 10) || parseInt(t.css("fontSize"), 10) || 16
      );
    },
    getPageHeight: function (e) {
      return d(e).height();
    },
    settings: {
      adjustOldDeltas: !0,
      normalizeOffset: !0,
    },
  });
  function n(e) {
    var t,
      i = e || window.event,
      n = g.call(arguments, 1),
      o = 0,
      l = 0,
      s = 0,
      a = 0,
      h = 0;
    if (
      (((e = d.event.fix(i)).type = "mousewheel"),
      "detail" in i && (s = -1 * i.detail),
      "wheelDelta" in i && (s = i.wheelDelta),
      "wheelDeltaY" in i && (s = i.wheelDeltaY),
      "wheelDeltaX" in i && (l = -1 * i.wheelDeltaX),
      "axis" in i && i.axis === i.HORIZONTAL_AXIS && ((l = -1 * s), (s = 0)),
      (o = 0 === s ? l : s),
      "deltaY" in i && (o = s = -1 * i.deltaY),
      "deltaX" in i && ((l = i.deltaX), 0 === s && (o = -1 * l)),
      0 !== s || 0 !== l)
    ) {
      if (1 === i.deltaMode) {
        var r = d.data(this, "mousewheel-line-height");
        (o *= r), (s *= r), (l *= r);
      } else if (2 === i.deltaMode) {
        var u = d.data(this, "mousewheel-page-height");
        (o *= u), (s *= u), (l *= u);
      }
      if (
        ((t = Math.max(Math.abs(s), Math.abs(l))),
        (!m || t < m) && p(i, (m = t)) && (m /= 40),
        p(i, t) && ((o /= 40), (l /= 40), (s /= 40)),
        (o = Math[1 <= o ? "floor" : "ceil"](o / m)),
        (l = Math[1 <= l ? "floor" : "ceil"](l / m)),
        (s = Math[1 <= s ? "floor" : "ceil"](s / m)),
        w.settings.normalizeOffset && this.getBoundingClientRect)
      ) {
        var f = this.getBoundingClientRect();
        (a = e.clientX - f.left), (h = e.clientY - f.top);
      }
      return (
        (e.deltaX = l),
        (e.deltaY = s),
        (e.deltaFactor = m),
        (e.offsetX = a),
        (e.offsetY = h),
        (e.deltaMode = 0),
        n.unshift(e, o, l, s),
        c && clearTimeout(c),
        (c = setTimeout(v, 200)),
        (d.event.dispatch || d.event.handle).apply(this, n)
      );
    }
  }
  function v() {
    m = null;
  }
  function p(e, t) {
    return (
      w.settings.adjustOldDeltas && "mousewheel" === e.type && t % 120 == 0
    );
  }
  d.fn.extend({
    mousewheel: function (e) {
      return e ? this.bind("mousewheel", e) : this.trigger("mousewheel");
    },
    unmousewheel: function (e) {
      return this.unbind("mousewheel", e);
    },
  });
});
!(function (c) {
  var f = Array.isArray
      ? Array.isArray
      : function (e) {
          return "[object Array]" === Object.prototype.toString.call(e);
        },
    t = 10;
  function a() {
    (this._events = {}), this._conf && s.call(this, this._conf);
  }
  function s(e) {
    e
      ? ((this._conf = e).delimiter && (this.delimiter = e.delimiter),
        (this._events.maxListeners = e.maxListeners !== c ? e.maxListeners : t),
        e.wildcard && (this.wildcard = e.wildcard),
        e.newListener && (this.newListener = e.newListener),
        e.verboseMemoryLeak && (this.verboseMemoryLeak = e.verboseMemoryLeak),
        this.wildcard && (this.listenerTree = {}))
      : (this._events.maxListeners = t);
  }
  function l(e, t) {
    var s =
      "(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";
    this.verboseMemoryLeak
      ? ((s += " Event name: %s."), console.error(s, e, t))
      : console.error(s, e),
      console.trace && console.trace();
  }
  function e(e) {
    (this._events = {}),
      (this.newListener = !1),
      (this.verboseMemoryLeak = !1),
      s.call(this, e);
  }
  function v(e, t, s, i) {
    if (!s) return [];
    var n,
      r,
      l,
      h,
      o,
      a,
      c,
      f = [],
      p = t.length,
      u = t[i],
      _ = t[i + 1];
    if (i === p && s._listeners) {
      if ("function" == typeof s._listeners)
        return e && e.push(s._listeners), [s];
      for (n = 0, r = s._listeners.length; n < r; n++)
        e && e.push(s._listeners[n]);
      return [s];
    }
    if ("*" === u || "**" === u || s[u]) {
      if ("*" === u) {
        for (l in s)
          "_listeners" !== l &&
            s.hasOwnProperty(l) &&
            (f = f.concat(v(e, t, s[l], i + 1)));
        return f;
      }
      if ("**" === u) {
        for (l in ((c = i + 1 === p || (i + 2 === p && "*" === _)) &&
          s._listeners &&
          (f = f.concat(v(e, t, s, p))),
        s))
          "_listeners" !== l &&
            s.hasOwnProperty(l) &&
            (f =
              "*" === l || "**" === l
                ? (s[l]._listeners && !c && (f = f.concat(v(e, t, s[l], p))),
                  f.concat(v(e, t, s[l], i)))
                : l === _
                ? f.concat(v(e, t, s[l], i + 2))
                : f.concat(v(e, t, s[l], i)));
        return f;
      }
      f = f.concat(v(e, t, s[u], i + 1));
    }
    if (((h = s["*"]) && v(e, t, h, i + 1), (o = s["**"])))
      if (i < p)
        for (l in (o._listeners && v(e, t, o, p), o))
          "_listeners" !== l &&
            o.hasOwnProperty(l) &&
            (l === _
              ? v(e, t, o[l], i + 2)
              : l === u
              ? v(e, t, o[l], i + 1)
              : (((a = {})[l] = o[l]),
                v(
                  e,
                  t,
                  {
                    "**": a,
                  },
                  i + 1
                )));
      else
        o._listeners
          ? v(e, t, o, p)
          : o["*"] && o["*"]._listeners && v(e, t, o["*"], p);
    return f;
  }
  ((e.EventEmitter2 = e).prototype.delimiter = "."),
    (e.prototype.setMaxListeners = function (e) {
      e !== c &&
        (this._events || a.call(this),
        (this._events.maxListeners = e),
        this._conf || (this._conf = {}),
        (this._conf.maxListeners = e));
    }),
    (e.prototype.event = ""),
    (e.prototype.once = function (e, t) {
      return this.many(e, 1, t), this;
    }),
    (e.prototype.many = function (e, t, s) {
      var i = this;
      if ("function" != typeof s)
        throw new Error("many only accepts instances of Function");
      function n() {
        0 == --t && i.off(e, n), s.apply(this, arguments);
      }
      return (n._origin = s), this.on(e, n), i;
    }),
    (e.prototype.emit = function () {
      this._events || a.call(this);
      var e = arguments[0];
      if ("newListener" === e && !this.newListener && !this._events.newListener)
        return !1;
      var t,
        s,
        i,
        n,
        r,
        l = arguments.length;
      if (this._all && this._all.length) {
        if (((r = this._all.slice()), 3 < l))
          for (t = new Array(l), n = 0; n < l; n++) t[n] = arguments[n];
        for (i = 0, s = r.length; i < s; i++)
          switch (((this.event = e), l)) {
            case 1:
              r[i].call(this, e);
              break;
            case 2:
              r[i].call(this, e, arguments[1]);
              break;
            case 3:
              r[i].call(this, e, arguments[1], arguments[2]);
              break;
            default:
              r[i].apply(this, t);
          }
      }
      if (this.wildcard) {
        r = [];
        var h = "string" == typeof e ? e.split(this.delimiter) : e.slice();
        v.call(this, r, h, this.listenerTree, 0);
      } else {
        if ("function" == typeof (r = this._events[e])) {
          switch (((this.event = e), l)) {
            case 1:
              r.call(this);
              break;
            case 2:
              r.call(this, arguments[1]);
              break;
            case 3:
              r.call(this, arguments[1], arguments[2]);
              break;
            default:
              for (t = new Array(l - 1), n = 1; n < l; n++)
                t[n - 1] = arguments[n];
              r.apply(this, t);
          }
          return !0;
        }
        r = r && r.slice();
      }
      if (r && r.length) {
        if (3 < l)
          for (t = new Array(l - 1), n = 1; n < l; n++) t[n - 1] = arguments[n];
        for (i = 0, s = r.length; i < s; i++)
          switch (((this.event = e), l)) {
            case 1:
              r[i].call(this);
              break;
            case 2:
              r[i].call(this, arguments[1]);
              break;
            case 3:
              r[i].call(this, arguments[1], arguments[2]);
              break;
            default:
              r[i].apply(this, t);
          }
        return !0;
      }
      if (!this._all && "error" === e)
        throw arguments[1] instanceof Error
          ? arguments[1]
          : new Error("Uncaught, unspecified 'error' event.");
      return !!this._all;
    }),
    (e.prototype.emitAsync = function () {
      this._events || a.call(this);
      var e = arguments[0];
      if ("newListener" === e && !this.newListener && !this._events.newListener)
        return Promise.resolve([!1]);
      var t,
        s,
        i,
        n,
        r,
        l = [],
        h = arguments.length;
      if (this._all) {
        if (3 < h)
          for (t = new Array(h), n = 1; n < h; n++) t[n] = arguments[n];
        for (i = 0, s = this._all.length; i < s; i++)
          switch (((this.event = e), h)) {
            case 1:
              l.push(this._all[i].call(this, e));
              break;
            case 2:
              l.push(this._all[i].call(this, e, arguments[1]));
              break;
            case 3:
              l.push(this._all[i].call(this, e, arguments[1], arguments[2]));
              break;
            default:
              l.push(this._all[i].apply(this, t));
          }
      }
      if (this.wildcard) {
        r = [];
        var o = "string" == typeof e ? e.split(this.delimiter) : e.slice();
        v.call(this, r, o, this.listenerTree, 0);
      } else r = this._events[e];
      if ("function" == typeof r)
        switch (((this.event = e), h)) {
          case 1:
            l.push(r.call(this));
            break;
          case 2:
            l.push(r.call(this, arguments[1]));
            break;
          case 3:
            l.push(r.call(this, arguments[1], arguments[2]));
            break;
          default:
            for (t = new Array(h - 1), n = 1; n < h; n++)
              t[n - 1] = arguments[n];
            l.push(r.apply(this, t));
        }
      else if (r && r.length) {
        if (3 < h)
          for (t = new Array(h - 1), n = 1; n < h; n++) t[n - 1] = arguments[n];
        for (i = 0, s = r.length; i < s; i++)
          switch (((this.event = e), h)) {
            case 1:
              l.push(r[i].call(this));
              break;
            case 2:
              l.push(r[i].call(this, arguments[1]));
              break;
            case 3:
              l.push(r[i].call(this, arguments[1], arguments[2]));
              break;
            default:
              l.push(r[i].apply(this, t));
          }
      } else if (!this._all && "error" === e)
        return arguments[1] instanceof Error
          ? Promise.reject(arguments[1])
          : Promise.reject("Uncaught, unspecified 'error' event.");
      return Promise.all(l);
    }),
    (e.prototype.on = function (e, t) {
      if ("function" == typeof e) return this.onAny(e), this;
      if ("function" != typeof t)
        throw new Error("on only accepts instances of Function");
      return (
        this._events || a.call(this),
        this.emit("newListener", e, t),
        this.wildcard
          ? function (e, t) {
              for (
                var s = 0,
                  i = (e =
                    "string" == typeof e ? e.split(this.delimiter) : e.slice())
                    .length;
                s + 1 < i;
                s++
              )
                if ("**" === e[s] && "**" === e[s + 1]) return;
              for (var n = this.listenerTree, r = e.shift(); r !== c; ) {
                if ((n[r] || (n[r] = {}), (n = n[r]), 0 === e.length))
                  return (
                    n._listeners
                      ? ("function" == typeof n._listeners &&
                          (n._listeners = [n._listeners]),
                        n._listeners.push(t),
                        !n._listeners.warned &&
                          0 < this._events.maxListeners &&
                          n._listeners.length > this._events.maxListeners &&
                          ((n._listeners.warned = !0),
                          l.call(this, n._listeners.length, r)))
                      : (n._listeners = t),
                    !0
                  );
                r = e.shift();
              }
              return !0;
            }.call(this, e, t)
          : this._events[e]
          ? ("function" == typeof this._events[e] &&
              (this._events[e] = [this._events[e]]),
            this._events[e].push(t),
            !this._events[e].warned &&
              0 < this._events.maxListeners &&
              this._events[e].length > this._events.maxListeners &&
              ((this._events[e].warned = !0),
              l.call(this, this._events[e].length, e)))
          : (this._events[e] = t),
        this
      );
    }),
    (e.prototype.onAny = function (e) {
      if ("function" != typeof e)
        throw new Error("onAny only accepts instances of Function");
      return this._all || (this._all = []), this._all.push(e), this;
    }),
    (e.prototype.addListener = e.prototype.on),
    (e.prototype.off = function (e, t) {
      if ("function" != typeof t)
        throw new Error("removeListener only takes instances of Function");
      var s,
        i = [];
      if (this.wildcard) {
        var n = "string" == typeof e ? e.split(this.delimiter) : e.slice();
        i = v.call(this, null, n, this.listenerTree, 0);
      } else {
        if (!this._events[e]) return this;
        (s = this._events[e]),
          i.push({
            _listeners: s,
          });
      }
      for (var r = 0; r < i.length; r++) {
        var l = i[r];
        if (((s = l._listeners), f(s))) {
          for (var h = -1, o = 0, a = s.length; o < a; o++)
            if (
              s[o] === t ||
              (s[o].listener && s[o].listener === t) ||
              (s[o]._origin && s[o]._origin === t)
            ) {
              h = o;
              break;
            }
          if (h < 0) continue;
          return (
            this.wildcard
              ? l._listeners.splice(h, 1)
              : this._events[e].splice(h, 1),
            0 === s.length &&
              (this.wildcard ? delete l._listeners : delete this._events[e]),
            this.emit("removeListener", e, t),
            this
          );
        }
        (s === t ||
          (s.listener && s.listener === t) ||
          (s._origin && s._origin === t)) &&
          (this.wildcard ? delete l._listeners : delete this._events[e],
          this.emit("removeListener", e, t));
      }
      return (
        (function e(t) {
          if (t !== c) {
            var s = Object.keys(t);
            for (var i in s) {
              var n = s[i],
                r = t[n];
              r instanceof Function ||
                "object" != typeof r ||
                null === r ||
                (0 < Object.keys(r).length && e(t[n]),
                0 === Object.keys(r).length && delete t[n]);
            }
          }
        })(this.listenerTree),
        this
      );
    }),
    (e.prototype.offAny = function (e) {
      var t,
        s = 0,
        i = 0;
      if (e && this._all && 0 < this._all.length) {
        for (s = 0, i = (t = this._all).length; s < i; s++)
          if (e === t[s])
            return t.splice(s, 1), this.emit("removeListenerAny", e), this;
      } else {
        for (s = 0, i = (t = this._all).length; s < i; s++)
          this.emit("removeListenerAny", t[s]);
        this._all = [];
      }
      return this;
    }),
    (e.prototype.removeListener = e.prototype.off),
    (e.prototype.removeAllListeners = function (e) {
      if (0 === arguments.length) return this._events && a.call(this), this;
      if (this.wildcard)
        for (
          var t = "string" == typeof e ? e.split(this.delimiter) : e.slice(),
            s = v.call(this, null, t, this.listenerTree, 0),
            i = 0;
          i < s.length;
          i++
        ) {
          s[i]._listeners = null;
        }
      else this._events && (this._events[e] = null);
      return this;
    }),
    (e.prototype.listeners = function (e) {
      if (this.wildcard) {
        var t = [],
          s = "string" == typeof e ? e.split(this.delimiter) : e.slice();
        return v.call(this, t, s, this.listenerTree, 0), t;
      }
      return (
        this._events || a.call(this),
        this._events[e] || (this._events[e] = []),
        f(this._events[e]) || (this._events[e] = [this._events[e]]),
        this._events[e]
      );
    }),
    (e.prototype.listenerCount = function (e) {
      return this.listeners(e).length;
    }),
    (e.prototype.listenersAny = function () {
      return this._all ? this._all : [];
    }),
    "function" == typeof define && define.amd
      ? define(function () {
          return e;
        })
      : "object" == typeof exports
      ? (module.exports = e)
      : (window.EventEmitter2 = e);
})();
!(function r(o, a, c) {
  function l(i, e) {
    if (!a[i]) {
      if (!o[i]) {
        var t = "function" == typeof require && require;
        if (!e && t) return t(i, !0);
        if (h) return h(i, !0);
        var s = new Error("Cannot find module '" + i + "'");
        throw ((s.code = "MODULE_NOT_FOUND"), s);
      }
      var n = (a[i] = {
        exports: {},
      });
      o[i][0].call(
        n.exports,
        function (e) {
          var t = o[i][1][e];
          return l(t || e);
        },
        n,
        n.exports,
        r,
        o,
        a,
        c
      );
    }
    return a[i].exports;
  }
  for (
    var h = "function" == typeof require && require, e = 0;
    e < c.length;
    e++
  )
    l(c[e]);
  return l;
})(
  {
    1: [
      function (e, t, i) {
        function l() {
          (this._events = {}), this._conf && s.call(this, this._conf);
        }
        function s(e) {
          e
            ? ((this._conf = e).delimiter && (this.delimiter = e.delimiter),
              (this._events.maxListeners =
                e.maxListeners !== h ? e.maxListeners : r),
              e.wildcard && (this.wildcard = e.wildcard),
              e.newListener && (this.newListener = e.newListener),
              e.verboseMemoryLeak &&
                (this.verboseMemoryLeak = e.verboseMemoryLeak),
              this.wildcard && (this.listenerTree = {}))
            : (this._events.maxListeners = r);
        }
        function o(e, t) {
          var i =
            "(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";
          this.verboseMemoryLeak
            ? ((i += " Event name: %s."), console.error(i, e, t))
            : console.error(i, e),
            console.trace && console.trace();
        }
        function n(e) {
          (this._events = {}),
            (this.newListener = !1),
            (this.verboseMemoryLeak = !1),
            s.call(this, e);
        }
        function v(e, t, i, s) {
          if (!i) return [];
          var n,
            r,
            o,
            a,
            c,
            l,
            h,
            u = [],
            p = t.length,
            f = t[s],
            m = t[s + 1];
          if (s === p && i._listeners) {
            if ("function" == typeof i._listeners)
              return e && e.push(i._listeners), [i];
            for (n = 0, r = i._listeners.length; n < r; n++)
              e && e.push(i._listeners[n]);
            return [i];
          }
          if ("*" === f || "**" === f || i[f]) {
            if ("*" === f) {
              for (o in i)
                "_listeners" !== o &&
                  i.hasOwnProperty(o) &&
                  (u = u.concat(v(e, t, i[o], s + 1)));
              return u;
            }
            if ("**" === f) {
              for (o in ((h = s + 1 === p || (s + 2 === p && "*" === m)) &&
                i._listeners &&
                (u = u.concat(v(e, t, i, p))),
              i))
                "_listeners" !== o &&
                  i.hasOwnProperty(o) &&
                  (u =
                    "*" === o || "**" === o
                      ? (i[o]._listeners &&
                          !h &&
                          (u = u.concat(v(e, t, i[o], p))),
                        u.concat(v(e, t, i[o], s)))
                      : o === m
                      ? u.concat(v(e, t, i[o], s + 2))
                      : u.concat(v(e, t, i[o], s)));
              return u;
            }
            u = u.concat(v(e, t, i[f], s + 1));
          }
          if (((a = i["*"]) && v(e, t, a, s + 1), (c = i["**"])))
            if (s < p)
              for (o in (c._listeners && v(e, t, c, p), c))
                "_listeners" !== o &&
                  c.hasOwnProperty(o) &&
                  (o === m
                    ? v(e, t, c[o], s + 2)
                    : o === f
                    ? v(e, t, c[o], s + 1)
                    : (((l = {})[o] = c[o]),
                      v(
                        e,
                        t,
                        {
                          "**": l,
                        },
                        s + 1
                      )));
            else
              c._listeners
                ? v(e, t, c, p)
                : c["*"] && c["*"]._listeners && v(e, t, c["*"], p);
          return u;
        }
        var h, u, r;
        (u = Array.isArray
          ? Array.isArray
          : function (e) {
              return "[object Array]" === Object.prototype.toString.call(e);
            }),
          (r = 10),
          ((n.EventEmitter2 = n).prototype.delimiter = "."),
          (n.prototype.setMaxListeners = function (e) {
            e !== h &&
              (this._events || l.call(this),
              (this._events.maxListeners = e),
              this._conf || (this._conf = {}),
              (this._conf.maxListeners = e));
          }),
          (n.prototype.event = ""),
          (n.prototype.once = function (e, t) {
            return this.many(e, 1, t), this;
          }),
          (n.prototype.many = function (e, t, i) {
            function s() {
              0 == --t && n.off(e, s), i.apply(this, arguments);
            }
            var n = this;
            if ("function" != typeof i)
              throw new Error("many only accepts instances of Function");
            return (s._origin = i), this.on(e, s), n;
          }),
          (n.prototype.emit = function () {
            this._events || l.call(this);
            var e = arguments[0];
            if (
              "newListener" === e &&
              !this.newListener &&
              !this._events.newListener
            )
              return !1;
            var t,
              i,
              s,
              n,
              r,
              o = arguments.length;
            if (this._all && this._all.length) {
              if (((r = this._all.slice()), 3 < o))
                for (t = new Array(o), n = 0; n < o; n++) t[n] = arguments[n];
              for (s = 0, i = r.length; s < i; s++)
                switch (((this.event = e), o)) {
                  case 1:
                    r[s].call(this, e);
                    break;
                  case 2:
                    r[s].call(this, e, arguments[1]);
                    break;
                  case 3:
                    r[s].call(this, e, arguments[1], arguments[2]);
                    break;
                  default:
                    r[s].apply(this, t);
                }
            }
            if (this.wildcard) {
              r = [];
              var a =
                "string" == typeof e ? e.split(this.delimiter) : e.slice();
              v.call(this, r, a, this.listenerTree, 0);
            } else {
              if ("function" == typeof (r = this._events[e])) {
                switch (((this.event = e), o)) {
                  case 1:
                    r.call(this);
                    break;
                  case 2:
                    r.call(this, arguments[1]);
                    break;
                  case 3:
                    r.call(this, arguments[1], arguments[2]);
                    break;
                  default:
                    for (t = new Array(o - 1), n = 1; n < o; n++)
                      t[n - 1] = arguments[n];
                    r.apply(this, t);
                }
                return !0;
              }
              r = r && r.slice();
            }
            if (r && r.length) {
              if (3 < o)
                for (t = new Array(o - 1), n = 1; n < o; n++)
                  t[n - 1] = arguments[n];
              for (s = 0, i = r.length; s < i; s++)
                switch (((this.event = e), o)) {
                  case 1:
                    r[s].call(this);
                    break;
                  case 2:
                    r[s].call(this, arguments[1]);
                    break;
                  case 3:
                    r[s].call(this, arguments[1], arguments[2]);
                    break;
                  default:
                    r[s].apply(this, t);
                }
              return !0;
            }
            if (!this._all && "error" === e)
              throw arguments[1] instanceof Error
                ? arguments[1]
                : new Error("Uncaught, unspecified 'error' event.");
            return !!this._all;
          }),
          (n.prototype.emitAsync = function () {
            this._events || l.call(this);
            var e = arguments[0];
            if (
              "newListener" === e &&
              !this.newListener &&
              !this._events.newListener
            )
              return Promise.resolve([!1]);
            var t,
              i,
              s,
              n,
              r,
              o = [],
              a = arguments.length;
            if (this._all) {
              if (3 < a)
                for (t = new Array(a), n = 1; n < a; n++) t[n] = arguments[n];
              for (s = 0, i = this._all.length; s < i; s++)
                switch (((this.event = e), a)) {
                  case 1:
                    o.push(this._all[s].call(this, e));
                    break;
                  case 2:
                    o.push(this._all[s].call(this, e, arguments[1]));
                    break;
                  case 3:
                    o.push(
                      this._all[s].call(this, e, arguments[1], arguments[2])
                    );
                    break;
                  default:
                    o.push(this._all[s].apply(this, t));
                }
            }
            if (this.wildcard) {
              r = [];
              var c =
                "string" == typeof e ? e.split(this.delimiter) : e.slice();
              v.call(this, r, c, this.listenerTree, 0);
            } else r = this._events[e];
            if ("function" == typeof r)
              switch (((this.event = e), a)) {
                case 1:
                  o.push(r.call(this));
                  break;
                case 2:
                  o.push(r.call(this, arguments[1]));
                  break;
                case 3:
                  o.push(r.call(this, arguments[1], arguments[2]));
                  break;
                default:
                  for (t = new Array(a - 1), n = 1; n < a; n++)
                    t[n - 1] = arguments[n];
                  o.push(r.apply(this, t));
              }
            else if (r && r.length) {
              if (3 < a)
                for (t = new Array(a - 1), n = 1; n < a; n++)
                  t[n - 1] = arguments[n];
              for (s = 0, i = r.length; s < i; s++)
                switch (((this.event = e), a)) {
                  case 1:
                    o.push(r[s].call(this));
                    break;
                  case 2:
                    o.push(r[s].call(this, arguments[1]));
                    break;
                  case 3:
                    o.push(r[s].call(this, arguments[1], arguments[2]));
                    break;
                  default:
                    o.push(r[s].apply(this, t));
                }
            } else if (!this._all && "error" === e)
              return arguments[1] instanceof Error
                ? Promise.reject(arguments[1])
                : Promise.reject("Uncaught, unspecified 'error' event.");
            return Promise.all(o);
          }),
          (n.prototype.on = function (e, t) {
            if ("function" == typeof e) return this.onAny(e), this;
            if ("function" != typeof t)
              throw new Error("on only accepts instances of Function");
            return (
              this._events || l.call(this),
              this.emit("newListener", e, t),
              this.wildcard
                ? function (e, t) {
                    for (
                      var i = 0,
                        s = (e =
                          "string" == typeof e
                            ? e.split(this.delimiter)
                            : e.slice()).length;
                      i + 1 < s;
                      i++
                    )
                      if ("**" === e[i] && "**" === e[i + 1]) return;
                    for (var n = this.listenerTree, r = e.shift(); r !== h; ) {
                      if ((n[r] || (n[r] = {}), (n = n[r]), 0 === e.length))
                        return (
                          n._listeners
                            ? ("function" == typeof n._listeners &&
                                (n._listeners = [n._listeners]),
                              n._listeners.push(t),
                              !n._listeners.warned &&
                                0 < this._events.maxListeners &&
                                n._listeners.length >
                                  this._events.maxListeners &&
                                ((n._listeners.warned = !0),
                                o.call(this, n._listeners.length, r)))
                            : (n._listeners = t),
                          !0
                        );
                      r = e.shift();
                    }
                    return !0;
                  }.call(this, e, t)
                : this._events[e]
                ? ("function" == typeof this._events[e] &&
                    (this._events[e] = [this._events[e]]),
                  this._events[e].push(t),
                  !this._events[e].warned &&
                    0 < this._events.maxListeners &&
                    this._events[e].length > this._events.maxListeners &&
                    ((this._events[e].warned = !0),
                    o.call(this, this._events[e].length, e)))
                : (this._events[e] = t),
              this
            );
          }),
          (n.prototype.onAny = function (e) {
            if ("function" != typeof e)
              throw new Error("onAny only accepts instances of Function");
            return this._all || (this._all = []), this._all.push(e), this;
          }),
          (n.prototype.addListener = n.prototype.on),
          (n.prototype.off = function (e, t) {
            if ("function" != typeof t)
              throw new Error(
                "removeListener only takes instances of Function"
              );
            var i,
              s = [];
            if (this.wildcard) {
              var n =
                "string" == typeof e ? e.split(this.delimiter) : e.slice();
              s = v.call(this, null, n, this.listenerTree, 0);
            } else {
              if (!this._events[e]) return this;
              (i = this._events[e]),
                s.push({
                  _listeners: i,
                });
            }
            for (var r = 0; r < s.length; r++) {
              var o = s[r];
              if (((i = o._listeners), u(i))) {
                for (var a = -1, c = 0, l = i.length; c < l; c++)
                  if (
                    i[c] === t ||
                    (i[c].listener && i[c].listener === t) ||
                    (i[c]._origin && i[c]._origin === t)
                  ) {
                    a = c;
                    break;
                  }
                if (a < 0) continue;
                return (
                  this.wildcard
                    ? o._listeners.splice(a, 1)
                    : this._events[e].splice(a, 1),
                  0 === i.length &&
                    (this.wildcard
                      ? delete o._listeners
                      : delete this._events[e]),
                  this.emit("removeListener", e, t),
                  this
                );
              }
              (i === t ||
                (i.listener && i.listener === t) ||
                (i._origin && i._origin === t)) &&
                (this.wildcard ? delete o._listeners : delete this._events[e],
                this.emit("removeListener", e, t));
            }
            return (
              (function e(t) {
                if (t !== h) {
                  var i = Object.keys(t);
                  for (var s in i) {
                    var n = i[s],
                      r = t[n];
                    r instanceof Function ||
                      "object" != typeof r ||
                      null === r ||
                      (0 < Object.keys(r).length && e(t[n]),
                      0 === Object.keys(r).length && delete t[n]);
                  }
                }
              })(this.listenerTree),
              this
            );
          }),
          (n.prototype.offAny = function (e) {
            var t,
              i = 0,
              s = 0;
            if (e && this._all && 0 < this._all.length) {
              for (i = 0, s = (t = this._all).length; i < s; i++)
                if (e === t[i])
                  return (
                    t.splice(i, 1), this.emit("removeListenerAny", e), this
                  );
            } else {
              for (i = 0, s = (t = this._all).length; i < s; i++)
                this.emit("removeListenerAny", t[i]);
              this._all = [];
            }
            return this;
          }),
          (n.prototype.removeListener = n.prototype.off),
          (n.prototype.removeAllListeners = function (e) {
            if (0 === arguments.length)
              return this._events && l.call(this), this;
            if (this.wildcard)
              for (
                var t =
                    "string" == typeof e ? e.split(this.delimiter) : e.slice(),
                  i = v.call(this, null, t, this.listenerTree, 0),
                  s = 0;
                s < i.length;
                s++
              )
                i[s]._listeners = null;
            else this._events && (this._events[e] = null);
            return this;
          }),
          (n.prototype.listeners = function (e) {
            if (this.wildcard) {
              var t = [],
                i = "string" == typeof e ? e.split(this.delimiter) : e.slice();
              return v.call(this, t, i, this.listenerTree, 0), t;
            }
            return (
              this._events || l.call(this),
              this._events[e] || (this._events[e] = []),
              u(this._events[e]) || (this._events[e] = [this._events[e]]),
              this._events[e]
            );
          }),
          (n.prototype.listenerCount = function (e) {
            return this.listeners(e).length;
          }),
          (n.prototype.listenersAny = function () {
            return this._all ? this._all : [];
          }),
          "function" == typeof define && define.amd
            ? define(function () {
                return n;
              })
            : "object" == typeof i
            ? (t.exports = n)
            : (window.EventEmitter2 = n);
      },
      {},
    ],
    2: [
      function (e, t, i) {
        "use strict";
        var c = Object.getOwnPropertySymbols,
          l = Object.prototype.hasOwnProperty,
          h = Object.prototype.propertyIsEnumerable;
        t.exports = (function () {
          try {
            if (!Object.assign) return !1;
            var e = new String("abc");
            if (((e[5] = "de"), "5" === Object.getOwnPropertyNames(e)[0]))
              return !1;
            for (var t = {}, i = 0; i < 10; i++)
              t["_" + String.fromCharCode(i)] = i;
            if (
              "0123456789" !==
              Object.getOwnPropertyNames(t)
                .map(function (e) {
                  return t[e];
                })
                .join("")
            )
              return !1;
            var s = {};
            return (
              "abcdefghijklmnopqrst".split("").forEach(function (e) {
                s[e] = e;
              }),
              "abcdefghijklmnopqrst" ===
                Object.keys(Object.assign({}, s)).join("")
            );
          } catch (e) {
            return !1;
          }
        })()
          ? Object.assign
          : function (e, t) {
              for (
                var i,
                  s,
                  n = (function (e) {
                    if (null == e)
                      throw new TypeError(
                        "Object.assign cannot be called with null or undefined"
                      );
                    return Object(e);
                  })(e),
                  r = 1;
                r < arguments.length;
                r++
              ) {
                for (var o in (i = Object(arguments[r])))
                  l.call(i, o) && (n[o] = i[o]);
                if (c) {
                  s = c(i);
                  for (var a = 0; a < s.length; a++)
                    h.call(i, s[a]) && (n[s[a]] = i[s[a]]);
                }
              }
              return n;
            };
      },
      {},
    ],
    3: [
      function (e, t, i) {
        var s = this.ROSLIB || {
            REVISION: "0.19.0-SNAPSHOT",
          },
          n = e("object-assign");
        n(s, e("./core")),
          n(s, e("./actionlib")),
          n(s, e("./math")),
          n(s, e("./tf")),
          n(s, e("./urdf")),
          (t.exports = s);
      },
      {
        "./actionlib": 9,
        "./core": 18,
        "./math": 23,
        "./tf": 26,
        "./urdf": 38,
        "object-assign": 2,
      },
    ],
    4: [
      function (t, e, i) {
        (function (e) {
          e.ROSLIB = t("./RosLib");
        }.call(
          this,
          "undefined" != typeof global
            ? global
            : "undefined" != typeof self
            ? self
            : "undefined" != typeof window
            ? window
            : {}
        ));
      },
      {
        "./RosLib": 3,
      },
    ],
    5: [
      function (e, t, i) {
        function s(e) {
          var i = this;
          (e = e || {}),
            (this.ros = e.ros),
            (this.serverName = e.serverName),
            (this.actionName = e.actionName),
            (this.timeout = e.timeout),
            (this.omitFeedback = e.omitFeedback),
            (this.omitStatus = e.omitStatus),
            (this.omitResult = e.omitResult);
          var t = !(this.goals = {}),
            s = new o({
              ros: this.ros,
              name: this.serverName + "/feedback",
              messageType: this.actionName + "Feedback",
            }),
            n = new o({
              ros: this.ros,
              name: this.serverName + "/status",
              messageType: "actionlib_msgs/GoalStatusArray",
            }),
            r = new o({
              ros: this.ros,
              name: this.serverName + "/result",
              messageType: this.actionName + "Result",
            });
          (this.goalTopic = new o({
            ros: this.ros,
            name: this.serverName + "/goal",
            messageType: this.actionName + "Goal",
          })),
            (this.cancelTopic = new o({
              ros: this.ros,
              name: this.serverName + "/cancel",
              messageType: "actionlib_msgs/GoalID",
            })),
            this.goalTopic.advertise(),
            this.cancelTopic.advertise(),
            this.omitStatus ||
              n.subscribe(function (e) {
                (t = !0),
                  e.status_list.forEach(function (e) {
                    var t = i.goals[e.goal_id.id];
                    t && t.emit("status", e);
                  });
              }),
            this.omitFeedback ||
              s.subscribe(function (e) {
                var t = i.goals[e.status.goal_id.id];
                t &&
                  (t.emit("status", e.status), t.emit("feedback", e.feedback));
              }),
            this.omitResult ||
              r.subscribe(function (e) {
                var t = i.goals[e.status.goal_id.id];
                t && (t.emit("status", e.status), t.emit("result", e.result));
              }),
            this.timeout &&
              setTimeout(function () {
                t || i.emit("timeout");
              }, this.timeout);
        }
        var o = e("../core/Topic"),
          n = e("../core/Message"),
          r = e("eventemitter2").EventEmitter2;
        (s.prototype.__proto__ = r.prototype),
          (s.prototype.cancel = function () {
            var e = new n();
            this.cancelTopic.publish(e);
          }),
          (t.exports = s);
      },
      {
        "../core/Message": 10,
        "../core/Topic": 17,
        eventemitter2: 1,
      },
    ],
    6: [
      function (e, t, i) {
        function s(e) {
          var t = this;
          (e = e || {}),
            (this.ros = e.ros),
            (this.serverName = e.serverName),
            (this.actionName = e.actionName),
            (this.timeout = e.timeout),
            (this.omitFeedback = e.omitFeedback),
            (this.omitStatus = e.omitStatus),
            (this.omitResult = e.omitResult);
          var i = new o({
              ros: this.ros,
              name: this.serverName + "/goal",
              messageType: this.actionName + "Goal",
            }),
            s = new o({
              ros: this.ros,
              name: this.serverName + "/feedback",
              messageType: this.actionName + "Feedback",
            }),
            n = new o({
              ros: this.ros,
              name: this.serverName + "/status",
              messageType: "actionlib_msgs/GoalStatusArray",
            }),
            r = new o({
              ros: this.ros,
              name: this.serverName + "/result",
              messageType: this.actionName + "Result",
            });
          i.subscribe(function (e) {
            t.emit("goal", e);
          }),
            n.subscribe(function (e) {
              e.status_list.forEach(function (e) {
                t.emit("status", e);
              });
            }),
            s.subscribe(function (e) {
              t.emit("status", e.status), t.emit("feedback", e.feedback);
            }),
            r.subscribe(function (e) {
              t.emit("status", e.status), t.emit("result", e.result);
            });
        }
        var o = e("../core/Topic"),
          n = (e("../core/Message"), e("eventemitter2").EventEmitter2);
        (s.prototype.__proto__ = n.prototype), (t.exports = s);
      },
      {
        "../core/Message": 10,
        "../core/Topic": 17,
        eventemitter2: 1,
      },
    ],
    7: [
      function (e, t, i) {
        function s(e) {
          var t = this;
          (this.actionClient = e.actionClient),
            (this.goalMessage = e.goalMessage),
            (this.isFinished = !1);
          var i = new Date();
          (this.goalID = "goal_" + Math.random() + "_" + i.getTime()),
            (this.goalMessage = new n({
              goal_id: {
                stamp: {
                  secs: 0,
                  nsecs: 0,
                },
                id: this.goalID,
              },
              goal: this.goalMessage,
            })),
            this.on("status", function (e) {
              t.status = e;
            }),
            this.on("result", function (e) {
              (t.isFinished = !0), (t.result = e);
            }),
            this.on("feedback", function (e) {
              t.feedback = e;
            }),
            (this.actionClient.goals[this.goalID] = this);
        }
        var n = e("../core/Message"),
          r = e("eventemitter2").EventEmitter2;
        (s.prototype.__proto__ = r.prototype),
          (s.prototype.send = function (e) {
            var t = this;
            t.actionClient.goalTopic.publish(t.goalMessage),
              e &&
                setTimeout(function () {
                  t.isFinished || t.emit("timeout");
                }, e);
          }),
          (s.prototype.cancel = function () {
            var e = new n({
              id: this.goalID,
            });
            this.actionClient.cancelTopic.publish(e);
          }),
          (t.exports = s);
      },
      {
        "../core/Message": 10,
        eventemitter2: 1,
      },
    ],
    8: [
      function (e, t, i) {
        function s(e) {
          var s = this;
          (e = e || {}),
            (this.ros = e.ros),
            (this.serverName = e.serverName),
            (this.actionName = e.actionName),
            (this.feedbackPublisher = new o({
              ros: this.ros,
              name: this.serverName + "/feedback",
              messageType: this.actionName + "Feedback",
            })),
            this.feedbackPublisher.advertise();
          var n = new o({
            ros: this.ros,
            name: this.serverName + "/status",
            messageType: "actionlib_msgs/GoalStatusArray",
          });
          n.advertise(),
            (this.resultPublisher = new o({
              ros: this.ros,
              name: this.serverName + "/result",
              messageType: this.actionName + "Result",
            })),
            this.resultPublisher.advertise();
          var t = new o({
              ros: this.ros,
              name: this.serverName + "/goal",
              messageType: this.actionName + "Goal",
            }),
            i = new o({
              ros: this.ros,
              name: this.serverName + "/cancel",
              messageType: "actionlib_msgs/GoalID",
            });
          (this.statusMessage = new a({
            header: {
              stamp: {
                secs: 0,
                nsecs: 100,
              },
              frame_id: "",
            },
            status_list: [],
          })),
            (this.currentGoal = null),
            (this.nextGoal = null),
            t.subscribe(function (e) {
              s.currentGoal
                ? ((s.nextGoal = e), s.emit("cancel"))
                : ((s.statusMessage.status_list = [
                    {
                      goal_id: e.goal_id,
                      status: 1,
                    },
                  ]),
                  (s.currentGoal = e),
                  s.emit("goal", e.goal));
            });
          function r(e, t) {
            return !(e.secs > t.secs) && (e.secs < t.secs || e.nsecs < t.nsecs);
          }
          i.subscribe(function (e) {
            0 === e.stamp.secs && 0 === e.stamp.secs && "" === e.id
              ? ((s.nextGoal = null), s.currentGoal && s.emit("cancel"))
              : (s.currentGoal && e.id === s.currentGoal.goal_id.id
                  ? s.emit("cancel")
                  : s.nextGoal &&
                    e.id === s.nextGoal.goal_id.id &&
                    (s.nextGoal = null),
                s.nextGoal &&
                  r(s.nextGoal.goal_id.stamp, e.stamp) &&
                  (s.nextGoal = null),
                s.currentGoal &&
                  r(s.currentGoal.goal_id.stamp, e.stamp) &&
                  s.emit("cancel"));
          }),
            setInterval(function () {
              var e = new Date(),
                t = Math.floor(e.getTime() / 1e3),
                i = Math.round(1e9 * (e.getTime() / 1e3 - t));
              (s.statusMessage.header.stamp.secs = t),
                (s.statusMessage.header.stamp.nsecs = i),
                n.publish(s.statusMessage);
            }, 500);
        }
        var o = e("../core/Topic"),
          a = e("../core/Message"),
          n = e("eventemitter2").EventEmitter2;
        (s.prototype.__proto__ = n.prototype),
          (s.prototype.setSucceeded = function (e) {
            var t = new a({
              status: {
                goal_id: this.currentGoal.goal_id,
                status: 3,
              },
              result: e,
            });
            this.resultPublisher.publish(t),
              (this.statusMessage.status_list = []),
              this.nextGoal
                ? ((this.currentGoal = this.nextGoal),
                  (this.nextGoal = null),
                  this.emit("goal", this.currentGoal.goal))
                : (this.currentGoal = null);
          }),
          (s.prototype.sendFeedback = function (e) {
            var t = new a({
              status: {
                goal_id: this.currentGoal.goal_id,
                status: 1,
              },
              feedback: e,
            });
            this.feedbackPublisher.publish(t);
          }),
          (s.prototype.setPreempted = function () {
            this.statusMessage.status_list = [];
            var e = new a({
              status: {
                goal_id: this.currentGoal.goal_id,
                status: 2,
              },
            });
            this.resultPublisher.publish(e),
              this.nextGoal
                ? ((this.currentGoal = this.nextGoal),
                  (this.nextGoal = null),
                  this.emit("goal", this.currentGoal.goal))
                : (this.currentGoal = null);
          }),
          (t.exports = s);
      },
      {
        "../core/Message": 10,
        "../core/Topic": 17,
        eventemitter2: 1,
      },
    ],
    9: [
      function (e, t, i) {
        var s = e("../core/Ros");
        e("../mixin")(
          s,
          ["ActionClient", "SimpleActionServer"],
          (t.exports = {
            ActionClient: e("./ActionClient"),
            ActionListener: e("./ActionListener"),
            Goal: e("./Goal"),
            SimpleActionServer: e("./SimpleActionServer"),
          })
        );
      },
      {
        "../core/Ros": 12,
        "../mixin": 24,
        "./ActionClient": 5,
        "./ActionListener": 6,
        "./Goal": 7,
        "./SimpleActionServer": 8,
      },
    ],
    10: [
      function (e, t, i) {
        var s = e("object-assign");
        t.exports = function (e) {
          s(this, e);
        };
      },
      {
        "object-assign": 2,
      },
    ],
    11: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}), (this.ros = e.ros), (this.name = e.name);
        }
        var n = e("./Service"),
          r = e("./ServiceRequest");
        (s.prototype.get = function (i) {
          var e = new n({
              ros: this.ros,
              name: "/rosapi/get_param",
              serviceType: "rosapi/GetParam",
            }),
            t = new r({
              name: this.name,
            });
          e.callService(t, function (e) {
            var t = JSON.parse(e.value);
            i(t);
          });
        }),
          (s.prototype.set = function (e, t) {
            var i = new n({
                ros: this.ros,
                name: "/rosapi/set_param",
                serviceType: "rosapi/SetParam",
              }),
              s = new r({
                name: this.name,
                value: JSON.stringify(e),
              });
            i.callService(s, t);
          }),
          (s.prototype.delete = function (e) {
            var t = new n({
                ros: this.ros,
                name: "/rosapi/delete_param",
                serviceType: "rosapi/DeleteParam",
              }),
              i = new r({
                name: this.name,
              });
            t.callService(i, e);
          }),
          (t.exports = s);
      },
      {
        "./Service": 13,
        "./ServiceRequest": 14,
      },
    ],
    12: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.socket = null),
            (this.idCounter = 0),
            (this.isConnected = !1),
            (this.transportLibrary = e.transportLibrary || "websocket"),
            (this.transportOptions = e.transportOptions || {}),
            void 0 === e.groovyCompatibility
              ? (this.groovyCompatibility = !0)
              : (this.groovyCompatibility = e.groovyCompatibility),
            this.setMaxListeners(0),
            e.url && this.connect(e.url);
        }
        var n = e("ws"),
          r = e("./SocketAdapter.js"),
          o = e("./Service"),
          a = e("./ServiceRequest"),
          c = e("object-assign"),
          l = e("eventemitter2").EventEmitter2;
        (s.prototype.__proto__ = l.prototype),
          (s.prototype.connect = function (e) {
            "socket.io" === this.transportLibrary
              ? ((this.socket = c(
                  io(e, {
                    "force new connection": !0,
                  }),
                  r(this)
                )),
                this.socket.on("connect", this.socket.onopen),
                this.socket.on("data", this.socket.onmessage),
                this.socket.on("close", this.socket.onclose),
                this.socket.on("error", this.socket.onerror))
              : "RTCPeerConnection" === this.transportLibrary.constructor.name
              ? (this.socket = c(
                  this.transportLibrary.createDataChannel(
                    e,
                    this.transportOptions
                  ),
                  r(this)
                ))
              : (this.socket = c(new n(e), r(this)));
          }),
          (s.prototype.close = function () {
            this.socket && this.socket.close();
          }),
          (s.prototype.authenticate = function (e, t, i, s, n, r, o) {
            var a = {
              op: "auth",
              mac: e,
              client: t,
              dest: i,
              rand: s,
              t: n,
              level: r,
              end: o,
            };
            this.callOnConnection(a);
          }),
          (s.prototype.callOnConnection = function (e) {
            var t = this,
              i = JSON.stringify(e),
              s = null;
            (s =
              "socket.io" === this.transportLibrary
                ? function (e) {
                    t.socket.emit("operation", e);
                  }
                : function (e) {
                    t.socket.send(e);
                  }),
              this.isConnected
                ? s(i)
                : t.once("connection", function () {
                    s(i);
                  });
          }),
          (s.prototype.getActionServers = function (t, i) {
            var e = new o({
                ros: this,
                name: "/rosapi/action_servers",
                serviceType: "rosapi/GetActionServers",
              }),
              s = new a({});
            "function" == typeof i
              ? e.callService(
                  s,
                  function (e) {
                    t(e.action_servers);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : e.callService(s, function (e) {
                  t(e.action_servers);
                });
          }),
          (s.prototype.getTopics = function (t, i) {
            var e = new o({
                ros: this,
                name: "/rosapi/topics",
                serviceType: "rosapi/Topics",
              }),
              s = new a();
            "function" == typeof i
              ? e.callService(
                  s,
                  function (e) {
                    t(e);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : e.callService(s, function (e) {
                  t(e);
                });
          }),
          (s.prototype.getTopicsForType = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/topics_for_type",
                serviceType: "rosapi/TopicsForType",
              }),
              n = new a({
                type: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.topics);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e.topics);
                });
          }),
          (s.prototype.getServices = function (t, i) {
            var e = new o({
                ros: this,
                name: "/rosapi/services",
                serviceType: "rosapi/Services",
              }),
              s = new a();
            "function" == typeof i
              ? e.callService(
                  s,
                  function (e) {
                    t(e.services);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : e.callService(s, function (e) {
                  t(e.services);
                });
          }),
          (s.prototype.getServicesForType = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/services_for_type",
                serviceType: "rosapi/ServicesForType",
              }),
              n = new a({
                type: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.services);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e.services);
                });
          }),
          (s.prototype.getServiceRequestDetails = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/service_request_details",
                serviceType: "rosapi/ServiceRequestDetails",
              }),
              n = new a({
                type: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e);
                });
          }),
          (s.prototype.getServiceResponseDetails = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/service_response_details",
                serviceType: "rosapi/ServiceResponseDetails",
              }),
              n = new a({
                type: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e);
                });
          }),
          (s.prototype.getNodes = function (t, i) {
            var e = new o({
                ros: this,
                name: "/rosapi/nodes",
                serviceType: "rosapi/Nodes",
              }),
              s = new a();
            "function" == typeof i
              ? e.callService(
                  s,
                  function (e) {
                    t(e.nodes);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : e.callService(s, function (e) {
                  t(e.nodes);
                });
          }),
          (s.prototype.getNodeDetails = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/node_details",
                serviceType: "rosapi/NodeDetails",
              }),
              n = new a({
                node: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.subscribing, e.publishing, e.services);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e);
                });
          }),
          (s.prototype.getParams = function (t, i) {
            var e = new o({
                ros: this,
                name: "/rosapi/get_param_names",
                serviceType: "rosapi/GetParamNames",
              }),
              s = new a();
            "function" == typeof i
              ? e.callService(
                  s,
                  function (e) {
                    t(e.names);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : e.callService(s, function (e) {
                  t(e.names);
                });
          }),
          (s.prototype.getTopicType = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/topic_type",
                serviceType: "rosapi/TopicType",
              }),
              n = new a({
                topic: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.type);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e.type);
                });
          }),
          (s.prototype.getServiceType = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/service_type",
                serviceType: "rosapi/ServiceType",
              }),
              n = new a({
                service: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.type);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e.type);
                });
          }),
          (s.prototype.getMessageDetails = function (e, t, i) {
            var s = new o({
                ros: this,
                name: "/rosapi/message_details",
                serviceType: "rosapi/MessageDetails",
              }),
              n = new a({
                type: e,
              });
            "function" == typeof i
              ? s.callService(
                  n,
                  function (e) {
                    t(e.typedefs);
                  },
                  function (e) {
                    i(e);
                  }
                )
              : s.callService(n, function (e) {
                  t(e.typedefs);
                });
          }),
          (s.prototype.decodeTypeDefs = function (e) {
            var h = this,
              u = function (e, t) {
                for (var i = {}, s = 0; s < e.fieldnames.length; s++) {
                  var n = e.fieldarraylen[s],
                    r = e.fieldnames[s],
                    o = e.fieldtypes[s];
                  if (-1 === o.indexOf("/")) i[r] = -1 === n ? o : [o];
                  else {
                    for (var a = !1, c = 0; c < t.length; c++)
                      if (t[c].type.toString() === o.toString()) {
                        a = t[c];
                        break;
                      }
                    if (a) {
                      var l = u(a, t);
                      -1 === n || (i[r] = [l]);
                    } else
                      h.emit(
                        "error",
                        "Cannot find " + o + " in decodeTypeDefs"
                      );
                  }
                }
                return i;
              };
            return u(e[0], e);
          }),
          (t.exports = s);
      },
      {
        "./Service": 13,
        "./ServiceRequest": 14,
        "./SocketAdapter.js": 16,
        eventemitter2: 1,
        "object-assign": 2,
        ws: 39,
      },
    ],
    13: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.ros = e.ros),
            (this.name = e.name),
            (this.serviceType = e.serviceType),
            (this.isAdvertised = !1),
            (this._serviceCallback = null);
        }
        var r = e("./ServiceResponse"),
          n = (e("./ServiceRequest"), e("eventemitter2").EventEmitter2);
        (s.prototype.__proto__ = n.prototype),
          (s.prototype.callService = function (e, t, i) {
            if (!this.isAdvertised) {
              var s = "call_service:" + this.name + ":" + ++this.ros.idCounter;
              (t || i) &&
                this.ros.once(s, function (e) {
                  void 0 !== e.result && !1 === e.result
                    ? "function" == typeof i && i(e.values)
                    : "function" == typeof t && t(new r(e.values));
                });
              var n = {
                op: "call_service",
                id: s,
                service: this.name,
                args: e,
              };
              this.ros.callOnConnection(n);
            }
          }),
          (s.prototype.advertise = function (e) {
            this.isAdvertised ||
              "function" != typeof e ||
              ((this._serviceCallback = e),
              this.ros.on(this.name, this._serviceResponse.bind(this)),
              this.ros.callOnConnection({
                op: "advertise_service",
                type: this.serviceType,
                service: this.name,
              }),
              (this.isAdvertised = !0));
          }),
          (s.prototype.unadvertise = function () {
            this.isAdvertised &&
              (this.ros.callOnConnection({
                op: "unadvertise_service",
                service: this.name,
              }),
              (this.isAdvertised = !1));
          }),
          (s.prototype._serviceResponse = function (e) {
            var t = {},
              i = this._serviceCallback(e.args, t),
              s = {
                op: "service_response",
                service: this.name,
                values: new r(t),
                result: i,
              };
            e.id && (s.id = e.id), this.ros.callOnConnection(s);
          }),
          (t.exports = s);
      },
      {
        "./ServiceRequest": 14,
        "./ServiceResponse": 15,
        eventemitter2: 1,
      },
    ],
    14: [
      function (e, t, i) {
        var s = e("object-assign");
        t.exports = function (e) {
          s(this, e);
        };
      },
      {
        "object-assign": 2,
      },
    ],
    15: [
      function (e, t, i) {
        var s = e("object-assign");
        t.exports = function (e) {
          s(this, e);
        };
      },
      {
        "object-assign": 2,
      },
    ],
    16: [
      function (e, t, i) {
        "use strict";
        var n = e("../util/decompressPng"),
          r = (e("ws"), null);
        "undefined" != typeof bson && (r = bson().BSON),
          (t.exports = function (t) {
            function i(e) {
              "publish" === e.op
                ? t.emit(e.topic, e.msg)
                : "service_response" === e.op
                ? t.emit(e.id, e)
                : "call_service" === e.op && t.emit(e.service, e);
            }
            function s(e, t) {
              "png" === e.op ? n(e.data, t) : t(e);
            }
            return {
              onopen: function (e) {
                (t.isConnected = !0), t.emit("connection", e);
              },
              onclose: function (e) {
                (t.isConnected = !1), t.emit("close", e);
              },
              onerror: function (e) {
                t.emit("error", e);
              },
              onmessage: function (e) {
                "undefined" != typeof Blob && e.data instanceof Blob
                  ? (function (e, i) {
                      if (!r)
                        throw "Cannot process BSON encoded message without BSON header.";
                      var t = new FileReader();
                      (t.onload = function () {
                        var e = new Uint8Array(this.result),
                          t = r.deserialize(e);
                        i(t);
                      }),
                        t.readAsArrayBuffer(e);
                    })(e.data, function (e) {
                      s(e, i);
                    })
                  : s(JSON.parse("string" == typeof e ? e : e.data), i);
              },
            };
          });
      },
      {
        "../util/decompressPng": 41,
        ws: 39,
      },
    ],
    17: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.ros = e.ros),
            (this.name = e.name),
            (this.messageType = e.messageType),
            (this.isAdvertised = !1),
            (this.compression = e.compression || "none"),
            (this.throttle_rate = e.throttle_rate || 0),
            (this.latch = e.latch || !1),
            (this.queue_size = e.queue_size || 100),
            (this.queue_length = e.queue_length || 0),
            this.compression &&
              "png" !== this.compression &&
              "none" !== this.compression &&
              this.emit(
                "warning",
                this.compression +
                  " compression is not supported. No compression will be used."
              ),
            this.throttle_rate < 0 &&
              (this.emit(
                "warning",
                this.throttle_rate + " is not allowed. Set to 0"
              ),
              (this.throttle_rate = 0));
          var t = this;
          this._messageCallback = function (e) {
            t.emit("message", new r(e));
          };
        }
        var n = e("eventemitter2").EventEmitter2,
          r = e("./Message");
        (s.prototype.__proto__ = n.prototype),
          (s.prototype.subscribe = function (e) {
            "function" == typeof e && this.on("message", e),
              this.subscribeId ||
                (this.ros.on(this.name, this._messageCallback),
                (this.subscribeId =
                  "subscribe:" + this.name + ":" + ++this.ros.idCounter),
                this.ros.callOnConnection({
                  op: "subscribe",
                  id: this.subscribeId,
                  type: this.messageType,
                  topic: this.name,
                  compression: this.compression,
                  throttle_rate: this.throttle_rate,
                  queue_length: this.queue_length,
                }));
          }),
          (s.prototype.unsubscribe = function (e) {
            (e && (this.off("message", e), this.listeners("message").length)) ||
              (this.subscribeId &&
                (this.ros.off(this.name, this._messageCallback),
                this.emit("unsubscribe"),
                this.ros.callOnConnection({
                  op: "unsubscribe",
                  id: this.subscribeId,
                  topic: this.name,
                }),
                (this.subscribeId = null)));
          }),
          (s.prototype.advertise = function () {
            this.isAdvertised ||
              ((this.advertiseId =
                "advertise:" + this.name + ":" + ++this.ros.idCounter),
              this.ros.callOnConnection({
                op: "advertise",
                id: this.advertiseId,
                type: this.messageType,
                topic: this.name,
                latch: this.latch,
                queue_size: this.queue_size,
              }),
              (this.isAdvertised = !0));
          }),
          (s.prototype.unadvertise = function () {
            this.isAdvertised &&
              (this.emit("unadvertise"),
              this.ros.callOnConnection({
                op: "unadvertise",
                id: this.advertiseId,
                topic: this.name,
              }),
              (this.isAdvertised = !1));
          }),
          (s.prototype.publish = function (e) {
            this.isAdvertised || this.advertise(), this.ros.idCounter++;
            var t = {
              op: "publish",
              id: "publish:" + this.name + ":" + this.ros.idCounter,
              topic: this.name,
              msg: e,
              latch: this.latch,
            };
            this.ros.callOnConnection(t);
          }),
          (t.exports = s);
      },
      {
        "./Message": 10,
        eventemitter2: 1,
      },
    ],
    18: [
      function (e, t, i) {
        var s = e("../mixin"),
          n = (t.exports = {
            Ros: e("./Ros"),
            Topic: e("./Topic"),
            Message: e("./Message"),
            Param: e("./Param"),
            Service: e("./Service"),
            ServiceRequest: e("./ServiceRequest"),
            ServiceResponse: e("./ServiceResponse"),
          });
        s(n.Ros, ["Param", "Service", "Topic"], n);
      },
      {
        "../mixin": 24,
        "./Message": 10,
        "./Param": 11,
        "./Ros": 12,
        "./Service": 13,
        "./ServiceRequest": 14,
        "./ServiceResponse": 15,
        "./Topic": 17,
      },
    ],
    19: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.position = new n(e.position)),
            (this.orientation = new r(e.orientation));
        }
        var n = e("./Vector3"),
          r = e("./Quaternion");
        (s.prototype.applyTransform = function (e) {
          this.position.multiplyQuaternion(e.rotation),
            this.position.add(e.translation);
          var t = e.rotation.clone();
          t.multiply(this.orientation), (this.orientation = t);
        }),
          (s.prototype.clone = function () {
            return new s(this);
          }),
          (t.exports = s);
      },
      {
        "./Quaternion": 20,
        "./Vector3": 22,
      },
    ],
    20: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.x = e.x || 0),
            (this.y = e.y || 0),
            (this.z = e.z || 0),
            (this.w = "number" == typeof e.w ? e.w : 1);
        }
        (s.prototype.conjugate = function () {
          (this.x *= -1), (this.y *= -1), (this.z *= -1);
        }),
          (s.prototype.norm = function () {
            return Math.sqrt(
              this.x * this.x +
                this.y * this.y +
                this.z * this.z +
                this.w * this.w
            );
          }),
          (s.prototype.normalize = function () {
            var e = Math.sqrt(
              this.x * this.x +
                this.y * this.y +
                this.z * this.z +
                this.w * this.w
            );
            0 === e
              ? ((this.x = 0), (this.y = 0), (this.z = 0), (this.w = 1))
              : ((e = 1 / e),
                (this.x = this.x * e),
                (this.y = this.y * e),
                (this.z = this.z * e),
                (this.w = this.w * e));
          }),
          (s.prototype.invert = function () {
            this.conjugate(), this.normalize();
          }),
          (s.prototype.multiply = function (e) {
            var t = this.x * e.w + this.y * e.z - this.z * e.y + this.w * e.x,
              i = -this.x * e.z + this.y * e.w + this.z * e.x + this.w * e.y,
              s = this.x * e.y - this.y * e.x + this.z * e.w + this.w * e.z,
              n = -this.x * e.x - this.y * e.y - this.z * e.z + this.w * e.w;
            (this.x = t), (this.y = i), (this.z = s), (this.w = n);
          }),
          (s.prototype.clone = function () {
            return new s(this);
          }),
          (t.exports = s);
      },
      {},
    ],
    21: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.translation = new n(e.translation)),
            (this.rotation = new r(e.rotation));
        }
        var n = e("./Vector3"),
          r = e("./Quaternion");
        (s.prototype.clone = function () {
          return new s(this);
        }),
          (t.exports = s);
      },
      {
        "./Quaternion": 20,
        "./Vector3": 22,
      },
    ],
    22: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.x = e.x || 0),
            (this.y = e.y || 0),
            (this.z = e.z || 0);
        }
        (s.prototype.add = function (e) {
          (this.x += e.x), (this.y += e.y), (this.z += e.z);
        }),
          (s.prototype.subtract = function (e) {
            (this.x -= e.x), (this.y -= e.y), (this.z -= e.z);
          }),
          (s.prototype.multiplyQuaternion = function (e) {
            var t = e.w * this.x + e.y * this.z - e.z * this.y,
              i = e.w * this.y + e.z * this.x - e.x * this.z,
              s = e.w * this.z + e.x * this.y - e.y * this.x,
              n = -e.x * this.x - e.y * this.y - e.z * this.z;
            (this.x = t * e.w + n * -e.x + i * -e.z - s * -e.y),
              (this.y = i * e.w + n * -e.y + s * -e.x - t * -e.z),
              (this.z = s * e.w + n * -e.z + t * -e.y - i * -e.x);
          }),
          (s.prototype.clone = function () {
            return new s(this);
          }),
          (t.exports = s);
      },
      {},
    ],
    23: [
      function (e, t, i) {
        t.exports = {
          Pose: e("./Pose"),
          Quaternion: e("./Quaternion"),
          Transform: e("./Transform"),
          Vector3: e("./Vector3"),
        };
      },
      {
        "./Pose": 19,
        "./Quaternion": 20,
        "./Transform": 21,
        "./Vector3": 22,
      },
    ],
    24: [
      function (e, t, i) {
        t.exports = function (i, e, s) {
          e.forEach(function (e) {
            var t = s[e];
            i.prototype[e] = function (e) {
              return (e.ros = this), new t(e);
            };
          });
        };
      },
      {},
    ],
    25: [
      function (e, t, i) {
        function s(e) {
          (e = e || {}),
            (this.ros = e.ros),
            (this.fixedFrame = e.fixedFrame || "/base_link"),
            (this.angularThres = e.angularThres || 2),
            (this.transThres = e.transThres || 0.01),
            (this.rate = e.rate || 10),
            (this.updateDelay = e.updateDelay || 50);
          var t = e.topicTimeout || 2,
            i = Math.floor(t),
            s = Math.floor(1e9 * (t - i));
          (this.topicTimeout = {
            secs: i,
            nsecs: s,
          }),
            (this.serverName = e.serverName || "/tf2_web_republisher"),
            (this.repubServiceName = e.repubServiceName || "/republish_tfs"),
            (this.currentGoal = !1),
            (this.currentTopic = !1),
            (this.frameInfos = {}),
            (this.republisherUpdateRequested = !1),
            (this.actionClient = this.ros.ActionClient({
              serverName: this.serverName,
              actionName: "tf2_web_republisher/TFSubscriptionAction",
              omitStatus: !0,
              omitResult: !0,
            })),
            (this.serviceClient = this.ros.Service({
              name: this.repubServiceName,
              serviceType: "tf2_web_republisher/RepublishTFs",
            }));
        }
        var n = (e("../actionlib/ActionClient"), e("../actionlib/Goal")),
          r = (e("../core/Service.js"), e("../core/ServiceRequest.js")),
          o = e("../math/Transform");
        (s.prototype.processTFArray = function (e) {
          e.transforms.forEach(function (e) {
            var t = e.child_frame_id;
            "/" === t[0] && (t = t.substring(1));
            var i = this.frameInfos[t];
            i &&
              ((i.transform = new o({
                translation: e.transform.translation,
                rotation: e.transform.rotation,
              })),
              i.cbs.forEach(function (e) {
                e(i.transform);
              }));
          }, this);
        }),
          (s.prototype.updateGoal = function () {
            var e = {
              source_frames: Object.keys(this.frameInfos),
              target_frame: this.fixedFrame,
              angular_thres: this.angularThres,
              trans_thres: this.transThres,
              rate: this.rate,
            };
            if (this.ros.groovyCompatibility)
              this.currentGoal && this.currentGoal.cancel(),
                (this.currentGoal = new n({
                  actionClient: this.actionClient,
                  goalMessage: e,
                })),
                this.currentGoal.on("feedback", this.processTFArray.bind(this)),
                this.currentGoal.send();
            else {
              e.timeout = this.topicTimeout;
              var t = new r(e);
              this.serviceClient.callService(
                t,
                this.processResponse.bind(this)
              );
            }
            this.republisherUpdateRequested = !1;
          }),
          (s.prototype.processResponse = function (e) {
            this.currentTopic && this.currentTopic.unsubscribe(),
              (this.currentTopic = this.ros.Topic({
                name: e.topic_name,
                messageType: "tf2_web_republisher/TFArray",
              })),
              this.currentTopic.subscribe(this.processTFArray.bind(this));
          }),
          (s.prototype.subscribe = function (e, t) {
            "/" === e[0] && (e = e.substring(1)),
              this.frameInfos[e]
                ? this.frameInfos[e].transform &&
                  t(this.frameInfos[e].transform)
                : ((this.frameInfos[e] = {
                    cbs: [],
                  }),
                  this.republisherUpdateRequested ||
                    (setTimeout(this.updateGoal.bind(this), this.updateDelay),
                    (this.republisherUpdateRequested = !0))),
              this.frameInfos[e].cbs.push(t);
          }),
          (s.prototype.unsubscribe = function (e, t) {
            "/" === e[0] && (e = e.substring(1));
            for (
              var i = this.frameInfos[e], s = (i && i.cbs) || [], n = s.length;
              n--;

            )
              s[n] === t && s.splice(n, 1);
            (t && 0 !== s.length) || delete this.frameInfos[e];
          }),
          (t.exports = s);
      },
      {
        "../actionlib/ActionClient": 5,
        "../actionlib/Goal": 7,
        "../core/Service.js": 13,
        "../core/ServiceRequest.js": 14,
        "../math/Transform": 21,
      },
    ],
    26: [
      function (e, t, i) {
        var s = e("../core/Ros");
        e("../mixin")(
          s,
          ["TFClient"],
          (t.exports = {
            TFClient: e("./TFClient"),
          })
        );
      },
      {
        "../core/Ros": 12,
        "../mixin": 24,
        "./TFClient": 25,
      },
    ],
    27: [
      function (e, t, i) {
        var s = e("../math/Vector3"),
          n = e("./UrdfTypes");
        t.exports = function (e) {
          (this.dimension = null), (this.type = n.URDF_BOX);
          var t = e.xml.getAttribute("size").split(" ");
          this.dimension = new s({
            x: parseFloat(t[0]),
            y: parseFloat(t[1]),
            z: parseFloat(t[2]),
          });
        };
      },
      {
        "../math/Vector3": 22,
        "./UrdfTypes": 36,
      },
    ],
    28: [
      function (e, t, i) {
        t.exports = function (e) {
          var t = e.xml.getAttribute("rgba").split(" ");
          (this.r = parseFloat(t[0])),
            (this.g = parseFloat(t[1])),
            (this.b = parseFloat(t[2])),
            (this.a = parseFloat(t[3]));
        };
      },
      {},
    ],
    29: [
      function (e, t, i) {
        var s = e("./UrdfTypes");
        t.exports = function (e) {
          (this.type = s.URDF_CYLINDER),
            (this.length = parseFloat(e.xml.getAttribute("length"))),
            (this.radius = parseFloat(e.xml.getAttribute("radius")));
        };
      },
      {
        "./UrdfTypes": 36,
      },
    ],
    30: [
      function (e, t, i) {
        t.exports = function (e) {
          (this.name = e.xml.getAttribute("name")),
            (this.type = e.xml.getAttribute("type"));
          var t = e.xml.getElementsByTagName("limit");
          0 < t.length &&
            ((this.minval = parseFloat(t[0].getAttribute("lower"))),
            (this.maxval = parseFloat(t[0].getAttribute("upper"))));
        };
      },
      {},
    ],
    31: [
      function (e, t, i) {
        var s = e("./UrdfVisual");
        t.exports = function (e) {
          (this.name = e.xml.getAttribute("name")), (this.visuals = []);
          for (
            var t = e.xml.getElementsByTagName("visual"), i = 0;
            i < t.length;
            i++
          )
            this.visuals.push(
              new s({
                xml: t[i],
              })
            );
        };
      },
      {
        "./UrdfVisual": 37,
      },
    ],
    32: [
      function (e, t, i) {
        function s(e) {
          (this.textureFilename = null),
            (this.color = null),
            (this.name = e.xml.getAttribute("name"));
          var t = e.xml.getElementsByTagName("texture");
          0 < t.length &&
            (this.textureFilename = t[0].getAttribute("filename"));
          var i = e.xml.getElementsByTagName("color");
          0 < i.length &&
            (this.color = new n({
              xml: i[0],
            }));
        }
        var n = e("./UrdfColor");
        s.prototype.isLink = function () {
          return null === this.color && null === this.textureFilename;
        };
        var r = e("object-assign");
        (s.prototype.assign = function (e) {
          return r(this, e);
        }),
          (t.exports = s);
      },
      {
        "./UrdfColor": 28,
        "object-assign": 2,
      },
    ],
    33: [
      function (e, t, i) {
        var s = e("../math/Vector3"),
          n = e("./UrdfTypes");
        t.exports = function (e) {
          (this.scale = null),
            (this.type = n.URDF_MESH),
            (this.filename = e.xml.getAttribute("filename"));
          var t = e.xml.getAttribute("scale");
          if (t) {
            var i = t.split(" ");
            this.scale = new s({
              x: parseFloat(i[0]),
              y: parseFloat(i[1]),
              z: parseFloat(i[2]),
            });
          }
        };
      },
      {
        "../math/Vector3": 22,
        "./UrdfTypes": 36,
      },
    ],
    34: [
      function (e, t, i) {
        var p = e("./UrdfMaterial"),
          f = e("./UrdfLink"),
          m = e("./UrdfJoint"),
          v = e("xmldom").DOMParser;
        t.exports = function (e) {
          var t = (e = e || {}).xml,
            i = e.string;
          (this.materials = {}),
            (this.links = {}),
            (this.joints = {}),
            i && (t = new v().parseFromString(i, "text/xml"));
          var s = t.documentElement;
          this.name = s.getAttribute("name");
          for (var n = s.childNodes, r = 0; r < n.length; r++) {
            var o = n[r];
            if ("material" === o.tagName) {
              var a = new p({
                xml: o,
              });
              void 0 !== this.materials[a.name]
                ? this.materials[a.name].isLink()
                  ? this.materials[a.name].assign(a)
                  : console.warn("Material " + a.name + "is not unique.")
                : (this.materials[a.name] = a);
            } else if ("link" === o.tagName) {
              var c = new f({
                xml: o,
              });
              if (void 0 !== this.links[c.name])
                console.warn("Link " + c.name + " is not unique.");
              else {
                for (var l = 0; l < c.visuals.length; l++) {
                  var h = c.visuals[l].material;
                  null !== h &&
                    (void 0 !== this.materials[h.name]
                      ? (c.visuals[l].material = this.materials[h.name])
                      : (this.materials[h.name] = h));
                }
                this.links[c.name] = c;
              }
            } else if ("joint" === o.tagName) {
              var u = new m({
                xml: o,
              });
              this.joints[u.name] = u;
            }
          }
        };
      },
      {
        "./UrdfJoint": 30,
        "./UrdfLink": 31,
        "./UrdfMaterial": 32,
        xmldom: 42,
      },
    ],
    35: [
      function (e, t, i) {
        var s = e("./UrdfTypes");
        t.exports = function (e) {
          (this.type = s.URDF_SPHERE),
            (this.radius = parseFloat(e.xml.getAttribute("radius")));
        };
      },
      {
        "./UrdfTypes": 36,
      },
    ],
    36: [
      function (e, t, i) {
        t.exports = {
          URDF_SPHERE: 0,
          URDF_BOX: 1,
          URDF_CYLINDER: 2,
          URDF_MESH: 3,
        };
      },
      {},
    ],
    37: [
      function (e, t, i) {
        var w = e("../math/Pose"),
          x = e("../math/Vector3"),
          T = e("../math/Quaternion"),
          S = e("./UrdfCylinder"),
          k = e("./UrdfBox"),
          M = e("./UrdfMaterial"),
          A = e("./UrdfMesh"),
          N = e("./UrdfSphere");
        t.exports = function (e) {
          var t = e.xml;
          (this.origin = null), (this.geometry = null), (this.material = null);
          var i = t.getElementsByTagName("origin");
          if (0 === i.length) this.origin = new w();
          else {
            var s = i[0].getAttribute("xyz"),
              n = new x();
            s &&
              ((s = s.split(" ")),
              (n = new x({
                x: parseFloat(s[0]),
                y: parseFloat(s[1]),
                z: parseFloat(s[2]),
              })));
            var r = i[0].getAttribute("rpy"),
              o = new T();
            if (r) {
              r = r.split(" ");
              var a = parseFloat(r[0]) / 2,
                c = parseFloat(r[1]) / 2,
                l = parseFloat(r[2]) / 2,
                h =
                  Math.sin(a) * Math.cos(c) * Math.cos(l) -
                  Math.cos(a) * Math.sin(c) * Math.sin(l),
                u =
                  Math.cos(a) * Math.sin(c) * Math.cos(l) +
                  Math.sin(a) * Math.cos(c) * Math.sin(l),
                p =
                  Math.cos(a) * Math.cos(c) * Math.sin(l) -
                  Math.sin(a) * Math.sin(c) * Math.cos(l),
                f =
                  Math.cos(a) * Math.cos(c) * Math.cos(l) +
                  Math.sin(a) * Math.sin(c) * Math.sin(l);
              (o = new T({
                x: h,
                y: u,
                z: p,
                w: f,
              })).normalize();
            }
            this.origin = new w({
              position: n,
              orientation: o,
            });
          }
          var m = t.getElementsByTagName("geometry");
          if (0 < m.length) {
            for (var v = m[0], d = null, y = 0; y < v.childNodes.length; y++) {
              var g = v.childNodes[y];
              if (1 === g.nodeType) {
                d = g;
                break;
              }
            }
            var b = d.nodeName;
            "sphere" === b
              ? (this.geometry = new N({
                  xml: d,
                }))
              : "box" === b
              ? (this.geometry = new k({
                  xml: d,
                }))
              : "cylinder" === b
              ? (this.geometry = new S({
                  xml: d,
                }))
              : "mesh" === b
              ? (this.geometry = new A({
                  xml: d,
                }))
              : console.warn("Unknown geometry type " + b);
          }
          var _ = t.getElementsByTagName("material");
          0 < _.length &&
            (this.material = new M({
              xml: _[0],
            }));
        };
      },
      {
        "../math/Pose": 19,
        "../math/Quaternion": 20,
        "../math/Vector3": 22,
        "./UrdfBox": 27,
        "./UrdfCylinder": 29,
        "./UrdfMaterial": 32,
        "./UrdfMesh": 33,
        "./UrdfSphere": 35,
      },
    ],
    38: [
      function (e, t, i) {
        t.exports = e("object-assign")(
          {
            UrdfBox: e("./UrdfBox"),
            UrdfColor: e("./UrdfColor"),
            UrdfCylinder: e("./UrdfCylinder"),
            UrdfLink: e("./UrdfLink"),
            UrdfMaterial: e("./UrdfMaterial"),
            UrdfMesh: e("./UrdfMesh"),
            UrdfModel: e("./UrdfModel"),
            UrdfSphere: e("./UrdfSphere"),
            UrdfVisual: e("./UrdfVisual"),
          },
          e("./UrdfTypes")
        );
      },
      {
        "./UrdfBox": 27,
        "./UrdfColor": 28,
        "./UrdfCylinder": 29,
        "./UrdfLink": 31,
        "./UrdfMaterial": 32,
        "./UrdfMesh": 33,
        "./UrdfModel": 34,
        "./UrdfSphere": 35,
        "./UrdfTypes": 36,
        "./UrdfVisual": 37,
        "object-assign": 2,
      },
    ],
    39: [
      function (e, t, i) {
        (function (e) {
          t.exports = e.WebSocket;
        }.call(
          this,
          "undefined" != typeof global
            ? global
            : "undefined" != typeof self
            ? self
            : "undefined" != typeof window
            ? window
            : {}
        ));
      },
      {},
    ],
    40: [
      function (e, t, i) {
        t.exports = function () {
          return document.createElement("canvas");
        };
      },
      {},
    ],
    41: [
      function (i, s, e) {
        (function (e) {
          "use strict";
          var a = i("canvas"),
            t = a.Image || e.Image;
          s.exports = function (e, r) {
            var o = new t();
            (o.onload = function () {
              var e = new a(),
                t = e.getContext("2d");
              (e.width = o.width),
                (e.height = o.height),
                (t.imageSmoothingEnabled = !1),
                (t.webkitImageSmoothingEnabled = !1),
                (t.mozImageSmoothingEnabled = !1),
                t.drawImage(o, 0, 0);
              for (
                var i = t.getImageData(0, 0, o.width, o.height).data,
                  s = "",
                  n = 0;
                n < i.length;
                n += 4
              )
                s += String.fromCharCode(i[n], i[n + 1], i[n + 2]);
              r(JSON.parse(s));
            }),
              (o.src = "data:image/png;base64," + e);
          };
        }.call(
          this,
          "undefined" != typeof global
            ? global
            : "undefined" != typeof self
            ? self
            : "undefined" != typeof window
            ? window
            : {}
        ));
      },
      {
        canvas: 40,
      },
    ],
    42: [
      function (e, t, i) {
        (function (e) {
          (i.DOMImplementation = e.DOMImplementation),
            (i.XMLSerializer = e.XMLSerializer),
            (i.DOMParser = e.DOMParser);
        }.call(
          this,
          "undefined" != typeof global
            ? global
            : "undefined" != typeof self
            ? self
            : "undefined" != typeof window
            ? window
            : {}
        ));
      },
      {},
    ],
  },
  {},
  [4]
);
!(function (e, n) {
  "function" == typeof define && define.amd
    ? define(["jquery"], function (t) {
        return n(e, t);
      })
    : "object" == typeof exports
    ? n(e, require("jquery"))
    : n(e, e.jQuery);
})("undefined" != typeof window ? window : this, function (t, x) {
  "use strict";
  var $ = t.document,
    a = "__pz__",
    o = Array.prototype.slice,
    e = /trident\/7./i,
    m = (function () {
      if (e.test(navigator.userAgent)) return !1;
      var t = $.createElement("input");
      return (
        t.setAttribute("oninput", "return"), "function" == typeof t.oninput
      );
    })(),
    r = /([A-Z])/g,
    h = /^http:[\w\.\/]+svg$/,
    n = "(\\-?\\d[\\d\\.e-]*)",
    i = "\\,?\\s*",
    s = new RegExp(
      "^matrix\\(" + n + i + n + i + n + i + n + i + n + i + n + "\\)$"
    );
  function c(t) {
    var e = {
      range: !0,
      animate: !0,
    };
    return "boolean" == typeof t ? (e.animate = t) : x.extend(e, t), e;
  }
  function g(t, e, n, i, s, o, a, r, h) {
    "array" === x.type(t)
      ? (this.elements = [+t[0], +t[2], +t[4], +t[1], +t[3], +t[5], 0, 0, 1])
      : (this.elements = [t, e, n, i, s, o, a || 0, r || 0, h || 1]);
  }
  function v(t, e, n) {
    this.elements = [t, e, n];
  }
  function u(t, n) {
    if (!(this instanceof u)) return new u(t, n);
    1 !== t.nodeType && x.error("Panzoom called on non-Element node"),
      x.contains($, t) ||
        x.error("Panzoom element must be attached to the document");
    var e = x.data(t, a);
    if (e) return e;
    (this.options = n = x.extend({}, u.defaults, n)), (this.elem = t);
    var i = (this.$elem = x(t));
    (this.$set = n.$set && n.$set.length ? n.$set : i),
      (this.$doc = x(t.ownerDocument || $)),
      (this.$parent = i.parent()),
      (this.parent = this.$parent[0]),
      (this.isSVG =
        h.test(t.namespaceURI) && "svg" !== t.nodeName.toLowerCase()),
      (this.panning = !1),
      this._buildTransform(),
      (this._transform = x.cssProps.transform.replace(r, "-$1").toLowerCase()),
      this._buildTransition(),
      this.resetDimensions();
    var s = x(),
      o = this;
    x.each(["$zoomIn", "$zoomOut", "$zoomRange", "$reset"], function (t, e) {
      o[e] = n[e] || s;
    }),
      this.enable(),
      (this.scale = this.getMatrix()[0]),
      this._checkPanWhenZoomed(),
      x.data(t, a, this);
  }
  return (
    (g.prototype = {
      x: function (t) {
        var e = t instanceof v,
          n = this.elements,
          i = t.elements;
        return e && 3 === i.length
          ? new v(
              n[0] * i[0] + n[1] * i[1] + n[2] * i[2],
              n[3] * i[0] + n[4] * i[1] + n[5] * i[2],
              n[6] * i[0] + n[7] * i[1] + n[8] * i[2]
            )
          : i.length === n.length &&
              new g(
                n[0] * i[0] + n[1] * i[3] + n[2] * i[6],
                n[0] * i[1] + n[1] * i[4] + n[2] * i[7],
                n[0] * i[2] + n[1] * i[5] + n[2] * i[8],
                n[3] * i[0] + n[4] * i[3] + n[5] * i[6],
                n[3] * i[1] + n[4] * i[4] + n[5] * i[7],
                n[3] * i[2] + n[4] * i[5] + n[5] * i[8],
                n[6] * i[0] + n[7] * i[3] + n[8] * i[6],
                n[6] * i[1] + n[7] * i[4] + n[8] * i[7],
                n[6] * i[2] + n[7] * i[5] + n[8] * i[8]
              );
      },
      inverse: function () {
        var t = 1 / this.determinant(),
          e = this.elements;
        return new g(
          t * (e[8] * e[4] - e[7] * e[5]),
          t * -(e[8] * e[1] - e[7] * e[2]),
          t * (e[5] * e[1] - e[4] * e[2]),
          t * -(e[8] * e[3] - e[6] * e[5]),
          t * (e[8] * e[0] - e[6] * e[2]),
          t * -(e[5] * e[0] - e[3] * e[2]),
          t * (e[7] * e[3] - e[6] * e[4]),
          t * -(e[7] * e[0] - e[6] * e[1]),
          t * (e[4] * e[0] - e[3] * e[1])
        );
      },
      determinant: function () {
        var t = this.elements;
        return (
          t[0] * (t[8] * t[4] - t[7] * t[5]) -
          t[3] * (t[8] * t[1] - t[7] * t[2]) +
          t[6] * (t[5] * t[1] - t[4] * t[2])
        );
      },
    }),
    (v.prototype.e = g.prototype.e = function (t) {
      return this.elements[t];
    }),
    (u.rmatrix = s),
    (u.defaults = {
      eventNamespace: ".panzoom",
      transition: !0,
      cursor: "move",
      disablePan: !1,
      disableZoom: !1,
      disableXAxis: !1,
      disableYAxis: !1,
      which: 1,
      increment: 0.3,
      linearZoom: !1,
      panOnlyWhenZoomed: !1,
      minScale: 0.3,
      maxScale: 6,
      rangeStep: 0.05,
      duration: 200,
      easing: "ease-in-out",
      contain: !1,
    }),
    (u.prototype = {
      constructor: u,
      instance: function () {
        return this;
      },
      enable: function () {
        this._initStyle(), this._bind(), (this.disabled = !1);
      },
      disable: function () {
        (this.disabled = !0), this._resetStyle(), this._unbind();
      },
      isDisabled: function () {
        return this.disabled;
      },
      destroy: function () {
        this.disable(), x.removeData(this.elem, a);
      },
      resetDimensions: function () {
        this.container = this.parent.getBoundingClientRect();
        var t = this.elem,
          e = t.getBoundingClientRect(),
          n = Math.abs(this.scale);
        this.dimensions = {
          width: e.width,
          height: e.height,
          left: x.css(t, "left", !0) || 0,
          top: x.css(t, "top", !0) || 0,
          border: {
            top: x.css(t, "borderTopWidth", !0) * n || 0,
            bottom: x.css(t, "borderBottomWidth", !0) * n || 0,
            left: x.css(t, "borderLeftWidth", !0) * n || 0,
            right: x.css(t, "borderRightWidth", !0) * n || 0,
          },
          margin: {
            top: x.css(t, "marginTop", !0) * n || 0,
            left: x.css(t, "marginLeft", !0) * n || 0,
          },
        };
      },
      reset: function (t) {
        t = c(t);
        var e = this.setMatrix(this._origTransform, t);
        t.silent || this._trigger("reset", e);
      },
      resetZoom: function (t) {
        t = c(t);
        var e = this.getMatrix(this._origTransform);
        (t.dValue = e[3]), this.zoom(e[0], t);
      },
      resetPan: function (t) {
        var e = this.getMatrix(this._origTransform);
        this.pan(e[4], e[5], c(t));
      },
      setTransform: function (t) {
        for (var e = this.$set, n = e.length; n--; )
          x.style(e[n], "transform", t),
            this.isSVG && e[n].setAttribute("transform", t);
      },
      getTransform: function (t) {
        var e = this.$set[0];
        return (
          t
            ? this.setTransform(t)
            : ((t = x.style(e, "transform")),
              !this.isSVG ||
                (t && "none" !== t) ||
                (t = x.attr(e, "transform") || "none")),
          "none" === t ||
            s.test(t) ||
            this.setTransform((t = x.css(e, "transform"))),
          t || "none"
        );
      },
      getMatrix: function (t) {
        var e = s.exec(t || this.getTransform());
        return e && e.shift(), e || [1, 0, 0, 1, 0, 0];
      },
      setMatrix: function (t, e) {
        if (!this.disabled) {
          (e = e || {}), "string" == typeof t && (t = this.getMatrix(t));
          var n = +t[0],
            i = void 0 !== e.contain ? e.contain : this.options.contain;
          if (i) {
            var s,
              o,
              a,
              r = e.dims;
            r || (this.resetDimensions(), (r = this.dimensions));
            var h = this.container,
              c = r.width,
              l = r.height,
              m = h.width,
              u = h.height,
              f = m / c,
              p = u / l;
            "center" !== this.$parent.css("textAlign") ||
            "inline" !== x.css(this.elem, "display")
              ? ((s = (a = (c - this.elem.offsetWidth) / 2) - r.border.left),
                (o = c - m - a + r.border.right))
              : (s = o = (c - m) / 2);
            var d = (l - u) / 2 + r.border.top,
              g = (l - u) / 2 - r.border.top - r.border.bottom;
            (t[4] =
              "invert" === i || ("automatic" === i && f < 1.01)
                ? Math.max(Math.min(t[4], s - r.border.left), -o)
                : Math.min(Math.max(t[4], s), -o)),
              (t[5] =
                "invert" === i || ("automatic" === i && p < 1.01)
                  ? Math.max(Math.min(t[5], d - r.border.top), -g)
                  : Math.min(Math.max(t[5], d), -g));
          }
          if (
            ("skip" !== e.animate && this.transition(!e.animate),
            e.range && this.$zoomRange.val(n),
            this.options.disableXAxis || this.options.disableYAxis)
          ) {
            var v = this.getMatrix();
            this.options.disableXAxis && (t[4] = v[4]),
              this.options.disableYAxis && (t[5] = v[5]);
          }
          return (
            this.setTransform("matrix(" + t.join(",") + ")"),
            (this.scale = n),
            this._checkPanWhenZoomed(n),
            e.silent || this._trigger("change", t),
            t
          );
        }
      },
      isPanning: function () {
        return this.panning;
      },
      transition: function (t) {
        if (this._transition)
          for (
            var e = t || !this.options.transition ? "none" : this._transition,
              n = this.$set,
              i = n.length;
            i--;

          )
            x.style(n[i], "transition") !== e && x.style(n[i], "transition", e);
      },
      pan: function (t, e, n) {
        if (!this.options.disablePan) {
          var i = (n = n || {}).matrix;
          (i = i || this.getMatrix()),
            n.relative && ((t += +i[4]), (e += +i[5])),
            (i[4] = t),
            (i[5] = e),
            this.setMatrix(i, n),
            n.silent || this._trigger("pan", i[4], i[5]);
        }
      },
      zoom: function (t, e) {
        "object" == typeof t ? ((e = t), (t = null)) : (e = e || {});
        var n = x.extend({}, this.options, e);
        if (!n.disableZoom) {
          var i = !1,
            s = n.matrix || this.getMatrix(),
            o = +s[0];
          "number" != typeof t &&
            ((t = n.linearZoom
              ? o + n.increment * (t ? -1 : 1)
              : t
              ? o / (1 + n.increment)
              : o * (1 + n.increment)),
            (i = !0)),
            (t = Math.max(Math.min(t, n.maxScale), n.minScale));
          var a = n.focal;
          if (a && !n.disablePan) {
            this.resetDimensions();
            var r = (n.dims = this.dimensions),
              h = a.clientX,
              c = a.clientY;
            this.isSVG || ((h -= r.width / o / 2), (c -= r.height / o / 2));
            var l = new v(h, c, 1),
              m = new g(s),
              u = this.parentOffset || this.$parent.offset(),
              f = new g(
                1,
                0,
                u.left - this.$doc.scrollLeft(),
                0,
                1,
                u.top - this.$doc.scrollTop()
              ),
              p = m.inverse().x(f.inverse().x(l)),
              d = t / s[0];
            (m = m.x(new g([d, 0, 0, d, 0, 0]))),
              (l = f.x(m.x(p))),
              (s[4] = +s[4] + (h - l.e(0))),
              (s[5] = +s[5] + (c - l.e(1)));
          }
          (s[0] = t),
            (s[3] = "number" == typeof n.dValue ? n.dValue : t),
            this.setMatrix(s, {
              animate: void 0 !== n.animate ? n.animate : i,
              range: !n.noSetRange,
            }),
            n.silent || this._trigger("zoom", s[0], n);
        }
      },
      option: function (t, e) {
        var n;
        if (!t) return x.extend({}, this.options);
        if ("string" == typeof t) {
          if (1 === arguments.length)
            return void 0 !== this.options[t] ? this.options[t] : null;
          (n = {})[t] = e;
        } else n = t;
        this._setOptions(n);
      },
      _setOptions: function (t) {
        x.each(
          t,
          x.proxy(function (t, e) {
            switch (t) {
              case "disablePan":
                this._resetStyle();
              case "$zoomIn":
              case "$zoomOut":
              case "$zoomRange":
              case "$reset":
              case "disableZoom":
              case "onStart":
              case "onChange":
              case "onZoom":
              case "onPan":
              case "onEnd":
              case "onReset":
              case "eventNamespace":
                this._unbind();
            }
            switch (((this.options[t] = e), t)) {
              case "disablePan":
                this._initStyle();
              case "$zoomIn":
              case "$zoomOut":
              case "$zoomRange":
              case "$reset":
                this[t] = e;
              case "disableZoom":
              case "onStart":
              case "onChange":
              case "onZoom":
              case "onPan":
              case "onEnd":
              case "onReset":
              case "eventNamespace":
                this._bind();
                break;
              case "cursor":
                x.style(this.elem, "cursor", e);
                break;
              case "minScale":
                this.$zoomRange.attr("min", e);
                break;
              case "maxScale":
                this.$zoomRange.attr("max", e);
                break;
              case "rangeStep":
                this.$zoomRange.attr("step", e);
                break;
              case "startTransform":
                this._buildTransform();
                break;
              case "duration":
              case "easing":
                this._buildTransition();
              case "transition":
                this.transition();
                break;
              case "panOnlyWhenZoomed":
                this._checkPanWhenZoomed();
                break;
              case "$set":
                e instanceof x &&
                  e.length &&
                  ((this.$set = e), this._initStyle(), this._buildTransform());
            }
          }, this)
        );
      },
      _checkPanWhenZoomed: function (t) {
        var e = this.options;
        if (e.panOnlyWhenZoomed) {
          var n = (t = t || this.getMatrix()[0]) <= e.minScale;
          e.disablePan !== n && this.option("disablePan", n);
        }
      },
      _initStyle: function () {
        var t = {
          "transform-origin": this.isSVG ? "0 0" : "50% 50%",
        };
        this.options.disablePan || (t.cursor = this.options.cursor),
          this.$set.css(t);
        var e = this.$parent;
        e.length &&
          !x.nodeName(this.parent, "body") &&
          ((t = {
            overflow: "hidden",
          }),
          "static" === e.css("position") && (t.position = "relative"),
          e.css(t));
      },
      _resetStyle: function () {
        this.$elem.css({
          cursor: "",
          transition: "",
        }),
          this.$parent.css({
            overflow: "",
            position: "",
          });
      },
      _bind: function () {
        var n = this,
          i = this.options,
          e = i.eventNamespace,
          t = "mousedown" + e + " pointerdown" + e + " MSPointerDown" + e,
          s = "touchstart" + e + " " + t,
          o =
            "touchend" +
            e +
            " click" +
            e +
            " pointerup" +
            e +
            " MSPointerUp" +
            e,
          a = {},
          r = this.$reset,
          h = this.$zoomRange;
        if (
          (x.each(
            ["Start", "Change", "Zoom", "Pan", "End", "Reset"],
            function () {
              var t = i["on" + this];
              x.isFunction(t) && (a["panzoom" + this.toLowerCase() + e] = t);
            }
          ),
          (i.disablePan && i.disableZoom) ||
            ((a[s] = function (t) {
              var e;
              ("touchstart" === t.type
                ? !(e = t.touches || t.originalEvent.touches) ||
                  ((1 !== e.length || i.disablePan) && 2 !== e.length)
                : i.disablePan ||
                  (t.which || t.originalEvent.which) !== i.which) ||
                (t.preventDefault(), t.stopPropagation(), n._startMove(t, e));
            }),
            3 === i.which && (a.contextmenu = !1)),
          this.$elem.on(a),
          r.length &&
            r.on(o, function (t) {
              t.preventDefault(), n.reset();
            }),
          h.length &&
            h
              .attr({
                step:
                  (i.rangeStep === u.defaults.rangeStep && h.attr("step")) ||
                  i.rangeStep,
                min: i.minScale,
                max: i.maxScale,
              })
              .prop({
                value: this.getMatrix()[0],
              }),
          !i.disableZoom)
        ) {
          var c = this.$zoomIn,
            l = this.$zoomOut;
          c.length &&
            l.length &&
            (c.on(o, function (t) {
              t.preventDefault(), n.zoom();
            }),
            l.on(o, function (t) {
              t.preventDefault(), n.zoom(!0);
            })),
            h.length &&
              (((a = {})[t] = function () {
                n.transition(!0);
              }),
              (a[(m ? "input" : "change") + e] = function () {
                n.zoom(+this.value, {
                  noSetRange: !0,
                });
              }),
              h.on(a));
        }
      },
      _unbind: function () {
        this.$elem
          .add(this.$zoomIn)
          .add(this.$zoomOut)
          .add(this.$reset)
          .off(this.options.eventNamespace);
      },
      _buildTransform: function () {
        return (this._origTransform = this.getTransform(
          this.options.startTransform
        ));
      },
      _buildTransition: function () {
        if (this._transform) {
          var t = this.options;
          this._transition =
            this._transform + " " + t.duration + "ms " + t.easing;
        }
      },
      _getDistance: function (t) {
        var e = t[0],
          n = t[1];
        return Math.sqrt(
          Math.pow(Math.abs(n.clientX - e.clientX), 2) +
            Math.pow(Math.abs(n.clientY - e.clientY), 2)
        );
      },
      _getMiddle: function (t) {
        var e = t[0],
          n = t[1];
        return {
          clientX: (n.clientX - e.clientX) / 2 + e.clientX,
          clientY: (n.clientY - e.clientY) / 2 + e.clientY,
        };
      },
      _trigger: function (t) {
        "string" == typeof t && (t = "panzoom" + t),
          this.$elem.triggerHandler(t, [this].concat(o.call(arguments, 1)));
      },
      _startMove: function (t, s) {
        if (!this.panning) {
          var e,
            n,
            o,
            a,
            r,
            h,
            c,
            i,
            l = this,
            m = this.options,
            u = m.eventNamespace,
            f = this.getMatrix(),
            p = f.slice(0),
            d = +p[4],
            g = +p[5],
            v = {
              matrix: f,
              animate: "skip",
            },
            b = t.type;
          (n =
            "pointerdown" === b
              ? ((e = "pointermove"), "pointerup")
              : "touchstart" === b
              ? ((e = "touchmove"), "touchend")
              : "MSPointerDown" === b
              ? ((e = "MSPointerMove"), "MSPointerUp")
              : ((e = "mousemove"), "mouseup")),
            (e += u),
            (n += u),
            this.transition(!0),
            (this.panning = !0),
            this._trigger("start", t, s);
          var _ = function (t, e) {
            if (e) {
              if (2 === e.length) {
                if (null != o) return;
                return (
                  (o = l._getDistance(e)),
                  (a = +f[0]),
                  void (r = l._getMiddle(e))
                );
              }
              if (null != h) return;
              (i = e[0]) && ((h = i.pageX), (c = i.pageY));
            }
            null == h && ((h = t.pageX), (c = t.pageY));
          };
          _(t, s);
          x($)
            .off(u)
            .on(e, function (t) {
              var e;
              if (
                (t.preventDefault(),
                (s = t.touches || t.originalEvent.touches),
                _(t, s),
                s)
              ) {
                if (2 === s.length) {
                  var n = l._getMiddle(s),
                    i = l._getDistance(s) - o;
                  return (
                    l.zoom(i * (m.increment / 100) + a, {
                      focal: n,
                      matrix: f,
                      animate: "skip",
                    }),
                    l.pan(
                      +f[4] + n.clientX - r.clientX,
                      +f[5] + n.clientY - r.clientY,
                      v
                    ),
                    void (r = n)
                  );
                }
                e = s[0] || {
                  pageX: 0,
                  pageY: 0,
                };
              }
              (e = e || t), l.pan(d + e.pageX - h, g + e.pageY - c, v);
            })
            .on(n, function (t) {
              t.preventDefault(),
                x(this).off(u),
                (l.panning = !1),
                (t.type = "panzoomend"),
                l._trigger(
                  t,
                  f,
                  !(function (t, e) {
                    for (var n = t.length; --n; )
                      if (Math.round(+t[n]) !== Math.round(+e[n])) return !1;
                    return !0;
                  })(f, p)
                );
            });
        }
      },
    }),
    (x.Panzoom = u),
    (x.fn.panzoom = function (t) {
      var e, n, i, s;
      return "string" == typeof t
        ? ((s = []),
          (n = o.call(arguments, 1)),
          this.each(function () {
            (e = x.data(this, a))
              ? "_" !== t.charAt(0) &&
                "function" == typeof (i = e[t]) &&
                void 0 !== (i = i.apply(e, n)) &&
                s.push(i)
              : s.push(void 0);
          }),
          s.length ? (1 === s.length ? s[0] : s) : this)
        : this.each(function () {
            new u(this, t);
          });
    }),
    u
  );
});
for (var k in ((CanvasSVG = {
  Base: function () {},
}),
(CanvasSVG.Base.prototype = {
  ns: "http://www.w3.org/2000/svg",
  id: 0,
  wrapCanvas: function (t) {
    if (!t.canvasSVGWrapper) {
      var e = this;
      ((this.el = t)._getContext = t.getContext),
        (t.getContext = function (t) {
          return e.getContext(t);
        }),
        (t.canvasSVGWrapper = !0),
        (this.canvas = t);
    }
  },
  getContext: function (t) {
    return "2d" == t || "2D" == t
      ? ((this.context = this.el._getContext(t)), this)
      : this.el._getContext(t);
  },
  makeElement: function (t, e, s, a) {
    var i = document.createElementNS(this.ns, t);
    if (e) for (var r in e) i.setAttributeNS(null, r, e[r]);
    return s && (i.textContent = s), a && a.appendChild(i), i;
  },
  addElement: function (t, e, s) {
    this.svg.appendChild(this.makeElement(t, e, s));
  },
  processCommon: function (t, e, s, a) {
    (e.opacity = s.globalAlpha),
      "fill" == t ? this.setFill(e, s) : this.setStroke(e, s),
      this.processTransforms(e, a),
      this.processFilters(e, s);
  },
  setFill: function (t, e) {
    if (/^rgba\(/.test(e.fillStyle)) {
      var s = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(
        e.fillStyle
      );
      (t.fill = "rgb(" + s[1] + "," + s[2] + "," + s[3] + ")"),
        (t["fill-opacity"] = s[4]);
    } else t.fill = e.fillStyle;
    t.stroke = "none";
  },
  setStroke: function (t, e) {
    if (((t.fill = "none"), /^rgba\(/.test(e.strokeStyle))) {
      var s = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(
        e.strokeStyle
      );
      (t.stroke = "rgb(" + s[1] + "," + s[2] + "," + s[3] + ")"),
        (t["stroke-opacity"] = s[4]);
    } else t.stroke = e.strokeStyle;
    (t.stroke = e.strokeStyle),
      (t["stroke-width"] = e.lineWidth),
      (t["stroke-linecap"] = e.lineCap),
      (t["stroke-linejoin"] = e.lineJoin),
      (t["stroke-miterlimit"] = e.miterLimit);
  },
  addRect: function (t, e, s, a) {
    var i = {
      x: s[0],
      y: s[1],
      width: s[2],
      height: s[3],
    };
    this.processCommon(t, i, e, a), this.addElement("rect", i);
  },
  addPath: function (t, e, s, a) {
    var i = {
      d: this.buildPath(s),
    };
    this.processCommon(t, i, e, a), this.addElement("path", i);
  },
  addText: function (t, e, s, a) {
    var i = {
      x: s[1],
      y: s[2],
      style: "font: " + e.font,
      "text-align": e.textAlign,
      "alignment-baseline": e.textBaseline,
    };
    this.processCommon(t, i, e, a), this.addElement("text", i, s[0]);
  },
  buildPath: function (t) {
    for (var e = [], s = 0; s < t.length; s++) {
      var a = Array.prototype.slice.call(t[s]),
        i = [a.shift()];
      if ("A" == i[0])
        i.push(
          a.shift() + "," + a.shift(),
          a.shift(),
          a.shift() + "," + a.shift(),
          a.shift() + "," + a.shift()
        );
      else for (; a.length; ) i.push(a.shift() + "," + a.shift());
      e.push(i.join(" "));
    }
    return e.join(" ");
  },
  processTransforms: function (t, e) {
    e.length && (t.transform = e.join(" "));
  },
  processFilters: function (t, e) {
    if (
      0 != e.shadowOffsetX ||
      0 != e.shadowOffsetY ||
      "source-over" != e.globalCompositeOperation
    ) {
      var s,
        a = this.newID("fe"),
        i = this.makeElement(
          "filter",
          {
            id: a,
            width: "150%",
            height: "150%",
          },
          null,
          this.svg
        );
      if (
        ((0 == e.shadowOffsetX && 0 == e.shadowOffsetY) ||
          (this.makeElement(
            "feOffset",
            {
              in: "SourceGraphic",
              result: "offsetOut",
              dx: e.shadowOffsetX,
              dy: e.shadowOffsetY,
            },
            null,
            i
          ),
          this.makeElement(
            "feGaussianBlur",
            {
              in: "offsetOut",
              result: "blurOut",
              stdDeviation: e.shadowBlur,
            },
            null,
            i
          ),
          (s = this.makeElement(
            "feBlend",
            {
              in: "SourceGraphic",
              in2: "blurOut",
              mode: "normal",
            },
            null,
            i
          ))),
        "source-over" != e.globalCompositeOperation)
      ) {
        var r = e.globalCompositeOperation;
        if ("copy" != r && "lighter" != r) {
          t = {};
          0 == r.indexOf("source-") || "xor" == r
            ? ((t.in = "SourceGraphic"), (t.in2 = "BackgroundImage"))
            : 0 == r.indexOf("destination-") &&
              ((t.in = "BackgroundImage"), (t.in2 = "SourceGraphic")),
            /-in$/.test(r)
              ? (t.operator = "in")
              : /-out$/.test(r)
              ? (t.operator = "out")
              : /-atop$/.test(r)
              ? (t.operator = "atop")
              : /-over$/.test(r)
              ? (t.operator = "over")
              : "xor" == r && (t.operator = "xor"),
            this.svg.setAttributeNS(null, "enable-background", "accumulate");
          var n = this.makeElement("feComposite", t, null, i);
          s &&
            (s.setAttributeNS(null, "result", "blendOut"),
            n.setAttributeNS(null, "in", "blendOut"));
        }
      }
      t.filter = "url(#" + a + ")";
    }
  },
  doClearRect: function (t) {
    if (
      0 != t[0] ||
      0 != t[1] ||
      t[2] != this.el.width ||
      t[3] != this.el.height
    ) {
      var e = t[0],
        s = t[1],
        a = t[2],
        i = t[3],
        r = this.el.width,
        n = this.el.height,
        o = this.newID("cp"),
        h = this.makeElement("clipPath", {
          id: o,
        }),
        l =
          "M 0,0 L " +
          r +
          ",0 L" +
          r +
          "," +
          n +
          " L 0," +
          n +
          " z M " +
          e +
          "," +
          s +
          " L " +
          (e + a) +
          "," +
          s +
          " L " +
          (e + a) +
          "," +
          (s + i) +
          " L " +
          e +
          "," +
          (s + i) +
          " z",
        c = this.makeElement("path", {
          d: l,
          "fill-rule": "evenodd",
        });
      h.appendChild(c);
      for (
        var p = this.makeElement("g", {
          "clip-path": "url(#" + o + ")",
        });
        this.svg.childNodes.length;

      )
        p.appendChild(this.svg.firstChild);
      this.svg.appendChild(h), this.svg.appendChild(p);
    } else this.svg.textContent = "";
  },
  simpleClone: function (t) {
    var e = {};
    for (var s in t) e[s] = t[s];
    return e;
  },
  newID: function (t) {
    return this.id++, t + this.id;
  },
  handleCommands: function (t, e) {
    switch (t) {
      case "fillStyle":
      case "strokeStyle":
      case "globalAlpha":
      case "globalCompositeOperation":
      case "lineWidth":
      case "lineCap":
      case "lineJoin":
      case "miterLimit":
      case "shadowOffsetX":
      case "shadowOffsetY":
      case "shadowBlur":
      case "shadowColor":
      case "font":
      case "textAlign":
      case "textBaseline":
        this.cur[t] = e;
        break;
      case "save":
        this.stack.push(this.cur, this.trans),
          (this.cur = this.simpleClone(this.defs)),
          (this.trans = []);
        break;
      case "restore":
        (this.trans = this.stack.pop()), (this.cur = this.stack.pop());
        break;
      case "fillRect":
        this.addRect("fill", this.cur, e, this.trans);
        break;
      case "strokeRect":
        this.addRect("stroke", this.cur, e, this.trans);
        break;
      case "scale":
        this.trans.push("scale(" + e[0] + ", " + e[1] + ")");
        break;
      case "rotate":
        var s = (180 * e[0]) / Math.PI;
        this.trans.push("rotate(" + s + ")");
        break;
      case "translate":
        this.trans.push("translate(" + e[0] + ", " + e[1] + ")");
        break;
      case "setTransform":
        this.trans = [];
      case "transform":
        this.trans.push(
          "matrix(" +
            e[0] +
            ", " +
            e[1] +
            ", " +
            e[2] +
            ", " +
            e[3] +
            ", " +
            e[4] +
            ", " +
            e[5] +
            ")"
        );
        break;
      case "createLinearGradient":
      case "createRadialGradient":
      case "createPattern":
        break;
      case "clearRect":
        this.doClearRect(e);
        break;
      case "beginPath":
        this.path = [];
        break;
      case "closePath":
        this.path.push(["z"]);
        break;
      case "moveTo":
        this.path.push(["M", e[0], e[1]]);
        break;
      case "lineTo":
        this.path.push(["L", e[0], e[1]]);
        break;
      case "quadraticCurveTo":
        this.path.push(["Q", e[0], e[1], e[2], e[3]]);
        break;
      case "bezierCurveTo":
        this.path.push(["S", e[0], e[1], e[2], e[3]]);
        break;
      case "arcTo":
        break;
      case "rect":
        var a = e[0],
          i = e[1],
          r = e[2],
          n = e[3];
        this.path.push(
          ["M", a, i],
          ["L", a + r, i],
          ["L", a + r, i + n],
          ["L", a, i + n],
          ["z"]
        );
        break;
      case "arc":
        this.pushArcAsA(e[0], e[1], e[2], e[3], e[4], e[5]);
        break;
      case "fill":
        this.addPath("fill", this.cur, this.path, this.trans);
        break;
      case "stroke":
        this.addPath("stroke", this.cur, this.path, this.trans);
        break;
      case "clip":
        break;
      case "fillText":
        this.addText("fill", this.cur, this.prm, this.trans);
        break;
      case "strokeText":
        this.addText("stroke", this.cur, this.prm, this.trans);
        break;
      case "drawImage":
      case "createImageData":
      case "getImageData":
      case "putImageData":
        break;
      case "isPointInPath":
      case "measureText":
        break;
      default:
        alert("Unknown command: " + t);
    }
  },
  pushArcAsA: function (t, e, s, a, i, r) {
    var n = Math.abs(a - i);
    if (a != i) {
      var o = t + s * Math.cos(i),
        h = e + s * Math.sin(i);
      if (n >= 2 * Math.PI)
        return (
          this.pushArcAsA(t, e, s, a, a + Math.PI, r),
          this.pushArcAsA(t, e, s, a + Math.PI, a + 2 * Math.PI, r),
          void this.path.push(["M", o, h])
        );
      var l = t + s * Math.cos(a),
        c = e + s * Math.sin(a),
        p = (180 * n) / Math.PI,
        f = r ? 0 : 1,
        u = 180 <= p == Boolean(r) ? 0 : 1;
      0 != this.path.length
        ? this.path.push(["L", l, c])
        : this.path.push(["M", l, c]),
        this.path.push(["A", s, s, p, u, f, o, h]);
    }
  },
}),
(CanvasSVG.Deferred = function () {
  this.state = [];
}),
CanvasSVG.Base.prototype))
  CanvasSVG.Deferred.prototype[k] = CanvasSVG.Base.prototype[k];
for (var k in ((CanvasSVG.Deferred.prototype.getSVG = function () {
  (this.defs = {
    fillStyle: "#000",
    strokeStyle: "#000",
    globalAlpha: 1,
    globalCompositeOperation: "source-over",
    lineWidth: 1,
    lineCap: "butt",
    lineJoin: "miter",
    miterLimit: 10,
    shadowOffsetX: 0,
    shadowOffsetY: 0,
    shadowBlur: 0,
    shadowColor: "rgba(0,0,0,0)",
    font: "10px sans-serif",
    textAlign: "start",
    textBaseline: "alphabetic",
  }),
    (this.cur = this.simpleClone(this.defs)),
    (this.stack = []),
    (this.path = []),
    (this.trans = []),
    (this.svg = this.makeElement("svg", {
      width: this.el.width + "px",
      height: this.el.height + "px",
      viewBox: "0 0 " + this.el.width + " " + this.el.height,
    }));
  for (var t = 0; t < this.state.length; t++) {
    var e = this.state[t].type,
      s = this.state[t].value;
    this.handleCommands(e, s);
  }
  return this.svg;
}),
(CanvasSVG.Deferred.prototype.pushState = function (t, e) {
  this.state.push({
    type: t,
    value: e,
  });
}),
(CanvasSVG.Live = function () {
  (this.stack = []),
    (this.cur = this.simpleClone(this.defs)),
    (this.stack = []),
    (this.path = []),
    (this.trans = []);
}),
CanvasSVG.Base.prototype))
  CanvasSVG.Live.prototype[k] = CanvasSVG.Base.prototype[k];
(CanvasSVG.Live.prototype.defs = {
  fillStyle: "#000",
  strokeStyle: "#000",
  globalAlpha: 1,
  globalCompositeOperation: "source-over",
  lineWidth: 1,
  lineCap: "butt",
  lineJoin: "miter",
  miterLimit: 10,
  shadowOffsetX: 0,
  shadowOffsetY: 0,
  shadowBlur: 0,
  shadowColor: "rgba(0,0,0,0)",
  font: "10px sans-serif",
  textAlign: "start",
  textBaseline: "alphabetic",
}),
  (CanvasSVG.Live.prototype.setParent = function (t) {
    (this.svg = this.makeElement("svg", {
      width: this.el.width + "px",
      height: this.el.height + "px",
      viewBox: "0 0 " + this.el.width + " " + this.el.height,
    })),
      t.appendChild(this.svg);
  }),
  (CanvasSVG.Live.prototype.runCommand = function (t, e) {
    this.handleCommands(t, e);
  }),
  [
    "fillStyle",
    "strokeStyle",
    "globalAlpha",
    "globalCompositeOperation",
    "lineWidth",
    "lineCap",
    "lineJoin",
    "miterLimit",
    "shadowOffsetX",
    "shadowOffsetY",
    "shadowBlur",
    "shadowColor",
    "font",
    "textAlign",
    "textBaseline",
  ].forEach(function (t) {
    var e = t;
    CanvasSVG.Deferred.prototype.__defineGetter__(e, function () {
      return this.context[e];
    }),
      CanvasSVG.Deferred.prototype.__defineSetter__(e, function (t) {
        return this.pushState(e, t), (this.context[e] = t);
      }),
      CanvasSVG.Live.prototype.__defineGetter__(e, function () {
        return this.context[e];
      }),
      CanvasSVG.Live.prototype.__defineSetter__(e, function (t) {
        return (this.cur[e] = t), (this.context[e] = t);
      });
  }),
  [
    "fillRect",
    "strokeRect",
    "save",
    "restore",
    "scale",
    "rotate",
    "translate",
    "setTransform",
    "transform",
    "createLinearGradient",
    "createRadialGradient",
    "createPattern",
    "clearRect",
    "beginPath",
    "closePath",
    "moveTo",
    "lineTo",
    "quadraticCurveTo",
    "bezierCurveTo",
    "arcTo",
    "rect",
    "arc",
    "fill",
    "stroke",
    "clip",
    "isPointInPath",
    "fillText",
    "strokeText",
    "measureText",
    "drawImage",
    "createImageData",
    "getImageData",
    "putImageData",
  ].forEach(function (t) {
    var e = t;
    (CanvasSVG.Deferred.prototype[e] = function () {
      return (
        this.pushState(e, Array.prototype.slice.call(arguments)),
        this.context[e].apply(this.context, arguments)
      );
    }),
      (CanvasSVG.Live.prototype[e] = function () {
        return (
          this.runCommand(e, Array.prototype.slice.call(arguments)),
          this.context[e].apply(this.context, arguments)
        );
      });
  });
!(function (t) {
  var i = "rotate",
    r = {
      angle: 0,
      speed: 0,
      inertia: 0,
      minimalSpeed: 0.001,
      minimalAngleChange: 0.1,
      step: 0,
      stepTransitionTime: 0,
      stepTransitionEasing: "linear",
      rotateParentInstantly: !1,
      touchElement: null,
    },
    h = function (t, e) {
      if (
        ("string" == typeof t && (t = document.querySelectorAll(t)),
        1 < t.length)
      )
        return h.createMany(t, e);
      1 === t.length && (t = t[0]),
        (this.element = t),
        (this.active = !1),
        (this.transiting = !1),
        (this.update = this.update.bind(this)),
        this.initCSSPrefix(),
        this.initAngleGetterSetter(),
        this.initOptions(e),
        this.initHardwareAcceleration(),
        this.initTransition(),
        this.bindHandlers(),
        this.addListeners(),
        this.update();
    };
  h.createMany = function (t, e) {
    for (var i = [], n = 0; n < t.length; n++) i.push(new h(t[n], e));
    return i;
  };
  var e = h.prototype;
  (e.initAngleGetterSetter = function () {
    Object.defineProperty(this, "angle", {
      get: function () {
        return this._angle;
      },
      set: function (t) {
        (this._angle = t), (this.virtualAngle = t), this.updateCSS();
      },
    });
  }),
    (e.bindHandlers = function () {
      (this.onRotationStart = this.onRotationStart.bind(this)),
        (this.onRotationStop = this.onRotationStop.bind(this)),
        (this.onRotated = this.onRotated.bind(this));
    }),
    (e.addListeners = function () {
      (this.listenersInstalled = !0),
        "ontouchstart" in document.documentElement
          ? (window.addEventListener("touchend", this.onRotationStop, {
              passive: true,
            }),
            window.addEventListener("touchcancel", this.onRotationStop, {
              passive: true,
            }),
            window.addEventListener("touchmove", this.onRotated, {
              passive: true,
            }),
            this.touchElement.addEventListener(
              "touchstart",
              this.onRotationStart
            ),
            this.touchElement.addEventListener("touchmove", this.onRotated),
            this.touchElement.addEventListener(
              "touchend",
              this.onRotationStop,
              { passive: true }
            ),
            this.touchElement.addEventListener(
              "touchcancel",
              this.onRotationStop
            ))
          : (window.addEventListener("mouseup", this.onRotationStop),
            window.addEventListener("mousemove", this.onRotated, {
              passive: true,
            }),
            this.touchElement.addEventListener(
              "mousedown",
              this.onRotationStart
            ),
            this.touchElement.addEventListener("mousemove", this.onRotated, {
              passive: true,
            }),
            this.touchElement.addEventListener("mouseup", this.onRotationStop)),
        this.touchElement.addEventListener("dragstart", this.returnFalse),
        (this.touchElement.ondragstart = this.returnFalse);
    }),
    (e.removeListeners = function () {
      (this.listenersInstalled = !1),
        "ontouchstart" in document.documentElement
          ? (this.touchElement.removeEventListener(
              "touchstart",
              this.onRotationStart
            ),
            this.touchElement.removeEventListener("touchmove", this.onRotated),
            this.touchElement.removeEventListener(
              "touchend",
              this.onRotationStop
            ))
          : (this.touchElement.removeEventListener(
              "mousedown",
              this.onRotationStart
            ),
            this.touchElement.removeEventListener("mousemove", this.onRotated),
            this.touchElement.removeEventListener(
              "mouseup",
              this.onRotationStop
            )),
        this.touchElement.removeEventListener("dragstart", this.returnFalse);
    }),
    (e.bind = function () {
      !0 !== this.listenersInstalled && this.addListeners();
    }),
    (e.unbind = function () {
      !0 === this.listenersInstalled &&
        (this.removeListeners(), this.onRotationStop());
    }),
    (e.stop = function () {
      (this.speed = 0), this.onRotationStop();
    }),
    (e.onRotationStart = function (t) {
      this.initDrag(),
        (this.active = !0),
        void 0 !== this.onDragStart && this.onDragStart(),
        !1 === this.rotateParentInstantly && t.stopPropagation();
    }),
    (e.onRotationStop = function () {
      void 0 !== this.onDragStop && !0 === this.active && this.onDragStop(),
        (this.active = !1);
    }),
    (e.onRotated = function (t) {
      !0 === this.active &&
        (t.stopPropagation(),
        t.preventDefault(),
        void 0 !== t.targetTouches && void 0 !== t.targetTouches[0]
          ? (this.lastMouseEvent = {
              x: t.targetTouches[0].clientX,
              y: t.targetTouches[0].clientY,
            })
          : (this.lastMouseEvent = {
              x: t.clientX,
              y: t.clientY,
            }));
    }),
    (e.update = function () {
      void 0 !== this.lastMouseEvent &&
        !0 === this.active &&
        this.updateAngleToMouse(this.lastMouseEvent),
        this.updateAngle(),
        this.applySpeed(),
        this.applyInertia(),
        Math.abs(this.lastAppliedAngle - this._angle) >=
          this.minimalAngleChange &&
          !1 === this.transiting &&
          (this.updateCSS(),
          this.blockTransition(),
          void 0 !== this.onRotate &&
            "function" == typeof this.onRotate &&
            this.onRotate.bind(this)(),
          (this.lastAppliedAngle = this._angle)),
        window.requestAnimFrame(this.update);
    }),
    (e.updateAngle = function () {
      0 < this.step
        ? (this._angle = this.getAngleFromVirtual())
        : (this._angle = this.normalizeAngle(this.virtualAngle));
    }),
    (e.getAngleFromVirtual = function () {
      return Math.ceil(this.virtualAngle / this.step) * this.step;
    }),
    (e.normalizeAngle = function (t) {
      var e = t;
      return (e %= 360) < 0 && (e = 360 + e), e;
    }),
    (e.differenceBetweenAngles = function (t, e) {
      var i = t * (Math.PI / 180),
        n = e * (Math.PI / 180),
        s = Math.atan2(Math.sin(i - n), Math.cos(i - n)) * (180 / Math.PI);
      return Math.round(100 * s) / 100;
    }),
    (e.applySpeed = function () {
      0 < this.inertia &&
        0 !== this.speed &&
        !1 === this.active &&
        (this.virtualAngle += this.speed);
    }),
    (e.applyInertia = function () {
      0 < this.inertia &&
        (Math.abs(this.speed) >= this.minimalSpeed
          ? ((this.speed = this.speed * this.inertia),
            !1 === this.active &&
              Math.abs(this.speed) < this.minimalSpeed &&
              void 0 !== this.onStop &&
              this.onStop())
          : 0 !== this.speed && (this.speed = 0));
    }),
    (e.updateAngleToMouse = function (t) {
      var e = this.element.getBoundingClientRect(),
        i = e.left + e.width / 2,
        n = e.top + e.height / 2,
        s = (Math.atan2(t.y - n, t.x - i) + Math.PI) * h.radToDegMulti;
      if (
        (void 0 === this.lastMouseAngle &&
          ((this.lastElementAngle = this.virtualAngle),
          (this.lastMouseAngle = s)),
        this.stepTransitionTime !== r.stepTransitionTime)
      )
        (this.speed = this.mouseDiff = this.differenceBetweenAngles(
          s,
          this.lastMouseAngle
        )),
          (this.virtualAngle = this.lastElementAngle + this.mouseDiff),
          (this.lastElementAngle = this.virtualAngle),
          (this.lastMouseAngle = s);
      else {
        var o = this.virtualAngle;
        (this.mouseDiff = s - this.lastMouseAngle),
          (this.virtualAngle = this.lastElementAngle + this.mouseDiff);
        var a = this.virtualAngle;
        this.speed = this.differenceBetweenAngles(a, o);
      }
    }),
    (e.initDrag = function () {
      (this.speed = 0),
        (this.lastMouseAngle = void 0),
        (this.lastElementAngle = void 0),
        (this.lastMouseEvent = void 0);
    }),
    (e.initOptions = function (t) {
      (t = t || r),
        (this.touchElement =
          document.querySelectorAll(t.touchElement)[0] || this.element),
        (this.onRotate = t.onRotate || t.onrotate),
        (this.onStop = t.onStop || t.onstop),
        (this.onDragStop = t.onDragStop || t.ondragstop),
        (this.onDragStart = t.onDragStart || t.ondragstart),
        (this.step = t.step || r.step),
        (this.stepTransitionTime =
          t.stepTransitionTime || r.stepTransitionTime),
        (this.stepTransitionEasing =
          t.stepTransitionEasing || r.stepTransitionEasing),
        (this.angle = t.angle || r.angle),
        (this.speed = t.speed || r.speed),
        (this.inertia = t.inertia || r.inertia),
        (this.minimalSpeed = t.minimalSpeed || r.minimalSpeed),
        (this.lastAppliedAngle = this.virtualAngle = this._angle =
          t.angle || r.angle),
        (this.minimalAngleChange =
          this.step !== r.step ? this.step : r.minimalAngleChange),
        (this.rotateParentInstantly =
          t.rotateParentInstantly || r.rotateParentInstantly);
    }),
    (e.initCSSPrefix = function () {
      void 0 === h.cssPrefix &&
        (void 0 !== document.body.style.transform
          ? (h.cssPrefix = "")
          : void 0 !== document.body.style.mozTransform
          ? (h.cssPrefix = "-moz-")
          : void 0 !== document.body.style.webkitTransform
          ? (h.cssPrefix = "-webkit-")
          : void 0 !== document.body.style.msTransform &&
            (h.cssPrefix = "-ms-"));
    }),
    (e.initHardwareAcceleration = function () {
      this.accelerationPostfix = "";
      var t,
        e = document.createElement("p"),
        i = {
          webkitTransform: "-webkit-transform",
          OTransform: "-o-transform",
          msTransform: "-ms-transform",
          MozTransform: "-moz-transform",
          transform: "transform",
        };
      for (var n in (document.body.insertBefore(e, null), i))
        void 0 !== e.style[n] &&
          ((e.style[n] = "translate3d(1px,1px,1px)"),
          (t = window.getComputedStyle(e).getPropertyValue(i[n])));
      document.body.removeChild(e),
        !0 == (void 0 !== t && 0 < t.length && "none" !== t) &&
          ((this.accelerationPostfix = "translateZ(0)"),
          (this.element.style[
            h.cssPrefix + "transform"
          ] = this.accelerationPostfix),
          this.updateCSS());
    }),
    (e.initTransition = function () {
      if (this.stepTransitionTime !== r.stepTransitionTime) {
        var t =
          "all " + this.stepTransitionTime + "ms " + this.stepTransitionEasing;
        this.element.style[h.cssPrefix + "transition"] = t;
      }
    }),
    (e.updateCSS = function () {
      this.element.style[h.cssPrefix + "transform"] =
        "rotate(" + this._angle + "deg) " + this.accelerationPostfix;
    }),
    (e.blockTransition = function () {
      if (this.stepTransitionTime !== r.stepTransitionTime) {
        var t = this;
        setTimeout(function () {
          t.transiting = !1;
        }, this.stepTransitionTime),
          (this.transiting = !0);
      }
    }),
    (e.returnFalse = function () {
      return !1;
    }),
    void 0 !== t.$ &&
      (($.Rotate = {}),
      ($.Rotate.Rotates = []),
      ($.fn[i] = function (e) {
        return this.each(function () {
          if (!$.data(this, "plugin_" + i)) {
            var t = new h(this, e);
            $.data(this, "plugin_" + i, t), $.Rotate.Rotates.push(t);
          }
        });
      })),
    (h.deg2radians = (2 * Math.PI) / 360),
    (h.radToDegMulti = 57.29577951308232),
    (t.Rotate = h);
})(window),
  (window.requestAnimFrame =
    window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    function (t) {
      window.setTimeout(t, 1e3 / 60);
    });
var MIR = (function () {
  "use strict";
  function e(a, o, t) {
    function e(e) {
      return (
        u.is_string(e)
          ? (l = function (t) {
              t.setRequestHeader("mir-auth-token", e);
            })
          : u.is_function(e) && (s._authorize = e),
        s
      );
    }
    var s = this,
      l = !1;
    function c(t, e, n) {
      var i = {
        data: t,
      };
      return (
        Object.keys(n.headers_to_get).forEach(function (t) {
          i[n.headers_to_get[t]] = e.getResponseHeader(t);
        }),
        n.headers_to_get["x-total-count"] &&
          (i.total_count = parseInt(i.total_count)),
        u.is_defined(n.xhr) && (i.xhr = e),
        i
      );
    }
    return (
      e(t),
      {
        set_auth: e,
        ajax: function (t, r, i) {
          var n = {
              dataType: "json",
              async: !0,
              beforeSend: function (t) {
                l && l(t);
              },
            },
            e = $.param(r.query_params, !0);
          return (
            (n.url = a + "/" + o + t + "?" + e),
            u.is_function(i)
              ? ((n = $.extend(
                  n,
                  {
                    success: function (t, e, n) {
                      i(c(t, n, r.response_process_options));
                    },
                    error: function (t) {
                      i(c(t.responseJSON, t, r.response_process_options));
                    },
                  },
                  r.ajax_options
                )),
                $.ajax(n),
                s)
              : new Promise(function (i, e) {
                  (n = $.extend(
                    n,
                    {
                      success: function (t, e, n) {
                        i(c(t, n, r.response_process_options));
                      },
                      error: function (t) {
                        e(c(t.responseJSON, t, r.response_process_options));
                      },
                    },
                    r.ajax_options
                  )),
                    $.ajax(n);
                })
          );
        },
      }
    );
  }
  function o(t, e, n) {
    var i = {
        type: t,
        data: n || {},
      },
      r = {
        only_data: !0,
      },
      a = {
        headers_to_get: {},
      };
    return (
      u.is_defined(e) &&
        (u.is_defined(e.limit) && (r.limit = e.limit),
        u.is_defined(e.offset) && (r.offset = e.offset),
        u.is_defined(e.only_data) && (r.only_data = e.only_data),
        u.is_defined(e.whitelist) &&
          (r.whitelist = u.is_array(e.whitelist)
            ? e.whitelist.join(",")
            : e.whitelist),
        u.is_defined(e.sort_by) && (r.sort_by = e.sort_by),
        u.is_defined(e.allowed_methods) &&
          (u.is_defined(r.whitelist)
            ? (r.whitelist += ",allowed_methods")
            : (r.whitelist = "allowed_methods"),
          (r.only_data = !1)),
        u.is_defined(e.total_count) &&
          (a.headers_to_get["x-total-count"] = "total_count"),
        u.is_defined(e.robot_version) &&
          (a.headers_to_get["robot-version"] = "robot_version"),
        u.is_defined(e.api_version) &&
          (a.headers_to_get["api-version"] = "api_version"),
        u.is_defined(e.endpoint_methods) &&
          (a.headers_to_get.allow = "endpoint_methods"),
        u.is_defined(e.xhr) && (a.xhr = e.xhr)),
      "GET" !== t &&
        ((i.data = JSON.stringify(i.data)),
        (i.contentType = "application/json")),
      {
        ajax_options: i,
        query_params: r,
        response_process_options: a,
      }
    );
  }
  function i(t) {
    var a = new e(t.base_url, t.version, t.auth);
    return {
      set_auth: function (t) {
        return a.set_auth(t), this;
      },
      get: function (t, e, n) {
        var i = new o("GET", e);
        return a.ajax.apply(a, [t, i, n]);
      },
      post: function (t, e, n, i) {
        var r = new o("POST", n, e);
        return a.ajax.apply(a, [t, r, i]);
      },
      delete: function (t, e, n) {
        var i = new o("DELETE", e);
        return a.ajax.apply(a, [t, i, n]);
      },
      put: function (t, e, n, i) {
        var r = new o("PUT", n, e);
        return a.ajax.apply(a, [t, r, i]);
      },
      search: function (t, e, n, i) {
        var r = new o("POST", n, {
          filters: e,
        });
        return a.ajax.apply(a, [t + "/search", r, i]);
      },
    };
  }
  function r(e) {
    var n = {};
    return {
      call: function (t) {
        if (!u.is_defined(n[t])) {
          if (!u.is_defined(e[t])) throw new Error("Non existent API");
          n[t] = new i(e[t]);
        }
        return n[t];
      },
    };
  }
  var u = {
      is_object: function (t) {
        return t === Object(t);
      },
      is_string: function (t) {
        return "string" == typeof t;
      },
      is_function: function (t) {
        return "function" == typeof t;
      },
      is_nr: function (t) {
        return "number" == typeof t;
      },
      is_guid: function (t) {
        return (
          this.is_string(t) &&
          36 === t.length &&
          /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(
            t
          )
        );
      },
      is_defined: function (t) {
        return void 0 !== t;
      },
      is_array: function (t) {
        return Array.isArray(t);
      },
    },
    t = {
      MIR100: "MIR100",
      MIR200: "MIR200",
      MIR500: "MIR500",
      MIR1000: "MIR1000",
      FLEET: "FLEET",
      HOOK: "HOOK",
    },
    n = {};
  (n[t.MIR100] = {
    length: 0.89,
    width: 0.58,
    height: 0.352,
  }),
    (n[t.MIR200] = {
      length: 0.89,
      width: 0.58,
      height: 0.352,
    }),
    (n[t.MIR500] = {
      length: 1.35,
      width: 0.92,
      height: 0.32,
    }),
    (n[t.MIR1000] = {
      length: 1.35,
      width: 0.92,
      height: 0.32,
    }),
    (n[t.HOOK] = {
      length: 0.89,
      width: 0.58,
      height: 0.352,
    });
  var a = {};
  (a[t.MIR100] = {
    length: 3,
    width: 3,
    height: 1.8,
  }),
    (a[t.MIR200] = {
      length: 3,
      width: 3,
      height: 1.8,
    }),
    (a[t.MIR500] = {
      length: 3,
      width: 3,
      height: 1.8,
    }),
    (a[t.MIR1000] = {
      length: 3,
      width: 3,
      height: 1.8,
    }),
    (a[t.HOOK] = {
      length: 3,
      width: 3,
      height: 1.8,
    });
  var s = {};
  (s[t.MIR100] = [
    [-0.454, 0.32],
    [0.506, 0.32],
    [0.506, -0.32],
    [-0.454, -0.32],
  ]),
    (s[t.MIR200] = [
      [-0.454, 0.32],
      [0.506, 0.32],
      [0.506, -0.32],
      [-0.454, -0.32],
    ]),
    (s[t.MIR500] = [
      [0.75, -0.75],
      [1.05, -0.5],
      [1.05, 0.5],
      [0.75, 0.75],
      [-0.75, 0.75],
      [-1.05, 0.5],
      [-1.05, -0.5],
      [-0.75, -0.75],
    ]),
    (s[t.MIR1000] = [
      [0.75, -0.75],
      [1.05, -0.5],
      [1.05, 0.5],
      [0.75, 0.75],
      [-0.75, 0.75],
      [-1.05, 0.5],
      [-1.05, -0.5],
      [-0.75, -0.75],
    ]),
    (s[t.HOOK] = [
      [0.506, -0.32],
      [0.506, 0.32],
      [-0.454, 0.32],
      [-0.774, 0.15],
      [-0.774, -0.15],
      [-0.454, -0.32],
    ]);
  var l = {};
  (l[t.MIR100] = {
    height: 0.4,
    length: n[t.MIR100].length,
    width: n[t.MIR100].width,
  }),
    (l[t.MIR200] = {
      height: 0.4,
      length: n[t.MIR200].length,
      width: n[t.MIR200].width,
    }),
    (l[t.MIR500] = {
      height: 0.5,
      length: n[t.MIR500].length,
      width: n[t.MIR500].width,
    }),
    (l[t.MIR1000] = {
      height: 0.5,
      length: n[t.MIR1000].length,
      width: n[t.MIR1000].width,
    }),
    (l[t.HOOK] = {
      height: 0.7,
      length: n[t.HOOK].length,
      width: n[t.HOOK].width,
    });
  var c = {
      PRODUCT: t,
      PRODUCT_SIZES: n,
      MAX_FOOTPRINT: a,
      MIN_FOOTPRINT: l,
      DEFAULT_FOOTPRINT: s,
    },
    p = {
      a: "[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",
      b: "[b␢βΒB฿𐌁ᛒ]",
      c: "[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",
      d: "[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",
      e: "[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",
      f: "[fƑƒḞḟ]",
      g: "[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",
      h: "[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",
      i: "[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",
      j: "[jȷĴĵɈɉʝɟʲ]",
      k: "[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",
      l: "[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",
      n: "[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",
      o: "[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",
      p: "[pṔṕṖṗⱣᵽƤƥᵱ]",
      q: "[qꝖꝗʠɊɋꝘꝙq̃]",
      r: "[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",
      s: "[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",
      t: "[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",
      u: "[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",
      v: "[vṼṽṾṿƲʋꝞꝟⱱʋ]",
      w: "[wẂẃẀẁŴŵẄẅẆẇẈẉ]",
      x: "[xẌẍẊẋχ]",
      y: "[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",
      z: "[zŹźẐẑŽžŻżẒẓẔẕƵƶ]",
    },
    d = {
      ROBOT_POSITION: 0,
      CART_POSITION: 1,
      CART_PICKUP_POSITION: 2,
      CART_LEFT_ENTRY: 3,
      CART_RIGHT_ENTRY: 4,
      SHELF_POSITION: 5,
      SHELF_ENTRY_POSITION: 6,
      MIRCHARGE_100_200: 7,
      MIRCHARGE_100_200_ENTRY: 8,
      V_MARKER: 9,
      V_MARKER_ENTRY: 10,
      VL_MARKER: 11,
      VL_MARKER_ENTRY: 12,
      L_MARKER: 13,
      L_MARKER_ENTRY: 14,
      EMERGENCY_POSITION: 15,
      PRECISION_DOCKING: 16,
      PRECISION_DOCKING_ENTRY: 17,
      PALLETRACK: 18,
      PALLET_RACK_ENTRY_POSITION: 19,
      MIRCHARGE_500: 20,
      MIRCHARGE_500_ENTRY: 21,
      BAR_MARKER: 22,
      BAR_MARKER_ENTRY: 23,
      STAGING_POSITION: 42,
    },
    _ = {
      ROBOT_STATE: {
        NONE: 0,
        STARTING: 1,
        SHUTTINGDOWN: 2,
        READY: 3,
        PAUSE: 4,
        EXECUTING: 5,
        ABORTED: 6,
        COMPLETED: 7,
        DOCKED: 8,
        DOCKING: 9,
        EMERGENCYSTOP: 10,
        MANUALCONTROL: 11,
        ERROR: 12,
      },
      ROBOT_MODE: {
        NONE: 0,
        MAPPING: 3,
        MAPPING_FINALIZING: 4,
        MISSION: 7,
        CHANGING: 255,
      },
      DIACRITICS: p,
      IO_DEVICE_TYPES: {
        BLUETOOTH: "bluetooth",
        WISE: "wise",
        INTERNAL: "internal",
      },
      LASER_SCANNER_CALIBRATION: {
        IDLE: 0,
        START_CALIBRATION: 1,
        CALIBRATING_ALIGNING_CHECK: 2,
        CALIBRATING_ALIGNING_MOVE: 3,
        CALIBRATING_MOVE: 4,
        CALIBRATING_MEASURE: 5,
        CALIBRATING_WAIT: 6,
        CALIBRATION_SUCCESS: 7,
        CALIBRATION_FAILED: 8,
        ABORTING_CALIBRATION: 9,
      },
      MOBILE_RES_THRESHOLD: 960,
      SOUND: {
        ACTION_PLAY: 0,
        ACTION_STOP_SOUNDS_OF_PRIORITY: 2,
        PRIORITY_USER: 2,
      },
      JOYSTICK: {
        ENABLE_LOW_SPEED_MODE: 2,
        ENABLE_HIGH_SPEED_MODE: 3,
      },
      MAPPING_ALGORITHM: {
        HECTOR: "mir_mapping_hector.launch",
        CARTOGRAPHER: "mir_mapping_cartographer.launch",
      },
      SETTINGS: {
        MAPPING_ALGORITHM: "/launch/mapping/file",
      },
      MARKER_TYPES: {
        MIRCHARGE_100_200: d.MIRCHARGE_100_200,
        V_MARKER: d.V_MARKER,
        VL_MARKER: d.VL_MARKER,
        L_MARKER: d.L_MARKER,
        PALLETRACK: d.PALLETRACK,
        MIRCHARGE_500: d.MIRCHARGE_500,
        BAR_MARKER: d.BAR_MARKER,
        PRECISION_DOCKING: d.PRECISION_DOCKING,
      },
      POSITION_TYPES: d,
      FEATURES: {
        PRECISION_DOCKING: "precision_docking",
        HOOK: "hook",
      },
    },
    f = Object.assign({}, c, _);
  function h(t, e) {
    return (
      t(
        (e = {
          exports: {},
        }),
        e.exports
      ),
      e.exports
    );
  }
  var m = h(function (t, e) {
      var n;
      (n = function () {
        function s() {
          for (var t = 0, e = {}; t < arguments.length; t++) {
            var n = arguments[t];
            for (var i in n) e[i] = n[i];
          }
          return e;
        }
        function c(t) {
          return t.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);
        }
        return (function t(l) {
          function o() {}
          function n(t, e, n) {
            if ("undefined" != typeof document) {
              "number" ==
                typeof (n = s(
                  {
                    path: "/",
                  },
                  o.defaults,
                  n
                )).expires &&
                (n.expires = new Date(1 * new Date() + 864e5 * n.expires)),
                (n.expires = n.expires ? n.expires.toUTCString() : "");
              try {
                var i = JSON.stringify(e);
                /^[\{\[]/.test(i) && (e = i);
              } catch (t) {}
              (e = l.write
                ? l.write(e, t)
                : encodeURIComponent(String(e)).replace(
                    /%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,
                    decodeURIComponent
                  )),
                (t = encodeURIComponent(String(t))
                  .replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)
                  .replace(/[\(\)]/g, escape));
              var r = "";
              for (var a in n)
                n[a] &&
                  ((r += "; " + a),
                  !0 !== n[a] && (r += "=" + n[a].split(";")[0]));
              return (document.cookie = t + "=" + e + r);
            }
          }
          function e(t, e) {
            if ("undefined" != typeof document) {
              for (
                var n = {},
                  i = document.cookie ? document.cookie.split("; ") : [],
                  r = 0;
                r < i.length;
                r++
              ) {
                var a = i[r].split("="),
                  o = a.slice(1).join("=");
                e || '"' !== o.charAt(0) || (o = o.slice(1, -1));
                try {
                  var s = c(a[0]);
                  if (((o = (l.read || l)(o, s) || c(o)), e))
                    try {
                      o = JSON.parse(o);
                    } catch (t) {}
                  if (((n[s] = o), t === s)) break;
                } catch (t) {}
              }
              return t ? n[t] : n;
            }
          }
          return (
            (o.set = n),
            (o.get = function (t) {
              return e(t, !1);
            }),
            (o.getJSON = function (t) {
              return e(t, !0);
            }),
            (o.remove = function (t, e) {
              n(
                t,
                "",
                s(e, {
                  expires: -1,
                })
              );
            }),
            (o.defaults = {}),
            (o.withConverter = t),
            o
          );
        })(function () {});
      }),
        (t.exports = n());
    }),
    v = {
      debug: !1,
      apis: {},
    };
  function g() {
    MIR.config.debug && console.log.apply(this, arguments);
  }
  function y(t) {
    var e = $("<button></button>");
    return (
      (e.mir = {
        options: $.extend(
          {
            label: "press",
            base_class: "mir-btn",
            attr: {},
            events: {},
          },
          t
        ),
      }),
      e
        .attr(e.mir.options.attr)
        .html(e.mir.options.label)
        .addClass(e.mir.options.base_class),
      Object.keys(e.mir.options.events).forEach(function (t) {
        e.on(t, e.mir.options.events[t]);
      }),
      e
    );
  }
  function b(t) {
    var e = $('<input class="mir-field">');
    return (
      (e.mir = {
        options: $.extend(
          {
            attr: {
              type: "text",
            },
          },
          t
        ),
      }),
      e.attr(e.mir.options.attr),
      e.val(e.mir.options.value || e.mir.options.def),
      e
    );
  }
  function w(t) {
    var e = $(
      '<label class="mir-field-nuller"><input type="checkbox">' +
        t.text +
        "</label>"
    );
    return (
      (e.mir = {
        options: $.extend({}, t),
      }),
      (e.val = function () {
        return 0 < arguments.length
          ? (!0 == !!arguments[0]
              ? e.find("input").attr("checked", "checked")
              : e.find("input").removeAttr("checked"),
            e)
          : e.find("input").is(":checked");
      }),
      e.val(e.mir.options.value || e.mir.options.def),
      e
    );
  }
  function I(t) {
    var n = $('<div class="mir-spinner"></div');
    return (
      (n.mir = {
        options: $.extend(
          {
            def: 0,
          },
          t
        ),
        $button_up: $('<div class="mir-bg-duration-up"></div>'),
        $input: $('<input type="text">'),
        $button_down: $('<div class="mir-bg-duration-down"></div>'),
        $label: $('<div class="label">' + t.label + "</div>"),
        readonly: !1,
        pad_value: function (t) {
          var e = String(t);
          return (
            this.options.size &&
              e.length < this.options.size &&
              (e = new Array(this.options.size - e.length + 1).join("0") + e),
            e
          );
        },
      }),
      n.append(
        n.mir.$button_up,
        n.mir.$input,
        n.mir.$label,
        n.mir.$button_down
      ),
      (n.val = function () {
        var t = this.mir;
        if (0 < arguments.length) {
          var e = arguments[0];
          return (
            void 0 !== t.options.max &&
              e > t.options.max &&
              (e = t.options.min || t.options.def || 0),
            void 0 !== t.options.min &&
              e < t.options.min &&
              (e = t.options.max || t.options.def || 0),
            t.$input.val(t.pad_value(e)),
            n
          );
        }
        return parseInt(t.$input.val());
      }),
      n.mir.$button_up.on("click", function (t) {
        if (n.mir.readonly) return t.stopPropagation(), !1;
        n.val(n.val() + 1).change();
      }),
      n.mir.$button_down.on("click", function (t) {
        if (n.mir.readonly) return t.stopPropagation(), !1;
        n.val(n.val() - 1).change();
      }),
      n.mir.$input.on("change", function (t) {
        if (n.mir.readonly) return t.stopPropagation(), !1;
        n.val(n.val());
      }),
      n.val(n.mir.options.value || n.mir.options.def),
      (n.disable = function () {
        (this.mir.readonly = !0), this.mir.$input.attr("readonly", "readonly");
      }),
      (n.enable = function () {
        (this.mir.readonly = !1), this.mir.$input.removeAttr("readonly");
      }),
      n
    );
  }
  function x(t) {
    var n = $(
        '<div class="mir-duration-field-wrp"><div class="mir-duration-field"></div></div>'
      ),
      e = $.extend(
        {
          type: "hidden",
        },
        t.attr
      );
    return (
      (n.mir = {
        options: $.extend(
          {
            def: 0,
          },
          t
        ),
        $hours: I({
          label: mir_translate("Hrs"),
          def: 0,
          min: 0,
          max: 24,
          size: 2,
        }),
        $mins: I({
          label: mir_translate("Min"),
          def: 0,
          min: 0,
          max: 60,
          size: 2,
        }),
        $secs: I({
          label: mir_translate("Sec"),
          def: 0,
          min: 0,
          max: 60,
          size: 2,
        }),
        $input: b({
          attr: e,
        }),
        $null_field: w({
          text: t.null_text,
        }),
        null_state: !1,
        update_ui_state: function () {
          var t = this.$null_field.val();
          t !== this.null_state &&
            (t
              ? (this.$hours.val(0),
                this.$mins.val(0),
                this.$secs.val(0),
                this.$hours.disable(),
                this.$mins.disable(),
                this.$secs.disable(),
                n.find(".mir-duration-field").toggleClass("mir-disabled", !0))
              : (this.$hours.enable(),
                this.$mins.enable(),
                this.$secs.enable(),
                n.toggleClass("mir-disabled", !1)),
            (this.null_state = t));
        },
        update_input: function () {
          this.$null_field.val()
            ? this.$input.val(N.NULL_VALUE)
            : (n.find(".mir-duration-field").toggleClass("mir-disabled", !1),
              this.$input.val(
                this.$hours.val() +
                  ":" +
                  this.$mins.val() +
                  ":" +
                  this.$secs.val() +
                  ".000000"
              ));
        },
      }),
      n
        .find(".mir-duration-field")
        .append(n.mir.$input, n.mir.$hours, n.mir.$mins, n.mir.$secs),
      n.append(n.mir.$null_field),
      n.on("change", function () {
        n.mir.update_ui_state(), n.mir.update_input();
      }),
      (n.val = function () {
        var t = this.mir;
        if (0 < arguments.length) {
          if (null === arguments[0]) t.$null_field.val(!0);
          else {
            var e = arguments[0].split(":");
            t.$hours.val(parseInt(e[0])),
              t.$mins.val(parseInt(e[1])),
              t.$secs.val(parseInt(e[2])),
              t.$null_field.val(!1);
          }
          return t.update_ui_state(), t.update_input(), n;
        }
        return t.$input.val();
      }),
      n.val(n.mir.options.value || n.mir.options.def),
      n
    );
  }
  function R(t) {
    var e = $('<div class="mir-error"></div>');
    return (
      (e.mir = {
        options: $.extend(
          !0,
          {
            attr: {},
          },
          t
        ),
      }),
      e.attr(e.mir.options.attr),
      (e.val = function () {
        return 0 < arguments.length ? (e.html(arguments[0]), e) : e.html();
      }),
      e
    );
  }
  function T(t) {
    var e = $('<i class="mir-i"></i>');
    return (
      (e.mir = {
        options: $.extend(
          {
            size: "",
            type: "",
          },
          t
        ),
      }),
      "" !== e.mir.options.type && e.addClass("mir-i-" + e.mir.options.type),
      "" !== e.mir.options.size && e.addClass("mir-i-" + e.mir.options.size),
      e
    );
  }
  function E(t) {
    var e = $('<label class="mir-label"></label>');
    return (
      (e.mir = {
        options: $.extend({}, t),
      }),
      e.mir.options.attr && e.attr(e.mir.options.attr),
      e.mir.options.text && e.html(e.mir.options.text),
      e
    );
  }
  var O = {
      check_point_in_circle: function (t, e, n) {
        return !(Math.abs(t.x - n.x) > e) && !(Math.abs(t.y - n.y) > e);
      },
      check_polyline_area_intersect: function (t, e) {
        for (var n = 0; n < e.length - 1; n++) {
          var i = {
            x0: e[n].x,
            y0: e[n].y,
            x1: e[n + 1].x,
            y1: e[n + 1].y,
          };
          if (O.check_line_area_intersect(t, i)) return !0;
        }
        return !1;
      },
      check_line_area_intersect: function (t, e) {
        return (
          O.check_lines_intersect(
            t.top_left.x,
            t.top_left.y,
            t.bottom_right.x,
            t.top_left.y,
            e.x0,
            e.y0,
            e.x1,
            e.y1
          ) ||
          O.check_lines_intersect(
            t.bottom_right.x,
            t.top_left.y,
            t.bottom_right.x,
            t.bottom_right.y,
            e.x0,
            e.y0,
            e.x1,
            e.y1
          ) ||
          O.check_lines_intersect(
            t.top_left.x,
            t.bottom_right.y,
            t.bottom_right.x,
            t.bottom_right.y,
            e.x0,
            e.y0,
            e.x1,
            e.y1
          ) ||
          O.check_lines_intersect(
            t.top_left.x,
            t.top_left.y,
            t.top_left.x,
            t.bottom_right.y,
            e.x0,
            e.y0,
            e.x1,
            e.y1
          )
        );
      },
      check_lines_intersect: function (t, e, n, i, r, a, o, s) {
        function l(t, e, n, i, r, a) {
          return (
            (t <= r || n <= r) &&
            (r <= t || r <= n) &&
            (e <= a || i <= a) &&
            (a <= e || a <= i)
          );
        }
        function c(t, e, n, i, r, a) {
          var o = (r - t) * (i - e),
            s = (n - t) * (a - e);
          return o < s ? -1 : s < o ? 1 : 0;
        }
        var u = c(r, a, o, s, t, e),
          p = c(r, a, o, s, n, i),
          d = c(t, e, n, i, r, a),
          _ = c(t, e, n, i, o, s);
        return (
          (((0 < u && p < 0) || (u < 0 && 0 < p)) &&
            ((0 < d && _ < 0) || (d < 0 && 0 < _))) ||
          (0 === u && l(r, a, o, s, t, e)) ||
          (0 === p && l(r, a, o, s, n, i)) ||
          (0 === d && l(t, e, n, i, r, a)) ||
          (0 === _ && l(t, e, n, i, o, s))
        );
      },
      check_rectangles_overlap: function (t, e) {
        return (
          !(
            Math.max(t.top_left.x, e.top_left.x) >
            Math.min(t.bottom_right.x, e.bottom_right.x)
          ) &&
          !(
            Math.max(t.top_left.y, e.top_left.y) >
            Math.min(t.bottom_right.y, e.bottom_right.y)
          )
        );
      },
      check_point_in_shape: function (t, e) {
        var n,
          i,
          r = !1,
          a = e.length;
        for (n = 0, i = a - 1; n < a; i = n++)
          e[n].y > t.y != e[i].y > t.y &&
            t.x <
              ((e[i].x - e[n].x) * (t.y - e[n].y)) / (e[i].y - e[n].y) +
                e[n].x &&
            (r = !r);
        return r;
      },
      is_concave_polygon: function (t) {
        var n = 1,
          i = -1,
          r = 0;
        function a(t, e, n) {
          return (n.y - t.y) * (e.x - t.x) > (e.y - t.y) * (n.x - t.x);
        }
        var e = (function t(e) {
          return e.length < 2
            ? r
            : (function (t, e, n) {
                return (n.y - t.y) * (e.x - t.x) == (e.y - t.y) * (n.x - t.x);
              })(e[0], e[1], e[2])
            ? t(e.slice(1))
            : a(e[0], e[1], e[2])
            ? n
            : i;
        })(t);
        if (e === r) return !0;
        for (var o = 0; o < t.length; o++) {
          var s = o + 1 == t.length ? 0 : o + 1,
            l = s + 1 == t.length ? 0 : s + 1;
          if (
            (e === n && !a(t[o], t[s], t[l])) ||
            (e === i && a(t[o], t[s], t[l]))
          )
            return !1;
        }
        return !0;
      },
    },
    A = {
      session_importer_topic: null,
      constants: {
        status: {
          READY: 0,
          BUSY: 1,
          ERROR: 2,
        },
      },
      get_topic: function () {
        return (
          null === this.session_importer_topic &&
            (this.session_importer_topic = new ROSLIB.Topic({
              ros: ros,
              name: "/session_importer_node/info",
              messageType: "mirSessionImporter/SessionImportInfo",
            })),
          this.session_importer_topic
        );
      },
      subscribe_info: function (t) {
        var e = "function" == typeof t ? t : g.log;
        return this.get_topic().subscribe(e);
      },
      unsubscribe_info: function (t) {
        var e = "function" == typeof t ? t : g.log;
        return this.get_topic().unsubscribe(e);
      },
    },
    S = {
      nodes: {
        wise: {
          wise_service: null,
          wise_topic: null,
          busy_list: {},
          error_list: {},
          constants: {
            actions: {
              GET_STATUS: 0,
              GET_INPUT_STATE: 1,
              GET_OUTPUT_STATE: 2,
              SET_OUTPUT_STATE: 3,
              CONNECT: 4,
              DISCONNECT: 5,
              SEND_COMMAND: 6,
            },
            status: {
              DONE: 0,
              ERROR: 1,
            },
          },
          get_service: function () {
            return (
              null === this.wise_service &&
                (this.wise_service = new ROSLIB.Service({
                  ros: ros,
                  name: "/wise_node/command",
                  serviceType: "wise_node/command",
                })),
              this.wise_service
            );
          },
          get_topic: function () {
            return (
              null === this.wise_topic &&
                (this.wise_topic = new ROSLIB.Topic({
                  ros: ros,
                  name: "/wise_node/status",
                  messageType: "mirWise/WiseDevices",
                  throttle_rate: 100,
                })),
              this.wise_topic
            );
          },
          clear_error: function (t) {
            this.error_list[t] = !1;
          },
          call_service: function (e, t) {
            if (!t.queue && this.busy_list[e.guid]) return !1;
            if (this.error_list[e.guid]) return !1;
            this.busy_list[e.guid] = !0;
            function n(t) {
              (i.busy_list[e.guid] = !1),
                (i.error_list[e.guid] = t),
                r.on_error.call(i, arguments);
            }
            var i = this,
              r = $.extend(
                {
                  on_success: g.log,
                  on_error: g.log,
                },
                t
              );
            return (
              this.get_service().callService(
                new ROSLIB.ServiceRequest(e),
                function (t) {
                  t.result
                    ? (function () {
                        (i.busy_list[e.guid] = !1),
                          r.on_success.call(i, arguments);
                      })(t)
                    : n(t);
                },
                n
              ),
              !0
            );
          },
          get_status: function (t, e) {
            var n = {
              action: this.constants.actions.GET_STATUS,
              guid: t,
            };
            this.call_service(n, e);
          },
          connect: function (t, e) {
            var n = {
              action: this.constants.actions.CONNECT,
              guid: t,
            };
            this.call_service(n, e);
          },
          disconnect: function (t, e) {
            var n = {
              action: this.constants.actions.DISCONNECT,
              guid: t,
            };
            this.call_service(n, e);
          },
          get_input_state: function (t, e, n) {
            var i = {
              action: this.constants.actions.GET_INPUT_STATE,
              guid: t,
              channel: e,
            };
            this.call_service(i, n);
          },
          set_output_state: function (t, e, n, i) {
            var r = {
              action: this.constants.actions.SET_OUTPUT_STATE,
              guid: t,
              channel: e,
              value: n,
            };
            return this.call_service(r, i);
          },
          subscribe_status: function (t) {
            var e = "function" == typeof t ? t : g.log;
            return this.get_topic().subscribe(e);
          },
          unsubscribe_status: function (t) {
            var e = "function" == typeof t ? t : g.log;
            return this.get_topic().unsubscribe(e);
          },
        },
        internal: {
          internal_service: null,
          internal_topic: null,
          busy_list: {},
          error_list: {},
          constants: {
            actions: {
              GET_STATUS: 0,
              GET_INPUT_STATE: 1,
              GET_OUTPUT_STATE: 2,
              SET_OUTPUT_STATE: 3,
            },
            status: {
              DONE: 0,
              STARTING: 1,
              ERROR: 3,
            },
          },
          get_service: function () {
            return (
              null === this.internal_service &&
                (this.internal_service = new ROSLIB.Service({
                  ros: ros,
                  name: "/internal_ios/command",
                  serviceType: "mir_srvs/InternalIOsCommand",
                })),
              this.internal_service
            );
          },
          get_topic: function () {
            return (
              null === this.internal_topic &&
                (this.internal_topic = new ROSLIB.Topic({
                  ros: ros,
                  name: "/internal_ios/status",
                  messageType: "mirMsgs/IOs",
                  throttle_rate: 100,
                })),
              this.internal_topic
            );
          },
          clear_error: function (t) {
            this.error_list[t] = !1;
          },
          call_service: function (e, t) {
            if (!t.queue && this.busy_list[e.guid]) return !1;
            if (this.error_list[e.guid]) return !1;
            this.busy_list[e.guid] = !0;
            function n(t) {
              (i.busy_list[e.guid] = !1),
                (i.error_list[e.guid] = t),
                r.on_error.call(i, arguments);
            }
            var i = this,
              r = $.extend(
                {
                  on_success: g.log,
                  on_error: g.log,
                },
                t
              );
            return (
              this.get_service().callService(
                new ROSLIB.ServiceRequest(e),
                function (t) {
                  t.result
                    ? (function () {
                        (i.busy_list[e.guid] = !1),
                          r.on_success.call(i, arguments);
                      })(t)
                    : n(t);
                },
                n
              ),
              !0
            );
          },
          get_status: function (t, e) {
            var n = {
              action: this.constants.actions.GET_STATUS,
              guid: t,
            };
            this.call_service(n, e);
          },
          set_output_state: function (t, e) {
            var n = {
              action: this.constants.actions.SET_OUTPUT_STATE,
              channel: t,
              value: !!e,
              timeout: 0,
            };
            return this.call_service(n, {});
          },
          subscribe_status: function (t) {
            var e = "function" == typeof t ? t : g.log;
            return this.get_topic().subscribe(e);
          },
          unsubscribe_status: function (t) {
            var e = "function" == typeof t ? t : g.log;
            return this.get_topic().unsubscribe(e);
          },
        },
        session_importer: A,
      },
    },
    k = {
      data: {
        name: "UI_STORAGE",
        path: window.location.pathname,
        debug: !1,
      },
      debug: function () {
        this.data.debug = !0;
      },
      haslocalStorage: function () {
        var t = "_TMP_SUPPORT_";
        try {
          return localStorage.setItem(t, t), localStorage.removeItem(t), !0;
        } catch (t) {
          return this.data.debug && g(t), !1;
        }
      },
      getPathKey: function () {
        var e = this.data.path;
        return this.all().findIndex(function (t) {
          return t.path == e;
        });
      },
      getIdKey: function (t, e, n) {
        return t.findIndex(function (t) {
          return t.id == e && t.key == n;
        });
      },
      get: function (e, n) {
        var t = this.getPathKey();
        if (0 <= t) {
          var i = this.all(),
            r = (i = i[t].elements).findIndex(function (t) {
              return t.id == e && t.key == n;
            });
          if (0 <= r) return i[r].val;
        }
        return null;
      },
      all: function () {
        var t = localStorage.getItem(this.data.name);
        return null != t
          ? JSON.parse(t)
          : (localStorage.setItem(this.data.name, JSON.stringify([])),
            this.all());
      },
      set: function (t, e, n) {
        if (
          !this.haslocalStorage() ||
          "" == this.data.path ||
          !t ||
          !e ||
          void 0 === n
        )
          return !1;
        try {
          var i = this.all(),
            r = this.getPathKey(),
            a = {
              id: t,
              key: e,
              val: n,
            };
          if (0 <= r && i[r].elements) {
            var o = i[r].elements,
              s = this.getIdKey(o, t, e);
            0 <= s ? (o[s].val = n) : o.push(a);
          } else {
            var l = {
              path: this.data.path,
              elements: [],
            };
            l.elements.push(a), i.push(l);
          }
          localStorage.setItem(this.data.name, JSON.stringify(i));
        } catch (t) {
          return this.data.debug && g(t), !1;
        }
      },
      reset: function () {
        return localStorage.removeItem(this.data.name), !0;
      },
    },
    C = mir_translate,
    N = {
      NULL_VALUE: "!!!nullvalue!!!",
      KEY_SPACE: 32,
      KEY_SHIFT: 16,
    };
  function M(t) {
    var n = $('<select class="mir-field"></select>'),
      e = (n.mir = {
        options: $.extend(
          {
            options: [],
          },
          t
        ),
        set_options: function (t) {
          var e = $.map(t, function (t) {
            return (
              "<option " +
              (function (t) {
                return $.map(t, function (t, e) {
                  return e + '="' + t + '"';
                }).join(" ");
              })(
                $.extend({}, t.attributes, {
                  value: t.value,
                })
              ) +
              ">" +
              t.text +
              "</option>"
            );
          });
          n.html(e.join(""));
        },
      });
    return (
      e.set_options(e.options.options),
      e.options.attr && n.attr(e.options.attr),
      n.val(e.options.value || e.options.def),
      n
    );
  }
  function P(t) {
    var e = $(
      '<div class="mir-tooltip tooltip ui-tooltip ui-widget ui-corner-all ui-widget-content"></div>'
    );
    return (
      (e.mir = {
        options: $.extend({}, t),
      }),
      e.mir.options.attr && e.attr(e.mir.options.attr),
      e.mir.options.text && e.html(e.mir.options.text),
      e
    );
  }
  var L = {
    input: b,
    select: M,
    duration: x,
  };
  function j(t) {
    return (j =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function (t) {
            return typeof t;
          }
        : function (t) {
            return t &&
              "function" == typeof Symbol &&
              t.constructor === Symbol &&
              t !== Symbol.prototype
              ? "symbol"
              : typeof t;
          })(t);
  }
  function D(t, e) {
    if (!(t instanceof e))
      throw new TypeError("Cannot call a class as a function");
  }
  function G(t, e) {
    for (var n = 0; n < e.length; n++) {
      var i = e[n];
      (i.enumerable = i.enumerable || !1),
        (i.configurable = !0),
        "value" in i && (i.writable = !0),
        Object.defineProperty(t, i.key, i);
    }
  }
  function U(t, e, n) {
    return e && G(t.prototype, e), n && G(t, n), t;
  }
  function K(t, e, n) {
    return (
      e in t
        ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          })
        : (t[e] = n),
      t
    );
  }
  function F(t, e) {
    return (
      (function (t) {
        if (Array.isArray(t)) return t;
      })(t) ||
      (function (t, e) {
        if (
          !(
            Symbol.iterator in Object(t) ||
            "[object Arguments]" === Object.prototype.toString.call(t)
          )
        )
          return;
        var n = [],
          i = !0,
          r = !1,
          a = void 0;
        try {
          for (
            var o, s = t[Symbol.iterator]();
            !(i = (o = s.next()).done) &&
            (n.push(o.value), !e || n.length !== e);
            i = !0
          );
        } catch (t) {
          (r = !0), (a = t);
        } finally {
          try {
            i || null == s.return || s.return();
          } finally {
            if (r) throw a;
          }
        }
        return n;
      })(t, e) ||
      (function () {
        throw new TypeError(
          "Invalid attempt to destructure non-iterable instance"
        );
      })()
    );
  }
  function B(t) {
    return (
      (function (t) {
        if (Array.isArray(t)) {
          for (var e = 0, n = new Array(t.length); e < t.length; e++)
            n[e] = t[e];
          return n;
        }
      })(t) ||
      (function (t) {
        if (
          Symbol.iterator in Object(t) ||
          "[object Arguments]" === Object.prototype.toString.call(t)
        )
          return Array.from(t);
      })(t) ||
      (function () {
        throw new TypeError("Invalid attempt to spread non-iterable instance");
      })()
    );
  }
  function H(t) {
    var n = $('<div class="mir-overlay"></div>'),
      i = (n.mir = {
        options: $.extend(
          {
            parent: "body",
            on_click: function (t, e) {
              t.target === e[0] && i.options.on_remove(e);
            },
            on_scroll: function (t, e) {
              if (t.target === e[0]) return !1;
            },
            on_remove: function (t) {
              t.remove();
            },
          },
          t
        ),
      });
    return (
      "object" == j(i.options.attributes) &&
        $.each(i.options.attributes, function (t, e) {
          n.attr(t, e);
        }),
      "string" == typeof i.options.parent &&
        "body" === i.options.parent.toLowerCase() &&
        n.css("position", "fixed"),
      n
        .appendTo(i.options.parent)
        .on("click", function (t) {
          return i.options.on_click(t, n);
        })
        .on("DOMMouseScroll.mir-overlay mousewheel.mir-overlay", function (t) {
          return i.options.on_scroll(t, n);
        })
        .on("toustart.mir-overlay", function () {
          return !1;
        }),
      (n.clear = i.clear = function () {
        i.options.on_remove(n);
      }),
      n
    );
  }
  function q(t) {
    var i = $('<div class="mir-dialog mir-search-dialog"></div>'),
      o = (i.mir = {
        options: $.extend(
          {
            timeout: 100,
            header: "",
            parent: "body",
            placeholder: mir_translate("Type to filter text"),
            on_before_render: function (t) {
              t.show(function () {
                o.$dialog_input.focus();
              });
            },
            get_overlay: function (t) {
              return new H({
                parent: t.mir.options.parent,
              });
            },
            on_set_position: function (t) {
              t.position({
                my: "center",
                at: "center",
                of: o.options.parent,
              });
            },
            on_clear_dialog: function (t) {
              t.fadeOut(100, function () {
                t.remove(), t.mir.$overlay.clear();
              }),
                $(window).off("resize.mir-search-dialog");
            },
            on_create_option_node: null,
            on_create_group_node: null,
            sort_options: function (t, e) {
              var n = t.clean_group_name + t.clean_name,
                i = e.clean_group_name + e.clean_name;
              return n < i ? -1 : i < n ? 1 : 0;
            },
            on_select: null,
            on_filter_option: null,
          },
          t
        ),
        groups: [],
        value: null,
      });
    return (
      (o.process_options = function () {
        $.each(o.options.options, function (t, e) {
          void 0 !== e.groupname &&
            (e.clean_group_name = z.remove_diacritics(e.groupname.toString())),
            (e.clean_name = z.remove_diacritics(e.name.toString()));
        }),
          o.options.options.sort(o.options.sort_options);
      }),
      (o.create_dialog = function () {
        var a;
        (o.$header = $("<h1>" + o.options.header + "</h1>")),
          (o.$close_btn = $(
            '<button class="mir-btn mir-btn-sm mir-light close-dialog"><i class="mir-i mir-i-back"></i>&nbsp;' +
              mir_translate("Cancel") +
              "</button>"
          )),
          (o.$dialog_label = $(
            '<div class="mir-form-element"><label class="mir-label">' +
              mir_translate("Filter:") +
              "</label></div>"
          )),
          (o.$dialog_input = b({
            attr: {
              type: "search",
              class: "mir-field",
              placeholder: o.options.placeholder,
            },
          })),
          (o.$wrapper = $('<div tabindex="-1" class=scroll-wrap></div>')),
          (o.$list = $('<ul class="mir-list"></ul>')),
          (o.$overlay = o.options.get_overlay(i)),
          (i.set_position = function () {
            o.options.on_set_position(i);
          }),
          $.each(o.options.options, function (t, e) {
            if (e.groupname && e.groupname !== a) {
              a = e.groupname;
              var n = $("<span>" + a + "</span>"),
                i = $('<li class="mir-list-item group"></li>'),
                r = {
                  clean_group_name: e.clean_group_name,
                  group_name: e.groupname,
                  $node: i,
                  $text_node: n,
                };
              r.$node.append(r.$text_node),
                "function" == typeof o.options.on_create_group_node &&
                  o.options.on_create_group_node(r, t, e),
                o.groups.push(r),
                o.$list.append(i);
            }
            (e.$text_node = $("<span>" + e.name + "</span>")),
              (e.$node = $(
                '<li class="mir-list-item item" data-value="' +
                  e.value +
                  '"></li>'
              )),
              o.$list.append(e.$node.append(e.$text_node)),
              "function" == typeof o.options.on_create_option_node &&
                o.options.on_create_option_node(e, t);
          }),
          i
            .append(
              o.$header.append(o.$close_btn),
              o.$dialog_label.append(o.$dialog_input),
              o.$wrapper.append(o.$list)
            )
            .appendTo(o.$overlay),
          (z.is_mobile() && !z.is_small_screen()) || i.set_position(i);
      }),
      (o.bind_events = function () {
        var t;
        i.on("DOMMouseScroll.mir-overlay mousewheel.mir-overlay", function (t) {
          t.stopPropagation();
        }),
          o.$dialog_input
            .on("input.mir-search-dialog", o.handle_input)
            .on("keydown.mir-search-dialog", o.handle_keypress)
            .on("focus.mir-search-dialog", function () {
              this.select();
            }),
          o.$list.on("click.mir-search-dialog", "[data-value]", function () {
            var t = $(this).attr("data-value");
            o.handle_select(t);
          }),
          o.$close_btn.on("click.mir-search-dialog", function () {
            o.reset_input(), o.clear_dialog(i);
          }),
          $(window)
            .off("resize.mir-search-dialog")
            .on("resize.mir-search-dialog", function () {
              if (z.is_mobile() || z.is_small_screen()) return !1;
              t && clearTimeout(t), (t = setTimeout(i.set_position, 50));
            });
      }),
      (o.init_dialog = function () {
        o.process_options(),
          o.create_dialog(),
          o.bind_events(),
          o.options.on_before_render(i);
      }),
      (o.handle_select = function (e) {
        var t = !0,
          n = $.grep(o.options.options, function (t) {
            return t.value === e;
          }).pop();
        "function" == typeof o.options.on_select &&
          (t = !1 !== o.options.on_select(e, n)),
          t && (o.val(e), o.clear_dialog(i));
      }),
      (o.clear_dialog = function () {
        o.options.on_clear_dialog(i);
      }),
      (o.filter_list = function (r) {
        var t = z.remove_diacritics(r),
          a = RegExp(z.escape_regex(t));
        $.each(o.groups, function (t, e) {
          var n = e.clean_group_name.search(a);
          -1 !== n
            ? e.$text_node.html(z.highlight_text(e.group_name, n, r.length))
            : e.$text_node.html(e.group_name);
        }),
          $.each(o.options.options, function (t, e) {
            var n = !0;
            if (
              ("function" == typeof o.options.on_filter_option &&
                (n = o.options.on_filter_option(e)),
              !1 !== n)
            ) {
              var i = e.clean_name.search(a);
              if (-1 !== i)
                return (
                  e.$node.show(),
                  void e.$text_node.html(z.highlight_text(e.name, i, r.length))
                );
              if (
                e.clean_group_name &&
                -1 !== (i = e.clean_group_name.search(a))
              )
                return e.$text_node.html(e.name), void e.$node.show();
              e.$node.hide(), e.$text_node.html(e.name);
            }
          });
      }),
      (i.val = o.val = function () {
        if (0 < arguments.length) {
          var e = arguments[0],
            t = $.grep(o.options.options, function (t) {
              return t.value === e;
            }).pop();
          return (
            t &&
              ((o.value = e), o.$dialog_input && o.$dialog_input.val(t.name)),
            o
          );
        }
        return o.value;
      }),
      (o.handle_input = function () {
        null !== o.timeout && window.clearTimeout(o.timeout),
          (o.timeout = setTimeout(function () {
            o.filter_list(o.$dialog_input.val());
          }, o.options.timeout));
      }),
      (o.reset_input = function () {
        var t = o.val();
        o.val(t), o.handle_select(t);
      }),
      (o.handle_keypress = function (n) {
        function t() {
          null !== o.timeout &&
            (window.clearTimeout(o.timeout),
            o.filter_list(o.$dialog_input.val()));
          var t = o.$list.find(".item:visible:first");
          if (0 === t.length) return n.preventDefault(), !1;
          var e = t.attr("data-value");
          o.handle_select(e);
        }
        switch (n.keyCode) {
          case $.ui.keyCode.ESCAPE:
            n.stopPropagation(),
              n.preventDefault(),
              o.reset_input(),
              o.clear_dialog(i);
            break;
          case $.ui.keyCode.ENTER:
            n.stopPropagation(), n.preventDefault(), t();
            break;
          case $.ui.keyCode.TAB:
            t();
        }
      }),
      o.init_dialog(),
      i
    );
  }
  function Y(t) {
    var n = H().attr("class", "overlay_confirm"),
      e = t.title ? t.title : "undefined",
      i = t.body ? t.body : "undefined",
      r = t.submit ? t.submit : mir_translate("Yes"),
      a = t.cancel ? t.cancel : mir_translate("No"),
      o = $('<div class="box"></div>');
    return (
      t.confirm_type && o.addClass(t.confirm_type),
      o.append("<h1>" + e + "</h1>"),
      o.append("<p>" + i + "</p>"),
      o.append(
        '<div class="buttonholder"><div class="delete" id="confirm-submit">' +
          r +
          '</div><div class="cancel" id="confirm-cancel">' +
          a +
          "</div></div>"
      ),
      n.append(o),
      new Promise(function (t, e) {
        o.find("#confirm-submit").on("click", function () {
          n.remove(), t();
        }),
          o.find("#confirm-cancel").on("click", function () {
            n.remove();
          });
      })
    );
  }
  var z = {
    sprintf: h(function (t, e) {
      function f(t) {
        return (function (t, e) {
          var n,
            i,
            r,
            a,
            o,
            s,
            l,
            c,
            u,
            p = 1,
            d = t.length,
            _ = "";
          for (i = 0; i < d; i++)
            if ("string" == typeof t[i]) _ += t[i];
            else if ("object" === j(t[i])) {
              if ((a = t[i]).keys)
                for (n = e[p], r = 0; r < a.keys.length; r++) {
                  if (null == n)
                    throw new Error(
                      f(
                        '[sprintf] Cannot access property "%s" of undefined value "%s"',
                        a.keys[r],
                        a.keys[r - 1]
                      )
                    );
                  n = n[a.keys[r]];
                }
              else n = a.param_no ? e[a.param_no] : e[p++];
              if (
                (h.not_type.test(a.type) &&
                  h.not_primitive.test(a.type) &&
                  n instanceof Function &&
                  (n = n()),
                h.numeric_arg.test(a.type) && "number" != typeof n && isNaN(n))
              )
                throw new TypeError(
                  f("[sprintf] expecting number but found %T", n)
                );
              switch ((h.number.test(a.type) && (c = 0 <= n), a.type)) {
                case "b":
                  n = parseInt(n, 10).toString(2);
                  break;
                case "c":
                  n = String.fromCharCode(parseInt(n, 10));
                  break;
                case "d":
                case "i":
                  n = parseInt(n, 10);
                  break;
                case "j":
                  n = JSON.stringify(n, null, a.width ? parseInt(a.width) : 0);
                  break;
                case "e":
                  n = a.precision
                    ? parseFloat(n).toExponential(a.precision)
                    : parseFloat(n).toExponential();
                  break;
                case "f":
                  n = a.precision
                    ? parseFloat(n).toFixed(a.precision)
                    : parseFloat(n);
                  break;
                case "g":
                  n = a.precision
                    ? String(Number(n.toPrecision(a.precision)))
                    : parseFloat(n);
                  break;
                case "o":
                  n = (parseInt(n, 10) >>> 0).toString(8);
                  break;
                case "s":
                  (n = String(n)),
                    (n = a.precision ? n.substring(0, a.precision) : n);
                  break;
                case "t":
                  (n = String(!!n)),
                    (n = a.precision ? n.substring(0, a.precision) : n);
                  break;
                case "T":
                  (n = Object.prototype.toString
                    .call(n)
                    .slice(8, -1)
                    .toLowerCase()),
                    (n = a.precision ? n.substring(0, a.precision) : n);
                  break;
                case "u":
                  n = parseInt(n, 10) >>> 0;
                  break;
                case "v":
                  (n = n.valueOf()),
                    (n = a.precision ? n.substring(0, a.precision) : n);
                  break;
                case "x":
                  n = (parseInt(n, 10) >>> 0).toString(16);
                  break;
                case "X":
                  n = (parseInt(n, 10) >>> 0).toString(16).toUpperCase();
              }
              h.json.test(a.type)
                ? (_ += n)
                : (!h.number.test(a.type) || (c && !a.sign)
                    ? (u = "")
                    : ((u = c ? "+" : "-"),
                      (n = n.toString().replace(h.sign, ""))),
                  (s = a.pad_char
                    ? "0" === a.pad_char
                      ? "0"
                      : a.pad_char.charAt(1)
                    : " "),
                  (l = a.width - (u + n).length),
                  (o = a.width && 0 < l ? s.repeat(l) : ""),
                  (_ += a.align
                    ? u + n + o
                    : "0" === s
                    ? u + o + n
                    : o + u + n));
            }
          return _;
        })(
          (function (t) {
            if (l[t]) return l[t];
            var e,
              n = t,
              i = [],
              r = 0;
            for (; n; ) {
              if (null !== (e = h.text.exec(n))) i.push(e[0]);
              else if (null !== (e = h.modulo.exec(n))) i.push("%");
              else {
                if (null === (e = h.placeholder.exec(n)))
                  throw new SyntaxError("[sprintf] unexpected placeholder");
                if (e[2]) {
                  r |= 1;
                  var a = [],
                    o = e[2],
                    s = [];
                  if (null === (s = h.key.exec(o)))
                    throw new SyntaxError(
                      "[sprintf] failed to parse named argument key"
                    );
                  for (a.push(s[1]); "" !== (o = o.substring(s[0].length)); )
                    if (null !== (s = h.key_access.exec(o))) a.push(s[1]);
                    else {
                      if (null === (s = h.index_access.exec(o)))
                        throw new SyntaxError(
                          "[sprintf] failed to parse named argument key"
                        );
                      a.push(s[1]);
                    }
                  e[2] = a;
                } else r |= 2;
                if (3 === r)
                  throw new Error(
                    "[sprintf] mixing positional and named placeholders is not (yet) supported"
                  );
                i.push({
                  placeholder: e[0],
                  param_no: e[1],
                  keys: e[2],
                  sign: e[3],
                  pad_char: e[4],
                  align: e[5],
                  width: e[6],
                  precision: e[7],
                  type: e[8],
                });
              }
              n = n.substring(e[0].length);
            }
            return (l[t] = i);
          })(t),
          arguments
        );
      }
      function n(t, e) {
        return f.apply(null, [t].concat(e || []));
      }
      var h, l;
      (h = {
        not_string: /[^s]/,
        not_bool: /[^t]/,
        not_type: /[^T]/,
        not_primitive: /[^v]/,
        number: /[diefg]/,
        numeric_arg: /[bcdiefguxX]/,
        json: /[j]/,
        not_json: /[^j]/,
        text: /^[^\x25]+/,
        modulo: /^\x25{2}/,
        placeholder: /^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
        key: /^([a-z_][a-z_\d]*)/i,
        key_access: /^\.([a-z_][a-z_\d]*)/i,
        index_access: /^\[(\d+)\]/,
        sign: /^[+-]/,
      }),
        (l = Object.create(null)),
        (e.sprintf = f),
        (e.vsprintf = n),
        "undefined" != typeof window &&
          ((window.sprintf = f), (window.vsprintf = n));
    }).sprintf,
    generate_id: function () {
      return Math.random().toString(36);
    },
    is_mobile: function () {
      var t,
        e = !1;
      return (
        (t = navigator.userAgent || navigator.vendor || window.opera),
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          t
        ) && (e = !0),
        e
      );
    },
    is_small_screen: function () {
      return $(window).width() < 960;
    },
    escape_regex: function (t) {
      return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    },
    remove_diacritics: function (t) {
      var e,
        n,
        i,
        r,
        a = "",
        o = {};
      for (i in p)
        if (p.hasOwnProperty(i))
          for (
            a += r = p[i].substring(2, p[i].length - 1), e = 0, n = r.length;
            e < n;
            e++
          )
            o[r.charAt(e)] = i;
      var s = new RegExp("[" + a + "]", "g");
      return t
        .replace(s, function (t) {
          return o[t];
        })
        .toLowerCase();
    },
    highlight_text: function (t, e, n, i, r) {
      return [
        t.substring(0, e),
        i || "<b>",
        t.substring(e, e + n),
        r || "</b>",
        t.substring(e + n),
      ].join("");
    },
    throttle: function (t, e) {
      var n = Date.now();
      return function () {
        n + e - Date.now() < 0 && (t.apply(t, arguments), (n = Date.now()));
      };
    },
    hexToRgb: function (t) {
      t = t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function (t, e, n, i) {
        return e + e + n + n + i + i;
      });
      var e = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);
      return e
        ? {
            r: parseInt(e[1], 16),
            g: parseInt(e[2], 16),
            b: parseInt(e[3], 16),
          }
        : null;
    },
    mergeObject: function (t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = arguments[e];
        for (var i in n) n.hasOwnProperty(i) && (t[i] = n[i]);
      }
      return t;
    },
    intersects: function (t, e, n, i, r, a, o, s) {
      var l, c, u;
      return (
        0 != (l = (n - t) * (s - a) - (o - r) * (i - e)) &&
        ((c = ((e - i) * (o - t) + (n - t) * (s - e)) / l),
        0 < (u = ((s - a) * (o - t) + (r - o) * (s - e)) / l) &&
          u < 1 &&
          0 < c &&
          c < 1)
      );
    },
    getClosestPointOnLines: function (t, e) {
      function n(t, e) {
        return 0 <= e ? t[e] : t[t.length + e];
      }
      var i, r, a, o, s, l, c;
      if (1 < e.length) {
        for (var u = 0; u < e.length; u++) {
          if (n(e, u)[0] != n(e, u - 1)[0]) {
            var p =
                (n(e, u)[1] - n(e, u - 1)[1]) / (n(e, u)[0] - n(e, u - 1)[0]),
              d = n(e, u)[1] - p * n(e, u)[0];
            c = Math.abs(p * t.x + d - t.y) / Math.sqrt(p * p + 1);
          } else c = Math.abs(t.x - n(e, u)[0]);
          var _ =
              Math.pow(n(e, u)[1] - n(e, u - 1)[1], 2) +
              Math.pow(n(e, u)[0] - n(e, u - 1)[0], 2),
            f = Math.pow(n(e, u)[1] - t.y, 2) + Math.pow(n(e, u)[0] - t.x, 2),
            h =
              Math.pow(n(e, u - 1)[1] - t.y, 2) +
              Math.pow(n(e, u - 1)[0] - t.x, 2),
            m = Math.pow(c, 2),
            v = f - m + h - m;
          _ < v && (c = Math.sqrt(Math.min(f, h))),
            (null == i || c < i) &&
              (_ < v
                ? h < f
                  ? ((r = 0), (a = 1))
                  : ((a = 0), (r = 1))
                : ((r = Math.sqrt(h - m) / Math.sqrt(_)),
                  (a = Math.sqrt(f - m) / Math.sqrt(_))),
              (i = c),
              (l = u));
        }
        var g = n(e, l - 1)[0] - n(e, l)[0],
          y = n(e, l - 1)[1] - n(e, l)[1];
        (o = n(e, l - 1)[0] - g * r), (s = n(e, l - 1)[1] - y * r);
      }
      return {
        x: o,
        y: s,
        i: l,
        fTo: r,
        fFrom: a,
      };
    },
    scaleUp: function (t, r) {
      switch (j(t)) {
        case "number":
          return t * r;
        case "object":
          return Object.assign.apply(
            Object,
            B(
              Object.entries(t).map(function (t) {
                var e = F(t, 2),
                  n = e[0],
                  i = e[1];
                return K({}, n, u.is_nr(i) ? i * r : i);
              })
            )
          );
      }
      throw Error("Invalid value");
    },
    scaleDown: function (t, r) {
      switch (j(t)) {
        case "number":
          return t / r;
        case "object":
          return Object.assign.apply(
            Object,
            B(
              Object.entries(t).map(function (t) {
                var e = F(t, 2),
                  n = e[0],
                  i = e[1];
                return K({}, n, u.is_nr(i) ? i / r : i);
              })
            )
          );
      }
      throw Error("Invalid value");
    },
    distance: function (t, e, n, i) {
      return Math.sqrt(Math.pow(t - n, 2) + Math.pow(e - i, 2));
    },
    version_compare: function (t, e) {
      if (j(t) + j(e) != "stringstring") return !1;
      for (
        var n = t.split("."),
          i = e.split("."),
          r = 0,
          a = Math.max(n.length, i.length);
        r < a;
        r++
      ) {
        if (
          (n[r] && !i[r] && 0 < parseInt(n[r])) ||
          parseInt(n[r]) > parseInt(i[r])
        )
          return 1;
        if (
          (i[r] && !n[r] && 0 < parseInt(i[r])) ||
          parseInt(n[r]) < parseInt(i[r])
        )
          return -1;
      }
      return 0;
    },
  };
  var J,
    V,
    W = {
      button: y,
      constants: N,
      overlay: H,
      search_dialog: q,
      search_select: function (t) {
        var e = $("<div></div>"),
          n = (e.mir = {
            options: $.extend(
              {
                attr: {},
                header: "",
                parent: "body",
                options: [],
                timeout: 100,
                extra_dialog_options: {},
              },
              t
            ),
            blurring_timeout: !1,
          });
        return (
          (n.create_search_select = function () {
            (n.$hidden_input = b({
              attr: $.extend({}, n.options.attr, {
                type: "hidden",
              }),
            })),
              (n.$input = b({
                attr: {
                  type: "search",
                },
              })),
              (n.is_active = !1),
              e.append(n.$hidden_input, n.$input);
          }),
          (n.bind_events = function () {
            n.$input
              .on("focus", function () {
                if (!n.is_active) {
                  (n.is_active = !0),
                    (n.is_mobile_or_small =
                      z.is_mobile() || z.is_small_screen());
                  var t = {
                      options: n.options.options,
                      header: n.options.header,
                    },
                    e = {
                      get_overlay: function () {
                        return n.options.parent;
                      },
                      on_set_position: function (t) {
                        t.position({
                          my: "left+15px top-65px",
                          at: "right center",
                          of: n.$input,
                          collision: "none",
                        });
                      },
                      on_before_render: function (t) {
                        t.val(n.val()),
                          t.addClass("mir-search-select-dialog"),
                          (n.$tab = $(
                            '<div class="tab mir-only-desktop"></div>'
                          )),
                          t.append(n.$tab),
                          n.$tab.position({
                            my: "left center",
                            at: "right center",
                            of: n.$input,
                            collision: "none",
                          }),
                          t.show(function () {
                            t.mir.$dialog_input.focus();
                          });
                        var e = !1;
                        $(window).on("resize.mir-search-select", function () {
                          n.is_active &&
                            n.is_mobile_or_small !==
                              (z.is_mobile() || z.is_small_screen()) &&
                            (e && clearTimeout(e),
                            (e = setTimeout(n.handle_resize, 50)));
                        });
                      },
                      on_clear_dialog: function (t) {
                        n.val(t.val()),
                          (n.is_active = !1),
                          t.remove(),
                          $(window).off("resize.mir-search-dialog");
                      },
                      on_select: function (t, e) {
                        n.blurring_timeout && clearTimeout(n.blurring_timeout),
                          n.val(t),
                          n.$dialog.mir.clear_dialog();
                      },
                    };
                  (n.$dialog = new q(
                    $.extend(n.options.extra_dialog_options, t, e)
                  )),
                    n.$dialog.mir.$dialog_input.on("input", function () {
                      n.$input.val($(this).val());
                    });
                }
                n.is_mobile_or_small || this.select();
              })
              .on("input", function (t) {
                n.$dialog && n.$dialog.mir.$dialog_input.val(n.$input.val()),
                  n.$dialog.mir.handle_input(t);
              })
              .on("keydown", function (t) {
                var e = !0;
                if (
                  (n.$dialog && (e = n.$dialog.mir.handle_keypress(t)),
                  !1 === e)
                )
                  return !1;
                switch (t.keyCode) {
                  case $.ui.keyCode.ESCAPE:
                  case $.ui.keyCode.ENTER:
                    n.$input.blur();
                }
              })
              .on("blur", function () {
                n.is_mobile_or_small ||
                  (n.blurring_timeout = setTimeout(function () {
                    n.$dialog &&
                      document.activeElement !== n.$dialog.mir.$wrapper[0] &&
                      (n.$dialog.mir.clear_dialog(), (n.is_active = !1));
                  }, 1));
              });
          }),
          (n.handle_resize = function () {
            n.$tab &&
              (console.log(n.$tab),
              n.$tab.position({
                my: "left center",
                at: "right center",
                of: n.$input,
                collision: "none",
              })),
              (n.is_mobile_or_small = z.is_mobile() || z.is_small_screen()),
              n.is_mobile_or_small
                ? n.$dialog && n.$dialog.mir.$dialog_input.focus()
                : n.$input.focus();
          }),
          (n.init_search_select = function () {
            n.create_search_select(), n.bind_events();
          }),
          (e.val = n.val = function () {
            if (0 < arguments.length) {
              var e = arguments[0],
                t = $.grep(n.options.options, function (t) {
                  return t.value === e;
                }).pop();
              return (
                t &&
                  (n.$hidden_input.val(t.value),
                  n.$input.val(t.name),
                  n.is_active && n.$dialog.val(t.value)),
                self
              );
            }
            return n.$hidden_input.val();
          }),
          n.init_search_select(),
          e
        );
      },
      select: M,
      null_field: w,
      error: R,
      input: b,
      icon: T,
      label: E,
      tooltip: P,
      spinner: I,
      duration: x,
      form_element: function (t, e, n, i) {
        var r = $('<div class="mir-form-element"></div>'),
          a = e.opts;
        return (
          (r.mir = {
            $control: L[e.type](a),
            $label: E(t),
            $error: R(),
            options: $.extend({}, i),
          }),
          r.mir.options.attr && r.attr(r.mir.options.attr),
          a && a.attr && "checkbox" === a.attr.type
            ? r.append(r.mir.$label.prepend(r.mir.$control), r.mir.$error)
            : r.append(r.mir.$label, r.mir.$control, r.mir.$error),
          void 0 !== n &&
            ((r.mir.$tooltip = P(n)),
            (r.mir.$tooltip_trigger = T({
              size: "1em",
              type: "info",
            })),
            r.mir.$tooltip_trigger.pTooltip({
              findToolTip: function () {
                return r.mir.$tooltip;
              },
            }),
            r.append(r.mir.$tooltip),
            r.mir.$label.append("&nbsp;", r.mir.$tooltip_trigger)),
          (r.val = function () {
            var t = this.mir;
            return 0 < arguments.length
              ? (t.$control.val(arguments[0]), r)
              : t.$control.val();
          }),
          (r.error = function () {
            var t = this.mir;
            return 0 < arguments.length
              ? (t.$error.val(arguments[0]), r)
              : t.$error.val();
          }),
          r
        );
      },
      waiter: function (t) {
        var e = $(
            '<div class="mir-overlay">\t<div class="mir-box mir-waiter">\t\t<h1>' +
              mir_translate("Please wait...") +
              '</h1>\t\t<div><i class="mir-i mir-i-spinner"></i></div>\t<div><div>'
          ),
          n = (e.mir = {
            options: $.extend({}, t),
          });
        return (
          (n.$message = $("<div>" + n.options.message + "</div>")),
          (e.val = function () {
            var t = this.mir;
            return 0 < arguments.length
              ? (t.$message.html(arguments[0]), e)
              : t.$message.html();
          }),
          e.find(".mir-waiter").append(n.$message),
          e
        );
      },
      prompt: function (t) {
        var e = $.extend(
            {
              headline: "headline",
              message: "message",
              add_cancel: {
                label: mir_translate("Cancel"),
                on_click: function (t) {
                  t.mir.$overlay.remove();
                },
              },
              buttons: [],
              parent: "body",
              get_overlay: function (t) {
                return new H({
                  parent: t.mir.options.parent,
                });
              },
            },
            t
          ),
          n = $('<div class="mir-box mir-prompt"></div>');
        (n.mir = {
          $headline: $("<h1>" + e.headline + "</h1>"),
          $message: $("<div>" + e.message + "</div>"),
          $buttons: $('<div class="buttons"></div>'),
          $overlay: null,
          options: e,
        }),
          n.mir.options.add_cancel &&
            n.mir.options.buttons.push(
              new y({
                label: n.mir.options.add_cancel.label,
                attr: {
                  class: "mir-light",
                },
                events: {
                  click: function (t) {
                    n.mir.options.add_cancel.on_click(n, t);
                  },
                },
              })
            );
        var i = n.mir;
        return (
          (i.$overlay = i.options.get_overlay(n)),
          i.options.buttons.forEach(function (t) {
            i.$buttons.append(t);
          }),
          n.append(i.$headline, i.$message, i.$buttons).appendTo(i.$overlay),
          n
        );
      },
      confirm: Y,
      input_validate: (function () {
        function n(t, e) {
          D(this, n),
            (this.input = t),
            (this.value = t.value ? t.value : ""),
            (this.options = e || {}),
            (this.type = t.type ? t.type.toLowerCase() : "text"),
            void 0 !== t.tagName &&
              "select" == t.tagName.toLowerCase() &&
              (this.type = "select"),
            (this.errors = []),
            this.parse();
        }
        return (
          U(n, [
            {
              key: "parse",
              value: function () {
                var n = this,
                  t = ["min", "max"];
                n.options.check_type && t.push("type"),
                  n.options.not_empty && t.push("empty"),
                  t.forEach(function (t) {
                    var e = n.input.getAttribute(t);
                    (!e && "empty" != t) ||
                      n.check(t, e) ||
                      n.errors.push(
                        (function (t, e, n) {
                          var i = {
                            number: {
                              max: mir_translate("input_number_too_big", {
                                min_value: n,
                              }),
                              min: mir_translate("input_number_too_small", {
                                min_value: n,
                              }),
                              empty: mir_translate("input_must_be_non_null"),
                              type: mir_translate("input_must_be_a_number"),
                            },
                            text: {
                              max: mir_translate("input_string_too_long", {
                                max_length: n,
                              }),
                              min: mir_translate("input_string_too_short", {
                                min_length: n,
                              }),
                              empty: mir_translate("input_must_be_non_null"),
                              type: mir_translate("input_must_be_a_string"),
                            },
                            select: {
                              empty: mir_translate("input_must_be_non_null"),
                            },
                          };
                          return i[e][t]
                            ? i[e][t]
                            : mir_translate("invalid_data_supplied");
                        })(t, n.type, e)
                      );
                  });
              },
            },
            {
              key: "check",
              value: function (t, e) {
                var n = this;
                return {
                  min:
                    ("number" == n.type &&
                      parseFloat(n.value) >= parseFloat(e)) ||
                    ("number" != n.type && n.value.length >= parseFloat(e)),
                  max:
                    ("number" == n.type &&
                      parseFloat(n.value) <= parseFloat(e)) ||
                    ("number" != n.type && n.value.length <= parseFloat(e)),
                  type:
                    !e ||
                    "number" != e.toLowerCase() ||
                    !isNaN(parseFloat(n.value)),
                  empty: "" != n.value,
                }[t];
              },
            },
          ]),
          n
        );
      })(),
      helptext: function (t, e, n) {
        !0 !== n && ((t = mir_translate(t)), (e = mir_translate(e)));
        var i = $('<div class="helpboxbg"></div>')
            .attr("data-scroll", "true")
            .attr("id", "helpboxbg"),
          r = $('<div class="box"></div>');
        r.html("<p>" + t + "</p>"),
          void 0 !== e && 0 < e.length && r.prepend("<h1>" + e + "</h1>");
        var a = $(
          '<div class="button">' + mir_translate("Close") + "</div>"
        ).click(function () {
          $(this).closest(".helpboxbg").remove();
        });
        r.append(a), i.append(r), $("body").prepend(i);
      },
      modal: function (t) {
        var n = H().attr("class", "overlay_modal"),
          e = t.title ? t.title : "undefined",
          i = t.body ? t.body : "undefined",
          r = t.submit ? t.submit : mir_translate("Send"),
          a = t.cancel ? t.cancel : mir_translate("Cancel"),
          o = $('<div class="box"></div>');
        t.confirm_type && o.addClass(t.confirm_type),
          o.append("<h1>" + e + "</h1>"),
          o.append("<p>" + i + "</p>");
        var s = $('<form type="post"></form>').attr("name", t.form.name);
        return (
          t.form.inputs.forEach(function (t) {
            s.append($("<input />").attr(t));
          }),
          s.append(
            '<div class="buttonholder"><input type="submit" class="mir-btn mir-btn-primary" value="' +
              r +
              '"><a class="mir-btn mir-btn-secondary" id="modal-cancel">' +
              a +
              "</a></div>"
          ),
          o.append(s),
          n.append(o),
          new Promise(function (t, e) {
            s.on("submit", function () {
              n.remove(), t($(this));
            }),
              o.find("#modal-cancel").on("click", function () {
                n.remove();
              });
          })
        );
      },
    },
    X = {
      table: {
        data: function () {
          return {
            query: "",
            pr_page: 10,
            page: 1,
            density: 1,
            rows: {},
            fields: {},
            current_rows: {},
            display_rows: {},
          };
        },
        template:
          '\n        <table class="mir-table" v-bind:row-density="density">\n            <thead>\n                <tr>\n                    <th v-for="field in fields" v-bind:key="field.id" v-if="">{{field}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for="row in display_rows">\n                    <td v-for="field in field_keys" v-bind:key="field.id" v-html="row[field]"></td>\n                </tr>\n            </tbody>\n        </table>\n    ',
        mounted: function () {
          var e = this,
            n = this;
          (this.rows = this.$parent.rows),
            (this.fields = this.$parent.fields
              ? this.$parent.fields
              : Object.keys(this.rows[0])),
            this.$parent.excludes &&
              this.$parent.excludes.forEach(function (t) {
                delete n.fields[t];
              });
          (this.current_rows = this.rows),
            this.$parent.pr_page && (this.pr_page = this.$parent.pr_page),
            this.setDisplayRows(),
            this.$parent.$on("query_change", function (t) {
              e.query = t;
            }),
            this.$parent.$on("page_change", function (t) {
              e.page = t;
            }),
            this.$parent.$on("density", function (t) {
              e.density = t;
            }),
            this.$parent.$on("pr_page_change", function (t) {
              e.pr_page = t;
            });
        },
        computed: {
          field_keys: function () {
            return this.$parent.fields ? Object.keys(this.fields) : this.fields;
          },
        },
        methods: {
          setDisplayRows: function () {
            this.setPages();
            var t = this.page * this.pr_page;
            (this.display_rows = this.current_rows.slice(t - this.pr_page, t)),
              this.$parent.actions && this.setActions();
          },
          setPages: function () {
            var t = Math.ceil(this.current_rows.length / this.pr_page);
            this.$parent.$emit("pages_change", t);
          },
          setActions: function () {
            var a = this,
              o = this.$parent.actions.links,
              s = this.$parent.actions.column;
            this.display_rows.forEach(function (t, e) {
              for (var n = "", i = 0; i < o.length; i++) {
                var r = o[i];
                -1 < t[s].indexOf(r.limit_permission) && (n += r.content);
              }
              a.display_rows[e][s] = n;
            });
          },
        },
        watch: {
          query: function () {
            var a = this;
            this.query.length <= 0
              ? (this.current_rows = this.rows)
              : (this.current_rows = jQuery.grep(a.rows, function (t) {
                  for (
                    var e = Object.keys(t), n = !1, i = 0;
                    i < e.length;
                    i++
                  ) {
                    var r = t[e[i]];
                    if (
                      !(
                        a.$parent.excludes &&
                        -1 < a.$parent.excludes.indexOf(e[i])
                      ) &&
                      r &&
                      -1 <
                        r
                          .toString()
                          .toLowerCase()
                          .indexOf(a.query.toString().toLowerCase())
                    ) {
                      n = !0;
                      break;
                    }
                  }
                  return n;
                })),
              this.$parent.$emit("page_change", 1),
              this.setDisplayRows();
          },
          page: function () {
            this.setDisplayRows();
          },
          pr_page: function () {
            this.$parent.$emit("page_change", 1), this.setDisplayRows();
          },
        },
      },
      pagination: {
        data: function () {
          return {
            page: 1,
            pages: 0,
          };
        },
        template:
          '\n        <div class="mir-pagination">\n            <span class="first" v-on:click="changePage(1)"></span>\n            <span class="prev" v-on:click="prev()"></span>\n            <div class="page-counter">Page {{page}} of {{pages}}</div>\n            <span class="next" v-on:click="next()"></span>\n            <span class="last" v-on:click="changePage(pages)"></span>\n        </div>\n    ',
        created: function () {
          var e = this;
          this.$parent.$on("page_change", function (t) {
            e.page = t;
          }),
            this.$parent.$on("pages_change", function (t) {
              e.pages = t;
            });
        },
        methods: {
          next: function () {
            var t = this.page + 1;
            return !(t > this.pages) && this.changePage(t);
          },
          prev: function () {
            var t = this.page - 1;
            return !(t <= 0) && this.changePage(t);
          },
          changePage: function (t) {
            return this.$parent.$emit("page_change", t), !0;
          },
        },
      },
      search: {
        data: function () {
          return {
            query: "",
          };
        },
        template:
          '<input type="text" v-model="query" placeholder="Search here.." />',
        watch: {
          query: function (t) {
            this.$parent.$emit("query_change", t);
          },
        },
      },
      options: {
        data: function () {
          return {
            pr_page_ranges: [10, 20, 50, 100, 1e3],
            pr_page: 10,
          };
        },
        template:
          '\n    <div class="table-options">\n        <select v-model="pr_page">\n            <option v-for="range in pr_page_ranges" v-bind:value="range">{{range}}</option>\n        </select>\n        <ul class="density-selector">\n            <li v-on:click="setDensity(1)">\n                <span></span>\n                <span></span>\n                <span></span>\n            </li>\n            <li v-on:click="setDensity(2)">\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>           \n            </li>\n            <li v-on:click="setDensity(3)">\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n                <span></span>\n            </li>\n        </ul>\n    </div>',
        watch: {
          pr_page: function (t) {
            this.$parent.$emit("pr_page_change", t);
          },
        },
        methods: {
          setDensity: function (t) {
            this.$parent.$emit("density", t);
          },
        },
      },
    },
    Z = {
      status: null,
      sessions_imported: null,
      sessions_total: null,
      error_message: null,
    },
    Q = {
      areaEvents: (function () {
        function t() {
          D(this, t),
            (this.maps = []),
            (this.areas = []),
            (this.definitions = []),
            (this.hidden_parameters = ["turn_around"]),
            (this.loaded = !1);
        }
        return (
          U(t, [
            {
              key: "init",
              value: function () {
                var n = this;
                return new Promise(function (t, e) {
                  n.loadAreas().then(function () {
                    n.loadDefinitions().then(function () {
                      (n.loaded = !0), t();
                    });
                  });
                });
              },
            },
            {
              key: "loadAreas",
              value: function () {
                var n = this;
                return new Promise(function (e, t) {
                  $.post("/?mode=get-area-definitions", function (t) {
                    (n.areas = t.results), e();
                  });
                });
              },
            },
            {
              key: "loadDefinitions",
              value: function () {
                var n = this;
                return new Promise(function (e, t) {
                  $.post(
                    "/?mode=get-area-events-action-definitions",
                    function (t) {
                      "object" == j(t.results) &&
                        t.results.forEach(function (t) {
                          n.definitions[t.action_type_id] = t;
                        }),
                        e();
                    }
                  );
                });
              },
            },
            {
              key: "getArea",
              value: function (t, e) {
                void 0 === e && (e = "name");
                for (var n = 0; n < this.areas.length; n++)
                  if (this.areas[n][e] == t) return this.areas[n];
              },
            },
            {
              key: "getActionFromShape",
              value: function (t, e) {
                for (var n = 0; n < e.actions.length; n++)
                  if (e.actions[n].type_id == t) return e.actions[n];
                return !1;
              },
            },
            {
              key: "getParameterFromAction",
              value: function (t, e) {
                for (var n = 0; n < e.parameters.length; n++)
                  if (e.parameters[n].name == t) return e.parameters[n];
                return !1;
              },
            },
            {
              key: "getAreaColor",
              value: function (t) {
                var e = this.getArea(t, "legacyName");
                if ("object" != j(e)) return !1;
                var n = MIR.util.hexToRgb(e.color);
                return {
                  hex: e.color,
                  rgb: n,
                  rgb_string: Object.keys(n)
                    .map(function (t) {
                      return n[t];
                    })
                    .join(","),
                };
              },
            },
            {
              key: "setWindowLayers",
              value: function (e) {
                Object.keys(MIR.constants.MAP.choice_layers).forEach(function (
                  t
                ) {
                  void 0 === window["map_" + e + "_metadata"].layers &&
                    (window["map_" + e + "_metadata"].layers = {}),
                    void 0 ===
                      window["map_" + e + "_metadata"].layers[
                        MIR.constants.MAP.choice_layers[t]
                      ] &&
                      (window["map_" + e + "_metadata"].layers[
                        MIR.constants.MAP.choice_layers[t]
                      ] = {
                        shapes: [],
                      });
                });
              },
            },
            {
              key: "settingsModal",
              value: function (t, e) {
                var n = this;
                if (
                  void 0 !== e.modal &&
                  void 0 !== e.layer &&
                  void 0 !== e.shape_index
                ) {
                  var i = e.layer,
                    r =
                      window["map_" + t + "_metadata"].layers[i].shapes[
                        e.shape_index
                      ],
                    a = $(e.modal).find("form"),
                    o = n.getArea(i.replace("areaevents_", ""), "legacyName");
                  1 < o.actions.length
                    ? (a.append(n.addActionsSelect(o, r)),
                      "object" == j(r.actions) &&
                        1 <= r.actions.length &&
                        r.actions.forEach(function (t) {
                          a.append(n.addAction(t.type_id, r));
                        }))
                    : a.append(n.addAction(o.actions[0], r, !0));
                }
              },
            },
            {
              key: "addActionsSelect",
              value: function (t, n) {
                var i = this,
                  r = $(
                    '<div class="fieldgroup" group-type="action-select"></div>'
                  ),
                  e = $('<div class="fieldholder"></div>');
                e.append(
                  '<label for="actions_select" class="label">' +
                    mir_translate("Available actions") +
                    "</label>"
                );
                var a = $('<div class="input-group"></div>'),
                  o = $('<select class="select"></select>');
                t.actions.forEach(function (t) {
                  (t = i.definitions[t]),
                    o.append(
                      '<option value="' +
                        t.action_type_id +
                        '" action-type="' +
                        t.action_type +
                        '">' +
                        t.name +
                        "</option>"
                    );
                });
                var s = $(
                  '<button class="mir-btn mir-btn-default add_action_button"><i class="mir-i-plus-grey mir-i"></i></button>'
                );
                return (
                  s.on("click", function (t) {
                    t.preventDefault();
                    var e = parseInt(o.val());
                    r.after(i.addAction(e, n));
                  }),
                  a.append(o).append(s),
                  e.append(a),
                  r.append(e),
                  r
                );
              },
            },
            {
              key: "handleOption",
              value: function (t, e) {
                var n = $('.fieldgroup[group-type="action-select"] select');
                if (0 < n.length) {
                  var i = n.find('option[value="' + t + '"]');
                  if (0 < i.length) {
                    "disable" == e && i.attr("disabled", "disabled"),
                      "enable" == e &&
                        i
                          .removeAttr("disabled")
                          .closest(".input-group")
                          .removeClass("disable");
                    var r = n.find("option:not([disabled])");
                    0 < r.length
                      ? n.val(r.val())
                      : n.closest(".input-group").addClass("disable");
                  }
                }
              },
            },
            {
              key: "addAction",
              value: function (e, n, t) {
                var i = this,
                  r = i.definitions[e];
                if (
                  !(
                    void 0 === r ||
                    0 <
                      $(
                        '.fieldgroup[action-type-id="' + r.action_type_id + '"]'
                      ).length
                  )
                ) {
                  var a = $(
                    '<div class="fieldgroup" group-type="action" action-type="' +
                      r.action_type +
                      '" action-type-id="' +
                      r.action_type_id +
                      '"></div>"'
                  );
                  if (!0 !== t) {
                    i.handleOption(e, "disable");
                    var o = $('<button class="remove-button"></button>');
                    if (
                      (o.on("click", function (t) {
                        t.preventDefault(),
                          a.remove(),
                          i.handleOption(e, "enable");
                      }),
                      a
                        .append(
                          '<div class="fieldholder"><h3>' +
                            r.name +
                            "</h3></div>"
                        )
                        .append(o),
                      0 == r.parameters.length)
                    ) {
                      var s = $('<i class="help-icon"></i>');
                      s.on("click", function () {
                        MIR.ui.helptext(r.help, r.name, !0);
                      }),
                        a.find("h3").append(s);
                    }
                  }
                  return (
                    r.parameters.forEach(function (t) {
                      a.append(i.addParameter(t, n, r.action_type_id));
                    }),
                    a
                  );
                }
              },
            },
            {
              key: "addParameter",
              value: function (t, e, n) {
                var i = $(
                    '<div class="fieldholder" parameter-id="' +
                      t.id +
                      '"></div>'
                  ),
                  r = $(
                    '<label for="param_' +
                      t.id +
                      '" class="label">' +
                      t.name +
                      "</label>"
                  ),
                  a = $('<i class="help-icon"></i>');
                a.on("click", function () {
                  MIR.ui.helptext(t.help, t.name, !0);
                }),
                  r.append(a),
                  i.append(r);
                var o = {
                  field: "input",
                  attributes: {
                    type: "text",
                    name: t.id,
                    class: "input parameter",
                  },
                };
                ("float" != t.type.toLowerCase() &&
                  "int" != t.type.toLowerCase()) ||
                  (o.attributes.type = "number"),
                  ("reference" != t.type.toLowerCase() &&
                    "selection" != t.type.toLowerCase()) ||
                    ((o.field = "select"),
                    (o.attributes = {
                      class: "select parameter",
                      name: t.id,
                    })),
                  -1 != this.hidden_parameters.indexOf(t.id) &&
                    i.addClass("hidden");
                var s = "",
                  l = "";
                if (
                  (void 0 !== t.constraints.default &&
                    (s = t.constraints.default),
                  "object" == j(e.actions) && 0 < e.actions.length)
                ) {
                  var c = this.getActionFromShape(n, e);
                  if (c) {
                    var u = this.getParameterFromAction(t.id, c);
                    u &&
                      (void 0 !== u.value && (s = u.value),
                      void 0 !== u.guid && (l = u.guid));
                  }
                }
                if ("input" == o.field) {
                  var p = $("<input mir-validate />");
                  (o.attributes.value = s),
                    (o.attributes["parameter-guid"] = l),
                    "object" == j(t.constraints) &&
                      (void 0 !== t.constraints.step &&
                        "any" != t.constraints.step &&
                        (o.attributes.step = t.constraints.step),
                      void 0 !== t.constraints.min &&
                        (o.attributes.min = t.constraints.min),
                      void 0 !== t.constraints.max &&
                        (o.attributes.max = t.constraints.max)),
                    p.attr(o.attributes),
                    i.append(p);
                }
                if ("select" == o.field) {
                  var d = $("<select mir-validate></select>");
                  void 0 !== t.constraints.choices &&
                    t.constraints.choices.forEach(function (t) {
                      d.append(
                        '<option value="' +
                          t.value +
                          '">' +
                          t.name +
                          "</option>"
                      );
                    }),
                    d.attr(o.attributes),
                    i.append(d),
                    "" != s && d.val(s);
                }
                return i;
              },
            },
            {
              key: "save",
              value: function (t) {
                var e = $(t);
                if (!this.validateParameters(e)) return !1;
                var n = e.closest(".mapcontainer");
                if (n.length <= 0)
                  return (
                    console.warn(
                      "Warning! Mapcontainer element could not be found!"
                    ),
                    !1
                  );
                var i = n.attr("data-current-layer"),
                  r = n.attr("shape-index"),
                  a = n.attr("data-element-id");
                if (
                  void 0 ===
                  window["map_" + a + "_metadata"].layers[i].shapes[r]
                )
                  return (
                    console.warn(
                      "Warning! Shape was not found in the map metadata!"
                    ),
                    !1
                  );
                var o = e.find('input[name="areaevent_name"]').val();
                window["map_" + a + "_metadata"].layers[i].shapes[r].name = o;
                var s = [];
                return (
                  e.find('.fieldgroup[group-type="action"]').each(function () {
                    var t = $(this),
                      e = {};
                    e.type_id = parseInt(t.attr("action-type-id"));
                    var n = [];
                    $(this)
                      .find(".parameter")
                      .each(function () {
                        var t = $(this);
                        n.push({
                          name: t.attr("name"),
                          value: isNaN(t.val()) ? t.val() : parseFloat(t.val()),
                        });
                      }),
                      (e.parameters = n),
                      s.push(e);
                  }),
                  (window["map_" + a + "_metadata"].layers[i].shapes[
                    r
                  ].actions = s),
                  !0
                );
              },
            },
            {
              key: "validateParameters",
              value: function (t) {
                var n = !0;
                return (
                  t.find(".fielderror").remove(),
                  t.find(".error").removeClass("error"),
                  t.find("[mir-validate]").each(function () {
                    var e = $(this),
                      t = new MIR.ui.input_validate($(this)[0], {
                        not_empty: !0,
                      });
                    0 < t.errors.length &&
                      ((n = !1),
                      e.closest(".fieldgroup").addClass("error"),
                      t.errors.forEach(function (t) {
                        e.addClass("error").after(
                          '<div class="fielderror show"><p>' + t + "</p></div>"
                        );
                      }));
                  }),
                  0 == t.find('.fieldgroup[group-type="action"]').length &&
                    ($(
                      '.fieldgroup[group-type="action-select"] .fieldholder'
                    ).append(
                      '<div class="fielderror show"><p>' +
                        mir_translate(
                          "shared_popup_dialog_map_areaevent_no_action_selected"
                        ) +
                        "</p></div>"
                    ),
                    (n = !1)),
                  n
                );
              },
            },
            {
              key: "parsedAreas",
              get: function () {
                var e = {};
                return (
                  this.areas.forEach(function (t) {
                    e[t.legacyName] = "areaevents_" + t.legacyName;
                  }),
                  e
                );
              },
            },
          ]),
          t
        );
      })(),
      shared_data: {
        session_importer: Z,
      },
      table: X,
      session_importer_info: {
        data: function () {
          return Z;
        },
        computed: {
          is_busy: function () {
            return this.status === A.constants.status.BUSY;
          },
          is_error: function () {
            return this.status === A.constants.status.ERROR;
          },
        },
        methods: {
          cancel_import: function () {
            Y({
              title: mir_translate("shared_popup_cancel_site_import_title"),
              body: mir_translate("shared_popup_cancel_site_import_message"),
            })
              .then(function () {
                $.getJSON("?mode=cancel-session-import", function () {
                  window.location.reload();
                });
              })
              .catch(function () {});
          },
          clear_error: function () {
            $.getJSON("?mode=cancel-session-import", function () {});
          },
        },
        template:
          '\n<div class="v-session-importer-info" v-if="is_busy || is_error">\n    <div v-if="is_busy">\n        <div>{{ _(\'shared_action_menu_site_import_stats_menu_item %(sessions_imported)s / %(sessions_total)s\', {sessions_imported, sessions_total}) }}</div>\n        <br><span class="mir-btn mir-btn-sm mir-red" v-on:click="cancel_import"> {{ _(\'Cancel\') }}</span>\n    </div>\n    <div v-else-if="is_error">\n        <div>{{ _(error_message) }}</div>\n        <br><span class="mir-btn mir-btn-sm mir-red" v-on:click="clear_error">{{ _(\'Clear\') }}</span>\n    </div>\n</div>',
      },
    },
    tt = {
      session_using: "",
      session_user: m.get("PHPSESSID"),
      user_token: m.get("joystick_token"),
      extended_safety_data: {
        is_enabled: !1,
        key_state: "",
        safety_is_muted: !1,
        is_in_manual: !1,
        is_manual_mode_restart_required: !1,
      },
      claim: function (t) {
        "" != t &&
          ((this.user_token = t),
          m.set("joystick_token", t, {
            expires: 7,
          }));
      },
      checkClaim: function () {
        if (this.extended_safety_data.is_enabled) {
          if ("manual" != this.extended_safety_data.key_state)
            return "wait_for_key";
          if (
            "" != this.session_using &&
            this.session_using == this.session_user &&
            1 == this.extended_safety_data.is_manual_mode_restart_required
          )
            return "wait_for_button_override";
        }
        return "" != this.session_using &&
          this.session_using == this.session_user
          ? "claimed"
          : "" != this.session_using && this.session_using != this.session_user
          ? "locked"
          : 0 < robot_errors.length
          ? "robot_has_errors"
          : "ready";
      },
    };
  return ((J = {
    apis: {
      robot: {
        base_url: "/api",
        version: "v2.0.0",
      },
    },
    default_api: "robot",
  }),
  (V = null),
  {
    get: function () {
      if (null === V) {
        var t = $.extend(v, J),
          e = new r(t.apis),
          n = e.call(t.default_api);
        V = {
          apis: e,
          api: n,
          components: Q,
          config: t,
          constants: f,
          cookie: m,
          log: g,
          math: O,
          ros: S,
          storage: k,
          t: C,
          runtime: {},
          ui: W,
          util: z,
          joystick: tt,
          validate: u,
          product: {},
        };
      }
      return V;
    },
  }).get();
})();
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define(t)
    : (e.Vue = t());
})(this, function () {
  "use strict";
  var y = Object.freeze({});
  function M(e) {
    return null == e;
  }
  function D(e) {
    return null != e;
  }
  function S(e) {
    return !0 === e;
  }
  function T(e) {
    return (
      "string" == typeof e ||
      "number" == typeof e ||
      "symbol" == typeof e ||
      "boolean" == typeof e
    );
  }
  function P(e) {
    return null !== e && "object" == typeof e;
  }
  var r = Object.prototype.toString;
  function l(e) {
    return "[object Object]" === r.call(e);
  }
  function i(e) {
    var t = parseFloat(String(e));
    return 0 <= t && Math.floor(t) === t && isFinite(e);
  }
  function t(e) {
    return null == e
      ? ""
      : "object" == typeof e
      ? JSON.stringify(e, null, 2)
      : String(e);
  }
  function F(e) {
    var t = parseFloat(e);
    return isNaN(t) ? e : t;
  }
  function s(e, t) {
    for (
      var n = Object.create(null), r = e.split(","), i = 0;
      i < r.length;
      i++
    )
      n[r[i]] = !0;
    return t
      ? function (e) {
          return n[e.toLowerCase()];
        }
      : function (e) {
          return n[e];
        };
  }
  var u = s("slot,component", !0),
    c = s("key,ref,slot,slot-scope,is");
  function f(e, t) {
    if (e.length) {
      var n = e.indexOf(t);
      if (-1 < n) return e.splice(n, 1);
    }
  }
  var n = Object.prototype.hasOwnProperty;
  function p(e, t) {
    return n.call(e, t);
  }
  function e(t) {
    var n = Object.create(null);
    return function (e) {
      return n[e] || (n[e] = t(e));
    };
  }
  var o = /-(\w)/g,
    C = e(function (e) {
      return e.replace(o, function (e, t) {
        return t ? t.toUpperCase() : "";
      });
    }),
    a = e(function (e) {
      return e.charAt(0).toUpperCase() + e.slice(1);
    }),
    d = /\B([A-Z])/g,
    g = e(function (e) {
      return e.replace(d, "-$1").toLowerCase();
    }),
    v = Function.prototype.bind
      ? function (e, t) {
          return e.bind(t);
        }
      : function (n, r) {
          function e(e) {
            var t = arguments.length;
            return t
              ? 1 < t
                ? n.apply(r, arguments)
                : n.call(r, e)
              : n.call(r);
          }
          return (e._length = n.length), e;
        };
  function h(e, t) {
    t = t || 0;
    for (var n = e.length - t, r = new Array(n); n--; ) r[n] = e[n + t];
    return r;
  }
  function m(e, t) {
    for (var n in t) e[n] = t[n];
    return e;
  }
  function _(e) {
    for (var t = {}, n = 0; n < e.length; n++) e[n] && m(t, e[n]);
    return t;
  }
  function b(e, t, n) {}
  function O(e, t, n) {
    return !1;
  }
  var $ = function (e) {
    return e;
  };
  function w(t, n) {
    if (t === n) return !0;
    var e = P(t),
      r = P(n);
    if (!e || !r) return !e && !r && String(t) === String(n);
    try {
      var i = Array.isArray(t),
        o = Array.isArray(n);
      if (i && o)
        return (
          t.length === n.length &&
          t.every(function (e, t) {
            return w(e, n[t]);
          })
        );
      if (i || o) return !1;
      var a = Object.keys(t),
        s = Object.keys(n);
      return (
        a.length === s.length &&
        a.every(function (e) {
          return w(t[e], n[e]);
        })
      );
    } catch (e) {
      return !1;
    }
  }
  function x(e, t) {
    for (var n = 0; n < e.length; n++) if (w(e[n], t)) return n;
    return -1;
  }
  function R(e) {
    var t = !1;
    return function () {
      t || ((t = !0), e.apply(this, arguments));
    };
  }
  var E = "data-server-rendered",
    k = ["component", "directive", "filter"],
    A = [
      "beforeCreate",
      "created",
      "beforeMount",
      "mounted",
      "beforeUpdate",
      "updated",
      "beforeDestroy",
      "destroyed",
      "activated",
      "deactivated",
      "errorCaptured",
    ],
    j = {
      optionMergeStrategies: Object.create(null),
      silent: !1,
      productionTip: !1,
      devtools: !1,
      performance: !1,
      errorHandler: null,
      warnHandler: null,
      ignoredElements: [],
      keyCodes: Object.create(null),
      isReservedTag: O,
      isReservedAttr: O,
      isUnknownElement: O,
      getTagNamespace: b,
      parsePlatformTagName: $,
      mustUseProp: O,
      _lifecycleHooks: A,
    };
  function N(e, t, n, r) {
    Object.defineProperty(e, t, {
      value: n,
      enumerable: !!r,
      writable: !0,
      configurable: !0,
    });
  }
  var L,
    I = /[^\w.$]/,
    H = "__proto__" in {},
    B = "undefined" != typeof window,
    U = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform,
    V = U && WXEnvironment.platform.toLowerCase(),
    z = B && window.navigator.userAgent.toLowerCase(),
    K = z && /msie|trident/.test(z),
    J = z && 0 < z.indexOf("msie 9.0"),
    q = z && 0 < z.indexOf("edge/"),
    W =
      (z && z.indexOf("android"),
      (z && /iphone|ipad|ipod|ios/.test(z)) || "ios" === V),
    G = (z && /chrome\/\d+/.test(z), {}.watch),
    Z = !1;
  if (B)
    try {
      var X = {};
      Object.defineProperty(X, "passive", {
        get: function () {
          Z = !0;
        },
      }),
        window.addEventListener("test-passive", null, X);
    } catch (e) {}
  var Y = function () {
      return (
        void 0 === L &&
          (L =
            !B &&
            !U &&
            "undefined" != typeof global &&
            "server" === global.process.env.VUE_ENV),
        L
      );
    },
    Q = B && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;
  function ee(e) {
    return "function" == typeof e && /native code/.test(e.toString());
  }
  var te,
    ne =
      "undefined" != typeof Symbol &&
      ee(Symbol) &&
      "undefined" != typeof Reflect &&
      ee(Reflect.ownKeys);
  function re() {
    this.set = Object.create(null);
  }
  te =
    "undefined" != typeof Set && ee(Set)
      ? Set
      : ((re.prototype.has = function (e) {
          return !0 === this.set[e];
        }),
        (re.prototype.add = function (e) {
          this.set[e] = !0;
        }),
        (re.prototype.clear = function () {
          this.set = Object.create(null);
        }),
        re);
  var ie = b,
    oe = 0,
    ae = function () {
      (this.id = oe++), (this.subs = []);
    };
  (ae.prototype.addSub = function (e) {
    this.subs.push(e);
  }),
    (ae.prototype.removeSub = function (e) {
      f(this.subs, e);
    }),
    (ae.prototype.depend = function () {
      ae.target && ae.target.addDep(this);
    }),
    (ae.prototype.notify = function () {
      for (var e = this.subs.slice(), t = 0, n = e.length; t < n; t++)
        e[t].update();
    }),
    (ae.target = null);
  var se = [];
  function ce(e) {
    ae.target && se.push(ae.target), (ae.target = e);
  }
  function le() {
    ae.target = se.pop();
  }
  var ue = function (e, t, n, r, i, o, a, s) {
      (this.tag = e),
        (this.data = t),
        (this.children = n),
        (this.text = r),
        (this.elm = i),
        (this.ns = void 0),
        (this.context = o),
        (this.fnContext = void 0),
        (this.fnOptions = void 0),
        (this.fnScopeId = void 0),
        (this.key = t && t.key),
        (this.componentOptions = a),
        (this.componentInstance = void 0),
        (this.parent = void 0),
        (this.raw = !1),
        (this.isStatic = !1),
        (this.isRootInsert = !0),
        (this.isComment = !1),
        (this.isCloned = !1),
        (this.isOnce = !1),
        (this.asyncFactory = s),
        (this.asyncMeta = void 0),
        (this.isAsyncPlaceholder = !1);
    },
    fe = {
      child: {
        configurable: !0,
      },
    };
  (fe.child.get = function () {
    return this.componentInstance;
  }),
    Object.defineProperties(ue.prototype, fe);
  var pe = function (e) {
    void 0 === e && (e = "");
    var t = new ue();
    return (t.text = e), (t.isComment = !0), t;
  };
  function de(e) {
    return new ue(void 0, void 0, void 0, String(e));
  }
  function ve(e) {
    var t = new ue(
      e.tag,
      e.data,
      e.children,
      e.text,
      e.elm,
      e.context,
      e.componentOptions,
      e.asyncFactory
    );
    return (
      (t.ns = e.ns),
      (t.isStatic = e.isStatic),
      (t.key = e.key),
      (t.isComment = e.isComment),
      (t.fnContext = e.fnContext),
      (t.fnOptions = e.fnOptions),
      (t.fnScopeId = e.fnScopeId),
      (t.isCloned = !0),
      t
    );
  }
  var he = Array.prototype,
    me = Object.create(he);
  ["push", "pop", "shift", "unshift", "splice", "sort", "reverse"].forEach(
    function (o) {
      var a = he[o];
      N(me, o, function () {
        for (var e = [], t = arguments.length; t--; ) e[t] = arguments[t];
        var n,
          r = a.apply(this, e),
          i = this.__ob__;
        switch (o) {
          case "push":
          case "unshift":
            n = e;
            break;
          case "splice":
            n = e.slice(2);
        }
        return n && i.observeArray(n), i.dep.notify(), r;
      });
    }
  );
  var ye = Object.getOwnPropertyNames(me),
    ge = !0;
  function _e(e) {
    ge = e;
  }
  var be = function (e) {
    (this.value = e),
      (this.dep = new ae()),
      (this.vmCount = 0),
      N(e, "__ob__", this),
      Array.isArray(e)
        ? ((H
            ? function (e, t, n) {
                e.__proto__ = t;
              }
            : function (e, t, n) {
                for (var r = 0, i = n.length; r < i; r++) {
                  var o = n[r];
                  N(e, o, t[o]);
                }
              })(e, me, ye),
          this.observeArray(e))
        : this.walk(e);
  };
  function $e(e, t) {
    var n;
    if (P(e) && !(e instanceof ue))
      return (
        p(e, "__ob__") && e.__ob__ instanceof be
          ? (n = e.__ob__)
          : ge &&
            !Y() &&
            (Array.isArray(e) || l(e)) &&
            Object.isExtensible(e) &&
            !e._isVue &&
            (n = new be(e)),
        t && n && n.vmCount++,
        n
      );
  }
  function we(n, e, r, t, i) {
    var o = new ae(),
      a = Object.getOwnPropertyDescriptor(n, e);
    if (!a || !1 !== a.configurable) {
      var s = a && a.get;
      s || 2 !== arguments.length || (r = n[e]);
      var c = a && a.set,
        l = !i && $e(r);
      Object.defineProperty(n, e, {
        enumerable: !0,
        configurable: !0,
        get: function () {
          var e = s ? s.call(n) : r;
          return (
            ae.target &&
              (o.depend(),
              l &&
                (l.dep.depend(),
                Array.isArray(e) &&
                  (function e(t) {
                    for (var n = void 0, r = 0, i = t.length; r < i; r++)
                      (n = t[r]) && n.__ob__ && n.__ob__.dep.depend(),
                        Array.isArray(n) && e(n);
                  })(e))),
            e
          );
        },
        set: function (e) {
          var t = s ? s.call(n) : r;
          e === t ||
            (e != e && t != t) ||
            (c ? c.call(n, e) : (r = e), (l = !i && $e(e)), o.notify());
        },
      });
    }
  }
  function Ce(e, t, n) {
    if (Array.isArray(e) && i(t))
      return (e.length = Math.max(e.length, t)), e.splice(t, 1, n), n;
    if (t in e && !(t in Object.prototype)) return (e[t] = n);
    var r = e.__ob__;
    return e._isVue || (r && r.vmCount)
      ? n
      : r
      ? (we(r.value, t, n), r.dep.notify(), n)
      : (e[t] = n);
  }
  function xe(e, t) {
    if (Array.isArray(e) && i(t)) e.splice(t, 1);
    else {
      var n = e.__ob__;
      e._isVue ||
        (n && n.vmCount) ||
        (p(e, t) && (delete e[t], n && n.dep.notify()));
    }
  }
  (be.prototype.walk = function (e) {
    for (var t = Object.keys(e), n = 0; n < t.length; n++) we(e, t[n]);
  }),
    (be.prototype.observeArray = function (e) {
      for (var t = 0, n = e.length; t < n; t++) $e(e[t]);
    });
  var ke = j.optionMergeStrategies;
  function Ae(e, t) {
    if (!t) return e;
    for (var n, r, i, o = Object.keys(t), a = 0; a < o.length; a++)
      (r = e[(n = o[a])]),
        (i = t[n]),
        p(e, n) ? l(r) && l(i) && Ae(r, i) : Ce(e, n, i);
    return e;
  }
  function Oe(n, r, i) {
    return i
      ? function () {
          var e = "function" == typeof r ? r.call(i, i) : r,
            t = "function" == typeof n ? n.call(i, i) : n;
          return e ? Ae(e, t) : t;
        }
      : r
      ? n
        ? function () {
            return Ae(
              "function" == typeof r ? r.call(this, this) : r,
              "function" == typeof n ? n.call(this, this) : n
            );
          }
        : r
      : n;
  }
  function Se(e, t) {
    return t ? (e ? e.concat(t) : Array.isArray(t) ? t : [t]) : e;
  }
  function Te(e, t, n, r) {
    var i = Object.create(e || null);
    return t ? m(i, t) : i;
  }
  (ke.data = function (e, t, n) {
    return n ? Oe(e, t, n) : t && "function" != typeof t ? e : Oe(e, t);
  }),
    A.forEach(function (e) {
      ke[e] = Se;
    }),
    k.forEach(function (e) {
      ke[e + "s"] = Te;
    }),
    (ke.watch = function (e, t, n, r) {
      if ((e === G && (e = void 0), t === G && (t = void 0), !t))
        return Object.create(e || null);
      if (!e) return t;
      var i = {};
      for (var o in (m(i, e), t)) {
        var a = i[o],
          s = t[o];
        a && !Array.isArray(a) && (a = [a]),
          (i[o] = a ? a.concat(s) : Array.isArray(s) ? s : [s]);
      }
      return i;
    }),
    (ke.props = ke.methods = ke.inject = ke.computed = function (e, t, n, r) {
      if (!e) return t;
      var i = Object.create(null);
      return m(i, e), t && m(i, t), i;
    }),
    (ke.provide = Oe);
  var Ee = function (e, t) {
    return void 0 === t ? e : t;
  };
  function je(n, r, i) {
    "function" == typeof r && (r = r.options),
      (function (e) {
        var t = e.props;
        if (t) {
          var n,
            r,
            i = {};
          if (Array.isArray(t))
            for (n = t.length; n--; )
              "string" == typeof (r = t[n]) &&
                (i[C(r)] = {
                  type: null,
                });
          else if (l(t))
            for (var o in t)
              (r = t[o]),
                (i[C(o)] = l(r)
                  ? r
                  : {
                      type: r,
                    });
          e.props = i;
        }
      })(r),
      (function (e) {
        var t = e.inject;
        if (t) {
          var n = (e.inject = {});
          if (Array.isArray(t))
            for (var r = 0; r < t.length; r++)
              n[t[r]] = {
                from: t[r],
              };
          else if (l(t))
            for (var i in t) {
              var o = t[i];
              n[i] = l(o)
                ? m(
                    {
                      from: i,
                    },
                    o
                  )
                : {
                    from: o,
                  };
            }
        }
      })(r),
      (function () {
        var e = r.directives;
        if (e)
          for (var t in e) {
            var n = e[t];
            "function" == typeof n &&
              (e[t] = {
                bind: n,
                update: n,
              });
          }
      })();
    var e = r.extends;
    if ((e && (n = je(n, e, i)), r.mixins))
      for (var t = 0, o = r.mixins.length; t < o; t++)
        n = je(n, r.mixins[t], i);
    var a,
      s = {};
    for (a in n) c(a);
    for (a in r) p(n, a) || c(a);
    function c(e) {
      var t = ke[e] || Ee;
      s[e] = t(n[e], r[e], i, e);
    }
    return s;
  }
  function Ne(e, t, n) {
    if ("string" == typeof n) {
      var r = e[t];
      if (p(r, n)) return r[n];
      var i = C(n);
      if (p(r, i)) return r[i];
      var o = a(i);
      return p(r, o) ? r[o] : r[n] || r[i] || r[o];
    }
  }
  function Le(e, t, n, r) {
    var i = t[e],
      o = !p(n, e),
      a = n[e],
      s = De(Boolean, i.type);
    if (-1 < s)
      if (o && !p(i, "default")) a = !1;
      else if ("" === a || a === g(e)) {
        var c = De(String, i.type);
        (c < 0 || s < c) && (a = !0);
      }
    if (void 0 === a) {
      a = (function (e, t, n) {
        if (p(t, "default")) {
          var r = t.default;
          return e &&
            e.$options.propsData &&
            void 0 === e.$options.propsData[n] &&
            void 0 !== e._props[n]
            ? e._props[n]
            : "function" == typeof r && "Function" !== Ie(t.type)
            ? r.call(e)
            : r;
        }
      })(r, i, e);
      var l = ge;
      _e(!0), $e(a), _e(l);
    }
    return a;
  }
  function Ie(e) {
    var t = e && e.toString().match(/^\s*function (\w+)/);
    return t ? t[1] : "";
  }
  function Me(e, t) {
    return Ie(e) === Ie(t);
  }
  function De(e, t) {
    if (!Array.isArray(t)) return Me(t, e) ? 0 : -1;
    for (var n = 0, r = t.length; n < r; n++) if (Me(t[n], e)) return n;
    return -1;
  }
  function Pe(e, t, n) {
    if (t)
      for (var r = t; (r = r.$parent); ) {
        var i = r.$options.errorCaptured;
        if (i)
          for (var o = 0; o < i.length; o++)
            try {
              if (!1 === i[o].call(r, e, t, n)) return;
            } catch (e) {
              Fe(e, r, "errorCaptured hook");
            }
      }
    Fe(e, t, n);
  }
  function Fe(e, t, n) {
    if (j.errorHandler)
      try {
        return j.errorHandler.call(null, e, t, n);
      } catch (e) {
        Re(e, null, "config.errorHandler");
      }
    Re(e, t, n);
  }
  function Re(e) {
    if ((!B && !U) || "undefined" == typeof console) throw e;
    console.error(e);
  }
  var He,
    Be,
    Ue = [],
    Ve = !1;
  function ze() {
    Ve = !1;
    for (var e = Ue.slice(0), t = (Ue.length = 0); t < e.length; t++) e[t]();
  }
  var Ke = !1;
  if ("undefined" != typeof setImmediate && ee(setImmediate))
    Be = function () {
      setImmediate(ze);
    };
  else if (
    "undefined" == typeof MessageChannel ||
    (!ee(MessageChannel) &&
      "[object MessageChannelConstructor]" !== MessageChannel.toString())
  )
    Be = function () {
      setTimeout(ze, 0);
    };
  else {
    var Je = new MessageChannel(),
      qe = Je.port2;
    (Je.port1.onmessage = ze),
      (Be = function () {
        qe.postMessage(1);
      });
  }
  if ("undefined" != typeof Promise && ee(Promise)) {
    var We = Promise.resolve();
    He = function () {
      We.then(ze), W && setTimeout(b);
    };
  } else He = Be;
  function Ge(e, t) {
    var n;
    if (
      (Ue.push(function () {
        if (e)
          try {
            e.call(t);
          } catch (e) {
            Pe(e, t, "nextTick");
          }
        else n && n(t);
      }),
      Ve || ((Ve = !0), Ke ? Be() : He()),
      !e && "undefined" != typeof Promise)
    )
      return new Promise(function (e) {
        n = e;
      });
  }
  var Ze = new te();
  function Xe(e) {
    !(function e(t, n) {
      var r,
        i,
        o = Array.isArray(t);
      if (!((!o && !P(t)) || Object.isFrozen(t) || t instanceof ue)) {
        if (t.__ob__) {
          var a = t.__ob__.dep.id;
          if (n.has(a)) return;
          n.add(a);
        }
        if (o) for (r = t.length; r--; ) e(t[r], n);
        else for (r = (i = Object.keys(t)).length; r--; ) e(t[i[r]], n);
      }
    })(e, Ze),
      Ze.clear();
  }
  var Ye,
    Qe = e(function (e) {
      var t = "&" === e.charAt(0),
        n = "~" === (e = t ? e.slice(1) : e).charAt(0),
        r = "!" === (e = n ? e.slice(1) : e).charAt(0);
      return {
        name: (e = r ? e.slice(1) : e),
        once: n,
        capture: r,
        passive: t,
      };
    });
  function et(e) {
    function i() {
      var e = arguments,
        t = i.fns;
      if (!Array.isArray(t)) return t.apply(null, arguments);
      for (var n = t.slice(), r = 0; r < n.length; r++) n[r].apply(null, e);
    }
    return (i.fns = e), i;
  }
  function tt(e, t, n, r) {
    var i, o, a, s;
    for (i in e)
      (o = e[i]),
        (a = t[i]),
        (s = Qe(i)),
        M(o) ||
          (M(a)
            ? (M(o.fns) && (o = e[i] = et(o)),
              n(s.name, o, s.once, s.capture, s.passive, s.params))
            : o !== a && ((a.fns = o), (e[i] = a)));
    for (i in t) M(e[i]) && r((s = Qe(i)).name, t[i], s.capture);
  }
  function nt(e, t, n) {
    var r;
    e instanceof ue && (e = e.data.hook || (e.data.hook = {}));
    var i = e[t];
    function o() {
      n.apply(this, arguments), f(r.fns, o);
    }
    M(i)
      ? (r = et([o]))
      : D(i.fns) && S(i.merged)
      ? (r = i).fns.push(o)
      : (r = et([i, o])),
      (r.merged = !0),
      (e[t] = r);
  }
  function rt(e, t, n, r, i) {
    if (D(t)) {
      if (p(t, n)) return (e[n] = t[n]), i || delete t[n], !0;
      if (p(t, r)) return (e[n] = t[r]), i || delete t[r], !0;
    }
    return !1;
  }
  function it(e) {
    return T(e)
      ? [de(e)]
      : Array.isArray(e)
      ? (function e(t, n) {
          var r,
            i,
            o,
            a,
            s = [];
          for (r = 0; r < t.length; r++)
            M((i = t[r])) ||
              "boolean" == typeof i ||
              ((a = s[(o = s.length - 1)]),
              Array.isArray(i)
                ? 0 < i.length &&
                  (ot((i = e(i, (n || "") + "_" + r))[0]) &&
                    ot(a) &&
                    ((s[o] = de(a.text + i[0].text)), i.shift()),
                  s.push.apply(s, i))
                : T(i)
                ? ot(a)
                  ? (s[o] = de(a.text + i))
                  : "" !== i && s.push(de(i))
                : ot(i) && ot(a)
                ? (s[o] = de(a.text + i.text))
                : (S(t._isVList) &&
                    D(i.tag) &&
                    M(i.key) &&
                    D(n) &&
                    (i.key = "__vlist" + n + "_" + r + "__"),
                  s.push(i)));
          return s;
        })(e)
      : void 0;
  }
  function ot(e) {
    return D(e) && D(e.text) && !1 === e.isComment;
  }
  function at(e, t) {
    return (
      (e.__esModule || (ne && "Module" === e[Symbol.toStringTag])) &&
        (e = e.default),
      P(e) ? t.extend(e) : e
    );
  }
  function st(e) {
    return e.isComment && e.asyncFactory;
  }
  function ct(e) {
    if (Array.isArray(e))
      for (var t = 0; t < e.length; t++) {
        var n = e[t];
        if (D(n) && (D(n.componentOptions) || st(n))) return n;
      }
  }
  function lt(e, t, n) {
    n ? Ye.$once(e, t) : Ye.$on(e, t);
  }
  function ut(e, t) {
    Ye.$off(e, t);
  }
  function ft(e, t, n) {
    (Ye = e), tt(t, n || {}, lt, ut), (Ye = void 0);
  }
  function pt(e, t) {
    var n = {};
    if (!e) return n;
    for (var r = 0, i = e.length; r < i; r++) {
      var o = e[r],
        a = o.data;
      if (
        (a && a.attrs && a.attrs.slot && delete a.attrs.slot,
        (o.context !== t && o.fnContext !== t) || !a || null == a.slot)
      )
        (n.default || (n.default = [])).push(o);
      else {
        var s = a.slot,
          c = n[s] || (n[s] = []);
        "template" === o.tag ? c.push.apply(c, o.children || []) : c.push(o);
      }
    }
    for (var l in n) n[l].every(dt) && delete n[l];
    return n;
  }
  function dt(e) {
    return (e.isComment && !e.asyncFactory) || " " === e.text;
  }
  function vt(e, t) {
    t = t || {};
    for (var n = 0; n < e.length; n++)
      Array.isArray(e[n]) ? vt(e[n], t) : (t[e[n].key] = e[n].fn);
    return t;
  }
  var ht = null;
  function mt(e) {
    for (; (e = e && e.$parent); ) if (e._inactive) return !0;
    return !1;
  }
  function yt(e, t) {
    if (t) {
      if (((e._directInactive = !1), mt(e))) return;
    } else if (e._directInactive) return;
    if (e._inactive || null === e._inactive) {
      e._inactive = !1;
      for (var n = 0; n < e.$children.length; n++) yt(e.$children[n]);
      gt(e, "activated");
    }
  }
  function gt(e, t) {
    ce();
    var n = e.$options[t];
    if (n)
      for (var r = 0, i = n.length; r < i; r++)
        try {
          n[r].call(e);
        } catch (n) {
          Pe(n, e, t + " hook");
        }
    e._hasHookEvent && e.$emit("hook:" + t), le();
  }
  var _t = [],
    bt = [],
    $t = {},
    wt = !1,
    Ct = !1,
    xt = 0;
  function kt() {
    var e, t;
    for (
      Ct = !0,
        _t.sort(function (e, t) {
          return e.id - t.id;
        }),
        xt = 0;
      xt < _t.length;
      xt++
    )
      (t = (e = _t[xt]).id), ($t[t] = null), e.run();
    var n = bt.slice(),
      r = _t.slice();
    (xt = _t.length = bt.length = 0),
      (wt = Ct = !($t = {})),
      (function (e) {
        for (var t = 0; t < e.length; t++) (e[t]._inactive = !0), yt(e[t], !0);
      })(n),
      (function (e) {
        for (var t = e.length; t--; ) {
          var n = e[t],
            r = n.vm;
          r._watcher === n && r._isMounted && gt(r, "updated");
        }
      })(r),
      Q && j.devtools && Q.emit("flush");
  }
  function At(e, t, n, r, i) {
    (this.vm = e),
      i && (e._watcher = this),
      e._watchers.push(this),
      r
        ? ((this.deep = !!r.deep),
          (this.user = !!r.user),
          (this.lazy = !!r.lazy),
          (this.sync = !!r.sync))
        : (this.deep = this.user = this.lazy = this.sync = !1),
      (this.cb = n),
      (this.id = ++Ot),
      (this.active = !0),
      (this.dirty = this.lazy),
      (this.deps = []),
      (this.newDeps = []),
      (this.depIds = new te()),
      (this.newDepIds = new te()),
      (this.expression = ""),
      "function" == typeof t
        ? (this.getter = t)
        : ((this.getter = (function (e) {
            if (!I.test(e)) {
              var n = e.split(".");
              return function (e) {
                for (var t = 0; t < n.length; t++) {
                  if (!e) return;
                  e = e[n[t]];
                }
                return e;
              };
            }
          })(t)),
          this.getter || (this.getter = function () {})),
      (this.value = this.lazy ? void 0 : this.get());
  }
  var Ot = 0;
  (At.prototype.get = function () {
    var e;
    ce(this);
    var t = this.vm;
    try {
      e = this.getter.call(t, t);
    } catch (e) {
      if (!this.user) throw e;
      Pe(e, t, 'getter for watcher "' + this.expression + '"');
    } finally {
      this.deep && Xe(e), le(), this.cleanupDeps();
    }
    return e;
  }),
    (At.prototype.addDep = function (e) {
      var t = e.id;
      this.newDepIds.has(t) ||
        (this.newDepIds.add(t),
        this.newDeps.push(e),
        this.depIds.has(t) || e.addSub(this));
    }),
    (At.prototype.cleanupDeps = function () {
      for (var e = this.deps.length; e--; ) {
        var t = this.deps[e];
        this.newDepIds.has(t.id) || t.removeSub(this);
      }
      var n = this.depIds;
      (this.depIds = this.newDepIds),
        (this.newDepIds = n),
        this.newDepIds.clear(),
        (n = this.deps),
        (this.deps = this.newDeps),
        (this.newDeps = n),
        (this.newDeps.length = 0);
    }),
    (At.prototype.update = function () {
      this.lazy
        ? (this.dirty = !0)
        : this.sync
        ? this.run()
        : (function (e) {
            var t = e.id;
            if (null == $t[t]) {
              if ((($t[t] = !0), Ct)) {
                for (var n = _t.length - 1; xt < n && _t[n].id > e.id; ) n--;
                _t.splice(n + 1, 0, e);
              } else _t.push(e);
              wt || ((wt = !0), Ge(kt));
            }
          })(this);
    }),
    (At.prototype.run = function () {
      if (this.active) {
        var e = this.get();
        if (e !== this.value || P(e) || this.deep) {
          var t = this.value;
          if (((this.value = e), this.user))
            try {
              this.cb.call(this.vm, e, t);
            } catch (e) {
              Pe(e, this.vm, 'callback for watcher "' + this.expression + '"');
            }
          else this.cb.call(this.vm, e, t);
        }
      }
    }),
    (At.prototype.evaluate = function () {
      (this.value = this.get()), (this.dirty = !1);
    }),
    (At.prototype.depend = function () {
      for (var e = this.deps.length; e--; ) this.deps[e].depend();
    }),
    (At.prototype.teardown = function () {
      if (this.active) {
        this.vm._isBeingDestroyed || f(this.vm._watchers, this);
        for (var e = this.deps.length; e--; ) this.deps[e].removeSub(this);
        this.active = !1;
      }
    });
  var St = {
    enumerable: !0,
    configurable: !0,
    get: b,
    set: b,
  };
  function Tt(e, t, n) {
    (St.get = function () {
      return this[t][n];
    }),
      (St.set = function (e) {
        this[t][n] = e;
      }),
      Object.defineProperty(e, n, St);
  }
  var Et = {
    lazy: !0,
  };
  function jt(e, t, n) {
    var r = !Y();
    "function" == typeof n
      ? ((St.get = r ? Nt(t) : n), (St.set = b))
      : ((St.get = n.get ? (r && !1 !== n.cache ? Nt(t) : n.get) : b),
        (St.set = n.set ? n.set : b)),
      Object.defineProperty(e, t, St);
  }
  function Nt(t) {
    return function () {
      var e = this._computedWatchers && this._computedWatchers[t];
      if (e) return e.dirty && e.evaluate(), ae.target && e.depend(), e.value;
    };
  }
  function Lt(e, t, n, r) {
    return (
      l(n) && (n = (r = n).handler),
      "string" == typeof n && (n = e[n]),
      e.$watch(t, n, r)
    );
  }
  function It(t, e) {
    if (t) {
      for (
        var n = Object.create(null),
          r = ne
            ? Reflect.ownKeys(t).filter(function (e) {
                return Object.getOwnPropertyDescriptor(t, e).enumerable;
              })
            : Object.keys(t),
          i = 0;
        i < r.length;
        i++
      ) {
        for (var o = r[i], a = t[o].from, s = e; s; ) {
          if (s._provided && p(s._provided, a)) {
            n[o] = s._provided[a];
            break;
          }
          s = s.$parent;
        }
        if (!s && "default" in t[o]) {
          var c = t[o].default;
          n[o] = "function" == typeof c ? c.call(e) : c;
        }
      }
      return n;
    }
  }
  function Mt(e, t) {
    var n, r, i, o, a;
    if (Array.isArray(e) || "string" == typeof e)
      for (n = new Array(e.length), r = 0, i = e.length; r < i; r++)
        n[r] = t(e[r], r);
    else if ("number" == typeof e)
      for (n = new Array(e), r = 0; r < e; r++) n[r] = t(r + 1, r);
    else if (P(e))
      for (
        o = Object.keys(e), n = new Array(o.length), r = 0, i = o.length;
        r < i;
        r++
      )
        (a = o[r]), (n[r] = t(e[a], a, r));
    return D(n) && (n._isVList = !0), n;
  }
  function Dt(e, t, n, r) {
    var i,
      o = this.$scopedSlots[e];
    if (o) (n = n || {}), r && (n = m(m({}, r), n)), (i = o(n) || t);
    else {
      var a = this.$slots[e];
      a && (a._rendered = !0), (i = a || t);
    }
    var s = n && n.slot;
    return s
      ? this.$createElement(
          "template",
          {
            slot: s,
          },
          i
        )
      : i;
  }
  function Pt(e) {
    return Ne(this.$options, "filters", e) || $;
  }
  function Ft(e, t) {
    return Array.isArray(e) ? -1 === e.indexOf(t) : e !== t;
  }
  function Rt(e, t, n, r, i) {
    var o = j.keyCodes[t] || n;
    return i && r && !j.keyCodes[t]
      ? Ft(i, r)
      : o
      ? Ft(o, e)
      : r
      ? g(r) !== t
      : void 0;
  }
  function Ht(n, r, i, o, a) {
    if (i && P(i)) {
      var s;
      Array.isArray(i) && (i = _(i));
      var e = function (t) {
        if ("class" === t || "style" === t || c(t)) s = n;
        else {
          var e = n.attrs && n.attrs.type;
          s =
            o || j.mustUseProp(r, e, t)
              ? n.domProps || (n.domProps = {})
              : n.attrs || (n.attrs = {});
        }
        t in s ||
          ((s[t] = i[t]),
          a &&
            ((n.on || (n.on = {}))["update:" + t] = function (e) {
              i[t] = e;
            }));
      };
      for (var t in i) e(t);
    }
    return n;
  }
  function Bt(e, t) {
    var n = this._staticTrees || (this._staticTrees = []),
      r = n[e];
    return (
      (r && !t) ||
        Vt(
          (r = n[e] = this.$options.staticRenderFns[e].call(
            this._renderProxy,
            null,
            this
          )),
          "__static__" + e,
          !1
        ),
      r
    );
  }
  function Ut(e, t, n) {
    return Vt(e, "__once__" + t + (n ? "_" + n : ""), !0), e;
  }
  function Vt(e, t, n) {
    if (Array.isArray(e))
      for (var r = 0; r < e.length; r++)
        e[r] && "string" != typeof e[r] && zt(e[r], t + "_" + r, n);
    else zt(e, t, n);
  }
  function zt(e, t, n) {
    (e.isStatic = !0), (e.key = t), (e.isOnce = n);
  }
  function Kt(e, t) {
    if (t && l(t)) {
      var n = (e.on = e.on ? m({}, e.on) : {});
      for (var r in t) {
        var i = n[r],
          o = t[r];
        n[r] = i ? [].concat(i, o) : o;
      }
    }
    return e;
  }
  function Jt(e) {
    (e._o = Ut),
      (e._n = F),
      (e._s = t),
      (e._l = Mt),
      (e._t = Dt),
      (e._q = w),
      (e._i = x),
      (e._m = Bt),
      (e._f = Pt),
      (e._k = Rt),
      (e._b = Ht),
      (e._v = de),
      (e._e = pe),
      (e._u = vt),
      (e._g = Kt);
  }
  function qt(e, t, n, o, r) {
    var a,
      s = r.options;
    p(o, "_uid")
      ? ((a = Object.create(o))._original = o)
      : (o = (a = o)._original);
    var i = S(s._compiled),
      c = !i;
    (this.data = e),
      (this.props = t),
      (this.children = n),
      (this.parent = o),
      (this.listeners = e.on || y),
      (this.injections = It(s.inject, o)),
      (this.slots = function () {
        return pt(n, o);
      }),
      i &&
        ((this.$options = s),
        (this.$slots = this.slots()),
        (this.$scopedSlots = e.scopedSlots || y)),
      s._scopeId
        ? (this._c = function (e, t, n, r) {
            var i = tn(a, e, t, n, r, c);
            return (
              i &&
                !Array.isArray(i) &&
                ((i.fnScopeId = s._scopeId), (i.fnContext = o)),
              i
            );
          })
        : (this._c = function (e, t, n, r) {
            return tn(a, e, t, n, r, c);
          });
  }
  function Wt(e, t, n, r) {
    var i = ve(e);
    return (
      (i.fnContext = n),
      (i.fnOptions = r),
      t.slot && ((i.data || (i.data = {})).slot = t.slot),
      i
    );
  }
  function Gt(e, t) {
    for (var n in t) e[C(n)] = t[n];
  }
  Jt(qt.prototype);
  var Zt = {
      init: function (e, t, n, r) {
        if (
          e.componentInstance &&
          !e.componentInstance._isDestroyed &&
          e.data.keepAlive
        ) {
          var i = e;
          Zt.prepatch(i, i);
        } else
          (e.componentInstance =
            ((a = {
              _isComponent: !0,
              parent: ht,
              _parentVnode: (o = e),
              _parentElm: n || null,
              _refElm: r || null,
            }),
            D((s = o.data.inlineTemplate)) &&
              ((a.render = s.render), (a.staticRenderFns = s.staticRenderFns)),
            new o.componentOptions.Ctor(a))).$mount(t ? e.elm : void 0, t);
        var o, a, s;
      },
      prepatch: function (e, t) {
        var n = t.componentOptions;
        !(function (e, t, n, r, i) {
          var o = !!(
            i ||
            e.$options._renderChildren ||
            r.data.scopedSlots ||
            e.$scopedSlots !== y
          );
          if (
            ((e.$options._parentVnode = r),
            (e.$vnode = r),
            e._vnode && (e._vnode.parent = r),
            (e.$options._renderChildren = i),
            (e.$attrs = r.data.attrs || y),
            (e.$listeners = n || y),
            t && e.$options.props)
          ) {
            _e(!1);
            for (
              var a = e._props, s = e.$options._propKeys || [], c = 0;
              c < s.length;
              c++
            ) {
              var l = s[c],
                u = e.$options.props;
              a[l] = Le(l, u, t, e);
            }
            _e(!0), (e.$options.propsData = t);
          }
          n = n || y;
          var f = e.$options._parentListeners;
          (e.$options._parentListeners = n),
            ft(e, n, f),
            o && ((e.$slots = pt(i, r.context)), e.$forceUpdate());
        })(
          (t.componentInstance = e.componentInstance),
          n.propsData,
          n.listeners,
          t,
          n.children
        );
      },
      insert: function (e) {
        var t,
          n = e.context,
          r = e.componentInstance;
        r._isMounted || ((r._isMounted = !0), gt(r, "mounted")),
          e.data.keepAlive &&
            (n._isMounted ? (((t = r)._inactive = !1), bt.push(t)) : yt(r, !0));
      },
      destroy: function (e) {
        var t = e.componentInstance;
        t._isDestroyed ||
          (e.data.keepAlive
            ? (function e(t, n) {
                if (
                  !((n && ((t._directInactive = !0), mt(t))) || t._inactive)
                ) {
                  t._inactive = !0;
                  for (var r = 0; r < t.$children.length; r++)
                    e(t.$children[r]);
                  gt(t, "deactivated");
                }
              })(t, !0)
            : t.$destroy());
      },
    },
    Xt = Object.keys(Zt);
  function Yt(s, e, t, n, r) {
    if (!M(s)) {
      var i = t.$options._base;
      if ((P(s) && (s = i.extend(s)), "function" == typeof s)) {
        var o, a, c, l, u, f, p;
        if (
          M(s.cid) &&
          void 0 ===
            (s = (function (t, n, e) {
              if (S(t.error) && D(t.errorComp)) return t.errorComp;
              if (D(t.resolved)) return t.resolved;
              if (S(t.loading) && D(t.loadingComp)) return t.loadingComp;
              if (!D(t.contexts)) {
                var r = (t.contexts = [e]),
                  i = !0,
                  o = function () {
                    for (var e = 0, t = r.length; e < t; e++)
                      r[e].$forceUpdate();
                  },
                  a = R(function (e) {
                    (t.resolved = at(e, n)), i || o();
                  }),
                  s = R(function (e) {
                    D(t.errorComp) && ((t.error = !0), o());
                  }),
                  c = t(a, s);
                return (
                  P(c) &&
                    ("function" == typeof c.then
                      ? M(t.resolved) && c.then(a, s)
                      : D(c.component) &&
                        "function" == typeof c.component.then &&
                        (c.component.then(a, s),
                        D(c.error) && (t.errorComp = at(c.error, n)),
                        D(c.loading) &&
                          ((t.loadingComp = at(c.loading, n)),
                          0 === c.delay
                            ? (t.loading = !0)
                            : setTimeout(function () {
                                M(t.resolved) &&
                                  M(t.error) &&
                                  ((t.loading = !0), o());
                              }, c.delay || 200)),
                        D(c.timeout) &&
                          setTimeout(function () {
                            M(t.resolved) && s(null);
                          }, c.timeout))),
                  (i = !1),
                  t.loading ? t.loadingComp : t.resolved
                );
              }
              t.contexts.push(e);
            })((o = s), i, t))
        )
          return (
            (a = o),
            (c = e),
            (l = t),
            (u = n),
            (f = r),
            ((p = pe()).asyncFactory = a),
            (p.asyncMeta = {
              data: c,
              context: l,
              children: u,
              tag: f,
            }),
            p
          );
        (e = e || {}),
          fn(s),
          D(e.model) &&
            (function (e, t) {
              var n = (e.model && e.model.prop) || "value",
                r = (e.model && e.model.event) || "input";
              (t.props || (t.props = {}))[n] = t.model.value;
              var i = t.on || (t.on = {});
              D(i[r])
                ? (i[r] = [t.model.callback].concat(i[r]))
                : (i[r] = t.model.callback);
            })(s.options, e);
        var d = (function (e) {
          var t = s.options.props;
          if (!M(t)) {
            var n = {},
              r = e.attrs,
              i = e.props;
            if (D(r) || D(i))
              for (var o in t) {
                var a = g(o);
                rt(n, i, o, a, !0) || rt(n, r, o, a, !1);
              }
            return n;
          }
        })(e);
        if (S(s.options.functional))
          return (function (e, t, n, r, i) {
            var o = e.options,
              a = {},
              s = o.props;
            if (D(s)) for (var c in s) a[c] = Le(c, s, t || y);
            else D(n.attrs) && Gt(a, n.attrs), D(n.props) && Gt(a, n.props);
            var l = new qt(n, a, i, r, e),
              u = o.render.call(null, l._c, l);
            if (u instanceof ue) return Wt(u, n, l.parent, o);
            if (Array.isArray(u)) {
              for (
                var f = it(u) || [], p = new Array(f.length), d = 0;
                d < f.length;
                d++
              )
                p[d] = Wt(f[d], n, l.parent, o);
              return p;
            }
          })(s, d, e, t, n);
        var v = e.on;
        if (((e.on = e.nativeOn), S(s.options.abstract))) {
          var h = e.slot;
          (e = {}), h && (e.slot = h);
        }
        !(function (e) {
          for (var t = e.hook || (e.hook = {}), n = 0; n < Xt.length; n++) {
            var r = Xt[n];
            t[r] = Zt[r];
          }
        })(e);
        var m = s.options.name || r;
        return new ue(
          "vue-component-" + s.cid + (m ? "-" + m : ""),
          e,
          void 0,
          void 0,
          void 0,
          t,
          {
            Ctor: s,
            propsData: d,
            listeners: v,
            tag: r,
            children: n,
          },
          o
        );
      }
    }
  }
  var Qt = 1,
    en = 2;
  function tn(e, t, n, r, i, o) {
    return (
      (Array.isArray(n) || T(n)) && ((i = r), (r = n), (n = void 0)),
      S(o) && (i = en),
      (function (e, t, n, r, i) {
        if (D(n) && D(n.__ob__)) return pe();
        if ((D(n) && D(n.is) && (t = n.is), !t)) return pe();
        var o, a, s, c;
        (Array.isArray(r) &&
          "function" == typeof r[0] &&
          (((n = n || {}).scopedSlots = {
            default: r[0],
          }),
          (r.length = 0)),
        i === en
          ? (r = it(r))
          : i === Qt &&
            (r = (function (e) {
              for (var t = 0; t < e.length; t++)
                if (Array.isArray(e[t]))
                  return Array.prototype.concat.apply([], e);
              return e;
            })(r)),
        "string" == typeof t)
          ? ((a = (e.$vnode && e.$vnode.ns) || j.getTagNamespace(t)),
            (o = j.isReservedTag(t)
              ? new ue(j.parsePlatformTagName(t), n, r, void 0, void 0, e)
              : D((s = Ne(e.$options, "components", t)))
              ? Yt(s, n, e, r, t)
              : new ue(t, n, r, void 0, void 0, e)))
          : (o = Yt(t, n, e, r));
        return Array.isArray(o)
          ? o
          : D(o)
          ? (D(a) &&
              (function e(t, n, r) {
                if (
                  ((t.ns = n),
                  "foreignObject" === t.tag && (r = !(n = void 0)),
                  D(t.children))
                )
                  for (var i = 0, o = t.children.length; i < o; i++) {
                    var a = t.children[i];
                    D(a.tag) &&
                      (M(a.ns) || (S(r) && "svg" !== a.tag)) &&
                      e(a, n, r);
                  }
              })(o, a),
            D(n) &&
              (P((c = n).style) && Xe(c.style), P(c.class) && Xe(c.class)),
            o)
          : pe();
      })(e, t, n, r, i)
    );
  }
  var nn,
    rn,
    on,
    an,
    sn,
    cn,
    ln,
    un = 0;
  function fn(e) {
    var t = e.options;
    if (e.super) {
      var n = fn(e.super);
      if (n !== e.superOptions) {
        e.superOptions = n;
        var r = (function (e) {
          var t,
            n = e.options,
            r = e.extendOptions,
            i = e.sealedOptions;
          for (var o in n)
            n[o] !== i[o] && ((t = t || {})[o] = pn(n[o], r[o], i[o]));
          return t;
        })(e);
        r && m(e.extendOptions, r),
          (t = e.options = je(n, e.extendOptions)).name &&
            (t.components[t.name] = e);
      }
    }
    return t;
  }
  function pn(e, t, n) {
    if (Array.isArray(e)) {
      var r = [];
      (n = Array.isArray(n) ? n : [n]), (t = Array.isArray(t) ? t : [t]);
      for (var i = 0; i < e.length; i++)
        (0 <= t.indexOf(e[i]) || n.indexOf(e[i]) < 0) && r.push(e[i]);
      return r;
    }
    return e;
  }
  function dn(e) {
    this._init(e);
  }
  function vn(e) {
    return e && (e.Ctor.options.name || e.tag);
  }
  function hn(e, t) {
    return Array.isArray(e)
      ? -1 < e.indexOf(t)
      : "string" == typeof e
      ? -1 < e.split(",").indexOf(t)
      : ((n = e), "[object RegExp]" === r.call(n) && e.test(t));
    var n;
  }
  function mn(e, t) {
    var n = e.cache,
      r = e.keys,
      i = e._vnode;
    for (var o in n) {
      var a = n[o];
      if (a) {
        var s = vn(a.componentOptions);
        s && !t(s) && yn(n, o, r, i);
      }
    }
  }
  function yn(e, t, n, r) {
    var i = e[t];
    !i || (r && i.tag === r.tag) || i.componentInstance.$destroy(),
      (e[t] = null),
      f(n, t);
  }
  (dn.prototype._init = function (e) {
    var t,
      n,
      r,
      i,
      o = this;
    (o._uid = un++),
      (o._isVue = !0),
      e && e._isComponent
        ? (function (e, t) {
            var n = (e.$options = Object.create(e.constructor.options)),
              r = t._parentVnode;
            (n.parent = t.parent),
              (n._parentVnode = r),
              (n._parentElm = t._parentElm),
              (n._refElm = t._refElm);
            var i = r.componentOptions;
            (n.propsData = i.propsData),
              (n._parentListeners = i.listeners),
              (n._renderChildren = i.children),
              (n._componentTag = i.tag),
              t.render &&
                ((n.render = t.render),
                (n.staticRenderFns = t.staticRenderFns));
          })(o, e)
        : (o.$options = je(fn(o.constructor), e || {}, o)),
      (function (e) {
        var t = e.$options,
          n = t.parent;
        if (n && !t.abstract) {
          for (; n.$options.abstract && n.$parent; ) n = n.$parent;
          n.$children.push(e);
        }
        (e.$parent = n),
          (e.$root = n ? n.$root : e),
          (e.$children = []),
          (e.$refs = {}),
          (e._watcher = null),
          (e._inactive = null),
          (e._directInactive = !1),
          (e._isMounted = !1),
          (e._isDestroyed = !1),
          (e._isBeingDestroyed = !1);
      })(((o._renderProxy = o)._self = o)),
      (function (e) {
        (e._events = Object.create(null)), (e._hasHookEvent = !1);
        var t = e.$options._parentListeners;
        t && ft(e, t);
      })(o),
      (function (i) {
        (i._vnode = null), (i._staticTrees = null);
        var e = i.$options,
          t = (i.$vnode = e._parentVnode),
          n = t && t.context;
        (i.$slots = pt(e._renderChildren, n)),
          (i.$scopedSlots = y),
          (i._c = function (e, t, n, r) {
            return tn(i, e, t, n, r, !1);
          }),
          (i.$createElement = function (e, t, n, r) {
            return tn(i, e, t, n, r, !0);
          });
        var r = t && t.data;
        we(i, "$attrs", (r && r.attrs) || y, null, !0),
          we(i, "$listeners", e._parentListeners || y, null, !0);
      })(o),
      gt(o, "beforeCreate"),
      (n = It((t = o).$options.inject, t)) &&
        (_e(!1),
        Object.keys(n).forEach(function (e) {
          we(t, e, n[e]);
        }),
        _e(!0)),
      (function (e) {
        e._watchers = [];
        var t = e.$options;
        t.props &&
          (function (n, r) {
            var i = n.$options.propsData || {},
              o = (n._props = {}),
              a = (n.$options._propKeys = []);
            n.$parent && _e(!1);
            function e(e) {
              a.push(e);
              var t = Le(e, r, i, n);
              we(o, e, t), e in n || Tt(n, "_props", e);
            }
            for (var t in r) e(t);
            _e(!0);
          })(e, t.props),
          t.methods &&
            (function (e, t) {
              for (var n in (e.$options.props, t))
                e[n] = null == t[n] ? b : v(t[n], e);
            })(e, t.methods),
          t.data
            ? (function (e) {
                var t = e.$options.data;
                l(
                  (t = e._data =
                    "function" == typeof t
                      ? (function (e, t) {
                          ce();
                          try {
                            return e.call(t, t);
                          } catch (e) {
                            return Pe(e, t, "data()"), {};
                          } finally {
                            le();
                          }
                        })(t, e)
                      : t || {})
                ) || (t = {});
                for (
                  var n,
                    r = Object.keys(t),
                    i = e.$options.props,
                    o = (e.$options.methods, r.length);
                  o--;

                ) {
                  var a = r[o];
                  (i && p(i, a)) ||
                    (36 !== (n = (a + "").charCodeAt(0)) &&
                      95 !== n &&
                      Tt(e, "_data", a));
                }
                $e(t, !0);
              })(e)
            : $e((e._data = {}), !0),
          t.computed &&
            (function (e, t) {
              var n = (e._computedWatchers = Object.create(null)),
                r = Y();
              for (var i in t) {
                var o = t[i],
                  a = "function" == typeof o ? o : o.get;
                r || (n[i] = new At(e, a || b, b, Et)), i in e || jt(e, i, o);
              }
            })(e, t.computed),
          t.watch &&
            t.watch !== G &&
            (function (e, t) {
              for (var n in t) {
                var r = t[n];
                if (Array.isArray(r))
                  for (var i = 0; i < r.length; i++) Lt(e, n, r[i]);
                else Lt(e, n, r);
              }
            })(e, t.watch);
      })(o),
      (i = (r = o).$options.provide) &&
        (r._provided = "function" == typeof i ? i.call(r) : i),
      gt(o, "created"),
      o.$options.el && o.$mount(o.$options.el);
  }),
    (nn = dn),
    (rn = {
      get: function () {
        return this._data;
      },
    }),
    (on = {
      get: function () {
        return this._props;
      },
    }),
    Object.defineProperty(nn.prototype, "$data", rn),
    Object.defineProperty(nn.prototype, "$props", on),
    (nn.prototype.$set = Ce),
    (nn.prototype.$delete = xe),
    (nn.prototype.$watch = function (e, t, n) {
      if (l(t)) return Lt(this, e, t, n);
      (n = n || {}).user = !0;
      var r = new At(this, e, t, n);
      return (
        n.immediate && t.call(this, r.value),
        function () {
          r.teardown();
        }
      );
    }),
    (sn = /^hook:/),
    ((an = dn).prototype.$on = function (e, t) {
      if (Array.isArray(e))
        for (var n = 0, r = e.length; n < r; n++) this.$on(e[n], t);
      else
        (this._events[e] || (this._events[e] = [])).push(t),
          sn.test(e) && (this._hasHookEvent = !0);
      return this;
    }),
    (an.prototype.$once = function (e, t) {
      var n = this;
      function r() {
        n.$off(e, r), t.apply(n, arguments);
      }
      return (r.fn = t), n.$on(e, r), n;
    }),
    (an.prototype.$off = function (e, t) {
      var n = this;
      if (!arguments.length) return (n._events = Object.create(null)), n;
      if (Array.isArray(e)) {
        for (var r = 0, i = e.length; r < i; r++) this.$off(e[r], t);
        return n;
      }
      var o = n._events[e];
      if (!o) return n;
      if (!t) return (n._events[e] = null), n;
      if (t)
        for (var a, s = o.length; s--; )
          if ((a = o[s]) === t || a.fn === t) {
            o.splice(s, 1);
            break;
          }
      return n;
    }),
    (an.prototype.$emit = function (e) {
      var t = this,
        n = t._events[e];
      if (n) {
        n = 1 < n.length ? h(n) : n;
        for (var r = h(arguments, 1), i = 0, o = n.length; i < o; i++)
          try {
            n[i].apply(t, r);
          } catch (n) {
            Pe(n, t, 'event handler for "' + e + '"');
          }
      }
      return t;
    }),
    ((cn = dn).prototype._update = function (e, t) {
      var n = this;
      n._isMounted && gt(n, "beforeUpdate");
      var r = n.$el,
        i = n._vnode,
        o = ht;
      ((ht = n)._vnode = e),
        i
          ? (n.$el = n.__patch__(i, e))
          : ((n.$el = n.__patch__(
              n.$el,
              e,
              t,
              !1,
              n.$options._parentElm,
              n.$options._refElm
            )),
            (n.$options._parentElm = n.$options._refElm = null)),
        (ht = o),
        r && (r.__vue__ = null),
        n.$el && (n.$el.__vue__ = n),
        n.$vnode &&
          n.$parent &&
          n.$vnode === n.$parent._vnode &&
          (n.$parent.$el = n.$el);
    }),
    (cn.prototype.$forceUpdate = function () {
      this._watcher && this._watcher.update();
    }),
    (cn.prototype.$destroy = function () {
      var e = this;
      if (!e._isBeingDestroyed) {
        gt(e, "beforeDestroy"), (e._isBeingDestroyed = !0);
        var t = e.$parent;
        !t || t._isBeingDestroyed || e.$options.abstract || f(t.$children, e),
          e._watcher && e._watcher.teardown();
        for (var n = e._watchers.length; n--; ) e._watchers[n].teardown();
        e._data.__ob__ && e._data.__ob__.vmCount--,
          (e._isDestroyed = !0),
          e.__patch__(e._vnode, null),
          gt(e, "destroyed"),
          e.$off(),
          e.$el && (e.$el.__vue__ = null),
          e.$vnode && (e.$vnode.parent = null);
      }
    }),
    Jt((ln = dn).prototype),
    (ln.prototype.$nextTick = function (e) {
      return Ge(e, this);
    }),
    (ln.prototype._render = function () {
      var e,
        t = this,
        n = t.$options,
        r = n.render,
        i = n._parentVnode;
      i && (t.$scopedSlots = i.data.scopedSlots || y), (t.$vnode = i);
      try {
        e = r.call(t._renderProxy, t.$createElement);
      } catch (n) {
        Pe(n, t, "render"), (e = t._vnode);
      }
      return e instanceof ue || (e = pe()), (e.parent = i), e;
    });
  var gn,
    _n,
    bn,
    $n = [String, RegExp, Array],
    wn = {
      KeepAlive: {
        name: "keep-alive",
        abstract: !0,
        props: {
          include: $n,
          exclude: $n,
          max: [String, Number],
        },
        created: function () {
          (this.cache = Object.create(null)), (this.keys = []);
        },
        destroyed: function () {
          for (var e in this.cache) yn(this.cache, e, this.keys);
        },
        mounted: function () {
          var e = this;
          this.$watch("include", function (t) {
            mn(e, function (e) {
              return hn(t, e);
            });
          }),
            this.$watch("exclude", function (t) {
              mn(e, function (e) {
                return !hn(t, e);
              });
            });
        },
        render: function () {
          var e = this.$slots.default,
            t = ct(e),
            n = t && t.componentOptions;
          if (n) {
            var r = vn(n),
              i = this.include,
              o = this.exclude;
            if ((i && (!r || !hn(i, r))) || (o && r && hn(o, r))) return t;
            var a = this.cache,
              s = this.keys,
              c =
                null == t.key
                  ? n.Ctor.cid + (n.tag ? "::" + n.tag : "")
                  : t.key;
            a[c]
              ? ((t.componentInstance = a[c].componentInstance),
                f(s, c),
                s.push(c))
              : ((a[c] = t),
                s.push(c),
                this.max &&
                  s.length > parseInt(this.max) &&
                  yn(a, s[0], s, this._vnode)),
              (t.data.keepAlive = !0);
          }
          return t || (e && e[0]);
        },
      },
    };
  (gn = dn),
    (bn = {
      get: function () {
        return j;
      },
    }),
    Object.defineProperty(gn, "config", bn),
    (gn.util = {
      warn: ie,
      extend: m,
      mergeOptions: je,
      defineReactive: we,
    }),
    (gn.set = Ce),
    (gn.delete = xe),
    (gn.nextTick = Ge),
    (gn.options = Object.create(null)),
    k.forEach(function (e) {
      gn.options[e + "s"] = Object.create(null);
    }),
    m((gn.options._base = gn).options.components, wn),
    (gn.use = function (e) {
      var t = this._installedPlugins || (this._installedPlugins = []);
      if (-1 < t.indexOf(e)) return this;
      var n = h(arguments, 1);
      return (
        n.unshift(this),
        "function" == typeof e.install
          ? e.install.apply(e, n)
          : "function" == typeof e && e.apply(null, n),
        t.push(e),
        this
      );
    }),
    (gn.mixin = function (e) {
      return (this.options = je(this.options, e)), this;
    }),
    (function (e) {
      e.cid = 0;
      var a = 1;
      e.extend = function (e) {
        e = e || {};
        var t = this,
          n = t.cid,
          r = e._Ctor || (e._Ctor = {});
        if (r[n]) return r[n];
        function i(e) {
          this._init(e);
        }
        var o = e.name || t.options.name;
        return (
          (((i.prototype = Object.create(
            t.prototype
          )).constructor = i).cid = a++),
          (i.options = je(t.options, e)),
          (i.super = t),
          i.options.props &&
            (function (e) {
              var t = e.options.props;
              for (var n in t) Tt(e.prototype, "_props", n);
            })(i),
          i.options.computed &&
            (function (e) {
              var t = e.options.computed;
              for (var n in t) jt(e.prototype, n, t[n]);
            })(i),
          (i.extend = t.extend),
          (i.mixin = t.mixin),
          (i.use = t.use),
          k.forEach(function (e) {
            i[e] = t[e];
          }),
          o && (i.options.components[o] = i),
          (i.superOptions = t.options),
          (i.extendOptions = e),
          (i.sealedOptions = m({}, i.options)),
          (r[n] = i)
        );
      };
    })(gn),
    (_n = gn),
    k.forEach(function (n) {
      _n[n] = function (e, t) {
        return t
          ? ("component" === n &&
              l(t) &&
              ((t.name = t.name || e), (t = this.options._base.extend(t))),
            "directive" === n &&
              "function" == typeof t &&
              (t = {
                bind: t,
                update: t,
              }),
            (this.options[n + "s"][e] = t))
          : this.options[n + "s"][e];
      };
    }),
    Object.defineProperty(dn.prototype, "$isServer", {
      get: Y,
    }),
    Object.defineProperty(dn.prototype, "$ssrContext", {
      get: function () {
        return this.$vnode && this.$vnode.ssrContext;
      },
    }),
    Object.defineProperty(dn, "FunctionalRenderContext", {
      value: qt,
    }),
    (dn.version = "2.5.17");
  function Cn(e, t, n) {
    return (
      ("value" === n && kn(e) && "button" !== t) ||
      ("selected" === n && "option" === e) ||
      ("checked" === n && "input" === e) ||
      ("muted" === n && "video" === e)
    );
  }
  var xn = s("style,class"),
    kn = s("input,textarea,option,select,progress"),
    An = s("contenteditable,draggable,spellcheck"),
    On = s(
      "allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"
    ),
    Sn = "http://www.w3.org/1999/xlink",
    Tn = function (e) {
      return ":" === e.charAt(5) && "xlink" === e.slice(0, 5);
    },
    En = function (e) {
      return Tn(e) ? e.slice(6, e.length) : "";
    },
    jn = function (e) {
      return null == e || !1 === e;
    };
  function Nn(e, t) {
    return {
      staticClass: Ln(e.staticClass, t.staticClass),
      class: D(e.class) ? [e.class, t.class] : t.class,
    };
  }
  function Ln(e, t) {
    return e ? (t ? e + " " + t : e) : t || "";
  }
  function In(e) {
    return Array.isArray(e)
      ? (function (e) {
          for (var t, n = "", r = 0, i = e.length; r < i; r++)
            D((t = In(e[r]))) && "" !== t && (n && (n += " "), (n += t));
          return n;
        })(e)
      : P(e)
      ? (function (e) {
          var t = "";
          for (var n in e) e[n] && (t && (t += " "), (t += n));
          return t;
        })(e)
      : "string" == typeof e
      ? e
      : "";
  }
  function Mn(e) {
    return Pn(e) || Fn(e);
  }
  var Dn = {
      svg: "http://www.w3.org/2000/svg",
      math: "http://www.w3.org/1998/Math/MathML",
    },
    Pn = s(
      "html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"
    ),
    Fn = s(
      "svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",
      !0
    );
  function Rn(e) {
    return Fn(e) ? "svg" : "math" === e ? "math" : void 0;
  }
  var Hn = Object.create(null),
    Bn = s("text,number,password,search,email,tel,url");
  function Un(e) {
    return "string" != typeof e
      ? e
      : document.querySelector(e) || document.createElement("div");
  }
  var Vn = Object.freeze({
      createElement: function (e, t) {
        var n = document.createElement(e);
        return (
          "select" !== e ||
            (t.data &&
              t.data.attrs &&
              void 0 !== t.data.attrs.multiple &&
              n.setAttribute("multiple", "multiple")),
          n
        );
      },
      createElementNS: function (e, t) {
        return document.createElementNS(Dn[e], t);
      },
      createTextNode: function (e) {
        return document.createTextNode(e);
      },
      createComment: function (e) {
        return document.createComment(e);
      },
      insertBefore: function (e, t, n) {
        e.insertBefore(t, n);
      },
      removeChild: function (e, t) {
        e.removeChild(t);
      },
      appendChild: function (e, t) {
        e.appendChild(t);
      },
      parentNode: function (e) {
        return e.parentNode;
      },
      nextSibling: function (e) {
        return e.nextSibling;
      },
      tagName: function (e) {
        return e.tagName;
      },
      setTextContent: function (e, t) {
        e.textContent = t;
      },
      setStyleScope: function (e, t) {
        e.setAttribute(t, "");
      },
    }),
    zn = {
      create: function (e, t) {
        Kn(t);
      },
      update: function (e, t) {
        e.data.ref !== t.data.ref && (Kn(e, !0), Kn(t));
      },
      destroy: function (e) {
        Kn(e, !0);
      },
    };
  function Kn(e, t) {
    var n = e.data.ref;
    if (D(n)) {
      var r = e.context,
        i = e.componentInstance || e.elm,
        o = r.$refs;
      t
        ? Array.isArray(o[n])
          ? f(o[n], i)
          : o[n] === i && (o[n] = void 0)
        : e.data.refInFor
        ? Array.isArray(o[n])
          ? o[n].indexOf(i) < 0 && o[n].push(i)
          : (o[n] = [i])
        : (o[n] = i);
    }
  }
  var Jn = new ue("", {}, []),
    qn = ["create", "activate", "update", "remove", "destroy"];
  function Wn(e, t) {
    return (
      e.key === t.key &&
      ((e.tag === t.tag &&
        e.isComment === t.isComment &&
        D(e.data) === D(t.data) &&
        (function (e, t) {
          if ("input" !== e.tag) return !0;
          var n,
            r = D((n = e.data)) && D((n = n.attrs)) && n.type,
            i = D((n = t.data)) && D((n = n.attrs)) && n.type;
          return r === i || (Bn(r) && Bn(i));
        })(e, t)) ||
        (S(e.isAsyncPlaceholder) &&
          e.asyncFactory === t.asyncFactory &&
          M(t.asyncFactory.error)))
    );
  }
  function Gn(e, t, n) {
    var r,
      i,
      o = {};
    for (r = t; r <= n; ++r) D((i = e[r].key)) && (o[i] = r);
    return o;
  }
  var Zn = {
    create: Xn,
    update: Xn,
    destroy: function (e) {
      Xn(e, Jn);
    },
  };
  function Xn(e, t) {
    (e.data.directives || t.data.directives) &&
      (function (t, n) {
        var e,
          r,
          i,
          o = t === Jn,
          a = n === Jn,
          s = Qn(t.data.directives, t.context),
          c = Qn(n.data.directives, n.context),
          l = [],
          u = [];
        for (e in c)
          (r = s[e]),
            (i = c[e]),
            r
              ? ((i.oldValue = r.value),
                er(i, "update", n, t),
                i.def && i.def.componentUpdated && u.push(i))
              : (er(i, "bind", n, t), i.def && i.def.inserted && l.push(i));
        if (l.length) {
          var f = function () {
            for (var e = 0; e < l.length; e++) er(l[e], "inserted", n, t);
          };
          o ? nt(n, "insert", f) : f();
        }
        if (
          (u.length &&
            nt(n, "postpatch", function () {
              for (var e = 0; e < u.length; e++)
                er(u[e], "componentUpdated", n, t);
            }),
          !o)
        )
          for (e in s) c[e] || er(s[e], "unbind", t, t, a);
      })(e, t);
  }
  var Yn = Object.create(null);
  function Qn(e, t) {
    var n,
      r,
      i,
      o = Object.create(null);
    if (!e) return o;
    for (n = 0; n < e.length; n++)
      (r = e[n]).modifiers || (r.modifiers = Yn),
        ((o[
          (i = r).rawName ||
            i.name + "." + Object.keys(i.modifiers || {}).join(".")
        ] = r).def = Ne(t.$options, "directives", r.name));
    return o;
  }
  function er(e, t, n, r, i) {
    var o = e.def && e.def[t];
    if (o)
      try {
        o(n.elm, e, n, r, i);
      } catch (r) {
        Pe(r, n.context, "directive " + e.name + " " + t + " hook");
      }
  }
  var tr = [zn, Zn];
  function nr(e, t) {
    var n = t.componentOptions;
    if (
      !(
        (D(n) && !1 === n.Ctor.options.inheritAttrs) ||
        (M(e.data.attrs) && M(t.data.attrs))
      )
    ) {
      var r,
        i,
        o = t.elm,
        a = e.data.attrs || {},
        s = t.data.attrs || {};
      for (r in (D(s.__ob__) && (s = t.data.attrs = m({}, s)), s))
        (i = s[r]), a[r] !== i && rr(o, r, i);
      for (r in ((K || q) && s.value !== a.value && rr(o, "value", s.value), a))
        M(s[r]) &&
          (Tn(r)
            ? o.removeAttributeNS(Sn, En(r))
            : An(r) || o.removeAttribute(r));
    }
  }
  function rr(e, t, n) {
    -1 < e.tagName.indexOf("-")
      ? ir(e, t, n)
      : On(t)
      ? jn(n)
        ? e.removeAttribute(t)
        : ((n = "allowfullscreen" === t && "EMBED" === e.tagName ? "true" : t),
          e.setAttribute(t, n))
      : An(t)
      ? e.setAttribute(t, jn(n) || "false" === n ? "false" : "true")
      : Tn(t)
      ? jn(n)
        ? e.removeAttributeNS(Sn, En(t))
        : e.setAttributeNS(Sn, t, n)
      : ir(e, t, n);
  }
  function ir(t, e, n) {
    if (jn(n)) t.removeAttribute(e);
    else {
      if (
        K &&
        !J &&
        "TEXTAREA" === t.tagName &&
        "placeholder" === e &&
        !t.__ieph
      ) {
        var r = function (e) {
          e.stopImmediatePropagation(), t.removeEventListener("input", r);
        };
        t.addEventListener("input", r), (t.__ieph = !0);
      }
      t.setAttribute(e, n);
    }
  }
  var or = {
    create: nr,
    update: nr,
  };
  function ar(e, t) {
    var n = t.elm,
      r = t.data,
      i = e.data;
    if (
      !(
        M(r.staticClass) &&
        M(r.class) &&
        (M(i) || (M(i.staticClass) && M(i.class)))
      )
    ) {
      var o = (function (e) {
          for (var t = e.data, n = e, r = e; D(r.componentInstance); )
            (r = r.componentInstance._vnode) && r.data && (t = Nn(r.data, t));
          for (; D((n = n.parent)); ) n && n.data && (t = Nn(t, n.data));
          return (
            (i = t.staticClass), (o = t.class), D(i) || D(o) ? Ln(i, In(o)) : ""
          );
          var i, o;
        })(t),
        a = n._transitionClasses;
      D(a) && (o = Ln(o, In(a))),
        o !== n._prevClass && (n.setAttribute("class", o), (n._prevClass = o));
    }
  }
  var sr,
    cr,
    lr,
    ur,
    fr,
    pr,
    dr = {
      create: ar,
      update: ar,
    },
    vr = /[\w).+\-_$\]]/;
  function hr(e) {
    var t,
      n,
      r,
      i,
      o,
      a = !1,
      s = !1,
      c = !1,
      l = !1,
      u = 0,
      f = 0,
      p = 0,
      d = 0;
    for (r = 0; r < e.length; r++)
      if (((n = t), (t = e.charCodeAt(r)), a)) 39 === t && 92 !== n && (a = !1);
      else if (s) 34 === t && 92 !== n && (s = !1);
      else if (c) 96 === t && 92 !== n && (c = !1);
      else if (l) 47 === t && 92 !== n && (l = !1);
      else if (
        124 !== t ||
        124 === e.charCodeAt(r + 1) ||
        124 === e.charCodeAt(r - 1) ||
        u ||
        f ||
        p
      ) {
        switch (t) {
          case 34:
            s = !0;
            break;
          case 39:
            a = !0;
            break;
          case 96:
            c = !0;
            break;
          case 40:
            p++;
            break;
          case 41:
            p--;
            break;
          case 91:
            f++;
            break;
          case 93:
            f--;
            break;
          case 123:
            u++;
            break;
          case 125:
            u--;
        }
        if (47 === t) {
          for (
            var v = r - 1, h = void 0;
            0 <= v && " " === (h = e.charAt(v));
            v--
          );
          (h && vr.test(h)) || (l = !0);
        }
      } else void 0 === i ? ((d = r + 1), (i = e.slice(0, r).trim())) : m();
    function m() {
      (o = o || []).push(e.slice(d, r).trim()), (d = r + 1);
    }
    if ((void 0 === i ? (i = e.slice(0, r).trim()) : 0 !== d && m(), o))
      for (r = 0; r < o.length; r++) i = mr(i, o[r]);
    return i;
  }
  function mr(e, t) {
    var n = t.indexOf("(");
    if (n < 0) return '_f("' + t + '")(' + e + ")";
    var r = t.slice(0, n),
      i = t.slice(n + 1);
    return '_f("' + r + '")(' + e + (")" !== i ? "," + i : i);
  }
  function yr(e) {
    console.error("[Vue compiler]: " + e);
  }
  function gr(e, t) {
    return e
      ? e
          .map(function (e) {
            return e[t];
          })
          .filter(function (e) {
            return e;
          })
      : [];
  }
  function _r(e, t, n) {
    (e.props || (e.props = [])).push({
      name: t,
      value: n,
    }),
      (e.plain = !1);
  }
  function br(e, t, n) {
    (e.attrs || (e.attrs = [])).push({
      name: t,
      value: n,
    }),
      (e.plain = !1);
  }
  function $r(e, t, n) {
    (e.attrsMap[t] = n),
      e.attrsList.push({
        name: t,
        value: n,
      });
  }
  function wr(e, t, n, r, i) {
    var o;
    (r = r || y).capture && (delete r.capture, (t = "!" + t)),
      r.once && (delete r.once, (t = "~" + t)),
      r.passive && (delete r.passive, (t = "&" + t)),
      "click" === t &&
        (r.right
          ? ((t = "contextmenu"), delete r.right)
          : r.middle && (t = "mouseup")),
      (o = r.native
        ? (delete r.native, e.nativeEvents || (e.nativeEvents = {}))
        : e.events || (e.events = {}));
    var a = {
      value: n.trim(),
    };
    r !== y && (a.modifiers = r);
    var s = o[t];
    Array.isArray(s)
      ? i
        ? s.unshift(a)
        : s.push(a)
      : (o[t] = s ? (i ? [a, s] : [s, a]) : a),
      (e.plain = !1);
  }
  function Cr(e, t, n) {
    var r = xr(e, ":" + t) || xr(e, "v-bind:" + t);
    if (null != r) return hr(r);
    if (!1 !== n) {
      var i = xr(e, t);
      if (null != i) return JSON.stringify(i);
    }
  }
  function xr(e, t, n) {
    var r;
    if (null != (r = e.attrsMap[t]))
      for (var i = e.attrsList, o = 0, a = i.length; o < a; o++)
        if (i[o].name === t) {
          i.splice(o, 1);
          break;
        }
    return n && delete e.attrsMap[t], r;
  }
  function kr(e, t, n) {
    var r = n || {},
      i = r.number,
      o = "$$v";
    r.trim && (o = "(typeof $$v === 'string'? $$v.trim(): $$v)"),
      i && (o = "_n(" + o + ")");
    var a = Ar(t, o);
    e.model = {
      value: "(" + t + ")",
      expression: '"' + t + '"',
      callback: "function ($$v) {" + a + "}",
    };
  }
  function Ar(e, t) {
    var n = (function (e) {
      if (
        ((e = e.trim()),
        (sr = e.length),
        e.indexOf("[") < 0 || e.lastIndexOf("]") < sr - 1)
      )
        return -1 < (ur = e.lastIndexOf("."))
          ? {
              exp: e.slice(0, ur),
              key: '"' + e.slice(ur + 1) + '"',
            }
          : {
              exp: e,
              key: null,
            };
      for (cr = e, ur = fr = pr = 0; !Sr(); )
        Tr((lr = Or())) ? jr(lr) : 91 === lr && Er(lr);
      return {
        exp: e.slice(0, fr),
        key: e.slice(fr + 1, pr),
      };
    })(e);
    return null === n.key
      ? e + "=" + t
      : "$set(" + n.exp + ", " + n.key + ", " + t + ")";
  }
  function Or() {
    return cr.charCodeAt(++ur);
  }
  function Sr() {
    return sr <= ur;
  }
  function Tr(e) {
    return 34 === e || 39 === e;
  }
  function Er(e) {
    var t = 1;
    for (fr = ur; !Sr(); )
      if (Tr((e = Or()))) jr(e);
      else if ((91 === e && t++, 93 === e && t--, 0 === t)) {
        pr = ur;
        break;
      }
  }
  function jr(e) {
    for (var t = e; !Sr() && (e = Or()) !== t; );
  }
  var Nr,
    Lr = "__r";
  function Ir(e, t, n, r, i) {
    var o, a, s, c, l;
    (t =
      (o = t)._withTask ||
      (o._withTask = function () {
        Ke = !0;
        var e = o.apply(null, arguments);
        return (Ke = !1), e;
      })),
      n &&
        ((a = t),
        (s = e),
        (c = r),
        (l = Nr),
        (t = function e() {
          null !== a.apply(null, arguments) && Mr(s, e, c, l);
        })),
      Nr.addEventListener(
        e,
        t,
        Z
          ? {
              capture: r,
              passive: i,
            }
          : r
      );
  }
  function Mr(e, t, n, r) {
    (r || Nr).removeEventListener(e, t._withTask || t, n);
  }
  function Dr(e, t) {
    if (!M(e.data.on) || !M(t.data.on)) {
      var n = t.data.on || {},
        r = e.data.on || {};
      (Nr = t.elm),
        (function (e) {
          if (D(e.__r)) {
            var t = K ? "change" : "input";
            (e[t] = [].concat(e.__r, e[t] || [])), delete e.__r;
          }
          D(e.__c) &&
            ((e.change = [].concat(e.__c, e.change || [])), delete e.__c);
        })(n),
        tt(n, r, Ir, Mr, t.context),
        (Nr = void 0);
    }
  }
  var Pr = {
    create: Dr,
    update: Dr,
  };
  function Fr(e, t) {
    if (!M(e.data.domProps) || !M(t.data.domProps)) {
      var n,
        r,
        i,
        o,
        a = t.elm,
        s = e.data.domProps || {},
        c = t.data.domProps || {};
      for (n in (D(c.__ob__) && (c = t.data.domProps = m({}, c)), s))
        M(c[n]) && (a[n] = "");
      for (n in c) {
        if (((r = c[n]), "textContent" === n || "innerHTML" === n)) {
          if ((t.children && (t.children.length = 0), r === s[n])) continue;
          1 === a.childNodes.length && a.removeChild(a.childNodes[0]);
        }
        if ("value" === n) {
          var l = M((a._value = r)) ? "" : String(r);
          (o = l),
            (i = a).composing ||
              ("OPTION" !== i.tagName &&
                !(function (e, t) {
                  var n = !0;
                  try {
                    n = document.activeElement !== e;
                  } catch (e) {}
                  return n && e.value !== t;
                })(i, o) &&
                !(function (e, t) {
                  var n = e.value,
                    r = e._vModifiers;
                  if (D(r)) {
                    if (r.lazy) return !1;
                    if (r.number) return F(n) !== F(t);
                    if (r.trim) return n.trim() !== t.trim();
                  }
                  return n !== t;
                })(i, o)) ||
              (a.value = l);
        } else a[n] = r;
      }
    }
  }
  var Rr = {
      create: Fr,
      update: Fr,
    },
    Hr = e(function (e) {
      var n = {},
        r = /:(.+)/;
      return (
        e.split(/;(?![^(]*\))/g).forEach(function (e) {
          if (e) {
            var t = e.split(r);
            1 < t.length && (n[t[0].trim()] = t[1].trim());
          }
        }),
        n
      );
    });
  function Br(e) {
    var t = Ur(e.style);
    return e.staticStyle ? m(e.staticStyle, t) : t;
  }
  function Ur(e) {
    return Array.isArray(e) ? _(e) : "string" == typeof e ? Hr(e) : e;
  }
  function Vr(e, t, n) {
    if (Kr.test(t)) e.style.setProperty(t, n);
    else if (Jr.test(n)) e.style.setProperty(t, n.replace(Jr, ""), "important");
    else {
      var r = Wr(t);
      if (Array.isArray(n))
        for (var i = 0, o = n.length; i < o; i++) e.style[r] = n[i];
      else e.style[r] = n;
    }
  }
  var zr,
    Kr = /^--/,
    Jr = /\s*!important$/,
    qr = ["Webkit", "Moz", "ms"],
    Wr = e(function (e) {
      if (
        ((zr = zr || document.createElement("div").style),
        "filter" !== (e = C(e)) && e in zr)
      )
        return e;
      for (
        var t = e.charAt(0).toUpperCase() + e.slice(1), n = 0;
        n < qr.length;
        n++
      ) {
        var r = qr[n] + t;
        if (r in zr) return r;
      }
    });
  function Gr(e, t) {
    var n = t.data,
      r = e.data;
    if (!(M(n.staticStyle) && M(n.style) && M(r.staticStyle) && M(r.style))) {
      var i,
        o,
        a = t.elm,
        s = r.staticStyle,
        c = r.normalizedStyle || r.style || {},
        l = s || c,
        u = Ur(t.data.style) || {};
      t.data.normalizedStyle = D(u.__ob__) ? m({}, u) : u;
      var f = (function (e) {
        for (var t, n = {}, r = e; r.componentInstance; )
          (r = r.componentInstance._vnode) &&
            r.data &&
            (t = Br(r.data)) &&
            m(n, t);
        (t = Br(e.data)) && m(n, t);
        for (var i = e; (i = i.parent); ) i.data && (t = Br(i.data)) && m(n, t);
        return n;
      })(t);
      for (o in l) M(f[o]) && Vr(a, o, "");
      for (o in f) (i = f[o]) !== l[o] && Vr(a, o, null == i ? "" : i);
    }
  }
  var Zr = {
    create: Gr,
    update: Gr,
  };
  function Xr(t, e) {
    if ((e = e && e.trim()))
      if (t.classList)
        -1 < e.indexOf(" ")
          ? e.split(/\s+/).forEach(function (e) {
              return t.classList.add(e);
            })
          : t.classList.add(e);
      else {
        var n = " " + (t.getAttribute("class") || "") + " ";
        n.indexOf(" " + e + " ") < 0 && t.setAttribute("class", (n + e).trim());
      }
  }
  function Yr(t, e) {
    if ((e = e && e.trim()))
      if (t.classList)
        -1 < e.indexOf(" ")
          ? e.split(/\s+/).forEach(function (e) {
              return t.classList.remove(e);
            })
          : t.classList.remove(e),
          t.classList.length || t.removeAttribute("class");
      else {
        for (
          var n = " " + (t.getAttribute("class") || "") + " ",
            r = " " + e + " ";
          0 <= n.indexOf(r);

        )
          n = n.replace(r, " ");
        (n = n.trim())
          ? t.setAttribute("class", n)
          : t.removeAttribute("class");
      }
  }
  function Qr(e) {
    if (e) {
      if ("object" != typeof e) return "string" == typeof e ? ei(e) : void 0;
      var t = {};
      return !1 !== e.css && m(t, ei(e.name || "v")), m(t, e), t;
    }
  }
  var ei = e(function (e) {
      return {
        enterClass: e + "-enter",
        enterToClass: e + "-enter-to",
        enterActiveClass: e + "-enter-active",
        leaveClass: e + "-leave",
        leaveToClass: e + "-leave-to",
        leaveActiveClass: e + "-leave-active",
      };
    }),
    ti = B && !J,
    ni = "transition",
    ri = "animation",
    ii = "transition",
    oi = "transitionend",
    ai = "animation",
    si = "animationend";
  ti &&
    (void 0 === window.ontransitionend &&
      void 0 !== window.onwebkittransitionend &&
      ((ii = "WebkitTransition"), (oi = "webkitTransitionEnd")),
    void 0 === window.onanimationend &&
      void 0 !== window.onwebkitanimationend &&
      ((ai = "WebkitAnimation"), (si = "webkitAnimationEnd")));
  var ci = B
    ? window.requestAnimationFrame
      ? window.requestAnimationFrame.bind(window)
      : setTimeout
    : function (e) {
        return e();
      };
  function li(e) {
    ci(function () {
      ci(e);
    });
  }
  function ui(e, t) {
    var n = e._transitionClasses || (e._transitionClasses = []);
    n.indexOf(t) < 0 && (n.push(t), Xr(e, t));
  }
  function fi(e, t) {
    e._transitionClasses && f(e._transitionClasses, t), Yr(e, t);
  }
  function pi(t, e, n) {
    var r = vi(t, e),
      i = r.type,
      o = r.timeout,
      a = r.propCount;
    if (!i) return n();
    function s() {
      t.removeEventListener(c, u), n();
    }
    var c = i === ni ? oi : si,
      l = 0,
      u = function (e) {
        e.target === t && ++l >= a && s();
      };
    setTimeout(function () {
      l < a && s();
    }, o + 1),
      t.addEventListener(c, u);
  }
  var di = /\b(transform|all)(,|$)/;
  function vi(e, t) {
    var n,
      r = window.getComputedStyle(e),
      i = r[ii + "Delay"].split(", "),
      o = r[ii + "Duration"].split(", "),
      a = hi(i, o),
      s = r[ai + "Delay"].split(", "),
      c = r[ai + "Duration"].split(", "),
      l = hi(s, c),
      u = 0,
      f = 0;
    return (
      t === ni
        ? 0 < a && ((n = ni), (u = a), (f = o.length))
        : t === ri
        ? 0 < l && ((n = ri), (u = l), (f = c.length))
        : (f = (n = 0 < (u = Math.max(a, l)) ? (l < a ? ni : ri) : null)
            ? n === ni
              ? o.length
              : c.length
            : 0),
      {
        type: n,
        timeout: u,
        propCount: f,
        hasTransform: n === ni && di.test(r[ii + "Property"]),
      }
    );
  }
  function hi(n, e) {
    for (; n.length < e.length; ) n = n.concat(n);
    return Math.max.apply(
      null,
      e.map(function (e, t) {
        return mi(e) + mi(n[t]);
      })
    );
  }
  function mi(e) {
    return 1e3 * Number(e.slice(0, -1));
  }
  function yi(n, e) {
    var r = n.elm;
    D(r._leaveCb) && ((r._leaveCb.cancelled = !0), r._leaveCb());
    var t = Qr(n.data.transition);
    if (!M(t) && !D(r._enterCb) && 1 === r.nodeType) {
      for (
        var i = t.css,
          o = t.type,
          a = t.enterClass,
          s = t.enterToClass,
          c = t.enterActiveClass,
          l = t.appearClass,
          u = t.appearToClass,
          f = t.appearActiveClass,
          p = t.beforeEnter,
          d = t.enter,
          v = t.afterEnter,
          h = t.enterCancelled,
          m = t.beforeAppear,
          y = t.appear,
          g = t.afterAppear,
          _ = t.appearCancelled,
          b = t.duration,
          $ = ht,
          w = ht.$vnode;
        w && w.parent;

      )
        $ = (w = w.parent).context;
      var C = !$._isMounted || !n.isRootInsert;
      if (!C || y || "" === y) {
        var x = C && l ? l : a,
          k = C && f ? f : c,
          A = C && u ? u : s,
          O = (C && m) || p,
          S = C && "function" == typeof y ? y : d,
          T = (C && g) || v,
          E = (C && _) || h,
          j = F(P(b) ? b.enter : b),
          N = !1 !== i && !J,
          L = bi(S),
          I = (r._enterCb = R(function () {
            N && (fi(r, A), fi(r, k)),
              I.cancelled ? (N && fi(r, x), E && E(r)) : T && T(r),
              (r._enterCb = null);
          }));
        n.data.show ||
          nt(n, "insert", function () {
            var e = r.parentNode,
              t = e && e._pending && e._pending[n.key];
            t && t.tag === n.tag && t.elm._leaveCb && t.elm._leaveCb(),
              S && S(r, I);
          }),
          O && O(r),
          N &&
            (ui(r, x),
            ui(r, k),
            li(function () {
              fi(r, x),
                I.cancelled ||
                  (ui(r, A), L || (_i(j) ? setTimeout(I, j) : pi(r, o, I)));
            })),
          n.data.show && (e && e(), S && S(r, I)),
          N || L || I();
      }
    }
  }
  function gi(e, t) {
    var n = e.elm;
    D(n._enterCb) && ((n._enterCb.cancelled = !0), n._enterCb());
    var r = Qr(e.data.transition);
    if (M(r) || 1 !== n.nodeType) return t();
    if (!D(n._leaveCb)) {
      var i = r.css,
        o = r.type,
        a = r.leaveClass,
        s = r.leaveToClass,
        c = r.leaveActiveClass,
        l = r.beforeLeave,
        u = r.leave,
        f = r.afterLeave,
        p = r.leaveCancelled,
        d = r.delayLeave,
        v = r.duration,
        h = !1 !== i && !J,
        m = bi(u),
        y = F(P(v) ? v.leave : v),
        g = (n._leaveCb = R(function () {
          n.parentNode &&
            n.parentNode._pending &&
            (n.parentNode._pending[e.key] = null),
            h && (fi(n, s), fi(n, c)),
            g.cancelled ? (h && fi(n, a), p && p(n)) : (t(), f && f(n)),
            (n._leaveCb = null);
        }));
      d ? d(_) : _();
    }
    function _() {
      g.cancelled ||
        (e.data.show ||
          ((n.parentNode._pending || (n.parentNode._pending = {}))[e.key] = e),
        l && l(n),
        h &&
          (ui(n, a),
          ui(n, c),
          li(function () {
            fi(n, a),
              g.cancelled ||
                (ui(n, s), m || (_i(y) ? setTimeout(g, y) : pi(n, o, g)));
          })),
        u && u(n, g),
        h || m || g());
    }
  }
  function _i(e) {
    return "number" == typeof e && !isNaN(e);
  }
  function bi(e) {
    if (M(e)) return !1;
    var t = e.fns;
    return D(t) ? bi(Array.isArray(t) ? t[0] : t) : 1 < (e._length || e.length);
  }
  function $i(e, t) {
    !0 !== t.data.show && yi(t);
  }
  var wi = (function (e) {
    var r,
      t,
      g = {},
      n = e.modules,
      _ = e.nodeOps;
    for (r = 0; r < qn.length; ++r)
      for (g[qn[r]] = [], t = 0; t < n.length; ++t)
        D(n[t][qn[r]]) && g[qn[r]].push(n[t][qn[r]]);
    function o(e) {
      var t = _.parentNode(e);
      D(t) && _.removeChild(t, e);
    }
    function b(e, t, n, r, i, o, a) {
      if (
        (D(e.elm) && D(o) && (e = o[a] = ve(e)),
        (e.isRootInsert = !i),
        !(function (e, t, n, r) {
          var i = e.data;
          if (D(i)) {
            var o = D(e.componentInstance) && i.keepAlive;
            if (
              (D((i = i.hook)) && D((i = i.init)) && i(e, !1, n, r),
              D(e.componentInstance))
            )
              return (
                d(e, t),
                S(o) &&
                  (function (e, t, n, r) {
                    for (var i, o = e; o.componentInstance; )
                      if (
                        D((i = (o = o.componentInstance._vnode).data)) &&
                        D((i = i.transition))
                      ) {
                        for (i = 0; i < g.activate.length; ++i)
                          g.activate[i](Jn, o);
                        t.push(o);
                        break;
                      }
                    u(n, e.elm, r);
                  })(e, t, n, r),
                !0
              );
          }
        })(e, t, n, r))
      ) {
        var s = e.data,
          c = e.children,
          l = e.tag;
        D(l)
          ? ((e.elm = e.ns
              ? _.createElementNS(e.ns, l)
              : _.createElement(l, e)),
            f(e),
            v(e, c, t),
            D(s) && h(e, t))
          : S(e.isComment)
          ? (e.elm = _.createComment(e.text))
          : (e.elm = _.createTextNode(e.text)),
          u(n, e.elm, r);
      }
    }
    function d(e, t) {
      D(e.data.pendingInsert) &&
        (t.push.apply(t, e.data.pendingInsert), (e.data.pendingInsert = null)),
        (e.elm = e.componentInstance.$el),
        $(e) ? (h(e, t), f(e)) : (Kn(e), t.push(e));
    }
    function u(e, t, n) {
      D(e) &&
        (D(n)
          ? n.parentNode === e && _.insertBefore(e, t, n)
          : _.appendChild(e, t));
    }
    function v(e, t, n) {
      if (Array.isArray(t))
        for (var r = 0; r < t.length; ++r) b(t[r], n, e.elm, null, !0, t, r);
      else T(e.text) && _.appendChild(e.elm, _.createTextNode(String(e.text)));
    }
    function $(e) {
      for (; e.componentInstance; ) e = e.componentInstance._vnode;
      return D(e.tag);
    }
    function h(e, t) {
      for (var n = 0; n < g.create.length; ++n) g.create[n](Jn, e);
      D((r = e.data.hook)) &&
        (D(r.create) && r.create(Jn, e), D(r.insert) && t.push(e));
    }
    function f(e) {
      var t;
      if (D((t = e.fnScopeId))) _.setStyleScope(e.elm, t);
      else
        for (var n = e; n; )
          D((t = n.context)) &&
            D((t = t.$options._scopeId)) &&
            _.setStyleScope(e.elm, t),
            (n = n.parent);
      D((t = ht)) &&
        t !== e.context &&
        t !== e.fnContext &&
        D((t = t.$options._scopeId)) &&
        _.setStyleScope(e.elm, t);
    }
    function w(e, t, n, r, i, o) {
      for (; r <= i; ++r) b(n[r], o, e, t, !1, n, r);
    }
    function C(e) {
      var t,
        n,
        r = e.data;
      if (D(r))
        for (
          D((t = r.hook)) && D((t = t.destroy)) && t(e), t = 0;
          t < g.destroy.length;
          ++t
        )
          g.destroy[t](e);
      if (D((t = e.children)))
        for (n = 0; n < e.children.length; ++n) C(e.children[n]);
    }
    function x(e, t, n, r) {
      for (; n <= r; ++n) {
        var i = t[n];
        D(i) && (D(i.tag) ? (a(i), C(i)) : o(i.elm));
      }
    }
    function a(e, t) {
      if (D(t) || D(e.data)) {
        var n,
          r = g.remove.length + 1;
        for (
          D(t)
            ? (t.listeners += r)
            : (t = (function (e) {
                function t() {
                  0 == --t.listeners && o(e);
                }
                return (t.listeners = r), t;
              })(e.elm)),
            D((n = e.componentInstance)) &&
              D((n = n._vnode)) &&
              D(n.data) &&
              a(n, t),
            n = 0;
          n < g.remove.length;
          ++n
        )
          g.remove[n](e, t);
        D((n = e.data.hook)) && D((n = n.remove)) ? n(e, t) : t();
      } else o(e.elm);
    }
    function k(e, t, n, r) {
      for (var i = n; i < r; i++) {
        var o = t[i];
        if (D(o) && Wn(e, o)) return i;
      }
    }
    function A(e, t, n) {
      if (S(n) && D(e.parent)) e.parent.data.pendingInsert = t;
      else for (var r = 0; r < t.length; ++r) t[r].data.hook.insert(t[r]);
    }
    var m = s("attrs,class,staticClass,staticStyle,key");
    function O(e, t, n, r) {
      var i,
        o = t.tag,
        a = t.data,
        s = t.children;
      if (
        ((r = r || (a && a.pre)),
        (t.elm = e),
        S(t.isComment) && D(t.asyncFactory))
      )
        return (t.isAsyncPlaceholder = !0);
      if (
        D(a) &&
        (D((i = a.hook)) && D((i = i.init)) && i(t, !0),
        D((i = t.componentInstance)))
      )
        return d(t, n), !0;
      if (D(o)) {
        if (D(s))
          if (e.hasChildNodes())
            if (D((i = a)) && D((i = i.domProps)) && D((i = i.innerHTML))) {
              if (i !== e.innerHTML) return !1;
            } else {
              for (var c = !0, l = e.firstChild, u = 0; u < s.length; u++) {
                if (!l || !O(l, s[u], n, r)) {
                  c = !1;
                  break;
                }
                l = l.nextSibling;
              }
              if (!c || l) return !1;
            }
          else v(t, s, n);
        if (D(a)) {
          var f = !1;
          for (var p in a)
            if (!m(p)) {
              (f = !0), h(t, n);
              break;
            }
          !f && a.class && Xe(a.class);
        }
      } else e.data !== t.text && (e.data = t.text);
      return !0;
    }
    return function (e, t, n, r, i, o) {
      if (!M(t)) {
        var a,
          s = !1,
          c = [];
        if (M(e)) (s = !0), b(t, c, i, o);
        else {
          var l = D(e.nodeType);
          if (!l && Wn(e, t))
            !(function y(e, t, n, r) {
              if (e !== t) {
                var i = (t.elm = e.elm);
                if (S(e.isAsyncPlaceholder))
                  D(t.asyncFactory.resolved)
                    ? O(e.elm, t, n)
                    : (t.isAsyncPlaceholder = !0);
                else if (
                  S(t.isStatic) &&
                  S(e.isStatic) &&
                  t.key === e.key &&
                  (S(t.isCloned) || S(t.isOnce))
                )
                  t.componentInstance = e.componentInstance;
                else {
                  var o,
                    a = t.data;
                  D(a) && D((o = a.hook)) && D((o = o.prepatch)) && o(e, t);
                  var s = e.children,
                    c = t.children;
                  if (D(a) && $(t)) {
                    for (o = 0; o < g.update.length; ++o) g.update[o](e, t);
                    D((o = a.hook)) && D((o = o.update)) && o(e, t);
                  }
                  M(t.text)
                    ? D(s) && D(c)
                      ? s !== c &&
                        (function (e, t, n, r, i) {
                          for (
                            var o,
                              a,
                              s,
                              c = 0,
                              l = 0,
                              u = t.length - 1,
                              f = t[0],
                              p = t[u],
                              d = n.length - 1,
                              v = n[0],
                              h = n[d],
                              m = !i;
                            c <= u && l <= d;

                          )
                            M(f)
                              ? (f = t[++c])
                              : M(p)
                              ? (p = t[--u])
                              : Wn(f, v)
                              ? (y(f, v, r), (f = t[++c]), (v = n[++l]))
                              : Wn(p, h)
                              ? (y(p, h, r), (p = t[--u]), (h = n[--d]))
                              : Wn(f, h)
                              ? (y(f, h, r),
                                m &&
                                  _.insertBefore(
                                    e,
                                    f.elm,
                                    _.nextSibling(p.elm)
                                  ),
                                (f = t[++c]),
                                (h = n[--d]))
                              : (Wn(p, v)
                                  ? (y(p, v, r),
                                    m && _.insertBefore(e, p.elm, f.elm),
                                    (p = t[--u]))
                                  : (M(o) && (o = Gn(t, c, u)),
                                    M((a = D(v.key) ? o[v.key] : k(v, t, c, u)))
                                      ? b(v, r, e, f.elm, !1, n, l)
                                      : Wn((s = t[a]), v)
                                      ? (y(s, v, r),
                                        (t[a] = void 0),
                                        m && _.insertBefore(e, s.elm, f.elm))
                                      : b(v, r, e, f.elm, !1, n, l)),
                                (v = n[++l]));
                          u < c
                            ? w(
                                e,
                                M(n[d + 1]) ? null : n[d + 1].elm,
                                n,
                                l,
                                d,
                                r
                              )
                            : d < l && x(0, t, c, u);
                        })(i, s, c, n, r)
                      : D(c)
                      ? (D(e.text) && _.setTextContent(i, ""),
                        w(i, null, c, 0, c.length - 1, n))
                      : D(s)
                      ? x(0, s, 0, s.length - 1)
                      : D(e.text) && _.setTextContent(i, "")
                    : e.text !== t.text && _.setTextContent(i, t.text),
                    D(a) && D((o = a.hook)) && D((o = o.postpatch)) && o(e, t);
                }
              }
            })(e, t, c, r);
          else {
            if (l) {
              if (
                (1 === e.nodeType &&
                  e.hasAttribute(E) &&
                  (e.removeAttribute(E), (n = !0)),
                S(n) && O(e, t, c))
              )
                return A(t, c, !0), e;
              (a = e),
                (e = new ue(_.tagName(a).toLowerCase(), {}, [], void 0, a));
            }
            var u = e.elm,
              f = _.parentNode(u);
            if ((b(t, c, u._leaveCb ? null : f, _.nextSibling(u)), D(t.parent)))
              for (var p = t.parent, d = $(t); p; ) {
                for (var v = 0; v < g.destroy.length; ++v) g.destroy[v](p);
                if (((p.elm = t.elm), d)) {
                  for (var h = 0; h < g.create.length; ++h) g.create[h](Jn, p);
                  var m = p.data.hook.insert;
                  if (m.merged)
                    for (var y = 1; y < m.fns.length; y++) m.fns[y]();
                } else Kn(p);
                p = p.parent;
              }
            D(f) ? x(0, [e], 0, 0) : D(e.tag) && C(e);
          }
        }
        return A(t, c, s), t.elm;
      }
      D(e) && C(e);
    };
  })({
    nodeOps: Vn,
    modules: [
      or,
      dr,
      Pr,
      Rr,
      Zr,
      B
        ? {
            create: $i,
            activate: $i,
            remove: function (e, t) {
              !0 !== e.data.show ? gi(e, t) : t();
            },
          }
        : {},
    ].concat(tr),
  });
  J &&
    document.addEventListener("selectionchange", function () {
      var e = document.activeElement;
      e && e.vmodel && Ei(e, "input");
    });
  var Ci = {
    inserted: function (e, t, n, r) {
      "select" === n.tag
        ? (r.elm && !r.elm._vOptions
            ? nt(n, "postpatch", function () {
                Ci.componentUpdated(e, t, n);
              })
            : xi(e, t, n.context),
          (e._vOptions = [].map.call(e.options, Oi)))
        : ("textarea" !== n.tag && !Bn(e.type)) ||
          ((e._vModifiers = t.modifiers),
          t.modifiers.lazy ||
            (e.addEventListener("compositionstart", Si),
            e.addEventListener("compositionend", Ti),
            e.addEventListener("change", Ti),
            J && (e.vmodel = !0)));
    },
    componentUpdated: function (e, t, n) {
      if ("select" === n.tag) {
        xi(e, t, n.context);
        var r = e._vOptions,
          i = (e._vOptions = [].map.call(e.options, Oi));
        i.some(function (e, t) {
          return !w(e, r[t]);
        }) &&
          (e.multiple
            ? t.value.some(function (e) {
                return Ai(e, i);
              })
            : t.value !== t.oldValue && Ai(t.value, i)) &&
          Ei(e, "change");
      }
    },
  };
  function xi(e, t, n) {
    ki(e, t, n),
      (K || q) &&
        setTimeout(function () {
          ki(e, t, n);
        }, 0);
  }
  function ki(e, t) {
    var n = t.value,
      r = e.multiple;
    if (!r || Array.isArray(n)) {
      for (var i, o, a = 0, s = e.options.length; a < s; a++)
        if (((o = e.options[a]), r))
          (i = -1 < x(n, Oi(o))), o.selected !== i && (o.selected = i);
        else if (w(Oi(o), n))
          return void (e.selectedIndex !== a && (e.selectedIndex = a));
      r || (e.selectedIndex = -1);
    }
  }
  function Ai(t, e) {
    return e.every(function (e) {
      return !w(e, t);
    });
  }
  function Oi(e) {
    return "_value" in e ? e._value : e.value;
  }
  function Si(e) {
    e.target.composing = !0;
  }
  function Ti(e) {
    e.target.composing && ((e.target.composing = !1), Ei(e.target, "input"));
  }
  function Ei(e, t) {
    var n = document.createEvent("HTMLEvents");
    n.initEvent(t, !0, !0), e.dispatchEvent(n);
  }
  function ji(e) {
    return !e.componentInstance || (e.data && e.data.transition)
      ? e
      : ji(e.componentInstance._vnode);
  }
  var Ni = {
      model: Ci,
      show: {
        bind: function (e, t, n) {
          var r = t.value,
            i = (n = ji(n)).data && n.data.transition,
            o = (e.__vOriginalDisplay =
              "none" === e.style.display ? "" : e.style.display);
          r && i
            ? ((n.data.show = !0),
              yi(n, function () {
                e.style.display = o;
              }))
            : (e.style.display = r ? o : "none");
        },
        update: function (e, t, n) {
          var r = t.value;
          !r != !t.oldValue &&
            ((n = ji(n)).data && n.data.transition
              ? ((n.data.show = !0),
                r
                  ? yi(n, function () {
                      e.style.display = e.__vOriginalDisplay;
                    })
                  : gi(n, function () {
                      e.style.display = "none";
                    }))
              : (e.style.display = r ? e.__vOriginalDisplay : "none"));
        },
        unbind: function (e, t, n, r, i) {
          i || (e.style.display = e.__vOriginalDisplay);
        },
      },
    },
    Li = {
      name: String,
      appear: Boolean,
      css: Boolean,
      mode: String,
      type: String,
      enterClass: String,
      leaveClass: String,
      enterToClass: String,
      leaveToClass: String,
      enterActiveClass: String,
      leaveActiveClass: String,
      appearClass: String,
      appearActiveClass: String,
      appearToClass: String,
      duration: [Number, String, Object],
    };
  function Ii(e) {
    var t = e && e.componentOptions;
    return t && t.Ctor.options.abstract ? Ii(ct(t.children)) : e;
  }
  function Mi(e) {
    var t = {},
      n = e.$options;
    for (var r in n.propsData) t[r] = e[r];
    var i = n._parentListeners;
    for (var o in i) t[C(o)] = i[o];
    return t;
  }
  function Di(e, t) {
    if (/\d-keep-alive$/.test(t.tag))
      return e("keep-alive", {
        props: t.componentOptions.propsData,
      });
  }
  var Pi = {
      name: "transition",
      props: Li,
      abstract: !0,
      render: function (e) {
        var t = this,
          n = this.$slots.default;
        if (
          n &&
          (n = n.filter(function (e) {
            return e.tag || st(e);
          })).length
        ) {
          var r = this.mode,
            i = n[0];
          if (
            (function (e) {
              for (; (e = e.parent); ) if (e.data.transition) return !0;
            })(this.$vnode)
          )
            return i;
          var o = Ii(i);
          if (!o) return i;
          if (this._leaving) return Di(e, i);
          var a = "__transition-" + this._uid + "-";
          o.key =
            null == o.key
              ? o.isComment
                ? a + "comment"
                : a + o.tag
              : T(o.key)
              ? 0 === String(o.key).indexOf(a)
                ? o.key
                : a + o.key
              : o.key;
          var s,
            c,
            l = ((o.data || (o.data = {})).transition = Mi(this)),
            u = this._vnode,
            f = Ii(u);
          if (
            (o.data.directives &&
              o.data.directives.some(function (e) {
                return "show" === e.name;
              }) &&
              (o.data.show = !0),
            f &&
              f.data &&
              ((s = o), (c = f).key !== s.key || c.tag !== s.tag) &&
              !st(f) &&
              (!f.componentInstance || !f.componentInstance._vnode.isComment))
          ) {
            var p = (f.data.transition = m({}, l));
            if ("out-in" === r)
              return (
                (this._leaving = !0),
                nt(p, "afterLeave", function () {
                  (t._leaving = !1), t.$forceUpdate();
                }),
                Di(e, i)
              );
            if ("in-out" === r) {
              if (st(o)) return u;
              var d,
                v = function () {
                  d();
                };
              nt(l, "afterEnter", v),
                nt(l, "enterCancelled", v),
                nt(p, "delayLeave", function (e) {
                  d = e;
                });
            }
          }
          return i;
        }
      },
    },
    Fi = m(
      {
        tag: String,
        moveClass: String,
      },
      Li
    );
  function Ri(e) {
    e.elm._moveCb && e.elm._moveCb(), e.elm._enterCb && e.elm._enterCb();
  }
  function Hi(e) {
    e.data.newPos = e.elm.getBoundingClientRect();
  }
  function Bi(e) {
    var t = e.data.pos,
      n = e.data.newPos,
      r = t.left - n.left,
      i = t.top - n.top;
    if (r || i) {
      e.data.moved = !0;
      var o = e.elm.style;
      (o.transform = o.WebkitTransform = "translate(" + r + "px," + i + "px)"),
        (o.transitionDuration = "0s");
    }
  }
  delete Fi.mode;
  var Ui = {
    Transition: Pi,
    TransitionGroup: {
      props: Fi,
      render: function (e) {
        for (
          var t = this.tag || this.$vnode.data.tag || "span",
            n = Object.create(null),
            r = (this.prevChildren = this.children),
            i = this.$slots.default || [],
            o = (this.children = []),
            a = Mi(this),
            s = 0;
          s < i.length;
          s++
        ) {
          var c = i[s];
          c.tag &&
            null != c.key &&
            0 !== String(c.key).indexOf("__vlist") &&
            (o.push(c),
            (((n[c.key] = c).data || (c.data = {})).transition = a));
        }
        if (r) {
          for (var l = [], u = [], f = 0; f < r.length; f++) {
            var p = r[f];
            (p.data.transition = a),
              (p.data.pos = p.elm.getBoundingClientRect()),
              n[p.key] ? l.push(p) : u.push(p);
          }
          (this.kept = e(t, null, l)), (this.removed = u);
        }
        return e(t, null, o);
      },
      beforeUpdate: function () {
        this.__patch__(this._vnode, this.kept, !1, !0),
          (this._vnode = this.kept);
      },
      updated: function () {
        var e = this.prevChildren,
          r = this.moveClass || (this.name || "v") + "-move";
        e.length &&
          this.hasMove(e[0].elm, r) &&
          (e.forEach(Ri),
          e.forEach(Hi),
          e.forEach(Bi),
          (this._reflow = document.body.offsetHeight),
          e.forEach(function (e) {
            if (e.data.moved) {
              var n = e.elm,
                t = n.style;
              ui(n, r),
                (t.transform = t.WebkitTransform = t.transitionDuration = ""),
                n.addEventListener(
                  oi,
                  (n._moveCb = function e(t) {
                    (t && !/transform$/.test(t.propertyName)) ||
                      (n.removeEventListener(oi, e),
                      (n._moveCb = null),
                      fi(n, r));
                  })
                );
            }
          }));
      },
      methods: {
        hasMove: function (e, t) {
          if (!ti) return !1;
          if (this._hasMove) return this._hasMove;
          var n = e.cloneNode();
          e._transitionClasses &&
            e._transitionClasses.forEach(function (e) {
              Yr(n, e);
            }),
            Xr(n, t),
            (n.style.display = "none"),
            this.$el.appendChild(n);
          var r = vi(n);
          return this.$el.removeChild(n), (this._hasMove = r.hasTransform);
        },
      },
    },
  };
  (dn.config.mustUseProp = Cn),
    (dn.config.isReservedTag = Mn),
    (dn.config.isReservedAttr = xn),
    (dn.config.getTagNamespace = Rn),
    (dn.config.isUnknownElement = function (e) {
      if (!B) return !0;
      if (Mn(e)) return !1;
      if (((e = e.toLowerCase()), null != Hn[e])) return Hn[e];
      var t = document.createElement(e);
      return -1 < e.indexOf("-")
        ? (Hn[e] =
            t.constructor === window.HTMLUnknownElement ||
            t.constructor === window.HTMLElement)
        : (Hn[e] = /HTMLUnknownElement/.test(t.toString()));
    }),
    m(dn.options.directives, Ni),
    m(dn.options.components, Ui),
    (dn.prototype.__patch__ = B ? wi : b),
    (dn.prototype.$mount = function (e, t) {
      return (
        (r = e = e && B ? Un(e) : void 0),
        (i = t),
        ((n = this).$el = r),
        n.$options.render || (n.$options.render = pe),
        gt(n, "beforeMount"),
        new At(
          n,
          function () {
            n._update(n._render(), i);
          },
          b,
          null,
          !0
        ),
        (i = !1),
        null == n.$vnode && ((n._isMounted = !0), gt(n, "mounted")),
        n
      );
      var n, r, i;
    }),
    B &&
      setTimeout(function () {
        j.devtools && Q && Q.emit("init", dn);
      }, 0);
  var Vi,
    zi = /\{\{((?:.|\n)+?)\}\}/g,
    Ki = /[-.*+?^${}()|[\]\/\\]/g,
    Ji = e(function (e) {
      var t = e[0].replace(Ki, "\\$&"),
        n = e[1].replace(Ki, "\\$&");
      return new RegExp(t + "((?:.|\\n)+?)" + n, "g");
    }),
    qi = {
      staticKeys: ["staticClass"],
      transformNode: function (e, t) {
        t.warn;
        var n = xr(e, "class");
        n && (e.staticClass = JSON.stringify(n));
        var r = Cr(e, "class", !1);
        r && (e.classBinding = r);
      },
      genData: function (e) {
        var t = "";
        return (
          e.staticClass && (t += "staticClass:" + e.staticClass + ","),
          e.classBinding && (t += "class:" + e.classBinding + ","),
          t
        );
      },
    },
    Wi = {
      staticKeys: ["staticStyle"],
      transformNode: function (e, t) {
        t.warn;
        var n = xr(e, "style");
        n && (e.staticStyle = JSON.stringify(Hr(n)));
        var r = Cr(e, "style", !1);
        r && (e.styleBinding = r);
      },
      genData: function (e) {
        var t = "";
        return (
          e.staticStyle && (t += "staticStyle:" + e.staticStyle + ","),
          e.styleBinding && (t += "style:(" + e.styleBinding + "),"),
          t
        );
      },
    },
    Gi = s(
      "area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"
    ),
    Zi = s("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),
    Xi = s(
      "address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"
    ),
    Yi = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,
    Qi = "[a-zA-Z_][\\w\\-\\.]*",
    eo = "((?:" + Qi + "\\:)?" + Qi + ")",
    to = new RegExp("^<" + eo),
    no = /^\s*(\/?)>/,
    ro = new RegExp("^<\\/" + eo + "[^>]*>"),
    io = /^<!DOCTYPE [^>]+>/i,
    oo = /^<!\--/,
    ao = /^<!\[/,
    so = !1;
  "x".replace(/x(.)?/g, function (e, t) {
    so = "" === t;
  });
  function co(e, t) {
    return e && Co(e) && "\n" === t[0];
  }
  var lo,
    uo,
    fo,
    po,
    vo,
    ho,
    mo,
    yo,
    go = s("script,style,textarea", !0),
    _o = {},
    bo = {
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": '"',
      "&amp;": "&",
      "&#10;": "\n",
      "&#9;": "\t",
    },
    $o = /&(?:lt|gt|quot|amp);/g,
    wo = /&(?:lt|gt|quot|amp|#10|#9);/g,
    Co = s("pre,textarea", !0),
    xo = /^@|^v-on:/,
    ko = /^v-|^@|^:/,
    Ao = /([^]*?)\s+(?:in|of)\s+([^]*)/,
    Oo = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/,
    So = /^\(|\)$/g,
    To = /:(.*)$/,
    Eo = /^:|^v-bind:/,
    jo = /\.[^.]+/g,
    No = e(function (e) {
      return (
        ((Vi = Vi || document.createElement("div")).innerHTML = e),
        Vi.textContent
      );
    });
  function Lo(e, t, n) {
    return {
      type: 1,
      tag: e,
      attrsList: t,
      attrsMap: (function (e) {
        for (var t = {}, n = 0, r = e.length; n < r; n++)
          t[e[n].name] = e[n].value;
        return t;
      })(t),
      parent: n,
      children: [],
    };
  }
  function Io(e, t) {
    var n, r, i, o, a, s;
    (r = Cr((n = e), "key")) && (n.key = r),
      (e.plain = !e.key && !e.attrsList.length),
      (o = Cr((i = e), "ref")) &&
        ((i.ref = o),
        (i.refInFor = (function () {
          for (var e = i; e; ) {
            if (void 0 !== e.for) return !0;
            e = e.parent;
          }
          return !1;
        })())),
      (function (e) {
        if ("slot" === e.tag) e.slotName = Cr(e, "name");
        else {
          var t;
          "template" === e.tag
            ? ((t = xr(e, "scope")), (e.slotScope = t || xr(e, "slot-scope")))
            : (t = xr(e, "slot-scope")) && (e.slotScope = t);
          var n = Cr(e, "slot");
          n &&
            ((e.slotTarget = '""' === n ? '"default"' : n),
            "template" === e.tag || e.slotScope || br(e, "slot", n));
        }
      })(e),
      (s = Cr((a = e), "is")) && (a.component = s),
      null != xr(a, "inline-template") && (a.inlineTemplate = !0);
    for (var c = 0; c < fo.length; c++) e = fo[c](e, t) || e;
    !(function (e) {
      var t,
        n,
        r,
        i,
        o,
        a,
        s,
        c,
        l,
        u,
        f,
        p,
        d,
        v = e.attrsList;
      for (t = 0, n = v.length; t < n; t++)
        if (((r = i = v[t].name), (o = v[t].value), ko.test(r)))
          if (
            ((e.hasBindings = !0),
            (a = Po(r)) && (r = r.replace(jo, "")),
            Eo.test(r))
          )
            (r = r.replace(Eo, "")),
              (o = hr(o)),
              (s = !1),
              a &&
                (a.prop &&
                  ((s = !0), "innerHtml" === (r = C(r)) && (r = "innerHTML")),
                a.camel && (r = C(r)),
                a.sync && wr(e, "update:" + C(r), Ar(o, "$event"))),
              s || (!e.component && mo(e.tag, e.attrsMap.type, r))
                ? _r(e, r, o)
                : br(e, r, o);
          else if (xo.test(r)) wr(e, (r = r.replace(xo, "")), o, a, !1);
          else {
            var h = (r = r.replace(ko, "")).match(To),
              m = h && h[1];
            m && (r = r.slice(0, -(m.length + 1))),
              (l = r),
              (u = i),
              (f = o),
              (p = m),
              (d = a),
              ((c = e).directives || (c.directives = [])).push({
                name: l,
                rawName: u,
                value: f,
                arg: p,
                modifiers: d,
              }),
              (c.plain = !1);
          }
        else
          br(e, r, JSON.stringify(o)),
            !e.component &&
              "muted" === r &&
              mo(e.tag, e.attrsMap.type, r) &&
              _r(e, r, "true");
    })(e);
  }
  function Mo(e) {
    var i;
    if ((i = xr(e, "v-for"))) {
      var t = (function () {
        var e = i.match(Ao);
        if (e) {
          var t = {};
          t.for = e[2].trim();
          var n = e[1].trim().replace(So, ""),
            r = n.match(Oo);
          return (
            r
              ? ((t.alias = n.replace(Oo, "")),
                (t.iterator1 = r[1].trim()),
                r[2] && (t.iterator2 = r[2].trim()))
              : (t.alias = n),
            t
          );
        }
      })();
      t && m(e, t);
    }
  }
  function Do(e, t) {
    e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t);
  }
  function Po(e) {
    var t = e.match(jo);
    if (t) {
      var n = {};
      return (
        t.forEach(function (e) {
          n[e.slice(1)] = !0;
        }),
        n
      );
    }
  }
  var Fo = /^xmlns:NS\d+/,
    Ro = /^NS\d+:/;
  function Ho(e) {
    return Lo(e.tag, e.attrsList.slice(), e.parent);
  }
  var Bo,
    Uo,
    Vo,
    zo = [
      qi,
      Wi,
      {
        preTransformNode: function (e, t) {
          if ("input" === e.tag) {
            var n,
              r = e.attrsMap;
            if (!r["v-model"]) return;
            if (
              ((r[":type"] || r["v-bind:type"]) && (n = Cr(e, "type")),
              r.type || n || !r["v-bind"] || (n = "(" + r["v-bind"] + ").type"),
              n)
            ) {
              var i = xr(e, "v-if", !0),
                o = i ? "&&(" + i + ")" : "",
                a = null != xr(e, "v-else", !0),
                s = xr(e, "v-else-if", !0),
                c = Ho(e);
              Mo(c),
                $r(c, "type", "checkbox"),
                Io(c, t),
                (c.processed = !0),
                (c.if = "(" + n + ")==='checkbox'" + o),
                Do(c, {
                  exp: c.if,
                  block: c,
                });
              var l = Ho(e);
              xr(l, "v-for", !0),
                $r(l, "type", "radio"),
                Io(l, t),
                Do(c, {
                  exp: "(" + n + ")==='radio'" + o,
                  block: l,
                });
              var u = Ho(e);
              return (
                xr(u, "v-for", !0),
                $r(u, ":type", n),
                Io(u, t),
                Do(c, {
                  exp: i,
                  block: u,
                }),
                a ? (c.else = !0) : s && (c.elseif = s),
                c
              );
            }
          }
        },
      },
    ],
    Ko = {
      expectHTML: !0,
      modules: zo,
      directives: {
        model: function (e, t, n) {
          var r,
            i,
            o,
            a,
            s,
            c,
            l,
            u,
            f,
            p,
            d,
            v,
            h,
            m,
            y = t.value,
            g = t.modifiers,
            _ = e.tag,
            b = e.attrsMap.type;
          if (e.component) return kr(e, y, g), !1;
          if ("select" === _)
            (h = y),
              wr(
                e,
                "change",
                'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' +
                  ((m = g) && m.number ? "_n(val)" : "val") +
                  "});" +
                  " " +
                  Ar(
                    h,
                    "$event.target.multiple ? $$selectedVal : $$selectedVal[0]"
                  ),
                null,
                !0
              );
          else if ("input" === _ && "checkbox" === b)
            (c = e),
              (l = y),
              (f = (u = g) && u.number),
              (p = Cr(c, "value") || "null"),
              (d = Cr(c, "true-value") || "true"),
              (v = Cr(c, "false-value") || "false"),
              _r(
                c,
                "checked",
                "Array.isArray(" +
                  l +
                  ")?_i(" +
                  l +
                  "," +
                  p +
                  ")>-1" +
                  ("true" === d ? ":(" + l + ")" : ":_q(" + l + "," + d + ")")
              ),
              wr(
                c,
                "change",
                "var $$a=" +
                  l +
                  ",$$el=$event.target,$$c=$$el.checked?(" +
                  d +
                  "):(" +
                  v +
                  ");if(Array.isArray($$a)){var $$v=" +
                  (f ? "_n(" + p + ")" : p) +
                  ",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(" +
                  Ar(l, "$$a.concat([$$v])") +
                  ")}else{$$i>-1&&(" +
                  Ar(l, "$$a.slice(0,$$i).concat($$a.slice($$i+1))") +
                  ")}}else{" +
                  Ar(l, "$$c") +
                  "}",
                null,
                !0
              );
          else if ("input" === _ && "radio" === b)
            (r = e),
              (i = y),
              (a = (o = g) && o.number),
              (s = Cr(r, "value") || "null"),
              _r(
                r,
                "checked",
                "_q(" + i + "," + (s = a ? "_n(" + s + ")" : s) + ")"
              ),
              wr(r, "change", Ar(i, s), null, !0);
          else if ("input" === _ || "textarea" === _)
            !(function (e, t, n) {
              var r = e.attrsMap.type,
                i = n || {},
                o = i.lazy,
                a = i.number,
                s = i.trim,
                c = !o && "range" !== r,
                l = o ? "change" : "range" === r ? Lr : "input",
                u = "$event.target.value";
              s && (u = "$event.target.value.trim()"),
                a && (u = "_n(" + u + ")");
              var f = Ar(t, u);
              c && (f = "if($event.target.composing)return;" + f),
                _r(e, "value", "(" + t + ")"),
                wr(e, l, f, null, !0),
                (s || a) && wr(e, "blur", "$forceUpdate()");
            })(e, y, g);
          else if (!j.isReservedTag(_)) return kr(e, y, g), !1;
          return !0;
        },
        text: function (e, t) {
          t.value && _r(e, "textContent", "_s(" + t.value + ")");
        },
        html: function (e, t) {
          t.value && _r(e, "innerHTML", "_s(" + t.value + ")");
        },
      },
      isPreTag: function (e) {
        return "pre" === e;
      },
      isUnaryTag: Gi,
      mustUseProp: Cn,
      canBeLeftOpenTag: Zi,
      isReservedTag: Mn,
      getTagNamespace: Rn,
      staticKeys:
        ((Bo = zo),
        Bo.reduce(function (e, t) {
          return e.concat(t.staticKeys || []);
        }, []).join(",")),
    },
    Jo = e(function (e) {
      return s(
        "type,tag,attrsList,attrsMap,plain,parent,children,attrs" +
          (e ? "," + e : "")
      );
    });
  var qo = /^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,
    Wo = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,
    Go = {
      esc: 27,
      tab: 9,
      enter: 13,
      space: 32,
      up: 38,
      left: 37,
      right: 39,
      down: 40,
      delete: [8, 46],
    },
    Zo = {
      esc: "Escape",
      tab: "Tab",
      enter: "Enter",
      space: " ",
      up: ["Up", "ArrowUp"],
      left: ["Left", "ArrowLeft"],
      right: ["Right", "ArrowRight"],
      down: ["Down", "ArrowDown"],
      delete: ["Backspace", "Delete"],
    },
    Xo = function (e) {
      return "if(" + e + ")return null;";
    },
    Yo = {
      stop: "$event.stopPropagation();",
      prevent: "$event.preventDefault();",
      self: Xo("$event.target !== $event.currentTarget"),
      ctrl: Xo("!$event.ctrlKey"),
      shift: Xo("!$event.shiftKey"),
      alt: Xo("!$event.altKey"),
      meta: Xo("!$event.metaKey"),
      left: Xo("'button' in $event && $event.button !== 0"),
      middle: Xo("'button' in $event && $event.button !== 1"),
      right: Xo("'button' in $event && $event.button !== 2"),
    };
  function Qo(e, t) {
    var n = t ? "nativeOn:{" : "on:{";
    for (var r in e) n += '"' + r + '":' + ea(r, e[r]) + ",";
    return n.slice(0, -1) + "}";
  }
  function ea(t, e) {
    if (!e) return "function(){}";
    if (Array.isArray(e))
      return (
        "[" +
        e
          .map(function (e) {
            return ea(t, e);
          })
          .join(",") +
        "]"
      );
    var n = Wo.test(e.value),
      r = qo.test(e.value);
    if (e.modifiers) {
      var i = "",
        o = "",
        a = [];
      for (var s in e.modifiers)
        if (Yo[s]) (o += Yo[s]), Go[s] && a.push(s);
        else if ("exact" === s) {
          var c = e.modifiers;
          o += Xo(
            ["ctrl", "shift", "alt", "meta"]
              .filter(function (e) {
                return !c[e];
              })
              .map(function (e) {
                return "$event." + e + "Key";
              })
              .join("||")
          );
        } else a.push(s);
      return (
        a.length &&
          (i +=
            "if(!('button' in $event)&&" +
            a.map(ta).join("&&") +
            ")return null;"),
        o && (i += o),
        "function($event){" +
          i +
          (n
            ? "return " + e.value + "($event)"
            : r
            ? "return (" + e.value + ")($event)"
            : e.value) +
          "}"
      );
    }
    return n || r ? e.value : "function($event){" + e.value + "}";
  }
  function ta(e) {
    var t = parseInt(e, 10);
    if (t) return "$event.keyCode!==" + t;
    var n = Go[e],
      r = Zo[e];
    return (
      "_k($event.keyCode," +
      JSON.stringify(e) +
      "," +
      JSON.stringify(n) +
      ",$event.key," +
      JSON.stringify(r) +
      ")"
    );
  }
  var na = {
      on: function (e, t) {
        e.wrapListeners = function (e) {
          return "_g(" + e + "," + t.value + ")";
        };
      },
      bind: function (t, n) {
        t.wrapData = function (e) {
          return (
            "_b(" +
            e +
            ",'" +
            t.tag +
            "'," +
            n.value +
            "," +
            (n.modifiers && n.modifiers.prop ? "true" : "false") +
            (n.modifiers && n.modifiers.sync ? ",true" : "") +
            ")"
          );
        };
      },
      cloak: b,
    },
    ra = function (e) {
      (this.options = e),
        (this.warn = e.warn || yr),
        (this.transforms = gr(e.modules, "transformCode")),
        (this.dataGenFns = gr(e.modules, "genData")),
        (this.directives = m(m({}, na), e.directives));
      var t = e.isReservedTag || O;
      (this.maybeComponent = function (e) {
        return !t(e.tag);
      }),
        (this.onceId = 0),
        (this.staticRenderFns = []);
    };
  function ia(e, t) {
    var n = new ra(t);
    return {
      render: "with(this){return " + (e ? oa(e, n) : '_c("div")') + "}",
      staticRenderFns: n.staticRenderFns,
    };
  }
  function oa(e, t) {
    if (e.staticRoot && !e.staticProcessed) return aa(e, t);
    if (e.once && !e.onceProcessed) return sa(e, t);
    if (e.for && !e.forProcessed)
      return (
        (g = t),
        (_ = (y = e).for),
        (b = y.alias),
        ($ = y.iterator1 ? "," + y.iterator1 : ""),
        (w = y.iterator2 ? "," + y.iterator2 : ""),
        (y.forProcessed = !0),
        "_l((" + _ + "),function(" + b + $ + w + "){return " + oa(y, g) + "})"
      );
    if (e.if && !e.ifProcessed) return ca(e, t);
    if ("template" !== e.tag || e.slotTarget) {
      if ("slot" === e.tag)
        return (
          (s = t),
          (c = (a = e).slotName || '"default"'),
          (l = ua(a, s)),
          (u = "_t(" + c + (l ? "," + l : "")),
          (f =
            a.attrs &&
            "{" +
              a.attrs
                .map(function (e) {
                  return C(e.name) + ":" + e.value;
                })
                .join(",") +
              "}"),
          (p = a.attrsMap["v-bind"]),
          (!f && !p) || l || (u += ",null"),
          f && (u += "," + f),
          p && (u += (f ? "" : ",null") + "," + p),
          u + ")"
        );
      var n;
      if (e.component)
        (d = e.component),
          (h = t),
          (m = (v = e).inlineTemplate ? null : ua(v, h, !0)),
          (n = "_c(" + d + "," + la(v, h) + (m ? "," + m : "") + ")");
      else {
        var r = e.plain ? void 0 : la(e, t),
          i = e.inlineTemplate ? null : ua(e, t, !0);
        n =
          "_c('" + e.tag + "'" + (r ? "," + r : "") + (i ? "," + i : "") + ")";
      }
      for (var o = 0; o < t.transforms.length; o++) n = t.transforms[o](e, n);
      return n;
    }
    var a, s, c, l, u, f, p, d, v, h, m, y, g, _, b, $, w;
    return ua(e, t) || "void 0";
  }
  function aa(e, t) {
    return (
      (e.staticProcessed = !0),
      t.staticRenderFns.push("with(this){return " + oa(e, t) + "}"),
      "_m(" +
        (t.staticRenderFns.length - 1) +
        (e.staticInFor ? ",true" : "") +
        ")"
    );
  }
  function sa(e, t) {
    if (((e.onceProcessed = !0), e.if && !e.ifProcessed)) return ca(e, t);
    if (e.staticInFor) {
      for (var n = "", r = e.parent; r; ) {
        if (r.for) {
          n = r.key;
          break;
        }
        r = r.parent;
      }
      return n ? "_o(" + oa(e, t) + "," + t.onceId++ + "," + n + ")" : oa(e, t);
    }
    return aa(e, t);
  }
  function ca(e, t, n, r) {
    return (
      (e.ifProcessed = !0),
      (function e(t, n, r, i) {
        if (!t.length) return i || "_e()";
        var o = t.shift();
        return o.exp
          ? "(" + o.exp + ")?" + a(o.block) + ":" + e(t, n, r, i)
          : "" + a(o.block);
        function a(e) {
          return r ? r(e, n) : e.once ? sa(e, n) : oa(e, n);
        }
      })(e.ifConditions.slice(), t, n, r)
    );
  }
  function la(i, e) {
    var t,
      n,
      r = "{",
      o = (function (e, t) {
        var n = e.directives;
        if (n) {
          var r,
            i,
            o,
            a,
            s = "directives:[",
            c = !1;
          for (r = 0, i = n.length; r < i; r++) {
            (o = n[r]), (a = !0);
            var l = t.directives[o.name];
            l && (a = !!l(e, o, t.warn)),
              a &&
                ((c = !0),
                (s +=
                  '{name:"' +
                  o.name +
                  '",rawName:"' +
                  o.rawName +
                  '"' +
                  (o.value
                    ? ",value:(" +
                      o.value +
                      "),expression:" +
                      JSON.stringify(o.value)
                    : "") +
                  (o.arg ? ',arg:"' + o.arg + '"' : "") +
                  (o.modifiers
                    ? ",modifiers:" + JSON.stringify(o.modifiers)
                    : "") +
                  "},"));
          }
          return c ? s.slice(0, -1) + "]" : void 0;
        }
      })(i, e);
    o && (r += o + ","),
      i.key && (r += "key:" + i.key + ","),
      i.ref && (r += "ref:" + i.ref + ","),
      i.refInFor && (r += "refInFor:true,"),
      i.pre && (r += "pre:true,"),
      i.component && (r += 'tag:"' + i.tag + '",');
    for (var a = 0; a < e.dataGenFns.length; a++) r += e.dataGenFns[a](i);
    if (
      (i.attrs && (r += "attrs:{" + da(i.attrs) + "},"),
      i.props && (r += "domProps:{" + da(i.props) + "},"),
      i.events && (r += Qo(i.events, !1, e.warn) + ","),
      i.nativeEvents && (r += Qo(i.nativeEvents, !0, e.warn) + ","),
      i.slotTarget && !i.slotScope && (r += "slot:" + i.slotTarget + ","),
      i.scopedSlots &&
        (r +=
          ((t = i.scopedSlots),
          (n = e),
          "scopedSlots:_u([" +
            Object.keys(t)
              .map(function (e) {
                return (function e(t, n, r) {
                  return n.for && !n.forProcessed
                    ? ((i = t),
                      (a = r),
                      (s = (o = n).for),
                      (c = o.alias),
                      (l = o.iterator1 ? "," + o.iterator1 : ""),
                      (u = o.iterator2 ? "," + o.iterator2 : ""),
                      (o.forProcessed = !0),
                      "_l((" +
                        s +
                        "),function(" +
                        c +
                        l +
                        u +
                        "){return " +
                        e(i, o, a) +
                        "})")
                    : "{key:" +
                        t +
                        ",fn:function(" +
                        String(n.slotScope) +
                        "){return " +
                        ("template" === n.tag
                          ? n.if
                            ? n.if +
                              "?" +
                              (ua(n, r) || "undefined") +
                              ":undefined"
                            : ua(n, r) || "undefined"
                          : oa(n, r)) +
                        "}}";
                  var i, o, a, s, c, l, u;
                })(e, t[e], n);
              })
              .join(",") +
            "]),")),
      i.model &&
        (r +=
          "model:{value:" +
          i.model.value +
          ",callback:" +
          i.model.callback +
          ",expression:" +
          i.model.expression +
          "},"),
      i.inlineTemplate)
    ) {
      var s = (function (e, t) {
        var n = i.children[0];
        if (1 === n.type) {
          var r = ia(n, t.options);
          return (
            "inlineTemplate:{render:function(){" +
            r.render +
            "},staticRenderFns:[" +
            r.staticRenderFns
              .map(function (e) {
                return "function(){" + e + "}";
              })
              .join(",") +
            "]}"
          );
        }
      })(0, e);
      s && (r += s + ",");
    }
    return (
      (r = r.replace(/,$/, "") + "}"),
      i.wrapData && (r = i.wrapData(r)),
      i.wrapListeners && (r = i.wrapListeners(r)),
      r
    );
  }
  function ua(e, t, n, r, i) {
    var o = e.children;
    if (o.length) {
      var a = o[0];
      if (1 === o.length && a.for && "template" !== a.tag && "slot" !== a.tag)
        return (r || oa)(a, t);
      var s = n
          ? (function (e, t) {
              for (var n = 0, r = 0; r < e.length; r++) {
                var i = e[r];
                if (1 === i.type) {
                  if (
                    fa(i) ||
                    (i.ifConditions &&
                      i.ifConditions.some(function (e) {
                        return fa(e.block);
                      }))
                  ) {
                    n = 2;
                    break;
                  }
                  (t(i) ||
                    (i.ifConditions &&
                      i.ifConditions.some(function (e) {
                        return t(e.block);
                      }))) &&
                    (n = 1);
                }
              }
              return n;
            })(o, t.maybeComponent)
          : 0,
        c = i || pa;
      return (
        "[" +
        o
          .map(function (e) {
            return c(e, t);
          })
          .join(",") +
        "]" +
        (s ? "," + s : "")
      );
    }
  }
  function fa(e) {
    return void 0 !== e.for || "template" === e.tag || "slot" === e.tag;
  }
  function pa(e, t) {
    return 1 === e.type
      ? oa(e, t)
      : 3 === e.type && e.isComment
      ? ((r = e), "_e(" + JSON.stringify(r.text) + ")")
      : "_v(" +
        (2 === (n = e).type ? n.expression : va(JSON.stringify(n.text))) +
        ")";
    var n, r;
  }
  function da(e) {
    for (var t = "", n = 0; n < e.length; n++) {
      var r = e[n];
      t += '"' + r.name + '":' + va(r.value) + ",";
    }
    return t.slice(0, -1);
  }
  function va(e) {
    return e.replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029");
  }
  function ha(t, n) {
    try {
      return new Function(t);
    } catch (e) {
      return (
        n.push({
          err: e,
          code: t,
        }),
        b
      );
    }
  }
  new RegExp(
    "\\b" +
      "do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments"
        .split(",")
        .join("\\b|\\b") +
      "\\b"
  ),
    new RegExp(
      "\\b" +
        "delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b") +
        "\\s*\\([^\\)]*\\)"
    );
  var ma,
    ya,
    ga,
    _a,
    ba,
    $a = ((ma = function (e, t) {
      var n = (function (e, p) {
        (lo = p.warn || yr),
          (ho = p.isPreTag || O),
          (mo = p.mustUseProp || O),
          (yo = p.getTagNamespace || O),
          (fo = gr(p.modules, "transformNode")),
          (po = gr(p.modules, "preTransformNode")),
          (vo = gr(p.modules, "postTransformNode")),
          (uo = p.delimiters);
        var d,
          v,
          h = [],
          i = !1 !== p.preserveWhitespace,
          m = !1,
          y = !1;
        function g(e) {
          e.pre && (m = !1), ho(e.tag) && (y = !1);
          for (var t = 0; t < vo.length; t++) vo[t](e, p);
        }
        return (
          (function (i, d) {
            for (
              var e,
                v,
                h = [],
                m = d.expectHTML,
                y = d.isUnaryTag || O,
                g = d.canBeLeftOpenTag || O,
                a = 0;
              i;

            ) {
              if (((e = i), v && go(v))) {
                var r = 0,
                  o = v.toLowerCase(),
                  t =
                    _o[o] ||
                    (_o[o] = new RegExp(
                      "([\\s\\S]*?)(</" + o + "[^>]*>)",
                      "i"
                    )),
                  n = i.replace(t, function (e, t, n) {
                    return (
                      (r = n.length),
                      go(o) ||
                        "noscript" === o ||
                        (t = t
                          .replace(/<!\--([\s\S]*?)-->/g, "$1")
                          .replace(/<!\[CDATA\[([\s\S]*?)]]>/g, "$1")),
                      co(o, t) && (t = t.slice(1)),
                      d.chars && d.chars(t),
                      ""
                    );
                  });
                (a += i.length - n.length), (i = n), A(o, a - r, a);
              } else {
                var s = i.indexOf("<");
                if (0 === s) {
                  if (oo.test(i)) {
                    var c = i.indexOf("--\x3e");
                    if (0 <= c) {
                      d.shouldKeepComment && d.comment(i.substring(4, c)),
                        C(c + 3);
                      continue;
                    }
                  }
                  if (ao.test(i)) {
                    var l = i.indexOf("]>");
                    if (0 <= l) {
                      C(l + 2);
                      continue;
                    }
                  }
                  var u = i.match(io);
                  if (u) {
                    C(u[0].length);
                    continue;
                  }
                  var f = i.match(ro);
                  if (f) {
                    var p = a;
                    C(f[0].length), A(f[1], p, a);
                    continue;
                  }
                  var _ = x();
                  if (_) {
                    k(_), co(v, i) && C(1);
                    continue;
                  }
                }
                var b = void 0,
                  $ = void 0,
                  w = void 0;
                if (0 <= s) {
                  for (
                    $ = i.slice(s);
                    !(
                      ro.test($) ||
                      to.test($) ||
                      oo.test($) ||
                      ao.test($) ||
                      (w = $.indexOf("<", 1)) < 0
                    );

                  )
                    (s += w), ($ = i.slice(s));
                  (b = i.substring(0, s)), C(s);
                }
                s < 0 && ((b = i), (i = "")), d.chars && b && d.chars(b);
              }
              if (i === e) {
                d.chars && d.chars(i);
                break;
              }
            }
            function C(e) {
              (a += e), (i = i.substring(e));
            }
            function x() {
              var e = i.match(to);
              if (e) {
                var t,
                  n,
                  r = {
                    tagName: e[1],
                    attrs: [],
                    start: a,
                  };
                for (C(e[0].length); !(t = i.match(no)) && (n = i.match(Yi)); )
                  C(n[0].length), r.attrs.push(n);
                if (t)
                  return (r.unarySlash = t[1]), C(t[0].length), (r.end = a), r;
              }
            }
            function k(e) {
              var t = e.tagName,
                n = e.unarySlash;
              m && ("p" === v && Xi(t) && A(v), g(t) && v === t && A(t));
              for (
                var r,
                  i,
                  o,
                  a = y(t) || !!n,
                  s = e.attrs.length,
                  c = new Array(s),
                  l = 0;
                l < s;
                l++
              ) {
                var u = e.attrs[l];
                so &&
                  -1 === u[0].indexOf('""') &&
                  ("" === u[3] && delete u[3],
                  "" === u[4] && delete u[4],
                  "" === u[5] && delete u[5]);
                var f = u[3] || u[4] || u[5] || "",
                  p =
                    "a" === t && "href" === u[1]
                      ? d.shouldDecodeNewlinesForHref
                      : d.shouldDecodeNewlines;
                c[l] = {
                  name: u[1],
                  value:
                    ((r = f),
                    (i = p),
                    (o = i ? wo : $o),
                    r.replace(o, function (e) {
                      return bo[e];
                    })),
                };
              }
              a ||
                (h.push({
                  tag: t,
                  lowerCasedTag: t.toLowerCase(),
                  attrs: c,
                }),
                (v = t)),
                d.start && d.start(t, c, a, e.start, e.end);
            }
            function A(e, t, n) {
              var r, i;
              if (
                (null == t && (t = a),
                null == n && (n = a),
                e && (i = e.toLowerCase()),
                e)
              )
                for (r = h.length - 1; 0 <= r && h[r].lowerCasedTag !== i; r--);
              else r = 0;
              if (0 <= r) {
                for (var o = h.length - 1; r <= o; o--)
                  d.end && d.end(h[o].tag, t, n);
                (h.length = r), (v = r && h[r - 1].tag);
              } else
                "br" === i
                  ? d.start && d.start(e, [], !0, t, n)
                  : "p" === i &&
                    (d.start && d.start(e, [], !1, t, n),
                    d.end && d.end(e, t, n));
            }
            A();
          })(e, {
            warn: lo,
            expectHTML: p.expectHTML,
            isUnaryTag: p.isUnaryTag,
            canBeLeftOpenTag: p.canBeLeftOpenTag,
            shouldDecodeNewlines: p.shouldDecodeNewlines,
            shouldDecodeNewlinesForHref: p.shouldDecodeNewlinesForHref,
            shouldKeepComment: p.comments,
            start: function (e, t, n) {
              var r = (v && v.ns) || yo(e);
              K &&
                "svg" === r &&
                (t = (function (e) {
                  for (var t = [], n = 0; n < e.length; n++) {
                    var r = e[n];
                    Fo.test(r.name) ||
                      ((r.name = r.name.replace(Ro, "")), t.push(r));
                  }
                  return t;
                })(t));
              var i,
                o,
                a,
                s,
                c,
                l = Lo(e, t, v);
              r && (l.ns = r),
                ("style" !== (i = l).tag &&
                  ("script" !== i.tag ||
                    (i.attrsMap.type &&
                      "text/javascript" !== i.attrsMap.type))) ||
                  Y() ||
                  (l.forbidden = !0);
              for (var u = 0; u < po.length; u++) l = po[u](l, p) || l;
              if (
                (m ||
                  (null != xr((o = l), "v-pre") && (o.pre = !0),
                  l.pre && (m = !0)),
                ho(l.tag) && (y = !0),
                m
                  ? (function (e) {
                      var t = e.attrsList.length;
                      if (t)
                        for (
                          var n = (e.attrs = new Array(t)), r = 0;
                          r < t;
                          r++
                        )
                          n[r] = {
                            name: e.attrsList[r].name,
                            value: JSON.stringify(e.attrsList[r].value),
                          };
                      else e.pre || (e.plain = !0);
                    })(l)
                  : l.processed ||
                    (Mo(l),
                    (function (e) {
                      var t = xr(e, "v-if");
                      if (t)
                        (e.if = t),
                          Do(e, {
                            exp: t,
                            block: e,
                          });
                      else {
                        null != xr(e, "v-else") && (e.else = !0);
                        var n = xr(e, "v-else-if");
                        n && (e.elseif = n);
                      }
                    })(l),
                    null != xr((a = l), "v-once") && (a.once = !0),
                    Io(l, p)),
                d
                  ? h.length ||
                    (d.if &&
                      (l.elseif || l.else) &&
                      Do(d, {
                        exp: l.elseif,
                        block: l,
                      }))
                  : (d = l),
                v && !l.forbidden)
              )
                if (l.elseif || l.else)
                  (s = l),
                    (c = (function (e) {
                      for (var t = e.length; t--; ) {
                        if (1 === e[t].type) return e[t];
                        e.pop();
                      }
                    })(v.children)) &&
                      c.if &&
                      Do(c, {
                        exp: s.elseif,
                        block: s,
                      });
                else if (l.slotScope) {
                  v.plain = !1;
                  var f = l.slotTarget || '"default"';
                  (v.scopedSlots || (v.scopedSlots = {}))[f] = l;
                } else v.children.push(l), (l.parent = v);
              n ? g(l) : ((v = l), h.push(l));
            },
            end: function () {
              var e = h[h.length - 1],
                t = e.children[e.children.length - 1];
              t && 3 === t.type && " " === t.text && !y && e.children.pop(),
                (h.length -= 1),
                (v = h[h.length - 1]),
                g(e);
            },
            chars: function (e) {
              if (
                v &&
                (!K || "textarea" !== v.tag || v.attrsMap.placeholder !== e)
              ) {
                var t,
                  n,
                  r = v.children;
                (e =
                  y || e.trim()
                    ? "script" === (t = v).tag || "style" === t.tag
                      ? e
                      : No(e)
                    : i && r.length
                    ? " "
                    : "") &&
                  (!m &&
                  " " !== e &&
                  (n = (function (e) {
                    var t = uo ? Ji(uo) : zi;
                    if (t.test(e)) {
                      for (
                        var n, r, i, o = [], a = [], s = (t.lastIndex = 0);
                        (n = t.exec(e));

                      ) {
                        s < (r = n.index) &&
                          (a.push((i = e.slice(s, r))),
                          o.push(JSON.stringify(i)));
                        var c = hr(n[1].trim());
                        o.push("_s(" + c + ")"),
                          a.push({
                            "@binding": c,
                          }),
                          (s = r + n[0].length);
                      }
                      return (
                        s < e.length &&
                          (a.push((i = e.slice(s))), o.push(JSON.stringify(i))),
                        {
                          expression: o.join("+"),
                          tokens: a,
                        }
                      );
                    }
                  })(e))
                    ? r.push({
                        type: 2,
                        expression: n.expression,
                        tokens: n.tokens,
                        text: e,
                      })
                    : (" " === e && r.length && " " === r[r.length - 1].text) ||
                      r.push({
                        type: 3,
                        text: e,
                      }));
              }
            },
            comment: function (e) {
              v.children.push({
                type: 3,
                text: e,
                isComment: !0,
              });
            },
          }),
          d
        );
      })(e.trim(), t);
      !1 !== t.optimize &&
        (function (e, t) {
          e &&
            ((Uo = Jo(t.staticKeys || "")),
            (Vo = t.isReservedTag || O),
            (function e(t) {
              var n;
              if (
                ((t.static =
                  2 !== (n = t).type &&
                  (3 === n.type ||
                    !(
                      !n.pre &&
                      (n.hasBindings ||
                        n.if ||
                        n.for ||
                        u(n.tag) ||
                        !Vo(n.tag) ||
                        (function (e) {
                          for (; e.parent; ) {
                            if ("template" !== (e = e.parent).tag) return !1;
                            if (e.for) return !0;
                          }
                          return !1;
                        })(n) ||
                        !Object.keys(n).every(Uo))
                    ))),
                1 === t.type)
              ) {
                if (
                  !Vo(t.tag) &&
                  "slot" !== t.tag &&
                  null == t.attrsMap["inline-template"]
                )
                  return;
                for (var r = 0, i = t.children.length; r < i; r++) {
                  var o = t.children[r];
                  e(o), o.static || (t.static = !1);
                }
                if (t.ifConditions)
                  for (var a = 1, s = t.ifConditions.length; a < s; a++) {
                    var c = t.ifConditions[a].block;
                    e(c), c.static || (t.static = !1);
                  }
              }
            })(e),
            (function e(t, n) {
              if (1 === t.type) {
                if (
                  ((t.static || t.once) && (t.staticInFor = n),
                  t.static &&
                    t.children.length &&
                    (1 !== t.children.length || 3 !== t.children[0].type))
                )
                  return void (t.staticRoot = !0);
                if (((t.staticRoot = !1), t.children))
                  for (var r = 0, i = t.children.length; r < i; r++)
                    e(t.children[r], n || !!t.for);
                if (t.ifConditions)
                  for (var o = 1, a = t.ifConditions.length; o < a; o++)
                    e(t.ifConditions[o].block, n);
              }
            })(e, !1));
        })(n, t);
      var r = ia(n, t);
      return {
        ast: n,
        render: r.render,
        staticRenderFns: r.staticRenderFns,
      };
    }),
    (ga = Ko),
    {
      compile: wa,
      compileToFunctions:
        ((_a = wa),
        (ba = Object.create(null)),
        function (e, t, n) {
          (t = m({}, t)).warn, delete t.warn;
          var r = t.delimiters ? String(t.delimiters) + e : e;
          if (ba[r]) return ba[r];
          var i = _a(e, t),
            o = {},
            a = [];
          return (
            (o.render = ha(i.render, a)),
            (o.staticRenderFns = i.staticRenderFns.map(function (e) {
              return ha(e, a);
            })),
            (ba[r] = o)
          );
        }),
    }).compileToFunctions;
  function wa(e, t) {
    var n = Object.create(ga),
      r = [],
      i = [];
    if (
      ((n.warn = function (e, t) {
        (t ? i : r).push(e);
      }),
      t)
    )
      for (var o in (t.modules &&
        (n.modules = (ga.modules || []).concat(t.modules)),
      t.directives &&
        (n.directives = m(Object.create(ga.directives || null), t.directives)),
      t))
        "modules" !== o && "directives" !== o && (n[o] = t[o]);
    var a = ma(e, n);
    return (a.errors = r), (a.tips = i), a;
  }
  function Ca(e) {
    return (
      ((ya = ya || document.createElement("div")).innerHTML = e
        ? '<a href="\n"/>'
        : '<div a="\n"/>'),
      0 < ya.innerHTML.indexOf("&#10;")
    );
  }
  var xa = !!B && Ca(!1),
    ka = !!B && Ca(!0),
    Aa = e(function (e) {
      var t = Un(e);
      return t && t.innerHTML;
    }),
    Oa = dn.prototype.$mount;
  return (
    (dn.prototype.$mount = function (e, t) {
      if ((e = e && Un(e)) === document.body || e === document.documentElement)
        return this;
      var n = this.$options;
      if (!n.render) {
        var r = n.template;
        if (r)
          if ("string" == typeof r) "#" === r.charAt(0) && (r = Aa(r));
          else {
            if (!r.nodeType) return this;
            r = r.innerHTML;
          }
        else
          e &&
            (r = (function (e) {
              if (e.outerHTML) return e.outerHTML;
              var t = document.createElement("div");
              return t.appendChild(e.cloneNode(!0)), t.innerHTML;
            })(e));
        if (r) {
          var i = $a(
              r,
              {
                shouldDecodeNewlines: xa,
                shouldDecodeNewlinesForHref: ka,
                delimiters: n.delimiters,
                comments: n.comments,
              },
              this
            ),
            o = i.render,
            a = i.staticRenderFns;
          (n.render = o), (n.staticRenderFns = a);
        }
      }
      return Oa.call(this, e, t);
    }),
    (dn.compile = $a),
    dn
  );
});
!(function (e, n) {
  "object" == typeof exports && "undefined" != typeof module
    ? n()
    : "function" == typeof define && define.amd
    ? define(n)
    : n();
})(0, function () {
  "use strict";
  function e(n) {
    var t = this.constructor;
    return this.then(
      function (e) {
        return t.resolve(n()).then(function () {
          return e;
        });
      },
      function (e) {
        return t.resolve(n()).then(function () {
          return t.reject(e);
        });
      }
    );
  }
  function o() {}
  function i(e) {
    if (!(this instanceof i))
      throw new TypeError("Promises must be constructed via new");
    if ("function" != typeof e) throw new TypeError("not a function");
    (this._state = 0),
      (this._handled = !1),
      (this._value = void 0),
      (this._deferreds = []),
      l(e, this);
  }
  function r(t, o) {
    for (; 3 === t._state; ) t = t._value;
    0 !== t._state
      ? ((t._handled = !0),
        i._immediateFn(function () {
          var e = 1 === t._state ? o.onFulfilled : o.onRejected;
          if (null !== e) {
            var n;
            try {
              n = e(t._value);
            } catch (e) {
              return void u(o.promise, e);
            }
            f(o.promise, n);
          } else (1 === t._state ? f : u)(o.promise, t._value);
        }))
      : t._deferreds.push(o);
  }
  function f(n, e) {
    try {
      if (e === n)
        throw new TypeError("A promise cannot be resolved with itself.");
      if (e && ("object" == typeof e || "function" == typeof e)) {
        var t = e.then;
        if (e instanceof i) return (n._state = 3), (n._value = e), void c(n);
        if ("function" == typeof t)
          return void l(
            ((o = t),
            (r = e),
            function () {
              o.apply(r, arguments);
            }),
            n
          );
      }
      (n._state = 1), (n._value = e), c(n);
    } catch (e) {
      u(n, e);
    }
    var o, r;
  }
  function u(e, n) {
    (e._state = 2), (e._value = n), c(e);
  }
  function c(e) {
    2 === e._state &&
      0 === e._deferreds.length &&
      i._immediateFn(function () {
        e._handled || i._unhandledRejectionFn(e._value);
      });
    for (var n = 0, t = e._deferreds.length; n < t; n++) r(e, e._deferreds[n]);
    e._deferreds = null;
  }
  function l(e, n) {
    var t = !1;
    try {
      e(
        function (e) {
          t || ((t = !0), f(n, e));
        },
        function (e) {
          t || ((t = !0), u(n, e));
        }
      );
    } catch (e) {
      if (t) return;
      (t = !0), u(n, e);
    }
  }
  var n = setTimeout;
  (i.prototype.catch = function (e) {
    return this.then(null, e);
  }),
    (i.prototype.then = function (e, n) {
      var t = new this.constructor(o);
      return (
        r(
          this,
          new (function (e, n, t) {
            (this.onFulfilled = "function" == typeof e ? e : null),
              (this.onRejected = "function" == typeof n ? n : null),
              (this.promise = t);
          })(e, n, t)
        ),
        t
      );
    }),
    (i.prototype.finally = e),
    (i.all = function (n) {
      return new i(function (o, r) {
        function i(n, e) {
          try {
            if (e && ("object" == typeof e || "function" == typeof e)) {
              var t = e.then;
              if ("function" == typeof t)
                return void t.call(
                  e,
                  function (e) {
                    i(n, e);
                  },
                  r
                );
            }
            (f[n] = e), 0 == --u && o(f);
          } catch (e) {
            r(e);
          }
        }
        if (!n || void 0 === n.length)
          throw new TypeError("Promise.all accepts an array");
        var f = Array.prototype.slice.call(n);
        if (0 === f.length) return o([]);
        for (var u = f.length, e = 0; f.length > e; e++) i(e, f[e]);
      });
    }),
    (i.resolve = function (n) {
      return n && "object" == typeof n && n.constructor === i
        ? n
        : new i(function (e) {
            e(n);
          });
    }),
    (i.reject = function (t) {
      return new i(function (e, n) {
        n(t);
      });
    }),
    (i.race = function (r) {
      return new i(function (e, n) {
        for (var t = 0, o = r.length; t < o; t++) r[t].then(e, n);
      });
    }),
    (i._immediateFn =
      ("function" == typeof setImmediate &&
        function (e) {
          setImmediate(e);
        }) ||
      function (e) {
        n(e, 0);
      }),
    (i._unhandledRejectionFn = function (e) {
      void 0 !== console &&
        console &&
        console.warn("Possible Unhandled Promise Rejection:", e);
    });
  var t = (function () {
    if ("undefined" != typeof self) return self;
    if ("undefined" != typeof window) return window;
    if ("undefined" != typeof global) return global;
    throw Error("unable to locate global object");
  })();
  "Promise" in t
    ? t.Promise.prototype.finally || (t.Promise.prototype.finally = e)
    : (t.Promise = i);
});
var ros,
  ros_cmd_vel,
  ros_status,
  ros_diagnostics_listener,
  robot_cur_x = 0,
  robot_cur_y = 0,
  robot_pos_left = 0,
  robot_pos_top = 0,
  robot_cur_orientation = 0,
  robot_cur_degrees = 0,
  robot_current_mission = -1,
  robot_current_missiontext = "",
  robot_current_mission_guid = "",
  robot_current_mission_action_guid = "",
  robot_mode_id = "",
  robot_footprint = "",
  cart_attached = !1,
  hook_length = 0,
  hook_cart_length = 0,
  hook_cart_width = 0,
  hook_cur_orientation = 0,
  cart_center_x = 0,
  cart_center_y = 0,
  cart_pos_left = 0,
  cart_pos_top = 0,
  cart_center_orientation = 0,
  cart_center_degrees = 0,
  cart_front_x = 0,
  cart_front_y = 0,
  cart_front_orientation = 0,
  cart_front_degrees = 0,
  robot_current_user_prompt = "",
  robot_current_user_prompt_triggered = !1,
  robot_current_user_prompt_timeout_total = 0,
  robot_current_user_prompt_timeout_count = 0,
  robot_current_user_prompt_timer,
  robot_cur_mapping_x = 0,
  robot_cur_mapping_y = 0,
  robot_cur_mapping_orientation = 0,
  robot_cur_mapping_img_x = 0,
  robot_cur_mapping_img_y = 0,
  robot_errors = Array(),
  joystick_action = !1,
  joystick_x = 0,
  joystick_y = 0,
  joystick_timer,
  rescale_timer,
  text_to_html = document.createElement("textarea"),
  toplog_timer,
  toplog_cache = "",
  ros_reconnecter_time = 0,
  ros_reconnecter_timer;
function ros_reconnect() {
  3 < Math.round(+new Date() / 1e3) - ros_reconnecter_time
    ? (ros.connect("ws://" + location.hostname + ":9090"),
      (ros_reconnecter_time = Math.round(+new Date() / 1e3)))
    : (window.clearTimeout(ros_reconnecter_timer),
      (ros_reconnecter_timer = window.setTimeout(function () {
        ros_reconnect();
      }, 1e3)));
}
function decodeHtml(t) {
  return (text_to_html.innerHTML = t), text_to_html.value;
}
function set_active_menusection(t, e) {
  return (
    $("div.wrapper > div.menu > div.submenu > div.menusection").hide(),
    $(
      'div.wrapper > div.menu > div.submenu > div.menusection[data-section="' +
        t +
        '"]'
    ).show(),
    $("div.wrapper > div.menu > div.buttonstrip > ul > li").removeAttr("class"),
    $(
      'div.wrapper > div.menu > div.buttonstrip > ul > li[data-systemname="' +
        t +
        '"]'
    ).attr("class", "active"),
    0 == e && menu_desktop_toggle("show"),
    !0
  );
}
function menu_desktop_toggle(t) {
  return (
    $.post(
      "/?mode=toggle-desktop-menu",
      {
        force: t,
      },
      function (t) {
        "true" == t
          ? document
              .getElementsByTagName("body")[0]
              .setAttribute("data-menu-desktop", "true")
          : document
              .getElementsByTagName("body")[0]
              .setAttribute("data-menu-desktop", "false"),
          topsubbar_paging();
      }
    ),
    !0
  );
}
function mobilemenu_toggle() {
  "true" ==
  document.getElementsByTagName("body")[0].getAttribute("data-menu-mobile")
    ? document
        .getElementsByTagName("body")[0]
        .setAttribute("data-menu-mobile", "false")
    : (document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-status", "false"),
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-menu-mobile", "true")),
    map_toolbars_place();
}
function update_battery_ui() {
  robot_battery_percentage < 25
    ? (robot_battery_percentage_rounded = 25)
    : robot_battery_percentage < 50
    ? (robot_battery_percentage_rounded = 50)
    : robot_battery_percentage < 75
    ? (robot_battery_percentage_rounded = 75)
    : (robot_battery_percentage_rounded = 100),
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-battery", robot_battery_percentage_rounded),
    document.getElementById("topbar_desktop_battery_percentage") &&
      (document.getElementById("topbar_desktop_battery_percentage").innerHTML =
        robot_battery_percentage + "%");
}
function robot_regular_info_listen() {
  "fleet" != systemtype &&
    ((ros_cmd_vel = new ROSLIB.Topic({
      ros: ros,
      name: "/joystick_vel",
      messageType: "mirMsgs/JoystickVel",
    })),
    (ros_status = new ROSLIB.Topic({
      ros: ros,
      name: "/robot_status",
      messageType: "mirMsgs/RobotStatus",
    })),
    (ros_safety_status = new ROSLIB.Topic({
      ros: ros,
      name: "/safety_status",
      messageType: "mirMsgs/SafetyStatus",
    })),
    ros_safety_status.subscribe(function (t) {
      (MIR.joystick.extended_safety_data.is_in_manual = t.in_manual_mode),
        (MIR.joystick.extended_safety_data.is_manual_mode_restart_required =
          t.is_manual_mode_restart_required);
    }),
    ros_status.subscribe(function (message) {
      var tmp_bat = Math.round(parseInt(message.battery_percentage), 2);
      isFinite(tmp_bat) &&
        tmp_bat !== robot_battery_percentage &&
        ((robot_battery_percentage = tmp_bat), update_battery_ui()),
        (MIR.joystick.session_using = message.joystick_web_session_id),
        ("MIR500" != mir_product && "MIR1000" != mir_product) ||
          ((MIR.joystick.extended_safety_data.is_enabled = !0),
          message.mode_key_state &&
            (MIR.joystick.extended_safety_data.key_state =
              message.mode_key_state));
      var claim = MIR.joystick.checkClaim();
      if ("boolean" == typeof message.joystick_low_speed_mode_enabled) {
        $(".slow-mode-btn-wrap").show();
        var reduced_state = "on";
        0 == message.joystick_low_speed_mode_enabled && (reduced_state = "off"),
          $(".toggle-reduced-speed").attr("data-state", reduced_state);
      }
      if (
        ($(".joystick").attr("claim-state", claim),
        message.robot_name !== robot_name && (robot_name = message.robot_name),
        message.robot_model !== robot_model &&
          (robot_model = message.robot_model),
        message.serial_number !== robot_serial &&
          (robot_serial = message.serial_number),
        message.uptime !== robot_uptime && (robot_uptime = message.uptime),
        message.battery_time_remaining !== robot_battery_time &&
          (robot_battery_time = message.battery_time_remaining),
        message.moved !== robot_moved_distance &&
          (robot_moved_distance = message.moved),
        0 == message.errors.length &&
        "true" ==
          document.getElementsByTagName("body")[0].getAttribute("data-error")
          ? document
              .getElementsByTagName("body")[0]
              .setAttribute("data-error", "false")
          : 0 < message.errors.length &&
            "false" ==
              document
                .getElementsByTagName("body")[0]
                .getAttribute("data-error") &&
            (document
              .getElementsByTagName("body")[0]
              .setAttribute("data-error", "true"),
            errorlog_init(message.errors)),
        message.errors !== robot_errors && (robot_errors = message.errors),
        message.map_id !== robot_map_id &&
          ((robot_map_id = message.map_id),
          "dashboards" == window.location.pathname.split("/")[1] &&
            $(".mapcontainer").each(function () {
              (window.pageviewid = "refresh_" + Date.now()),
                $(this).attr("data-map-guid", robot_map_id);
              var t = $(this).attr("data-element-id");
              map_init(t, robot_map_id, !1, !1);
            })),
        message.mode_id !== robot_mode_id)
      ) {
        if (
          ((robot_mode_id = message.mode_id),
          document
            .getElementsByTagName("body")[0]
            .setAttribute("data-mode-id", robot_mode_id),
          window.mode_callbacks[robot_mode_id] &&
            0 < window.mode_callbacks[robot_mode_id].length)
        )
          for (
            var ln = window.mode_callbacks[robot_mode_id].length, c = 0;
            c < ln;

          )
            eval(window.mode_callbacks[robot_mode_id][c]),
              delete window.mode_callbacks[robot_mode_id][c],
              c++;
        $("body").attr(
          "data-mapping",
          String(robot_mode_id === MIR.constants.ROBOT_MODE.MAPPING)
        ),
          $("body").attr(
            "data-mapping-finalizing",
            String(
              robot_mode_id === MIR.constants.ROBOT_MODE.MAPPING_FINALIZING
            )
          );
      }
      if (
        (1 == message.user_prompt.has_request &&
        0 == robot_current_user_prompt_triggered &&
        message.user_prompt.user_group == user_group_id
          ? ((robot_current_user_prompt = message.user_prompt),
            robot_trigger_userprompt())
          : 0 == message.user_prompt.has_request &&
            1 == robot_current_user_prompt_triggered &&
            robot_clear_userprompt(),
        message.state_id !== robot_state_id &&
          (11 == robot_state_id && 12 == message.state_id
            ? $(
                "div.dashboard > div.row > div.widget > div.joystick > div.holder > div.stick"
              ).draggable("disable")
            : 12 == message.state_id && joystick_stop(),
          (robot_state_id = message.state_id),
          document
            .getElementsByTagName("body")[0]
            .setAttribute("data-state-id", robot_state_id),
          10 == robot_state_id
            ? document
                .getElementsByTagName("body")[0]
                .setAttribute("data-emergency-stop", "true")
            : document
                .getElementsByTagName("body")[0]
                .setAttribute("data-emergency-stop", "false"),
          11 == robot_state_id
            ? $(
                "div.dashboard > div.row > div.widget > div.joystick > div.holder > div.stick"
              ).draggable("enable")
            : (3 != robot_state_id && 4 != robot_state_id) ||
              $(
                "div.dashboard > div.row > div.widget > div.joystick > div.holder > div.stick"
              ).draggable("disable")),
        message.mission_text == robot_current_missiontext ||
          (robot_current_missiontext = mir_translate_from_rosbridge(
            message.mission_text
          )),
        "boolean" == typeof is_showing_missionqueue)
      ) {
        var translated_message = mir_translate_from_rosbridge(
          robot_current_missiontext
        );
        $("div.missions_summary_queue > p.missioninfo").each(function () {
          this.innerHTML = translated_message;
        });
      }
      if (message.mission_queue_id == robot_current_mission);
      else if (
        ((robot_current_mission = message.mission_queue_id),
        "boolean" == typeof is_showing_missionqueue &&
          $("div.missions_summary").each(function () {
            missions_summary_check_queue(this.getAttribute("id"), !1);
          }),
        -1 == robot_current_mission)
      )
        (robot_current_mission_guid = ""),
          (robot_current_mission_action_guid = "");
      else {
        var fields = {
          mode: "get-active-mission",
        };
        (fields.queue_id = robot_current_mission),
          $.ajax({
            url: "/",
            data: fields,
            method: "GET",
            dataType: "json",
            success: function (t) {
              (robot_current_mission_guid = t.mission_guid),
                (robot_current_mission_action_guid = t.action_guid);
            },
          });
      }
      message.position.x != robot_cur_x &&
        (null != document.getElementById("robotcontroller_display_x_value") &&
          (document.getElementById(
            "robotcontroller_display_x_value"
          ).innerHTML = number_format(message.position.x, 3, ".", "")),
        (robot_cur_x = message.position.x)),
        message.position.y != robot_cur_y &&
          (null != document.getElementById("robotcontroller_display_y_value") &&
            (document.getElementById(
              "robotcontroller_display_y_value"
            ).innerHTML = number_format(message.position.y, 3, ".", "")),
          (robot_cur_y = message.position.y)),
        message.position.orientation != robot_cur_orientation &&
          (null !=
            document.getElementById(
              "robotcontroller_display_orientation_value"
            ) &&
            (document.getElementById(
              "robotcontroller_display_orientation_value"
            ).innerHTML = number_format(
              message.position.orientation,
              3,
              ".",
              ""
            )),
          (robot_cur_orientation = deg_to_rad(message.position.orientation)),
          (robot_cur_degrees = rad_to_deg(robot_cur_orientation)));
      var update_footprint = message.footprint != robot_footprint;
      if (
        (update_footprint && (robot_footprint = JSON.parse(message.footprint)),
        (cart_attached = message.hook_status.trolley_attached),
        cart_attached)
      ) {
        (hook_length = message.hook_status.length),
          (hook_cart_length = message.hook_status.trolley.length),
          (hook_cart_width = message.hook_status.trolley.width),
          (hook_cur_orientation = deg_to_rad(message.hook_status.angle));
        var cart_pose = robot_to_cart_center(
          robot_cur_x,
          robot_cur_y,
          robot_cur_orientation,
          hook_length,
          hook_cur_orientation,
          hook_cart_length
        );
        (cart_center_x = cart_pose[0]),
          (cart_center_y = cart_pose[1]),
          (cart_center_orientation = cart_pose[2]),
          (cart_center_degrees = rad_to_deg(cart_center_orientation)),
          (cart_pose = robot_to_cart_center(
            robot_cur_x,
            robot_cur_y,
            robot_cur_orientation,
            hook_length,
            hook_cur_orientation,
            0
          )),
          (cart_front_x = cart_pose[0]),
          (cart_front_y = cart_pose[1]),
          (cart_front_orientation = cart_pose[2]),
          (cart_front_degrees = rad_to_deg(cart_front_orientation));
      }
      (String(message.unloaded_map_changes) == unloaded_map_changes &&
        String(message.unloaded_map_changes) ==
          document
            .getElementsByTagName("body")[0]
            .getAttribute("data-unloaded-map-changes")) ||
        ((unloaded_map_changes = String(message.unloaded_map_changes)),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-unloaded-map-changes", unloaded_map_changes)),
        $(
          "div.mapcontainer[data-positioning-robot='false'] > div.mapwrapper > div.mapholder > div.map > div.layer > div.robot"
        ).each(function () {
          var t = this.parentNode.parentNode.parentNode.parentNode.parentNode;
          if (
            t.getAttribute("data-map-guid") == robot_map_id ||
            "true" == t.getAttribute("data-mapping")
          ) {
            var e = $(this),
              a = e.parent().find(".footprint").find("polygon"),
              r = t.getAttribute("data-resscale"),
              n = t.getAttribute("data-origin-x"),
              i = t.getAttribute("data-origin-y"),
              o = t.getAttribute("data-map-height");
            if (update_footprint) {
              var s = $.map(robot_footprint, function (t) {
                return [t[0] * r + "," + t[1] * r];
              }).join(" ");
              a.attr("points", s);
            }
            (robot_pos_left = robot_cur_x * r - n),
              (robot_pos_top = o - (robot_cur_y * r - i));
            var d = robot_cur_degrees;
            d = -(d + 90);
            var l = r / 20;
            t.getAttribute("data-map-guid") == robot_map_id
              ? (t.setAttribute("data-active-map", "true"),
                "true" == t.getAttribute("data-center-robot") &&
                  map_center_robot(t.getAttribute("data-element-id")))
              : "true" == t.getAttribute("data-mapping") &&
                "true" == t.getAttribute("data-center-robot")
              ? map_center_robot(t.getAttribute("data-element-id"))
              : t.setAttribute("data-active-map", "false"),
              $(this).css("top", robot_pos_top),
              $(this).css("left", robot_pos_left),
              $(this).css(
                "WebkitTransform",
                "scale(" + l + "," + l + ") rotate(" + d + "deg)"
              ),
              $(this).css(
                "-moz-transform",
                "scale(" + l + "," + l + ") rotate(" + d + "deg)"
              ),
              $(this).css(
                "-ms-transform",
                "scale(" + l + "," + l + ") rotate(" + d + "deg)"
              ),
              $(this).css(
                "transform",
                "scale(" + l + "," + l + ") rotate(" + d + "deg)"
              ),
              e
                .parent()
                .find(".footprint")
                .css({
                  transform: "rotate(" + d + "deg)",
                  left: robot_pos_left,
                  top: robot_pos_top,
                }),
              $(this).show();
          } else $(this).hide();
        }),
        $(
          "div.mapcontainer[data-positioning-robot='false'] > div.mapwrapper > div.mapholder > div.map > div.layer > div.cart"
        ).each(function () {
          if (cart_attached) {
            var t = this.parentNode.parentNode.parentNode.parentNode.parentNode,
              e = t.getAttribute("data-resscale"),
              a = t.getAttribute("data-origin-x"),
              r = t.getAttribute("data-origin-y"),
              n = t.getAttribute("data-map-height");
            (cart_pos_left = cart_center_x * e - a),
              (cart_pos_top = n - (cart_center_y * e - r));
            var i = cart_center_degrees;
            i = -(i + 90);
            var o = e / 20,
              s = 19 * hook_cart_width,
              d = 18 * hook_cart_length,
              l = d - 16,
              u = s - 11;
            $(this).css("top", cart_pos_top - l / 2),
              $(this).css("left", cart_pos_left - u / 2),
              $(this).css("width", parseInt(s) + "px"),
              $(this).css("height", parseInt(d) + "px"),
              $(this).css(
                "WebkitTransform",
                "scale(" + o + "," + o + ") rotate(" + i + "deg)"
              ),
              $(this).css(
                "-moz-transform",
                "scale(" + o + "," + o + ") rotate(" + i + "deg)"
              ),
              $(this).css(
                "-ms-transform",
                "scale(" + o + "," + o + ") rotate(" + i + "deg)"
              ),
              $(this).css(
                "transform",
                "scale(" + o + "," + o + ") rotate(" + i + "deg)"
              ),
              $(this).show();
          } else $(this).hide();
        });
    }));
}
function markup_api_datatable_filter_trigger(t) {
  clearTimeout(window["datatable_" + t + "_filter_trigger"]),
    (window["datatable_" + t + "_showresults"] = !1),
    null != document.getElementById("filter_word_" + t) &&
      document
        .getElementById("filter_word_" + t)
        .setAttribute("data-spinning", "false"),
    (window["datatable_" + t + "_filter_trigger"] = setTimeout(function () {
      null != document.getElementById("filter_word_" + t) &&
        document
          .getElementById("filter_word_" + t)
          .setAttribute("data-spinning", "true"),
        clearTimeout(window["datatable_" + t + "_filter_trigger"]),
        (window["datatable_" + t + "_showresults"] = !0),
        markup_api_datatable_get_page(t, !1);
    }, 300));
}
function markup_api_datatable_filter_clear(e, a) {
  var r = a.innerHTML,
    n = a.getAttribute("data-template");
  a.setAttribute("disabled", "disabled"),
    a.setAttribute("data-template", "submitting"),
    (a.innerHTML = "Please wait...");
  var i = document.getElementById("datatable_" + e),
    t = i.getAttribute("data-endpoint");
  if (null != document.getElementById("filter_word_" + e))
    var o = document.getElementById("filter_word_" + e);
  if (null != document.getElementById("filter_group_" + e))
    var s = document.getElementById("filter_group_" + e);
  var d = {};
  (d["endpoint_" + t + "_current_page"] = 1),
    (d["endpoint_" + t + "_filter"] = ""),
    (d["endpoint_" + t + "_group"] = ""),
    $.post("/?mode=set-user-settings", d, function (t) {
      null != document.getElementById("filter_word_" + e) && (o.value = ""),
        null != document.getElementById("filter_group_" + e) && $(s).val(""),
        i.setAttribute("data-current-page", 1),
        markup_api_datatable_get_page(e),
        a.removeAttribute("disabled"),
        a.setAttribute("data-template", n),
        (a.innerHTML = r);
    });
}
function markup_api_datatable_get_page(id, append) {
  var table = document.getElementById("datatable_" + id),
    endpoint = table.getAttribute("data-endpoint");
  if (
    (table.setAttribute("data-in-progress", "true"),
    null != document.getElementById("filter_word_" + id))
  )
    var filter = document.getElementById("filter_word_" + id).value;
  else var filter = "";
  if (null != document.getElementById("filter_group_" + id))
    if (0 == document.getElementById("filter_group_" + id).options.length)
      var group = "";
    else
      var group = document.getElementById("filter_group_" + id).options[
        document.getElementById("filter_group_" + id).selectedIndex
      ].value;
  else var group = "";
  var fieldarr = Array(),
    fieldnames = Array(),
    fieldlookups = Array(),
    fieldcounts = Array();
  $("#datatable_" + id + " > tbody > tr:first > th").each(function () {
    fieldarr.push(this.getAttribute("data-field")),
      fieldnames.push(this.innerHTML),
      fieldlookups.push(this.getAttribute("data-field-lookup")),
      fieldcounts.push(this.getAttribute("data-field-count"));
  });
  var subhead_field = table.getAttribute("data-subhead-field"),
    subhead_field_lookup = table.getAttribute("data-subhead-field-lookup");
  (dataobject = {}),
    (dataobject.endpoint = endpoint),
    (dataobject.sort = table.getAttribute("data-sort")),
    (dataobject.order = table.getAttribute("data-order")),
    (dataobject.filter = filter),
    (dataobject.group = group),
    (dataobject.fields = fieldarr),
    (dataobject.fieldlookups = fieldlookups),
    (dataobject.fieldcounts = fieldcounts),
    (dataobject.subhead_field = subhead_field),
    (dataobject.subhead_field_lookup = table.getAttribute(
      "data-subhead-field-lookup"
    )),
    (dataobject.filter_fields = table.getAttribute("data-filter-fields")),
    (dataobject.ip = table.getAttribute("data-ip")),
    (dataobject.translate_fields = table.getAttribute("data-translate-fields")),
    (dataobject.limit = table.getAttribute("data-per-page")),
    (dataobject.offset =
      (parseInt(table.getAttribute("data-current-page")) - 1) *
      parseInt(table.getAttribute("data-per-page"))),
    $.post("/?mode=get-api-list", dataobject, function (data) {
      if (
        (null != document.getElementById("filter_word_" + id) &&
          document
            .getElementById("filter_word_" + id)
            .setAttribute("data-spinning", "false"),
        0 == data.results.length &&
          1 == window["datatable_" + id + "_showresults"])
      ) {
        $(
          "#datatable_" +
            id +
            ' > tbody > tr[data-elastic="true"],#datatable_' +
            id +
            ' > tr[data-elastic="true"]'
        ).css("display", "none"),
          $(
            "#datatable_" +
              id +
              ' > tbody > tr[data-elastic="false"],#datatable_' +
              id +
              ' > tr[data-elastic="false"]'
          ).remove();
        var row = document.createElement("tr");
        row.setAttribute("class", "noitemsfound"),
          row.setAttribute("data-elastic", "false");
        var cell = document.createElement("td");
        cell.setAttribute("class", "noitemsfound"),
          (cell.innerHTML =
            "<p>" + lang_main_datatable_noitemswasfound + "</p>\n"),
          row.appendChild(cell),
          table.appendChild(row),
          (document.getElementById(
            "datatable_" + id + "_itemcount"
          ).innerHTML = mir_translate("No item(s) found")),
          (document.getElementById(
            "datatable_" + id + "_pagecount"
          ).innerHTML = mir_translate("No pages")),
          $("#datatable_" + id + "_itemcount")
            .parent()
            .attr("data-count", 0);
        var usersettings = {};
        "false" ==
          document
            .getElementsByTagName("body")[0]
            .getAttribute("data-mobile") &&
          (usersettings["endpoint_" + endpoint + "_current_page"] = curpage),
          (usersettings["endpoint_" + endpoint + "_filter"] = filter),
          (usersettings["endpoint_" + endpoint + "_group"] = group),
          $.post("/?mode=set-user-settings", usersettings, function (t) {
            0 < dataobject.offset &&
              markup_api_datatable_set_page("previous", id, append);
          });
      } else if (1 == window["datatable_" + id + "_showresults"]) {
        $("#datatable_header_" + id + " > ul.paging").show(),
          $(
            "#datatable_" +
              id +
              ' > tbody > tr[data-elastic="true"],#datatable_' +
              id +
              ' > tr[data-elastic="true"]'
          ).css("display", "");
        var play_function = table.getAttribute("data-play-function"),
          listen_function = table.getAttribute("data-listen-function"),
          queue_function = table.getAttribute("data-queue-function"),
          watch_url = table.getAttribute("data-watch-url"),
          permissions_url = table.getAttribute("data-permissions-url"),
          activate_url = table.getAttribute("data-activate-url"),
          draw_url = table.getAttribute("data-draw-url"),
          edit_url = table.getAttribute("data-edit-url"),
          delete_url = table.getAttribute("data-delete-url"),
          download_url = table.getAttribute("data-download-url"),
          active_guid = table.getAttribute("data-active-guid"),
          data_ident = table.getAttribute("data-ident"),
          endpoint = table.getAttribute("data-endpoint"),
          subhead_export_url = table.getAttribute("data-subhead-export-url"),
          allow_set_item_permissions = table.getAttribute(
            "data-item-permissions"
          ),
          perpage = parseInt(table.getAttribute("data-per-page")),
          numitems = parseInt(data.headers["X-Total-Count"]),
          pictogram = table.getAttribute("data-pictogram");
        0 == pictogram.length && (pictogram = "icon_user_green"),
          1 == append
            ? $(
                "#datatable_" +
                  id +
                  " > tbody > tr.loading,#datatable_" +
                  id +
                  " > tr.loading"
              ).remove()
            : $(
                "#datatable_" +
                  id +
                  ' > tbody > tr[data-elastic="false"],#datatable_' +
                  id +
                  ' > tr[data-elastic="false"]'
              ).remove();
        var numpages = Math.ceil(numitems / perpage);
        if (
          (table.setAttribute("data-max-page", numpages),
          0 == table.getAttribute("data-current-page"))
        ) {
          table.setAttribute("data-current-page", 1);
          var curpage = 1;
        } else {
          if (
            "true" ==
            document.getElementsByTagName("body")[0].getAttribute("data-mobile")
          )
            var curpage = parseInt(
              table.getAttribute("data-current-mobile-page")
            );
          else var curpage = parseInt(table.getAttribute("data-current-page"));
          numpages < curpage &&
            (table.setAttribute("data-current-page", numpages),
            (curpage = parseInt(numpages)));
        }
        var usersettings = {};
        "false" ==
          document
            .getElementsByTagName("body")[0]
            .getAttribute("data-mobile") &&
          (usersettings["endpoint_" + endpoint + "_current_page"] = curpage),
          (usersettings["endpoint_" + endpoint + "_filter"] = filter),
          (usersettings["endpoint_" + endpoint + "_group"] = group),
          $.post("/?mode=set-user-settings", usersettings, function (t) {});
        var c_start = (parseInt(curpage) - 1) * parseInt(perpage),
          c_stop = c_start + parseInt(perpage),
          c_start = 0,
          c_stop = parseInt(perpage);
        c_stop >
          parseInt(numitems) - (parseInt(curpage) - 1) * parseInt(perpage) &&
          (c_stop =
            parseInt(numitems) - (parseInt(curpage) - 1) * parseInt(perpage)),
          (document.getElementById(
            "datatable_" + id + "_itemcount"
          ).innerHTML = mir_translate("%(numhits)d item(s) found", {
            numhits: number_format(data.headers["X-Total-Count"], 0, ",", "."),
          })),
          (document.getElementById(
            "datatable_" + id + "_pagecount"
          ).innerHTML = mir_translate("Page %(numpage)d of %(numpages)d", {
            numpage: number_format(curpage, 0, ",", "."),
            numpages: number_format(numpages, 0, ",", "."),
          })),
          $("#datatable_" + id + "_itemcount")
            .parent()
            .attr("data-count", data.headers["X-Total-Count"]);
        for (var curhead = "", c = 0; c < c_stop; ) {
          if (0 < subhead_field.length)
            if (data.results[c].subhead_guid == curhead);
            else {
              curhead = data.results[c].subhead_guid;
              var current_is_active_site = !1;
              "fleet" == MIR.config.product &&
                "maps" == data_ident &&
                "" != active_guid &&
                active_guid == data.results[c].subhead_guid &&
                (current_is_active_site = !0);
              var row = document.createElement("tr");
              row.setAttribute("data-elastic", "false"),
                row.setAttribute("class", "subheadrow visible"),
                table.appendChild(row);
              var cell = document.createElement("th");
              if (
                ("fleet" == MIR.config.product && "maps" == data_ident
                  ? (cell.setAttribute("colspan", 4),
                    cell.setAttribute("class", "subhead map-subhead"))
                  : (cell.setAttribute("colspan", fieldarr.length - 1),
                    cell.setAttribute("class", "subhead")),
                "fleet" == MIR.config.product && current_is_active_site
                  ? (cell.innerHTML =
                      '<div class="active-site">' +
                      data.results[c].subhead +
                      '<span class="active">' +
                      mir_translate("Active") +
                      "</span></div>")
                  : (cell.innerHTML =
                      "<div>" + data.results[c].subhead + "</div>"),
                row.appendChild(cell),
                "fleet" != MIR.config.product)
              ) {
                var cell = document.createElement("th");
                cell.setAttribute("class", "subhead_buttons"),
                  row.appendChild(cell);
              }
              if (
                0 < subhead_export_url.length &&
                "mirconst-guid-0000-0001-areas0000000" !==
                  data.results[c].subhead_guid
              ) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  subhead_export_url.replace(
                    "[guid]",
                    data.results[c].subhead_guid
                  )
                ),
                  button.setAttribute("class", "export"),
                  button.setAttribute("title", lang_main_datatable_export),
                  (button.innerHTML =
                    "<span>" + lang_main_datatable_export + "</span>"),
                  cell.appendChild(button);
              }
              if (
                0 < subhead_export_url.length &&
                "mirconst-guid-0000-0001-areas0000000" !==
                  data.results[c].subhead_guid &&
                "fleet" == MIR.config.product &&
                !current_is_active_site
              ) {
                var button = document.createElement("a"),
                  classes = "set_this_site_to_active disable";
                0 <= data.results[c].allowed_methods.indexOf("PUT") &&
                  (classes = "set_this_site_to_active"),
                  button.setAttribute("class", classes),
                  button.setAttribute("href", "/setup/maps"),
                  button.setAttribute(
                    "data-guid",
                    data.results[c].subhead_guid
                  ),
                  button.setAttribute("data-switching-site", "false"),
                  (button.innerHTML =
                    "<span>" + mir_translate("activate_site") + "</span>"),
                  cell.appendChild(button);
              }
            }
          var row = document.createElement("tr");
          row.setAttribute("data-elastic", "false"),
            row.setAttribute("class", "visible"),
            data.results[c].guid == table.getAttribute("data-active-guid") &&
            0 < table.getAttribute("data-active-guid").length
              ? row.setAttribute("data-active", "true")
              : row.setAttribute("data-active", "false"),
            data.results[c].child_positions &&
            0 < data.results[c].child_positions.length
              ? row.setAttribute("data-has-children", "true")
              : row.setAttribute("data-has-children", "false"),
            row.setAttribute("data-open", "false"),
            row.setAttribute("data-guid", data.results[c].guid),
            row.setAttribute("data-id", data.results[c].id),
            (row.onclick = function () {
              $(window).width() < MIR.constants.MOBILE_RES_THRESHOLD &&
                (0 < this.parentNode.getAttribute("data-edit-url").length
                  ? (location.href = this.parentNode
                      .getAttribute("data-edit-url")
                      .replace("[guid]", this.getAttribute("data-guid"))
                      .replace("[id]", this.getAttribute("data-id")))
                  : 0 < this.parentNode.getAttribute("data-watch-url").length &&
                    (location.href = this.parentNode
                      .getAttribute("data-watch-url")
                      .replace("[guid]", this.getAttribute("data-guid"))
                      .replace("[id]", this.getAttribute("data-id"))));
            });
          for (var s = 0, len = fieldarr.length; s < len; ) {
            null == data.results[c].allowed_methods &&
              (data.results[c].allowed_methods = []);
            var cell = document.createElement("td");
            if (0 == s) {
              var pic = document.createElement("img");
              pic.setAttribute("src", "/graphics/" + pictogram + ".svg"),
                pic.setAttribute("width", 16),
                pic.setAttribute("height", 16),
                cell.appendChild(pic);
            } else if (s == len - 1) {
              var watchbutton_inserted = !1;
              if ("true" == allow_set_item_permissions) {
                var button = document.createElement("div");
                button.setAttribute("data-guid", data.results[c].guid),
                  button.setAttribute("data-endpoint", endpoint),
                  button.setAttribute("class", "itempermissions"),
                  button.setAttribute("data-active", "true"),
                  button.setAttribute(
                    "title",
                    lang_main_datatable_itempermissions
                  ),
                  (button.innerHTML = "<span>Permissions</span>"),
                  (button.onclick = function () {
                    launch_item_permissions(
                      this.getAttribute("data-endpoint"),
                      this.getAttribute("data-guid")
                    );
                  }),
                  cell.appendChild(button);
              }
              if (
                0 < play_function.length &&
                -1 != data.results[c].allowed_methods.indexOf("PUT")
              ) {
                var button = document.createElement("div");
                button.setAttribute("data-play-function", play_function),
                  button.setAttribute("data-guid", data.results[c].guid),
                  button.setAttribute("data-length", data.results[c].length),
                  button.setAttribute("data-volume", data.results[c].volume),
                  button.setAttribute("data-playing", "false"),
                  button.setAttribute("title", mir_translate("Play")),
                  button.setAttribute("class", "play"),
                  (button.innerHTML = "<span>Play</span>"),
                  (button.onclick = function () {
                    eval(
                      this.getAttribute("data-play-function") +
                        "(this,'" +
                        this.getAttribute("data-guid") +
                        "');"
                    );
                  }),
                  cell.appendChild(button);
              }
              if (0 < listen_function.length) {
                var button = document.createElement("div");
                button.setAttribute("data-listen-function", listen_function),
                  button.setAttribute("data-guid", data.results[c].guid),
                  button.setAttribute("data-playing", "false"),
                  button.setAttribute("title", mir_translate("Listen")),
                  button.setAttribute("class", "listen"),
                  (button.innerHTML = "<span>Listen</span>"),
                  (button.onclick = function () {
                    eval(
                      this.getAttribute("data-listen-function") +
                        "(this,'" +
                        this.getAttribute("data-guid") +
                        "');"
                    );
                  }),
                  cell.appendChild(button);
              }
              if (0 < queue_function.length) {
                var button = document.createElement("div");
                button.setAttribute("data-queue-function", queue_function),
                  button.setAttribute("data-guid", data.results[c].guid),
                  button.setAttribute("title", mir_translate("Queue")),
                  button.setAttribute("class", "queue"),
                  (button.innerHTML = "<span>Queue</span>"),
                  (button.onclick = function () {
                    eval(
                      this.getAttribute("data-queue-function") +
                        "(null,'" +
                        this.getAttribute("data-guid") +
                        "',null);"
                    );
                  }),
                  cell.appendChild(button);
              }
              if (0 < permissions_url.length) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  permissions_url.replace("[guid]", data.results[c].guid)
                ),
                  button.setAttribute("class", "permissions"),
                  button.setAttribute("title", lang_main_datatable_permissions),
                  (button.innerHTML = "<span>Permissions</span>"),
                  -1 == data.results[c].allowed_methods.indexOf("PUT") &&
                    ((button.onclick = function () {
                      return launch_error(datatable_lang_editnotallowed), !1;
                    }),
                    button.setAttribute("href", ""),
                    button.setAttribute("data-active", "false")),
                  cell.appendChild(button);
              }
              if (0 < activate_url.length) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  activate_url.replace("[guid]", data.results[c].guid)
                ),
                  button.setAttribute("class", "activate"),
                  button.setAttribute("title", mir_translate("Activate")),
                  button.setAttribute("data-map-guid", data.results[c].guid),
                  (button.innerHTML = "<span>Activate</span>"),
                  (button.onclick = function () {
                    launch_waiter("The robot is changing map.");
                    var t = this.getAttribute("href"),
                      e = {};
                    return (
                      (e.id = this.getAttribute("data-map-guid")),
                      $.ajax({
                        url: t,
                        data: e,
                        method: "POST",
                        dataType: "json",
                        id: id,
                        success: function (t) {
                          if (200 == t.headers.httpcode)
                            var e = window.setInterval(function () {
                              255 == robot_mode_id ||
                                (window.clearInterval(e),
                                table.setAttribute(
                                  "data-active-guid",
                                  robot_map_id
                                ),
                                markup_api_datatable_set_page(
                                  "first",
                                  id,
                                  !1,
                                  !0
                                ),
                                close_waiter());
                            }, 2e3);
                          else
                            close_waiter(),
                              launch_error(
                                mir_translate(t.results.error_human)
                              );
                        },
                      }),
                      !1
                    );
                  }),
                  cell.appendChild(button);
              }
              if (0 < download_url.length) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  download_url
                    .replace("[guid]", data.results[c].guid)
                    .replace("[id]", data.results[c].id)
                ),
                  button.setAttribute("class", "download"),
                  button.setAttribute("data-active", "true"),
                  button.setAttribute("title", lang_main_datatable_download),
                  (button.innerHTML = "<span>Download</span>"),
                  0 == data.results[c].ready &&
                    (button.setAttribute("data-active", "false"),
                    (button.onclick = function () {
                      return !1;
                    })),
                  cell.appendChild(button);
              }
              if (0 < draw_url.length) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  draw_url.replace("[guid]", data.results[c].guid)
                ),
                  button.setAttribute("class", "draw"),
                  button.setAttribute("data-active", "true"),
                  button.setAttribute("title", lang_main_datatable_draw),
                  (button.innerHTML = "<span>Draw</span>"),
                  -1 == data.results[c].allowed_methods.indexOf("PUT") &&
                    ((button.onclick = function () {
                      return launch_error(datatable_lang_editnotallowed), !1;
                    }),
                    button.setAttribute("href", ""),
                    button.setAttribute("data-active", "false")),
                  cell.appendChild(button);
              }
              if (
                0 < watch_url.length &&
                (0 == edit_url.length ||
                  -1 == data.results[c].allowed_methods.indexOf("PUT"))
              ) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  watch_url
                    .replace("[guid]", data.results[c].guid)
                    .replace("[id]", data.results[c].id)
                ),
                  button.setAttribute("class", "watch"),
                  button.setAttribute("title", lang_main_datatable_watch),
                  (button.innerHTML = "<span>Watch</span>"),
                  cell.appendChild(button),
                  0 == data.results[c].ready &&
                    (button.setAttribute("data-active", "false"),
                    (button.onclick = function () {
                      return !1;
                    })),
                  (watchbutton_inserted = !0);
              }
              if (0 < edit_url.length && 0 == watchbutton_inserted) {
                var edit_myself_button = !1,
                  button = document.createElement("a");
                data.results[c].guid &&
                user_guid &&
                "/users" == endpoint &&
                data.results[c].guid == user_guid
                  ? (button.setAttribute(
                      "href",
                      edit_url.replace("[guid]", "me")
                    ),
                    (edit_myself_button = !0))
                  : button.setAttribute(
                      "href",
                      edit_url
                        .replace("[guid]", data.results[c].guid)
                        .replace("[id]", data.results[c].id)
                    ),
                  button.setAttribute("class", "edit"),
                  button.setAttribute("data-active", "true"),
                  button.setAttribute("title", mir_translate("Edit")),
                  (button.innerHTML = "<span>Edit</span>"),
                  -1 == data.results[c].allowed_methods.indexOf("PUT") &&
                    0 == edit_myself_button &&
                    ((button.onclick = function () {
                      return launch_error(datatable_lang_editnotallowed), !1;
                    }),
                    button.setAttribute("href", ""),
                    button.setAttribute("data-active", "false")),
                  cell.appendChild(button);
              }
              if (0 < delete_url.length) {
                var button = document.createElement("a");
                button.setAttribute(
                  "href",
                  delete_url
                    .replace("[guid]", data.results[c].guid)
                    .replace("[id]", data.results[c].id)
                ),
                  button.setAttribute("class", "delete"),
                  button.setAttribute("data-active", "true"),
                  button.setAttribute("title", mir_translate("Delete")),
                  (button.innerHTML = "<span>Delete</span>"),
                  (-1 == data.results[c].allowed_methods.indexOf("DELETE") ||
                    (data.results[c].guid == robot_map_id &&
                      "/maps" == endpoint)) &&
                    ((button.onclick = function () {
                      return launch_error(datatable_lang_deletenotallowed), !1;
                    }),
                    button.setAttribute("href", ""),
                    button.setAttribute("data-active", "false")),
                  cell.appendChild(button);
              }
            } else {
              if (1 == s && data.results[c].guid == active_guid)
                var activeindicator =
                  ' <span class="active">' + datatable_lang_active + "</span>";
              else var activeindicator = "";
              var curcontent = data.results[c][fieldarr[s]];
              null == curcontent && (curcontent = "&nbsp;");
              var celldiv = document.createElement("div");
              celldiv.setAttribute("data-guid", data.results[c].guid),
                (celldiv.innerHTML = curcontent + activeindicator),
                data.results[c].child_positions &&
                  0 < data.results[c].child_positions.length &&
                  (celldiv.onclick = function () {
                    var t = this.parentNode.parentNode,
                      e = this.getAttribute("data-guid");
                    "true" == t.getAttribute("data-open")
                      ? (t.setAttribute("data-open", "false"),
                        $(t)
                          .parent()
                          .find("tr[data-child-of='" + e + "'].subrow")
                          .attr("data-open", "false"))
                      : (t.setAttribute("data-open", "true"),
                        $(t)
                          .parent()
                          .find("tr[data-child-of='" + e + "'].subrow")
                          .attr("data-open", "true"));
                  });
              var cell = document.createElement("td");
              (cell.innerHTML = fieldnames[s]),
                cell.appendChild(celldiv),
                row.appendChild(cell);
            }
            row.appendChild(cell), s++;
          }
          if (
            (table.appendChild(row),
            data.results[c].child_positions &&
              0 < data.results[c].child_positions.length)
          )
            for (var t = 0; t < data.results[c].child_positions.length; ) {
              var subrow = document.createElement("tr");
              subrow.setAttribute("data-elastic", "false"),
                subrow.setAttribute("class", "subrow"),
                subrow.setAttribute("data-open", "false"),
                subrow.setAttribute("data-child-of", data.results[c].guid),
                table.appendChild(subrow);
              var cell = document.createElement("td");
              (cell.innerHTML = "&nbsp;"), subrow.appendChild(cell);
              var cell = document.createElement("td");
              (cell.innerHTML =
                "<div>" + data.results[c].child_positions[t].name + "</div>"),
                subrow.appendChild(cell);
              var cell = document.createElement("td");
              (cell.innerHTML =
                "<div>" +
                data.results[c].child_positions[t].type_id +
                "</div>"),
                subrow.appendChild(cell);
              var cell = document.createElement("td");
              (cell.innerHTML =
                "<div>" + data.results[c].child_positions[t].pos_x + "</div>"),
                subrow.appendChild(cell);
              var cell = document.createElement("td");
              (cell.innerHTML =
                "<div>" + data.results[c].child_positions[t].pos_y + "</div>"),
                subrow.appendChild(cell);
              var cell = document.createElement("td");
              (cell.innerHTML =
                "<div>" +
                data.results[c].child_positions[t].orientation +
                "</div>"),
                subrow.appendChild(cell);
              var cell = document.createElement("td");
              subrow.appendChild(cell);
              var button = document.createElement("a");
              button.setAttribute(
                "href",
                edit_url.replace(
                  "[guid]",
                  data.results[c].child_positions[t].guid
                )
              ),
                button.setAttribute("class", "edit"),
                button.setAttribute("data-active", "true"),
                (button.innerHTML = "<span>Edit</span>"),
                -1 ==
                  data.results[c].child_positions[t].allowed_methods.indexOf(
                    "PUT"
                  ) &&
                  ((button.onclick = function () {
                    return launch_error(datatable_lang_editnotallowed), !1;
                  }),
                  button.setAttribute("href", ""),
                  button.setAttribute("data-active", "false")),
                cell.appendChild(button);
              var button = document.createElement("a");
              button.setAttribute("href", ""),
                button.setAttribute("class", "delete"),
                button.setAttribute("data-active", "false"),
                (button.innerHTML = "<span>Delete</span>"),
                (button.onclick = function () {
                  return !1;
                }),
                cell.appendChild(button),
                t++;
            }
          c++;
        }
        if (
          data.unused_subheads &&
          0 < data.unused_subheads.length &&
          1 == curpage
        )
          for (var c = 0; c < data.unused_subheads.length; ) {
            var row = document.createElement("tr");
            row.setAttribute("data-elastic", "false"),
              row.setAttribute("data-empty", "true"),
              row.setAttribute("class", "subheadrow visible"),
              table.appendChild(row);
            var cell = document.createElement("th");
            cell.setAttribute("colspan", fieldarr.length - 1),
              cell.setAttribute("class", "subhead"),
              (cell.innerHTML =
                "<div>" + data.unused_subheads[c].name + "</div>"),
              row.appendChild(cell);
            var cell = document.createElement("th");
            cell.setAttribute("class", "subhead_buttons"),
              row.appendChild(cell);
            var button = document.createElement("div");
            button.setAttribute("class", "delete"),
              button.setAttribute("title", lang_main_datatable_delete),
              -1 == data.unused_subheads[c].allowed_methods.indexOf("DELETE")
                ? button.setAttribute("data-active", "false")
                : button.setAttribute("data-active", "true"),
              button.setAttribute("data-endpoint", subhead_field_lookup),
              button.setAttribute("data-id", data.unused_subheads[c].guid),
              (button.innerHTML =
                "<span>" + lang_main_datatable_delete + "</span>"),
              data.unused_subheads[c].allowed_methods &&
                -1 <
                  data.unused_subheads[c].allowed_methods.indexOf("DELETE") &&
                (button.onclick = function () {
                  launch_confirm(
                    lang_main_datatable_reallydelete,
                    lang_main_datatable_reallydeletedescription,
                    "instant_delete('" +
                      this.getAttribute("data-endpoint") +
                      "','" +
                      this.getAttribute("data-id") +
                      "','markup_api_datatable_get_page(\"" +
                      id +
                      '",' +
                      append +
                      ");');"
                  );
                }),
              "/maps" == endpoint && cell.appendChild(button);
            var row = document.createElement("tr");
            row.setAttribute("data-elastic", "false"),
              row.setAttribute("class", "subheadnodatarow visible"),
              table.appendChild(row);
            var cell = document.createElement("td");
            if (
              (cell.setAttribute("colspan", fieldarr.length),
              cell.setAttribute("class", "nosubdata"),
              (cell.innerHTML =
                "<div>" + lang_main_datatable_noitemsavailable + "</div>"),
              row.appendChild(cell),
              c++,
              c == data.unused_subheads.length)
            ) {
              $('tr[data-empty-groups="true"]').length &&
                $('tr[data-empty-groups="true"]').remove();
              var row = document.createElement("tr");
              row.setAttribute("data-empty-groups", "true");
              var cell = document.createElement("th");
              cell.setAttribute("colspan", fieldarr.length),
                (cell.innerText = mir_translate(
                  "shared_setup_maps_table_heading_title_empty_sites"
                )),
                $(row).css("padding", "5px 0 5px 0"),
                $(cell).css("text-align", "left"),
                $(cell).css("padding-left", "10px"),
                $(row).append($(cell));
              var cell = document.createElement("th");
              $(row).prepend($(cell)),
                $('tr[data-empty="true"]').eq(0).before($(row));
            }
          }
      }
      if (
        (window["datatable_" + id + "_fetching"],
        "false" === table.getAttribute("data-infinite-scroll-mobile"))
      ) {
        var $paging = $(".datatable-paging[data-table-id='" + id + "']");
        0 === $paging.length &&
          (($paging = $(
            [
              "<div class='datatable-paging' data-table-id='" + id + "'>",
              "\t<span class='first mir-btn mir-blue'></span>",
              "\t<span class='prev mir-btn mir-blue'></span>",
              "\t<span class='info'>" + mir_translate("Previous") + "</span>",
              "\t<span class='next mir-btn mir-blue'></span>",
              "\t<span class='last mir-btn mir-blue'></span>",
              "</div>",
            ].join("\n")
          ).insertBefore(table)),
          $paging.find(".first").click(function () {
            markup_api_datatable_set_page("first", id);
          }),
          $paging.find(".last").click(function () {
            markup_api_datatable_set_page("last", id);
          }),
          $paging.find(".next").click(function () {
            markup_api_datatable_set_page("next", id);
          }),
          $paging.find(".prev").click(function () {
            markup_api_datatable_set_page("previous", id);
          })),
          $paging.find(".info").html(
            mir_translate("Page %(numpage)d of %(numpages)d", {
              numpage: number_format(
                parseInt(table.getAttribute("data-current-page")),
                0,
                ",",
                "."
              ),
              numpages: number_format(
                parseInt(table.getAttribute("data-max-page")),
                0,
                ",",
                "."
              ),
            })
          ),
          $paging
            .find(".first,.prev")
            .toggleClass(
              "mir-disabled",
              1 == table.getAttribute("data-current-page")
            ),
          $paging
            .find(".last,.next")
            .toggleClass(
              "mir-disabled",
              table.getAttribute("data-current-page") ==
                table.getAttribute("data-max-page")
            );
      } else if (
        table.getAttribute("data-current-page") <
        table.getAttribute("data-max-page")
      ) {
        var row = document.createElement("tr");
        row.setAttribute("data-elastic", "false"),
          row.setAttribute("class", "loading"),
          table.appendChild(row);
        var cell = document.createElement("td");
        (cell.innerHTML = "<div>Loading...</div>"), row.appendChild(cell);
      }
      table.setAttribute("data-in-progress", "false");
    });
}
function markup_api_datatable_set_page(t, e, a, r) {
  var n = document.getElementById("datatable_" + e);
  if ("false" == n.getAttribute("data-in-progress")) {
    n.setAttribute("data-in-progress", "true");
    var i = n.getAttribute("data-current-page"),
      o = n.getAttribute("data-max-page"),
      s = 0;
    "first" == t && 1 < parseInt(i) && 0 < parseInt(i)
      ? (s = 1)
      : "previous" == t && 1 < parseInt(i) && 0 < parseInt(i)
      ? (s = parseInt(i) - 1)
      : "next" == t && parseInt(i) < parseInt(o) && 0 < parseInt(i)
      ? (s = parseInt(i) + 1)
      : "last" == t &&
        parseInt(i) < parseInt(o) &&
        0 < parseInt(i) &&
        (s = parseInt(o)),
      0 < s
        ? (n.setAttribute("data-current-page", s),
          n.setAttribute("data-current-mobile-page", s))
        : n.setAttribute("data-in-progress", "false"),
      (0 < s || r) && markup_api_datatable_get_page(e, a);
  }
}
function instant_delete(endpoint, id, dowhendone) {
  var fields = {
    mode: "instant-delete",
  };
  (fields.id = id),
    (fields.endpoint = endpoint),
    $.ajax({
      url: "/",
      data: fields,
      method: "GET",
      dataType: "json",
      dowhendone: dowhendone,
      success: function (data) {
        204 == data.headers.httpcode && eval(this.dowhendone);
      },
    });
}
function form_submit(p) {
  var _ = document.getElementById("form_" + p),
    t = document.getElementById("formholder_" + p);
  t.setAttribute("data-error", "false"),
    $(t).find("div.field").attr("data-error", "false");
  var b = $(t).find("input[type='submit']").attr("value"),
    g = $(t).find("input[type='submit']").attr("data-template");
  $(t).find("input[type='submit']").attr("data-template", "submitting"),
    $(t).find("input[type='submit']").attr("value", form_lang_pleasewait),
    $(t).find("input[type='submit']").prop("disabled", !0),
    null != document.getElementById(p + "_errorholder") &&
      document
        .getElementById(p + "_errorholder")
        .parentNode.removeChild(document.getElementById(p + "_errorholder"));
  var e = {};
  return (
    $(
      "#form_" + p + " input, #form_" + p + " select, #form_" + p + " textarea"
    ).each(function () {
      if (
        this.getAttribute("disabled") &&
        "disabled" == this.getAttribute("disabled")
      );
      else {
        var t = this.getAttribute("name");
        this.hasAttribute("data-type") &&
          (t += ":::::" + this.getAttribute("data-type")),
          this.hasAttribute("data-sort-order") &&
            (t += ":::::" + this.getAttribute("data-sort-order")),
          this.hasAttribute("data-position-guid") &&
            (t += ":::::" + this.getAttribute("data-position-guid")),
          1 == $(this).is("select")
            ? ((e[t] = ""),
              0 != this.options.length &&
                (e[t] = this.options[this.selectedIndex].value))
            : "radio" == this.getAttribute("type")
            ? 1 == this.checked && (e[t] = this.value)
            : "checkbox" == this.getAttribute("type")
            ? 1 == this.checked
              ? (e[t] = this.value)
              : (e[t] = "false")
            : (e[t] = this.value);
      }
    }),
    $.post(_.getAttribute("action"), e, function (t) {
      if (200 == t.headers.httpcode || 201 == t.headers.httpcode)
        if ("goto" == t.type) resetChanges(), (location.href = t.url);
        else if (void 0 !== t.results.error_code) {
          if (void 0 !== t.results.field_errors) {
            var e = 0,
              a = Array(),
              r = document.createElement("div");
            for (var n in (r.setAttribute("class", "errors"),
            r.setAttribute("id", p + "_errorholder"),
            t.results.field_errors))
              a.push(t.results.field_errors[n]), e++;
            if (1 == e) {
              ((i = document.createElement("p")).innerHTML =
                "<strong>An error occured:</strong><br />" +
                mir_translate(a[0].error_human)),
                r.appendChild(i);
            } else {
              var i;
              ((i = document.createElement("p")).innerHTML =
                "<strong>Some errors occured. Please correct the errors and try again.</strong>"),
                r.appendChild(i);
              var o = document.createElement("ul");
              r.appendChild(o);
              for (var s = 0; s < a.length; ) {
                ((n = document.createElement("li")).innerHTML =
                  "<div>" + mir_translate(a[s].error_human) + "</div>"),
                  o.appendChild(n),
                  s++;
              }
            }
            r.setAttribute("data-errors", e),
              _.parentNode.insertBefore(r, _.parentNode.firstChild);
          }
        } else {
          resetChanges();
          var d = _.getAttribute("data-end-url");
          (d = d.replace("[guid]", t.results.guid)), (location.href = d);
        }
      else {
        var l = document.getElementById("formholder_" + p),
          u = "";
        if (
          ((document.getElementById(
            p + "_errormessage"
          ).innerHTML = mir_translate(t.results.error_human)),
          l.setAttribute("data-error", "true"),
          void 0 !== t.results.field_errors)
        ) {
          for (var c in t.results.field_errors) {
            0 == u.length && (u = c);
            var m = $(l).find(
              "div.field[data-field='" +
                c +
                "'],div.checkfield[data-field='" +
                c +
                "']"
            );
            $(m).attr("data-error", "true"),
              $(m)
                .children("div.fielderror")
                .html(
                  "<p>" +
                    mir_translate(t.results.field_errors[c].error_human) +
                    "</p>"
                );
          }
          0 < u.length && document.getElementById(u).focus();
        }
      }
      $(l).find("input[type='submit']").attr("data-template", g),
        $(l).find("input[type='submit']").attr("value", b),
        $(l).find("input[type='submit']").prop("disabled", !1);
    }),
    !1
  );
}
function joystick_toggle() {
  var t = new ROSLIB.Service({
      ros: ros,
      name: "/mirsupervisor/setRobotState",
      serviceType: "mirSupervisor/SetState",
    }),
    e = {
      robotState: 4,
    };
  11 != robot_state_id &&
    ((e.robotState = 11), (e.web_session_id = MIR.joystick.session_user)),
    t.callService(new ROSLIB.ServiceRequest(e), function (t) {
      t.joystick_token &&
        "" != t.joystick_token &&
        MIR.joystick.claim(t.joystick_token);
    });
}
function joystick_movement(t, e, a) {
  a = a || 1.5;
  var r = e,
    n = $(e).parent(),
    i = ($(n).height() - $(r).height()) / a,
    o = t.originalPosition.top - t.position.top,
    s = t.originalPosition.left - t.position.left,
    d = Math.sqrt(o * o + s * s);
  if (i < d) {
    var l = d / i;
    (o /= l),
      (s /= l),
      (t.position.top = t.originalPosition.top - o),
      (t.position.left = t.originalPosition.left - s);
  }
  var u = 20 + o / 6,
    c = s / 3;
  $(r).css("box-shadow", c + "px " + u + "px 5px rgba(0,0,0,0.5)");
  var m = 1;
  (m =
    "3" == document.getElementsByTagName("body")[0].getAttribute("data-mode-id")
      ? 1.1
      : "slow" == $(e).parent().parent().attr("data-speed")
      ? 0.5
      : "fast" == $(e).parent().parent().attr("data-speed") &&
        "MiR100" == robot_model
      ? 1.5
      : "fast" == $(e).parent().parent().attr("data-speed")
      ? 1.1
      : 1),
    "true" == $("body").attr("data-mapping") &&
      $("body").attr("mapping-engine") ==
        MIR.constants.MAPPING_ALGORITHM.HECTOR &&
      (m = 0.5);
  var p = 100 * m;
  (joystick_x = (o / i) * p), (joystick_y = (s / i) * p);
}
function joystick_start() {
  (joystick_action = !0),
    null == joystick_timer &&
      (joystick_timer = setInterval(function () {
        joystick_transmit(!1);
      }, 100));
}
function joystick_stop() {
  (joystick_action = !1),
    clearInterval(joystick_timer),
    joystick_transmit(!(joystick_timer = null));
}
function joystick_transmit(t) {
  var e = {
      joystick_token: MIR.joystick.user_token,
      speed_command: {
        linear: {
          x: 0,
          y: 0,
          z: 0,
        },
        angular: {
          x: 0,
          y: 0,
          z: 0,
        },
      },
    },
    a = new ROSLIB.Message(e);
  1 == t
    ? ((a.speed_command.linear.x = 0), (a.speed_command.angular.z = 0))
    : ((a.speed_command.linear.x = joystick_x / 100),
      (a.speed_command.angular.z = joystick_y / 100));
  try {
    ros_cmd_vel.publish(a);
  } catch (t) {}
}
function number_format(t, e, a, r) {
  t = (t + "").replace(",", "").replace(" ", "");
  var n,
    i,
    o,
    s = isFinite(+t) ? +t : 0,
    d = isFinite(+e) ? Math.abs(e) : 0,
    l = void 0 === r ? "," : r,
    u = void 0 === a ? "." : a,
    c = "";
  return (
    3 <
      (c = (d
        ? ((n = s), (i = d), (o = Math.pow(10, i)), "" + Math.round(n * o) / o)
        : "" + Math.round(s)
      ).split("."))[0].length &&
      (c[0] = c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, l)),
    (c[1] || "").length < d &&
      ((c[1] = c[1] || ""), (c[1] += new Array(d - c[1].length + 1).join("0"))),
    c.join(u)
  );
}
function element_in_viewport(t) {
  for (
    var e = t.offsetTop,
      a = t.offsetLeft,
      r = t.offsetWidth,
      n = t.offsetHeight;
    t.offsetParent;

  )
    (e += (t = t.offsetParent).offsetTop), (a += t.offsetLeft);
  return (
    e < window.pageYOffset + window.innerHeight &&
    a < window.pageXOffset + window.innerWidth &&
    e + n > window.pageYOffset &&
    a + r > window.pageXOffset
  );
}
function form_launch_minihelp(t) {
  form_hide_tooltips();
  var e = document.createElement("div");
  e.setAttribute("class", "helpboxbg"),
    e.setAttribute("data-scroll", "false"),
    e.setAttribute("id", "helpboxbg"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var a = document.createElement("div");
  a.setAttribute("class", "box"), e.appendChild(a);
  var r = document.createElement("h1");
  (r.innerHTML = helptexts[t].name), a.appendChild(r);
  var n = document.createElement("p");
  (n.innerHTML = helptexts[t].tooltip), a.appendChild(n);
  var i = document.createElement("p");
  (i.innerHTML = helptexts[t].explain), a.appendChild(i);
  var o = document.createElement("div");
  return (
    o.setAttribute("class", "button"),
    (o.innerHTML = "Close"),
    a.appendChild(o),
    (o.onclick = function () {
      document
        .getElementById("helpboxbg")
        .parentNode.removeChild(parent.document.getElementById("helpboxbg"));
    }),
    !0
  );
}
function help_launch(t) {
  t = (t = (t = (t = (t = (t = (t = t.split("&lbrace;lb&rcub;").join("<br />"))
    .split("&lbrace;b&rcub;")
    .join("<strong>"))
    .split("&lbrace;&sol;b&rcub;")
    .join("</strong>"))
    .split("&lbrace;/b&rcub;")
    .join("</strong>"))
    .split("&lbrace;i&rcub;")
    .join("<i>"))
    .split("&lbrace;&sol;i&rcub;")
    .join("</i>"))
    .split("&lbrace;/i&rcub;")
    .join("</i>");
  var e = document.createElement("div");
  e.setAttribute("class", "helpboxbg"),
    e.setAttribute("data-scroll", "true"),
    e.setAttribute("id", "helpboxbg"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var a = document.createElement("div");
  a.setAttribute("class", "box"),
    (a.innerHTML = decodeHtml(t)),
    e.appendChild(a);
  var r = document.createElement("div");
  return (
    r.setAttribute("class", "button"),
    (r.innerHTML = mir_translate("Close")),
    a.appendChild(r),
    (r.onclick = function () {
      document
        .getElementById("helpboxbg")
        .parentNode.removeChild(parent.document.getElementById("helpboxbg"));
    }),
    !0
  );
}
function ros_quaternion_to_global_theta(t) {
  var e = t.w,
    a = t.x,
    r = t.y,
    n = t.z;
  return Math.atan2(
    2 * (e * n + a * r),
    1 - 2 * (Math.pow(r, 2) + Math.pow(n, 2))
  );
}
function deg_to_rad(t) {
  return 0.017453293 * t;
}
function rad_to_deg(t) {
  return 57.29578 * t;
}
function robot_to_cart_center(t, e, a, r, n, i) {
  var o = a + n,
    s = r + i / 2;
  return [t - s * Math.cos(o), e - s * Math.sin(o), o];
}
function processesview_init() {
  new ROSLIB.Service({
    ros: ros,
    name: "/mirspawn/list",
    serviceType: "mirSpawn/LaunchList",
  }).callService(new ROSLIB.ServiceRequest({}), initProcessesPage);
}
function processesview_toggle_process(t, e) {
  var a = document.getElementById(t + "_switch_" + e);
  if ("pending" == a.getAttribute("data-state"))
    launch_message(
      processes_lang_impatience_headline,
      processes_lang_impatience_text
    );
  else {
    var r = new ROSLIB.Service({
        ros: ros,
        name: "/mirspawn/start",
        serviceType: "mirSpawn/NodeAction",
      }),
      n = new ROSLIB.Service({
        ros: ros,
        name: "/mirspawn/stop",
        serviceType: "mirSpawn/NodeAction",
      });
    "on" == a.getAttribute("data-state")
      ? n.callService(
          new ROSLIB.ServiceRequest({
            launch_file_name: e,
          }),
          function (t) {
            a.setAttribute("data-state", "pending"), updateProcessStatus(e, a);
          }
        )
      : "off" == a.getAttribute("data-state") &&
        r.callService(
          new ROSLIB.ServiceRequest({
            launch_file_name: e,
          }),
          function (t) {
            a.setAttribute("data-state", "pending"), updateProcessStatus(e, a);
          }
        );
  }
  return !0;
}
function resetPlcStyle(t) {
  setTimeout(function () {
    t.removeClass("row--highlight");
  }, 300);
}
function plcview_set_filter(b, g, t) {
  var h = document.getElementById(b + "_plcview_" + g + "_plcholder");
  h.setAttribute("data-modbus", check_feature("modbus") ? "true" : "false");
  var e = document.getElementById("plcview_" + b + "_" + g + "_filter_minimum"),
    a = document.getElementById("plcview_" + b + "_" + g + "_filter_maximum"),
    r = parseInt(e.value),
    n = parseInt(a.value),
    i = r,
    o = n;
  0 == is_int(i) && "int" == g
    ? (i = 1)
    : 0 == is_int(i) && "double" == g
    ? (i = 101)
    : i < 1 && "int" == g
    ? (i = 1)
    : i < 101 && "double" == g
    ? (i = 101)
    : 100 < i && "int" == g
    ? (i = 100)
    : 200 < i && "double" == g && (i = 200),
    0 == is_int(o) && "int" == g
      ? (o = 100)
      : 0 == is_int(o) && "double" == g
      ? (i = 200)
      : o < 1 && "int" == g
      ? (o = 1)
      : o < 101 && "double" == g
      ? (o = 200)
      : 100 < o && "int" == g
      ? (o = 100)
      : 200 < o && "double" == g && (o = 200),
    o < i && "int" == g
      ? ((i = 1), (o = 100))
      : o < i && "double" == g && ((i = 101), (o = 200)),
    r != i &&
      e !== document.activeElement &&
      (document.getElementById(
        "plcview_" + b + "_" + g + "_filter_minimum"
      ).value = i),
    n != o &&
      a !== document.activeElement &&
      (document.getElementById(
        "plcview_" + b + "_" + g + "_filter_maximum"
      ).value = o);
  var s = {};
  (s.minimum = i), (s.maximum = o), (s.systemname = g);
  var f = check_feature("modbus");
  return (
    $.post("/?mode=get-plc-registers&calltype=light", s, function (t) {
      if (JSON.stringify(t) == window["plcview_" + b + "_" + g + "_cache"]);
      else {
        window["plcview_" + b + "_" + g + "_cache"] = JSON.stringify(t);
        var e = {};
        $(h)
          .find("div.plc")
          .each(function () {
            (e[$(this).attr("data-plc-id")] = {}),
              (e[$(this).attr("data-plc-id")].value = $(this).attr(
                "data-plc-value"
              )),
              (e[$(this).attr("data-plc-id")].label = $(this).attr(
                "data-plc-label"
              ));
          }),
          (h.innerHTML = "");
        for (var a = 0; a < t.length; ) {
          var r = document.createElement("div");
          r.setAttribute("class", "plc"),
            r.setAttribute("data-plc-id", t[a].id),
            r.setAttribute("data-plc-value", t[a].value),
            r.setAttribute("data-plc-label", t[a].label),
            h.appendChild(r);
          var n = document.createElement("div");
          n.setAttribute("class", "numholder"),
            (n.innerHTML = t[a].id),
            r.appendChild(n);
          var i = document.createElement("div");
          i.setAttribute("class", "infowrapper"), r.appendChild(i);
          var o = document.createElement("div");
          o.setAttribute("class", "valholder"),
            (o.innerHTML = t[a].value),
            i.appendChild(o);
          var s = document.createElement("div");
          s.setAttribute("class", "labelholder"), i.appendChild(s);
          var d = document.createElement("div");
          d.setAttribute("class", "label"),
            0 < t[a].label.length
              ? (d.innerHTML = t[a].label)
              : (d.innerHTML = mir_translate("PLC register %(id)s", {
                  id: t[a].id,
                })),
            s.appendChild(d);
          var l = document.createElement("div");
          l.setAttribute("class", "labelbtn"),
            (l.innerHTML = "<span>" + mir_translate("Rename") + "</span>"),
            -1 < t[a].allowed_methods.indexOf("PUT")
              ? l.setAttribute("data-active", "true")
              : l.setAttribute("data-active", "false"),
            l.setAttribute("data-plc-id", t[a].id),
            l.setAttribute("data-element-id", b),
            l.setAttribute("data-reggroup", g),
            -1 < t[a].allowed_methods.indexOf("PUT") &&
              (l.onclick = function () {
                plcview_set_plc_label(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-reggroup"),
                  this.getAttribute("data-plc-id")
                );
              }),
            s.appendChild(l);
          var u = document.createElement("div");
          u.setAttribute("class", "btnholder"), r.appendChild(u);
          var c = document.createElement("div");
          c.setAttribute("class", "clearbutton"),
            -1 < t[a].allowed_methods.indexOf("PUT")
              ? c.setAttribute("data-active", "true")
              : c.setAttribute("data-active", "false"),
            (c.innerHTML = "<span>" + mir_translate("Clear") + "</span>"),
            c.setAttribute("data-plc-id", t[a].id),
            -1 < t[a].allowed_methods.indexOf("PUT") &&
              (c.onclick = function () {
                var t = {};
                (t.id = this.getAttribute("data-plc-id")),
                  (t.value = 0),
                  $.post("/?mode=set-plc-register", t, function (t) {
                    plcview_set_filter(b, "int"),
                      plcview_set_filter(b, "double");
                  });
              }),
            u.appendChild(c);
          var m = document.createElement("div");
          if (
            ((m.innerHTML = "<span>" + mir_translate("Set") + "</span>"),
            m.setAttribute("data-plc-id", t[a].id),
            -1 < t[a].allowed_methods.indexOf("PUT")
              ? m.setAttribute("data-active", "true")
              : m.setAttribute("data-active", "false"),
            -1 < t[a].allowed_methods.indexOf("PUT") &&
              (m.onclick = function () {
                plcview_set_plc("plcview", this.getAttribute("data-plc-id"));
              }),
            u.appendChild(m),
            f)
          ) {
            var p = document.createElement("div");
            p.setAttribute("class", "modbusholder"), r.appendChild(p);
            var _ = document.createElement("span");
            _.setAttribute("class", "modbusregisters"),
              (_.innerHTML = t[a].modbus),
              p.appendChild(_);
          }
          null == e[t[a].id] ||
            (t[a].value == e[t[a].id].value &&
              t[a].label == e[t[a].id].label) ||
            ($('.plc[data-plc-id="' + t[a].id + '"]').addClass(
              "row--highlight"
            ),
            resetPlcStyle($('.plc[data-plc-id="' + t[a].id + '"]'))),
            a++;
        }
      }
    }),
    0 == t &&
      setTimeout(function () {
        plcview_set_filter(b, g, !1);
      }, 500),
    !1
  );
}
function plcview_set_plc(a, t) {
  (t = t || ""),
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-mobile-dialogue", "true");
  var e = document.createElement("div");
  e.setAttribute("class", "dialogboxbg"),
    e.setAttribute("id", "dialogboxbg"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var r = document.createElement("div");
  r.setAttribute("class", "box"), e.appendChild(r);
  var n = document.createElement("h1");
  (n.innerHTML = plcregisters_lang_setplcregister), r.appendChild(n);
  var i = document.createElement("p");
  (i.innerHTML = plcregisters_lang_setplcregister_text), r.appendChild(i);
  var o = document.createElement("p");
  (o.innerHTML = ""), o.setAttribute("class", "error"), r.appendChild(o);
  var s = document.createElement("form");
  s.setAttribute("method", "post"),
    s.setAttribute("action", "/"),
    (s.onsubmit = function () {
      var t = {};
      return (
        (t.id = document.getElementById("dialogbox_field_register").value),
        (t.value = document.getElementById("dialogbox_field_value").value),
        $.post("/?mode=set-plc-register", t, function (t) {
          if ("success" == t.state)
            plcview_set_filter(a, "int"),
              plcview_set_filter(a, "double"),
              document
                .getElementById("dialogboxbg")
                .parentNode.removeChild(
                  parent.document.getElementById("dialogboxbg")
                ),
              document
                .getElementsByTagName("body")[0]
                .setAttribute("data-mobile-dialogue", "false");
          else
            for (var e in ($("#dialogboxbg")
              .find("p.error")
              .html(mir_translate(t.response.results.error_human)),
            t.response.results.field_errors))
              "value" == e &&
                $("#dialogboxbg")
                  .find("p[data-field='dialogbox_field_value'].fielderror")
                  .html(
                    mir_translate(
                      t.response.results.field_errors[e].error_human
                    )
                  );
        }),
        !1
      );
    }),
    r.appendChild(s);
  var d = document.createElement("label");
  d.setAttribute("for", "dialogbox_field_register"),
    (d.innerHTML = plcregisters_lang_setplcregister_register),
    s.appendChild(d);
  var l = document.createElement("input");
  l.setAttribute("type", "text"),
    l.setAttribute("name", "dialogbox_field_register"),
    l.setAttribute("id", "dialogbox_field_register"),
    l.setAttribute(
      "placeholder",
      plcregisters_lang_setplcregister_register_text
    ),
    l.setAttribute("value", t),
    s.appendChild(l);
  var u = document.createElement("p");
  u.setAttribute("class", "fielderror"),
    u.setAttribute("data-field", "dialogbox_field_register"),
    (u.innerHTML = ""),
    s.appendChild(u);
  var c = document.createElement("label");
  c.setAttribute("for", "dialogbox_field_value"),
    (c.innerHTML = plcregisters_lang_setplcregister_value),
    s.appendChild(c);
  var m = document.createElement("input");
  m.setAttribute("type", "text"),
    m.setAttribute("name", "dialogbox_field_value"),
    m.setAttribute("id", "dialogbox_field_value"),
    m.setAttribute("placeholder", plcregisters_lang_setplcregister_value_text),
    s.appendChild(m);
  var p = document.createElement("p");
  p.setAttribute("class", "fielderror"),
    p.setAttribute("data-field", "dialogbox_field_value"),
    (p.innerHTML = ""),
    s.appendChild(p);
  var _ = document.createElement("div");
  _.setAttribute("class", "buttonholder"), s.appendChild(_);
  var b = document.createElement("input");
  b.setAttribute("type", "submit"),
    b.setAttribute("name", "submit"),
    b.setAttribute("value", mir_translate("OK")),
    _.appendChild(b);
  var g = document.createElement("input");
  g.setAttribute("type", "button"),
    g.setAttribute("name", "cancel"),
    g.setAttribute("value", mir_translate("Cancel")),
    _.appendChild(g),
    "" != t ? $(m).focus() : $(l).focus(),
    (g.onclick = function () {
      document
        .getElementById("dialogboxbg")
        .parentNode.removeChild(parent.document.getElementById("dialogboxbg")),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-mobile-dialogue", "false");
    });
}
function plcview_set_plc_label(t, e, a) {
  var r = document.getElementById(t + "_plcview_" + e + "_plcholder"),
    n = $(r)
      .children("div[data-plc-id='" + a + "'].plc")
      .find("div.label")
      .html();
  document
    .getElementsByTagName("body")[0]
    .setAttribute("data-mobile-dialogue", "true");
  var i = document.createElement("div");
  i.setAttribute("class", "dialogboxbg"),
    i.setAttribute("id", "dialogboxbg"),
    document.getElementsByTagName("body")[0].appendChild(i);
  var o = document.createElement("div");
  o.setAttribute("class", "box"), i.appendChild(o);
  var s = document.createElement("h1");
  (s.innerHTML = mir_translate("Label for PLC #%(id)s", {
    id: a,
  })),
    o.appendChild(s);
  var d = document.createElement("p");
  (d.innerHTML = mir_translate(
    "You can set or change the label for the selected plc register to better remember what it covers."
  )),
    o.appendChild(d);
  var l = document.createElement("p");
  (l.innerHTML = ""), l.setAttribute("class", "error"), o.appendChild(l);
  var u = document.createElement("form");
  u.setAttribute("method", "post"),
    u.setAttribute("action", "/"),
    u.setAttribute("data-register-id", a),
    (u.onsubmit = function () {
      var t = {};
      return (
        (t.id = this.getAttribute("data-register-id")),
        (t.label = document.getElementById("dialogbox_field_label").value),
        $.post(
          "/system/plc-registers?mode=set-plc-register-label",
          t,
          function (t) {
            document
              .getElementById("dialogboxbg")
              .parentNode.removeChild(
                parent.document.getElementById("dialogboxbg")
              ),
              document
                .getElementsByTagName("body")[0]
                .setAttribute("data-mobile-dialogue", "false");
          }
        ),
        !1
      );
    }),
    o.appendChild(u);
  var c = document.createElement("label");
  c.setAttribute("for", "dialogbox_field_label"),
    (c.innerHTML = mir_translate("Label:")),
    u.appendChild(c);
  var m = document.createElement("input");
  m.setAttribute("type", "text"),
    m.setAttribute("name", "dialogbox_field_label"),
    m.setAttribute("id", "dialogbox_field_label"),
    m.setAttribute(
      "placeholder",
      mir_translate("Enter a label for the plc register...")
    ),
    m.setAttribute("value", n),
    u.appendChild(m);
  var p = document.createElement("p");
  p.setAttribute("class", "fielderror"),
    p.setAttribute("data-field", "dialogbox_field_label"),
    (p.innerHTML = ""),
    u.appendChild(p);
  var _ = document.createElement("div");
  _.setAttribute("class", "buttonholder"), u.appendChild(_);
  var b = document.createElement("input");
  b.setAttribute("type", "submit"),
    b.setAttribute("name", "submit"),
    b.setAttribute("value", mir_translate("OK")),
    _.appendChild(b);
  var g = document.createElement("input");
  return (
    g.setAttribute("type", "button"),
    g.setAttribute("name", "cancel"),
    g.setAttribute("value", mir_translate("Cancel")),
    _.appendChild(g),
    (g.onclick = function () {
      document
        .getElementById("dialogboxbg")
        .parentNode.removeChild(parent.document.getElementById("dialogboxbg")),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-mobile-dialogue", "false");
    }),
    $(m).focus(),
    !0
  );
}
function is_int(t) {
  return !isNaN(t) && parseInt(Number(t)) == t && !isNaN(parseInt(t, 10));
}
function minisystemlog_paging(t, e) {
  t.preventDefault(), t.stopPropagation();
  var a = $(
      "div.topbar_desktop > ul.tabs > li.status > div.topbar_desktop_tab_foldout > div.messages"
    )[0],
    r = $(
      "div.topbar_desktop > ul.tabs > li.status > div.topbar_desktop_tab_foldout > div.bottom > ul.pagingstatus > li > div"
    )[0],
    n = parseInt(a.getAttribute("data-num-pages")),
    i = parseInt(a.getAttribute("data-current-page")),
    o = i,
    s = $(
      "div.topbar_desktop > ul.tabs > li.status > div.topbar_desktop_tab_foldout > div.bottom > ul.paging > li"
    )[0],
    d = $(
      "div.topbar_desktop > ul.tabs > li.status > div.topbar_desktop_tab_foldout > div.bottom > ul.paging > li"
    )[1];
  "left" == e && 1 < i
    ? (o = i - 1)
    : "right" == e && i < n
    ? (o = i + 1)
    : (i = o),
    1 == o
      ? $(s).attr("data-enabled", "false")
      : $(s).attr("data-enabled", "true"),
    o == n
      ? $(d).attr("data-enabled", "false")
      : $(d).attr("data-enabled", "true"),
    (r.innerHTML = "Page " + o + " of " + n),
    a.setAttribute("data-current-page", o);
}
function mobile_minisystemlog_paging(t, e) {
  t.preventDefault(), t.stopPropagation();
  var a = $("div.mobilestatus > div.messages")[0],
    r = $("div.mobilestatus > div.bottom > ul.pagingstatus > li > div")[0],
    n = parseInt(a.getAttribute("data-num-pages")),
    i = parseInt(a.getAttribute("data-current-page")),
    o = i,
    s = $("div.mobilestatus > div.bottom > ul.paging > li")[0],
    d = $("div.mobilestatus > div.bottom > ul.paging > li")[1];
  "left" == e && 1 < i
    ? (o = i - 1)
    : "right" == e && i < n
    ? (o = i + 1)
    : (i = o),
    1 == o
      ? $(s).attr("data-enabled", "false")
      : $(s).attr("data-enabled", "true"),
    o == n
      ? $(d).attr("data-enabled", "false")
      : $(d).attr("data-enabled", "true"),
    (r.innerHTML = "Page " + o + " of " + n),
    a.setAttribute("data-current-page", o);
}
function set_innerhtml_from_element_id(t, e) {
  var a = document.getElementById(t);
  null == a
    ? console.log("Failed to locate element with id = " + t)
    : (a.innerHTML = e);
}
function set_innerhtml_from_element_class(t, e) {
  var a = document.getElementsByClassName(t);
  null == a
    ? console.log("Failed to locate element with classname = " + element_id)
    : (a.innerHTML = e);
}
function set_attribute_from_element_id(t, e, a) {
  var r = document.getElementById(t);
  null == r
    ? console.log("Failed to locate element with id = " + t)
    : r.setAttribute(e, a);
}
function create_overlayform() {
  var t = document.createElement("div");
  return (
    t.setAttribute("class", "overlayform"),
    t.setAttribute("id", "overlayform"),
    t
  );
}
function create_box() {
  var t = document.createElement("div");
  return t.setAttribute("class", "box"), t;
}
function create_headline(t) {
  var e = document.createElement("h1");
  return (e.innerHTML = t), e;
}
function create_text(t) {
  var e = document.createElement("p");
  return (e.innerHTML = t), e;
}
function create_form(t) {
  var e = document.createElement("form");
  for (var a in (e.setAttribute("method", "post"),
  e.setAttribute("action", "/"),
  t))
    e.setAttribute(a, t[a]);
  return e;
}
function create_field(t, e, a) {
  var r = document.createElement(e);
  for (var n in (r.setAttribute("name", t), r.setAttribute("id", t), a))
    r.setAttribute(n, a[n]);
  return r;
}
function create_fieldholder(t, e, a) {
  var r = document.createElement("div");
  r.setAttribute("class", "fieldholder"),
    r.setAttribute("data-error", "false"),
    r.setAttribute("data-fieldname", t),
    r.setAttribute("id", "fieldholder_" + t);
  var n = document.createElement("label");
  n.setAttribute("for", t),
    (n.innerHTML = e),
    r.appendChild(n),
    r.appendChild(a);
  var i = document.createElement("p");
  return (
    i.setAttribute("id", "error_" + t),
    i.setAttribute("class", "fielderror"),
    (i.innerHTML = ""),
    r.appendChild(i),
    r
  );
}
function create_fieldholder_input(t, e, a) {
  return create_fieldholder(t, e, create_field(t, "input", a));
}
function create_buttonholder() {
  var t = document.createElement("div");
  return t.setAttribute("class", "buttonholder"), t;
}
function create_submit_button() {
  var t = document.createElement("input");
  return (
    t.setAttribute("type", "submit"),
    t.setAttribute("name", "submit"),
    t.setAttribute("id", "submit"),
    t.setAttribute("value", mir_translate("OK")),
    t
  );
}
function create_cancel_button() {
  var t = document.createElement("input");
  return (
    t.setAttribute("type", "button"),
    t.setAttribute("name", "cancel"),
    t.setAttribute("id", "cancel"),
    t.setAttribute("value", mir_translate("Cancel")),
    (t.onclick = function () {
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-dialogue", "false"),
        remove_overlayform();
    }),
    t
  );
}
function remove_overlayform() {
  document
    .getElementById("overlayform")
    .parentNode.removeChild(parent.document.getElementById("overlayform"));
}
function create_simple_dialog(t, e, a, r, n) {
  var i = create_overlayform();
  document.getElementsByTagName("body")[0].appendChild(i);
  var o = create_box();
  i.appendChild(o),
    o.appendChild(create_headline(t)),
    o.appendChild(create_text(e));
  var s = create_form(n);
  o.appendChild(s);
  var d = document.createElement("p");
  d.setAttribute("id", "error"),
    d.setAttribute("class", "error"),
    (d.innerHTML = ""),
    s.appendChild(d);
  for (var l = 0; l < a.length; ++l) s.appendChild(a[l]);
  var u = create_buttonholder();
  s.appendChild(u);
  for (l = 0; l < r.length; ++l) u.appendChild(r[l]);
  return (
    document.getElementById(a[0].getAttribute("data-fieldname")).focus(), s
  );
}
function create_submit_cancel_dialog(t, e, a, r) {
  var n = [];
  return (
    n.push(create_submit_button()),
    n.push(create_cancel_button()),
    create_simple_dialog(t, e, a, n, r)
  );
}
function handle_api_errors(t) {
  if (void 0 === t.results.field_errors)
    void 0 === t.results.error_human
      ? launch_error(mir_translate("Unknown error"))
      : launch_error(mir_translate(t.results.error_human));
  else
    for (var e in t.results.field_errors)
      document
        .getElementById("fieldholder_" + e)
        .setAttribute("data-error", "true"),
        (document.getElementById("error_" + e).innerHTML = mir_translate(
          t.results.field_errors[e].error_human
        ));
}
function hookmanualview_state_init(a) {
  new ROSLIB.Topic({
    ros: ros,
    name: "/hook/controller/state",
    messageType: "mir_hook_controller/HookState",
  }).subscribe(function (t) {
    (document.getElementById(a + "_state_status_value").innerHTML =
      t.state_string),
      (document.getElementById(a + "_state_height_value").innerHTML =
        t.height.toString() + " mm");
  }),
    new ROSLIB.Topic({
      ros: ros,
      name: "/hook/status",
      messageType: "mirMsgs/HookStatus",
      throttle_rate: 100,
    }).subscribe(function (t) {
      var e = (180 * t.angle) / Math.PI;
      document.getElementById(a + "_state_angle_value").innerHTML =
        e.toFixed(2).toString() + " degrees";
    }),
    new ROSLIB.Topic({
      ros: ros,
      name: "/hook/brake/state",
      messageType: "mir_hook_controller/HookBrakeState",
      throttle_rate: 100,
    }).subscribe(function (t) {
      document.getElementById(a + "_state_brake_status_value").innerHTML =
        t.state_string;
    });
}
function hookmanualview_livemarker_update(t, e, a, r, n) {
  (document.getElementById(t + "_livemarker_name_value").innerHTML = e),
    (document.getElementById(t + "_livemarker_x_value").innerHTML = a),
    (document.getElementById(t + "_livemarker_y_value").innerHTML = r),
    (document.getElementById(t + "_livemarker_z_value").innerHTML = n);
}
function hookmanualview_livemarker_init(e) {
  var t = new ROSLIB.Topic({
      ros: ros,
      name: "/hook/qr_markers",
      messageType: "geometry_msgs/TransformStamped",
    }),
    a = Date.now();
  setInterval(function () {
    999 < Date.now() - a && hookmanualview_livemarker_update(e, "", "", "", "");
  }, 1e3),
    t.subscribe(function (t) {
      (a = Date.now()),
        hookmanualview_livemarker_update(
          e,
          t.child_frame_id,
          t.transform.translation.x.toFixed(2).toString(),
          t.transform.translation.y.toFixed(2).toString(),
          t.transform.translation.z.toFixed(2).toString()
        );
    });
}
function emptyCallback(t) {}
function send_hook_actuator_command(t, e, a) {
  var r = new ROSLIB.Service({
      ros: ros,
      name: "/hook/controller/command",
      serviceType: "mir_hook_controller/Command",
    }),
    n = new ROSLIB.ServiceRequest({
      cmd: t,
      value: e,
    });
  r.callService(n, function (t) {
    a(t);
  });
}
function hook_actuator(t, e, a) {
  send_hook_actuator_command(e, a, emptyCallback);
}
function hook_change_height(t) {
  var e = document.getElementById(t + "_target_height");
  send_hook_actuator_command("height", parseInt(e.value), emptyCallback);
}
function send_hook_brake_command(t, e, a) {
  var r = new ROSLIB.Service({
      ros: ros,
      name: "/hook/brake/command",
      serviceType: "mir_hook_controller/Command",
    }),
    n = new ROSLIB.ServiceRequest({
      cmd: t,
      value: e,
    });
  r.callService(n, function (t) {
    a(t);
  });
}
function hook_brake(t, e, a) {
  send_hook_brake_command(e, a, emptyCallback);
}
function hookmanualview_change_height(t) {
  $("#hookcartfieldpicker_overlay").hide(),
    $("body").attr("data-mobile-dialogue", "true");
  var e = [];
  e.push(
    create_fieldholder_input(
      "target_height",
      lang_hookmanual_setheight_heightabovefloor,
      {
        type: "text",
        autocomplete: "off",
      }
    )
  );
  create_submit_cancel_dialog(
    "Set hook height",
    lang_hookmanual_setheight_text,
    e,
    {
      autocomplete: "off",
    }
  ).onsubmit = function () {
    var t = document.getElementById("target_height");
    return (
      send_hook_actuator_command("height", parseInt(t.value), emptyCallback),
      $("body").attr("data-mobile-dialogue", "false"),
      $("#hookcartfieldpicker_overlay").show(),
      remove_overlayform(),
      !1
    );
  };
}
function robot_change_state(t) {
  $.get("/", {
    mode: "set-robot-state",
    state: t,
  });
}
function fleet_robot_change_state(t, e) {
  $.get("/", {
    mode: "set-fleet-robot-state",
    ip: t,
    state: e,
  });
}
function toggle_joystick(t) {
  var e = $("body"),
    a = "data-show-joystick";
  if (void 0 === t) {
    var r = e.attr("data-show-joystick");
    e.attr(a, "true" == r ? "false" : "true");
  } else e.attr(a, t);
}
function robot_toggle_manual(t) {
  var e = new ROSLIB.Service({
      ros: ros,
      name: "/mirsupervisor/setRobotState",
      serviceType: "mirSupervisor/SetState",
    }),
    a = {
      robotState: "integer" == typeof t ? t : 4,
    };
  (11 == robot_state_id && 11 != t) ||
    ((a.robotState = 11), (a.web_session_id = MIR.joystick.session_user)),
    e.callService(new ROSLIB.ServiceRequest(a), function (t) {
      t.joystick_token &&
        "" != t.joystick_token &&
        MIR.joystick.claim(t.joystick_token);
    });
}
function toggleReducedSpeed(t) {
  var e = new ROSLIB.Service({
      ros: ros,
      name: "/mirsupervisor/joystick_mode",
      serviceType: "mir_srvs/JoysticksMode",
    }),
    a = {
      command: t
        ? MIR.constants.JOYSTICK.ENABLE_LOW_SPEED_MODE
        : MIR.constants.JOYSTICK.ENABLE_HIGH_SPEED_MODE,
    };
  e.callService(new ROSLIB.ServiceRequest(a));
}
function confirmToggleSpeed(t) {
  var e = "on" === $(t).attr("data-state");
  if (e)
    var a = {
      title: mir_translate("operating_mode_1_confirm_title_off"),
      body: mir_translate("operating_mode_1_confirm_text_off"),
    };
  else
    a = {
      title: mir_translate("operating_mode_1_confirm_title"),
      body: mir_translate("operating_mode_1_confirm_text"),
    };
  $("body").addClass("joystick-toggle-disable"),
    MIR.ui
      .confirm(a)
      .then(function () {
        toggleReducedSpeed(!e);
      })
      .catch(function () {})
      .finally(function () {
        setTimeout(function () {
          $("body").removeClass("joystick-toggle-disable");
        }, 400);
      });
}
function topbar_desktop_tabs_toggle(t, e) {
  e.stopPropagation();
  var a = t.getAttribute("data-active"),
    r = $(e.target);
  if (r.is(".mir-switch")) confirmToggleSpeed(r);
  else if (
    !t.classList.contains("fleet_status") ||
    "false" != t.getAttribute("data-error")
  )
    return (
      $("div.topbar_desktop > ul.tabs > li")
        .not(".state_continue")
        .not(".state_stop")
        .attr("data-active", "false"),
      "joystick" == t.getAttribute("class")
        ? $(e.target).is(".button") && toggle_joystick()
        : (toggle_joystick(!1),
          "true" == a
            ? (t.setAttribute("data-active", "false"),
              "status" == t.getAttribute("class") && toplog_kill())
            : ("status" == t.getAttribute("class") && toplog_start(),
              t.setAttribute("data-active", "true"),
              "status" == t.getAttribute("class") &&
                errorlog_init(robot_errors))),
      !0
    );
}
function mobile_joystick_toggle(t, e) {
  return $(e.target).is(".button") && toggle_joystick(), !1;
}
function fleet_status_init() {
  new ROSLIB.Topic({
    ros: ros,
    name: "/diagnostics/out/robot_messages",
    messageType: "fleet_diagnostics/DiagnosticsArray",
    latch: !0,
  }).subscribe(function (t) {
    var e = document.getElementById("topbar_fleet_status");
    e.setAttribute("data-active", "false");
    var a = document.getElementById("topbar_fleet_status_mobile"),
      r = $("#topbar_fleet_status > div.button > span"),
      d = $("#topbar_fleet_status > div.topbar_desktop_tab_foldout"),
      l = $(".mobilestatus");
    if (0 < t.status.length) {
      if (
        (d.html(""),
        l.html(""),
        $.each(t.status, function (t, e) {
          if (2 == e.type)
            if (document.getElementById(e.device_name[0])) {
              var a = document.createElement("div");
              a.classList.add("line2"),
                (a.innerHTML = mir_translate(e.message)),
                document.getElementById(e.device_name[0]).append(a);
            } else {
              var r = document.createElement("div");
              r.classList.add("message"), (r.id = e.device_name[0]);
              var n = document.createElement("div");
              n.classList.add("line1");
              var i = document.createElement("div");
              i.innerHTML = e.device_name[0];
              var o = document.createElement("div");
              o.classList.add("button"),
                o.classList.add("gotorobot"),
                n.append(i),
                n.append(o);
              var s = document.createElement("div");
              s.classList.add("line2"),
                (s.innerHTML = mir_translate(e.message)),
                r.append(n),
                r.append(s),
                d.append(r),
                l.append($(r).clone()),
                (o.onclick = function () {
                  window.open("http://" + e.device_ip[0]);
                });
            }
        }),
        0 < d.children().length)
      ) {
        e.setAttribute("data-error", "true"),
          a.setAttribute("data-error", "true"),
          r.children("strong.noerror").hide(),
          r.children("strong.error").show();
        var n = document.createElement("div");
        n.classList.add("see_all");
        var i = document.createElement("a");
        if (
          (i.setAttribute("href", "/setup/robots?filter-errors"),
          (i.innerHTML = mir_translate("See all")),
          n.append(i),
          d.prepend(n),
          l.prepend($(n).clone()),
          0 < $(e).children(".count").length)
        )
          $(e)
            .children(".count")
            .html(l.children().length - 1),
            $(a)
              .find(".button > .count")
              .html(l.children().length - 1);
        else {
          var o = document.createElement("div");
          o.classList.add("count"),
            (o.innerHTML = d.children().length - 1),
            e.prepend(o);
          var s = document.createElement("div");
          s.classList.add("count"),
            (s.innerHTML = l.children().length - 1),
            $(a).children(".button").prepend(s);
        }
      }
    } else e.setAttribute("data-error", "false"), a.setAttribute("data-error", "false"), r.children("strong.noerror").show(), r.children("strong.error").hide(), $(e).children("div.count").remove(), $(a).find(".button > .count").remove(), l.html('<div class="statusmessage"><p class="noerror">' + mir_translate("ALL OK") + "</p></div>");
  });
}
function fleet_package_managers_status() {
  new ROSLIB.Topic({
    ros: ros,
    name: "/node_init",
  }).subscribe(function (t) {
    if (!t.init_suc) {
      var e = $("#fleet_restart_error_msg");
      e.addClass("active");
      var a = $("#fleet_restart_error_msg_mobile");
      if (
        (a.addClass("active"),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-fleet-error", "true"),
        0 == e.html().length)
      ) {
        var r =
            "<span class='error_packages'>" +
            t.package_name +
            " </span><span class='error_msg'>" +
            mir_translate("fleet_restart_failed_topbarmsg") +
            " </span><a href='/system/settings/fleet_advanced_settings' class='mir-button blue'>" +
            mir_translate("fleet_advanced_settings_restart_software_button") +
            "</a>",
          n =
            "<span class='error_notice'>" +
            mir_translate("Error") +
            ": </span>" +
            r;
        e.html(n), a.html(r);
      } else
        e
          .children(".error_packages")
          .html(mir_translate("fleet_restart_multiple_packages_failed")),
          a
            .children(".error_packages")
            .html(mir_translate("fleet_restart_multiple_packages_failed"));
    }
  });
}
function errorlog_init(t) {
  var e = $(
      "div.topbar_desktop > ul.tabs > li.status > div.topbar_desktop_tab_foldout > div.errors"
    ),
    a = $("div.mobilestatus > div.errors");
  $(e).html(""), $(a).html("");
  var r = t.length;
  3 < r && (r = 3);
  for (var n = 0; n < r; ) {
    (o = document.createElement("div")).setAttribute("class", "error"),
      $(e).append(o),
      (s = document.createElement("table")).setAttribute("cellpadding", "0"),
      s.setAttribute("cellspacing", "0"),
      o.appendChild(s);
    var i = document.createElement("tr");
    s.appendChild(i),
      ((d = document.createElement("td")).innerHTML = "<div>Code:</div>"),
      i.appendChild(d),
      ((d = document.createElement("td")).innerHTML =
        "<div>" + t[n].code + "</div>"),
      i.appendChild(d);
    var o, s;
    i = document.createElement("tr");
    s.appendChild(i),
      ((d = document.createElement("td")).innerHTML = "<div>Module:</div>"),
      i.appendChild(d),
      ((d = document.createElement("td")).innerHTML =
        "<div>" + t[n].module + "</div>"),
      i.appendChild(d),
      ((l = document.createElement(
        "p"
      )).innerHTML = mir_translate_from_rosbridge(t[n].description)),
      o.appendChild(l),
      (o = document.createElement("div")).setAttribute("class", "error"),
      $(a).append(o),
      (s = document.createElement("table")).setAttribute("cellpadding", "0"),
      s.setAttribute("cellspacing", "0"),
      o.appendChild(s);
    i = document.createElement("tr");
    s.appendChild(i),
      ((d = document.createElement("td")).innerHTML = "<div>Code:</div>"),
      i.appendChild(d),
      ((d = document.createElement("td")).innerHTML =
        "<div>" + t[n].code + "</div>"),
      i.appendChild(d);
    var d, l;
    i = document.createElement("tr");
    s.appendChild(i),
      ((d = document.createElement("td")).innerHTML = "<div>Module:</div>"),
      i.appendChild(d),
      ((d = document.createElement("td")).innerHTML =
        "<div>" + t[n].module + "</div>"),
      i.appendChild(d),
      ((l = document.createElement(
        "p"
      )).innerHTML = mir_translate_from_rosbridge(t[n].description)),
      o.appendChild(l),
      n++;
  }
}
(window.mode_callbacks = {}),
  (window.mode_callbacks[3] = []),
  (window.mode_callbacks[7] = []),
  (window.mode_callbacks[255] = []),
  (ros = new ROSLIB.Ros()),
  ros.on("connection", function () {
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-connection", "true"),
      robot_regular_info_listen();
  }),
  ros.on("error", function (t) {
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-connection", "false"),
      ros_reconnect();
  }),
  ros.on("close", function () {
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-connection", "false"),
      ros_reconnect();
  }),
  Array.prototype.findIndex ||
    Object.defineProperty(Array.prototype, "findIndex", {
      value: function (t) {
        if (null == this) throw new TypeError('"this" is null or not defined');
        var e = Object(this),
          a = e.length >>> 0;
        if ("function" != typeof t)
          throw new TypeError("predicate must be a function");
        for (var r = arguments[1], n = 0; n < a; ) {
          var i = e[n];
          if (t.call(r, i, n, e)) return n;
          n++;
        }
        return -1;
      },
    }),
  (joystick_interrupt = MIR.util.throttle(function () {
    joystick_stop(),
      $(".joystick .stick").trigger("mouseup").trigger("dragstop"),
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-show-joystick", "false");
  }, 100)),
  $(document).ready(function () {
    $(document).on("visibilitychange", function () {
      "hidden" === document.visibilityState && joystick_interrupt();
    }),
      $(window).on("touchcancel orientationchange blur", function () {
        joystick_interrupt();
      }),
      (Vue.prototype._ = mir_translate),
      (MIR.runtime.map_finalization_data = {
        procent: 0,
        done: 0,
        total: 0,
      }),
      new Vue({
        el: "#map-status-topbar-desktop",
        data: MIR.runtime.map_finalization_data,
      }),
      new Vue({
        el: "#map-status-topbar-mobile",
        data: MIR.runtime.map_finalization_data,
      }),
      "fleet" == systemtype &&
        (fleet_status_init(), fleet_package_managers_status());
    var t = new ROSLIB.Topic({
        ros: ros,
        name: "/final_optimization_progress",
        messageType: "std_msgs/Float64MultiArray",
        latch: !0,
      }),
      a = !1,
      r = !1;
    t.subscribe(function (t) {
      if (
        ((MIR.runtime.map_finalization_data.procent = t.data[0]),
        (MIR.runtime.map_finalization_data.done = t.data[1]),
        (MIR.runtime.map_finalization_data.total = t.data[2]),
        0 < t.data[0] &&
          t.data[0] < 100 &&
          !1 === r &&
          (r = setTimeout(function () {
            MIR.runtime.map_finalization_data.procent < 20 &&
              (a = MIR.ui.prompt({
                headline: "Optimizing map",
                message:
                  "The new map is being optimized, when finished, you'll be able to edit it.... This might take a while.  Check toolbar for status.",
                add_cancel: {
                  label: mir_translate("Ok"),
                  on_click: function (t) {
                    t.mir.$overlay.remove();
                  },
                },
              }));
          }, 1e3)),
        100 === t.data[0] && t.data[1] === t.data[2])
      ) {
        a && a.mir.$overlay.remove();
        var e = MIR.ui.prompt({
          headline: mir_translate("Map optimization complete!"),
          message: mir_translate("The map will be saved now."),
          add_cancel: !1,
          buttons: [
            new MIR.ui.button({
              label: mir_translate("Ok"),
              attr: {
                class: "mir-green",
              },
              events: {
                click: function () {
                  e.mir.$overlay.remove(),
                    ($waiter = new MIR.ui.waiter().append("body")),
                    $.get("/?mode=get-runtime-settings", {}, function (e) {
                      var a = "true" === e.mapping_append,
                        t = {};
                      (t.id = e.mapping_guid),
                        (t.resscale = e.mapping_scale),
                        (t.origin_x = e.mapping_origin_x),
                        (t.origin_y = e.mapping_origin_y),
                        (t.mapping_origin_x = e.mapping_origin_x),
                        (t.mapping_origin_y = e.mapping_origin_y),
                        (t.append = a),
                        (t.append_robot_x = e.mapping_robot_start_x),
                        (t.append_robot_y = e.mapping_robot_start_y),
                        (t.append_robot_orientation =
                          e.mapping_robot_start_orientation),
                        (t.append_mapping_robot_x = e.mapping_robot_end_x),
                        (t.append_mapping_robot_y = e.mapping_robot_end_y),
                        (t.append_mapping_robot_orientation =
                          e.mapping_robot_end_orientation),
                        (t.cartographer = !0),
                        $.ajax({
                          url: "/?mode=map-save-mapping",
                          data: t,
                          method: "POST",
                          dataType: "json",
                          guid: e.mapping_guid,
                          success: function (t) {
                            (runtime_settings = {}),
                              (runtime_settings.mapping_state = a
                                ? MIR.constants.MAP.state.APPENDING
                                : MIR.constants.MAP.state.ROTATING),
                              $.post(
                                "/?mode=set-runtime-settings",
                                runtime_settings,
                                function (t) {
                                  new ROSLIB.Service({
                                    ros: ros,
                                    name: "/mircontrol/setMode",
                                    serviceType: "mirControl/SetMode",
                                  }).callService(
                                    new ROSLIB.ServiceRequest({
                                      robotMode:
                                        MIR.constants.ROBOT_MODE.MISSION,
                                    }),
                                    function (t) {
                                      $(".mapcontainer").each(function () {
                                        var t = $(this).attr("data-element-id");
                                        map_finalizing_stop(t),
                                          a
                                            ? map_init(
                                                t,
                                                e.mapping_guid,
                                                !1,
                                                !1,
                                                !0,
                                                !1
                                              )
                                            : map_init(
                                                t,
                                                e.mapping_guid,
                                                !0,
                                                !1,
                                                !1,
                                                !1
                                              );
                                      });
                                    }
                                  );
                                }
                              );
                          },
                        });
                    });
                },
              },
            }),
          ],
        });
      }
    }),
      Vue.component(
        "session-importer-info",
        MIR.components.session_importer_info
      ),
      new Vue({
        el: "#session-importer-desktop",
      }),
      new Vue({
        el: "#session-importer-mobile",
      }),
      MIR.ros.nodes.session_importer.subscribe_info(function (t) {
        MIR.components.shared_data.session_importer = MIR.util.mergeObject(
          MIR.components.shared_data.session_importer,
          t
        );
      }),
      $(window).on("keydown", function (t) {
        t.keyCode == MIR.ui.constants.KEY_SPACE &&
          t.target == document.body &&
          t.preventDefault();
      }),
      ros.connect("ws://" + location.hostname + ":9090");
    var e = !1;
    "standalone" in window.navigator && window.navigator.standalone
      ? (e = !0)
      : window.matchMedia("(display-mode: standalone)").matches
      ? (e = !0)
      : (navigator.standalone =
          navigator.standalone ||
          screen.height - document.documentElement.clientHeight < 40) &&
        (e = !0),
      1 == e
        ? document
            .getElementsByTagName("body")[0]
            .setAttribute("data-webapp", "true")
        : document
            .getElementsByTagName("body")[0]
            .setAttribute("data-webapp", "false"),
      $(window).width() < MIR.constants.MOBILE_RES_THRESHOLD
        ? document
            .getElementsByTagName("body")[0]
            .setAttribute("data-mobile", "true")
        : document
            .getElementsByTagName("body")[0]
            .setAttribute("data-mobile", "false");
    var n = -1 < navigator.userAgent.toLowerCase().indexOf("android"),
      i = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
    if (
      (1 == i
        ? document
            .getElementsByTagName("body")[0]
            .setAttribute("data-os", "ios")
        : 1 == n
        ? document
            .getElementsByTagName("body")[0]
            .setAttribute("data-os", "android")
        : document
            .getElementsByTagName("body")[0]
            .setAttribute("data-os", "other"),
      "undefined" != typeof menusection &&
        set_active_menusection(menusection, !0),
      1 == e &&
        1 == i &&
        $("a").click(function (t) {
          t.preventDefault(), (window.location = $(this).attr("href"));
        }),
      "ontouchstart" in window)
    )
      var o = "true";
    else o = "false";
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-touch-support", o);
  }),
  $(window).scroll(function (t) {
    0 < $(window).scrollTop()
      ? document
          .getElementsByTagName("body")[0]
          .setAttribute("data-fixed-top", "true")
      : "true" ==
          document
            .getElementsByTagName("body")[0]
            .getAttribute("data-fixed-top") &&
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-fixed-top", "false"),
      $("table.datatable > tr.loading").each(function () {
        var t = this.parentNode;
        1 == element_in_viewport(this) &&
          "false" == t.getAttribute("data-in-progress") &&
          markup_api_datatable_set_page(
            "next",
            t.getAttribute("data-ident"),
            !0
          );
      });
  }),
  $(window).resize(function () {
    map_toolbars_place();
  }),
  $(document).on("click", "#mobilemenutrigger", function (t) {
    if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled)) return !1;
    mobilemenu_toggle(), (t.handled = !0);
  }),
  $("html").click(function () {
    if (
      "false" ==
      document
        .getElementsByTagName("body")[0]
        .getAttribute("data-mobile-status")
    ) {
      if (
        ($("div.topbar_desktop > ul.tabs > li")
          .not(".state_continue")
          .not(".state_stop")
          .attr("data-active", "false"),
        toplog_kill(),
        $("body").hasClass("joystick-toggle-disable"))
      )
        return;
      $("body").is("[data-mobile='false']") && toggle_joystick(!1);
    }
  }),
  $(document).on(
    "click",
    'div.mobilemenu > ul > li > div[data-collapsable-mobilemenuitem="true"]',
    function (t) {
      if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled))
        return !1;
      "true" == this.parentNode.getAttribute("data-open")
        ? this.parentNode.setAttribute("data-open", "false")
        : this.parentNode.setAttribute("data-open", "true"),
        (t.handled = !0);
    }
  );
var percentColors = [
    {
      pct: 0,
      color: {
        r: 255,
        g: 0,
        b: 0,
      },
    },
    {
      pct: 0.5,
      color: {
        r: 255,
        g: 255,
        b: 0,
      },
    },
    {
      pct: 1,
      color: {
        r: 0,
        g: 255,
        b: 0,
      },
    },
  ],
  getColorForPercentage = function (t) {
    for (
      var e = 1;
      e < percentColors.length - 1 && !(t < percentColors[e].pct);
      e++
    );
    var a = percentColors[e - 1],
      r = percentColors[e],
      n = r.pct - a.pct,
      i = (t - a.pct) / n,
      o = 1 - i,
      s = i,
      d = {
        r: Math.floor(a.color.r * o + r.color.r * s),
        g: Math.floor(a.color.g * o + r.color.g * s),
        b: Math.floor(a.color.b * o + r.color.b * s),
      };
    return "rgb(" + [d.r, d.g, d.b].join(",") + ")";
  };
function clear_errors(t) {
  new ROSLIB.Service({
    ros: ros,
    name: "/mirsupervisor/requestErrorReset",
    serviceType: "std_srv/Empty",
  }).callService(new ROSLIB.ServiceRequest({}), function () {}),
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-mobile-status", "false");
}
function mobile_status_toggle(t) {
  return (
    t.stopPropagation(),
    "true" ==
    document.getElementsByTagName("body")[0].getAttribute("data-mobile-status")
      ? (document
          .getElementsByTagName("body")[0]
          .setAttribute("data-mobile-status", "false"),
        toplog_kill())
      : (toplog_start(),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-menu-mobile", "false"),
        document
          .getElementsByTagName("body")[0]
          .setAttribute("data-mobile-status", "true")),
    !0
  );
}
function launch_waiter(t) {
  var e = document.createElement("div");
  e.setAttribute("class", "overlay_progress"),
    e.setAttribute("id", "waiter"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var a = document.createElement("div");
  a.setAttribute("class", "box"), e.appendChild(a);
  var r = document.createElement("h1");
  (r.innerHTML = "Please wait..."), a.appendChild(r);
  var n = document.createElement("p");
  return (n.innerHTML = decodeEntities(t)), a.appendChild(n), !0;
}
function close_waiter() {
  return (
    document.getElementById("waiter") &&
      document
        .getElementById("waiter")
        .parentNode.removeChild(document.getElementById("waiter")),
    !0
  );
}
function launch_error(msg, dowhendone) {
  var overlay = document.createElement("div");
  overlay.setAttribute("class", "overlay_error"),
    overlay.setAttribute("id", "error"),
    document.getElementsByTagName("body")[0].appendChild(overlay);
  var box = document.createElement("div");
  box.setAttribute("class", "box"), overlay.appendChild(box);
  var headline = document.createElement("h1");
  (headline.innerHTML = "Error(s) occured!"), box.appendChild(headline);
  var text = document.createElement("p");
  (text.innerHTML =
    null == msg
      ? "One or more errors occured in your request."
      : decodeEntities(msg)),
    box.appendChild(text);
  var buttonholder = document.createElement("div");
  buttonholder.setAttribute("class", "buttonholder"),
    box.appendChild(buttonholder);
  var submitbtn = document.createElement("div");
  submitbtn.setAttribute("class", "ok"),
    submitbtn.setAttribute("id", "submitbtn"),
    (submitbtn.innerHTML = "OK"),
    buttonholder.appendChild(submitbtn),
    (submitbtn.onclick = function () {
      $(overlay).remove(),
        null == dowhendone ||
          (-1 !== dowhendone.indexOf("(")
            ? eval(dowhendone)
            : (location.href = dowhendone));
    });
}
function uploadbutton_trigger(t) {
  $("#" + t).trigger("click");
}
function launch_message(t, e, a) {
  var r = document.createElement("div");
  r.setAttribute("class", "overlay_message"),
    r.setAttribute("id", "message"),
    document.getElementsByTagName("body")[0].appendChild(r);
  var n = document.createElement("div");
  n.setAttribute("class", "box"), r.appendChild(n);
  var i = document.createElement("h1");
  (i.innerHTML = t), n.appendChild(i);
  var o = document.createElement("p");
  null == e ? (o.innerHTML = "") : ((e = decodeEntities(e)), (o.innerHTML = e)),
    n.appendChild(o);
  var s = document.createElement("div");
  s.setAttribute("class", "buttonholder"), n.appendChild(s);
  var d = document.createElement("div");
  d.setAttribute("class", "ok"),
    d.setAttribute("id", "submitbtn"),
    (d.innerHTML = "OK"),
    s.appendChild(d),
    (d.onclick = function () {
      document
        .getElementById("message")
        .parentNode.removeChild(parent.document.getElementById("message")),
        null == a || (location.href = a);
    });
}
function launch_confirm(headlinemsg, msg, dowhendone, okbutton, cancelbutton) {
  var overlay = document.createElement("div");
  overlay.setAttribute("class", "overlay_confirm"),
    overlay.setAttribute("id", "message"),
    document.getElementsByTagName("body")[0].appendChild(overlay);
  var box = document.createElement("div");
  box.setAttribute("class", "box"), overlay.appendChild(box);
  var headline = document.createElement("h1");
  (headline.innerHTML = headlinemsg), box.appendChild(headline);
  var text = document.createElement("p");
  (text.innerHTML = null == msg ? "" : decodeHtml(msg)), box.appendChild(text);
  var buttonholder = document.createElement("div");
  buttonholder.setAttribute("class", "buttonholder"),
    box.appendChild(buttonholder);
  var submitbtn = document.createElement("div");
  submitbtn.setAttribute("class", "delete"),
    submitbtn.setAttribute("id", "submitbtn"),
    (submitbtn.innerHTML = okbutton || "Delete"),
    buttonholder.appendChild(submitbtn);
  var cancelbtn = document.createElement("div");
  cancelbtn.setAttribute("class", "cancel"),
    cancelbtn.setAttribute("id", "cancelbtn"),
    (cancelbtn.innerHTML = cancelbutton || "Cancel"),
    buttonholder.appendChild(cancelbtn),
    (submitbtn.onclick = function () {
      document
        .getElementById("message")
        .parentNode.removeChild(parent.document.getElementById("message")),
        null == dowhendone ||
          (-1 !== dowhendone.indexOf("(")
            ? eval(dowhendone)
            : (location.href = dowhendone));
    }),
    (cancelbtn.onclick = function () {
      document
        .getElementById("message")
        .parentNode.removeChild(parent.document.getElementById("message"));
    });
}
function launch_dialogue(
  headlinemsg,
  msg,
  do_when_yes,
  do_when_no,
  okbutton,
  cancelbutton
) {
  var overlay = document.createElement("div");
  overlay.setAttribute("class", "overlay_dialogue"),
    overlay.setAttribute("id", "message"),
    document.getElementsByTagName("body")[0].appendChild(overlay);
  var box = document.createElement("div");
  box.setAttribute("class", "box"), overlay.appendChild(box);
  var headline = document.createElement("h1");
  (headline.innerHTML = headlinemsg), box.appendChild(headline);
  var text = document.createElement("p");
  (text.innerHTML = null == msg ? "" : decodeHtml(msg)), box.appendChild(text);
  var buttonholder = document.createElement("div");
  buttonholder.setAttribute("class", "buttonholder"),
    box.appendChild(buttonholder);
  var submitbtn = document.createElement("div");
  submitbtn.setAttribute("class", "ok"),
    submitbtn.setAttribute("id", "submitbtn"),
    (submitbtn.innerHTML = okbutton || "OK"),
    buttonholder.appendChild(submitbtn);
  var cancelbtn = document.createElement("div");
  cancelbtn.setAttribute("class", "cancel"),
    cancelbtn.setAttribute("id", "cancelbtn"),
    (cancelbtn.innerHTML = cancelbutton || "Cancel"),
    buttonholder.appendChild(cancelbtn),
    (submitbtn.onclick = function () {
      document
        .getElementById("message")
        .parentNode.removeChild(parent.document.getElementById("message")),
        null == do_when_yes ||
          (-1 !== do_when_yes.indexOf("(")
            ? eval(do_when_yes)
            : (location.href = do_when_yes));
    }),
    (cancelbtn.onclick = function () {
      document
        .getElementById("message")
        .parentNode.removeChild(parent.document.getElementById("message")),
        null == do_when_no ||
          (-1 !== do_when_no.indexOf("(")
            ? eval(do_when_no)
            : (location.href = do_when_no));
    });
}
function check_feature(t) {
  if (t && features) return t in features && features[t];
}
function start_process(i) {
  var t = new ROSLIB.Service({
      ros: ros,
      name: "/mirspawn/list_loaded",
      serviceType: "mirSpawn/ListLoaded",
    }),
    e = new ROSLIB.ServiceRequest({});
  t.callService(e, function (t) {
    for (var e = !1, a = 0; a < t.nodes.length; ++a)
      if (t.nodes[a] == i) {
        e = !0;
        break;
      }
    if (!e) {
      var r = new ROSLIB.Service({
          ros: ros,
          name: "/mirspawn/start",
          serviceType: "mirSpawn/NodeAction",
        }),
        n = new ROSLIB.ServiceRequest({
          launch_file_name: {},
        });
      (n.launch_file_name = i), r.callService(n, function (t) {});
    }
  });
}
function send_mail(t, e, a, r) {
  var n = new ROSLIB.Service({
      ros: ros,
      name: "/mir_mailer/send_mail",
      serviceType: "mirMailer/sendMail",
    }),
    i = new ROSLIB.ServiceRequest({
      recipients: [t],
      subject: e,
      message: a,
    });
  n.callService(i, function (t) {
    r(t);
  });
}
function send_light_command(t) {
  var e = new ROSLIB.Topic({
      ros: ros,
      name: "/light_cmd",
      messageType: "std_msgs/String",
    }),
    a = new ROSLIB.Message({
      data: {},
    });
  (a.data = t), e.publish(a);
}
function activate_map(t, a) {
  launch_waiter("The robot is changing map.");
  var e = {};
  (e.id = t),
    $.ajax({
      url: "/setup/maps?mode=set-active-map",
      data: e,
      method: "POST",
      dataType: "json",
      success: function (t) {
        if (200 == t.headers.httpcode)
          var e = window.setInterval(function () {
            255 == robot_mode_id ||
              ($("div.mapcontainer").each(function () {
                map_init(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-map-guid")
                );
              }),
              window.clearInterval(e),
              a && $(a).remove(),
              close_waiter());
          }, 1e3);
        else close_waiter(), launch_error(mir_translate(t.results.error_human));
        map_toolbars_place();
      },
    });
}
function launch_item_permissions(_, b) {
  launch_waiter(lang_main_loading_permissions);
  var t = {};
  (t.endpoint = _),
    (t.guid = b),
    $.ajax({
      url: "/?mode=get-editable-usergroups",
      data: t,
      method: "POST",
      dataType: "json",
      success: function (t) {
        if ((close_waiter(), 0 == t))
          launch_error(
            lang_main_not_permitted_to_set_permissions_for_any_usergroups
          );
        else {
          var e = document.createElement("div");
          e.setAttribute("class", "overlay_item_permissions"),
            e.setAttribute("id", "overlay_item_permissions"),
            document.getElementsByTagName("body")[0].appendChild(e);
          var a = document.createElement("div");
          a.setAttribute("class", "box"), e.appendChild(a);
          var r = document.createElement("h1");
          (r.innerHTML = lang_main_set_permissions_for_element),
            a.appendChild(r);
          var n = document.createElement("p");
          (n.innerHTML = lang_main_set_permissions_for_element_txt),
            a.appendChild(n);
          var i = document.createElement("div");
          i.setAttribute("class", "permholder"), a.appendChild(i);
          var o = document.createElement("table");
          o.setAttribute("cellpadding", "0"),
            o.setAttribute("cellspacing", "0"),
            i.appendChild(o);
          var s = document.createElement("tr");
          o.appendChild(s);
          for (var d = 0; d < t.length; ) {
            s = document.createElement("tr");
            o.appendChild(s),
              ((l = document.createElement("td")).innerHTML =
                "<div>" + t[d].name + "</div>\n"),
              s.appendChild(l);
            var l = document.createElement("td");
            s.appendChild(l);
            var u = document.createElement("div");
            u.setAttribute("data-guid", t[d].guid),
              u.setAttribute("data-permission", "update"),
              u.setAttribute("data-permission-guid", t[d].perm_guid),
              u.setAttribute("data-endpoint", _),
              u.setAttribute("data-item", b),
              u.setAttribute("data-state", t[d].status_update),
              (u.innerHTML = "<span>&#10004;</span>"),
              l.appendChild(u),
              (u.onclick = function () {
                var t = this.getAttribute("data-state");
                if ("true" == t || "false" == t) {
                  this.setAttribute("data-state", "pending");
                  var e = {};
                  (e.endpoint = this.getAttribute("data-endpoint")),
                    (e.item = this.getAttribute("data-item")),
                    (e.guid = this.getAttribute("data-guid")),
                    (e.perm_guid = this.getAttribute("data-permission-guid")),
                    (e.type = "UPDATE"),
                    (e.action = "true" == t ? "DELETE" : "SET"),
                    $.ajax({
                      url: "/?mode=set-item-permission",
                      data: e,
                      method: "POST",
                      dataType: "json",
                      cfield: this,
                      origstate: t,
                      success: function (t) {
                        201 == t.headers.httpcode
                          ? (this.cfield.setAttribute(
                              "data-permission-guid",
                              t.results.guid
                            ),
                            this.cfield.setAttribute("data-state", "true"))
                          : 204 == t.headers.httpcode
                          ? (this.cfield.setAttribute(
                              "data-permission-guid",
                              ""
                            ),
                            this.cfield.setAttribute("data-state", "false"))
                          : (launch_error(mir_translate(t.results.error_human)),
                            this.cfield.setAttribute(
                              "data-state",
                              this.origstate
                            ));
                      },
                    });
                } else
                  launch_error(
                    lang_main_set_permissions_for_element_notallowed
                  );
              });
            var c = document.createElement("span");
            (c.innerHTML = "Write"), l.appendChild(c), d++;
          }
          var m = document.createElement("div");
          m.setAttribute("class", "buttonholder"), a.appendChild(m);
          var p = document.createElement("div");
          p.setAttribute("class", "ok"),
            p.setAttribute("id", "submitbtn"),
            (p.innerHTML = "OK"),
            m.appendChild(p),
            (p.onclick = function () {
              document
                .getElementById("overlay_item_permissions")
                .parentNode.removeChild(
                  parent.document.getElementById("overlay_item_permissions")
                );
            });
        }
      },
    });
}
function calculate_angle_between_points(t, e, a, r) {
  return (180 * Math.atan2(r - e, a - t)) / Math.PI;
}
function calculate_point_rotation(t, e, a, r, n) {
  var i = (Math.PI / 180) * n,
    o = Math.cos(i),
    s = Math.sin(i),
    d = {};
  return (
    (d.x = o * (a - t) + s * (r - e) + t),
    (d.y = o * (r - e) - s * (a - t) + e),
    d
  );
}
function calculate_line_intersection(t, e, a, r, n, i, o, s) {
  var d,
    l,
    u,
    c = {
      x: null,
      y: null,
      online_a: !1,
      online_b: !1,
    },
    m = (s - i) * (a - t) - (o - n) * (r - e);
  return (
    0 == m ||
      ((u = (a - t) * (d = e - i) - (r - e) * (l = t - n)),
      (d = ((o - n) * d - (s - i) * l) / m),
      (l = u / m),
      (c.x = t + d * (a - t)),
      (c.y = e + d * (r - e)),
      0 < d && d < 1 && (c.online_a = !0),
      0 < l && l < 1 && (c.online_b = !0)),
    c
  );
}
function robot_trigger_userprompt() {
  robot_current_user_prompt_triggered = !0;
  var t = document.createElement("div");
  t.setAttribute("class", "missionuserprompt_overlay"),
    t.setAttribute("id", "missionuserprompt_overlay"),
    document.getElementsByTagName("body")[0].appendChild(t);
  var e = document.createElement("div");
  e.setAttribute("class", "box"), t.appendChild(e);
  var a = document.createElement("h1");
  (a.innerHTML = "Please reply..."), e.appendChild(a);
  var r = document.createElement("p");
  (r.innerHTML = robot_current_user_prompt.question), e.appendChild(r);
  var n = document.createElement("p");
  n.setAttribute("class", "timeinfo"),
    n.setAttribute("id", "missionuserprompt_overlay_timeinfo"),
    e.appendChild(n);
  var i = document.createElement("div");
  i.setAttribute("class", "timebar"), e.appendChild(i);
  var o = document.createElement("div");
  o.setAttribute("class", "timebar_inner"),
    o.setAttribute("id", "missionuserprompt_overlay_timebar_inner"),
    i.appendChild(o);
  var s = document.createElement("div");
  s.setAttribute("class", "buttonholder"), e.appendChild(s);
  for (var d = 0; d < robot_current_user_prompt.options.length; ) {
    var l = document.createElement("input");
    l.setAttribute("type", "button"),
      l.setAttribute("name", "missionuserprompt_button"),
      l.setAttribute("data-guid", robot_current_user_prompt.guid),
      l.setAttribute("data-value", robot_current_user_prompt.options[d]),
      l.setAttribute("value", robot_current_user_prompt.options[d]),
      s.appendChild(l),
      (l.onclick = function () {
        var t = {};
        (t.guid = this.getAttribute("data-guid")),
          (t.value = this.getAttribute("data-value")),
          $.ajax({
            url: "/?mode=reply-userprompt",
            data: t,
            method: "POST",
            dataType: "json",
            success: function (t) {},
          }),
          robot_current_user_prompt_timer &&
            clearInterval(robot_current_user_prompt_timer),
          $("#missionuserprompt_overlay").remove();
      }),
      d++;
  }
  return (
    (robot_current_user_prompt_timeout_total = parseInt(
      robot_current_user_prompt.timeout.secs + 1
    )),
    (robot_current_user_prompt_timeout_count = 0),
    (robot_current_user_prompt_timer = setInterval(function () {
      robot_current_user_prompt_timeout_count <
        robot_current_user_prompt_timeout_total &&
        (robot_current_user_prompt_timeout_count += 0.1);
      var t = Math.round(
        (robot_current_user_prompt_timeout_count /
          robot_current_user_prompt_timeout_total) *
          100
      );
      100 < t && (t = 100),
        $("#missionuserprompt_overlay_timebar_inner").css(
          "width",
          "calc(" + t + "% - 2px)"
        );
      var e = Math.round(
        robot_current_user_prompt_timeout_total -
          robot_current_user_prompt_timeout_count
      );
      if (0 < e) var a = e + " seconds left to reply...";
      else a = "Hurry up!";
      $("#missionuserprompt_overlay_timeinfo").html(a);
    }, 100)),
    !0
  );
}
function robot_clear_userprompt() {
  return (
    (robot_current_user_prompt_triggered = !1),
    robot_current_user_prompt_timer &&
      clearInterval(robot_current_user_prompt_timer),
    $("#missionuserprompt_overlay").remove(),
    !0
  );
}
function capitalize(t) {
  return t[0].toUpperCase() + t.slice(1);
}
var align_heights = function () {
  for (var t = 0, e = 0; e < arguments.length; ) {
    var a = $("#" + arguments[e]).height();
    t < a && (t = a), e++;
  }
  for (e = 0; e < arguments.length; ) {
    var r = t,
      n = String($("#" + arguments[e]).css("padding-top"));
    (n = n.replace("px", "")), (n = parseInt(n));
    var i = String($("#" + arguments[e]).css("padding-bottom"));
    (i = i.replace("px", "")),
      (r -= n),
      (r -= i = parseInt(i)),
      $("#" + arguments[e]).height(r),
      e++;
  }
};
function mir_translate_from_rosbridge(t) {
  try {
    var e = null;
    if ("{" == t.charAt(0)) {
      var a = JSON.parse(t);
      (t = a.message), (e = a.args);
    }
    mir_lang[t] && (t = mir_lang[t]), e && (t = sprintf(t, e));
  } catch (t) {}
  return t;
}
String.prototype.toSec = function () {
  if (!this) return 0;
  for (var t = this.split(":"), e = 0, a = 1; 0 < t.length; )
    (e += a * parseInt(t.pop(), 10)), (a *= 60);
  return e;
};
var decodeEntities = (function () {
  var e = document.createElement("div");
  return function (t) {
    return (
      t &&
        "string" == typeof t &&
        ((t = (t = t.replace(
          /<script[^>]*>([\S\s]*?)<\/script>/gim,
          ""
        )).replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim, "")),
        (e.innerHTML = t),
        (t = e.textContent),
        (e.textContent = "")),
      t
    );
  };
})();
function mir_translate() {
  var e = arguments[0];
  if ((n = arguments[1])) {
    if (mir_lang[e]) var t = mir_lang[e];
    else t = e;
    for (var a = 1; a < arguments.length; ) {
      for (var r in arguments[a])
        t =
          "{" == r.charAt(0)
            ? ((e = (i = JSON.parse(r)).message), (n = i.args), sprintf(e, n))
            : (t = (t = t.replace("%(" + r + ")s", arguments[a][r])).replace(
                "%(" + r + ")d",
                arguments[a][r]
              )).replace("%(" + r + ")f", arguments[a][r]);
      a++;
    }
  } else {
    var n = {};
    if ("{" == e.charAt(0))
      try {
        var i = JSON.parse(e);
        (e = i.message), (n = i.args);
      } catch (t) {
        return e;
      }
    if (mir_lang[e]) e = mir_lang[e];
    try {
      t = sprintf(e, n);
    } catch (t) {
      return e;
    }
  }
  return t;
}
var toplog_is_query_running = !1,
  toplog_state = !1;
function toplog_start() {
  !1 === toplog_state && ((toplog_state = !0), toplog_refresh());
}
function toplog_refresh() {
  if (!1 === toplog_is_query_running) {
    toplog_is_query_running = !0;
    var t = {
      mode: "get-top-log",
      max: 10,
    };
    $.ajax({
      url: "/",
      data: t,
      method: "GET",
      dataType: "json",
      success: function (t) {
        if (JSON.stringify(t) == toplog_cache);
        else {
          if (
            ($("div.topbar_desktop_tab_foldout > div.allokinfo").html(""),
            0 < t.status.length || 0 < t.queue.length)
          ) {
            if (0 < t.status.length) {
              var e = document.createElement("p");
              e.setAttribute("class", "status"),
                (e.innerHTML = t.status),
                $("div.topbar_desktop_tab_foldout > div.allokinfo").append(e);
            }
            if (0 < t.queue.length) {
              var a = document.createElement("table");
              a.setAttribute("cellpadding", "0"),
                a.setAttribute("cellspacing", "0");
              for (var r = 0; r < t.queue.length; ) {
                var n = document.createElement("tr");
                n.setAttribute("data-state", t.queue[r].state),
                  a.appendChild(n);
                var i = document.createElement("td");
                "Executing" == t.queue[r].state
                  ? (i.innerHTML =
                      '<img src="/graphics/spinner.svg" width="20" height="20" />')
                  : (i.innerHTML =
                      '<img src="/graphics/icon_mission_green.svg" width="16" height="16" />'),
                  n.appendChild(i),
                  ((i = document.createElement("td")).innerHTML =
                    "<div>" + t.queue[r].name + "</div>"),
                  n.appendChild(i),
                  ((i = document.createElement("td")).innerHTML =
                    "<div>" + mir_translate(t.queue[r].state) + "</div>"),
                  n.appendChild(i),
                  r++;
              }
              $("div.topbar_desktop_tab_foldout > div.allokinfo").append(a);
            }
          }
          $("div.mobilestatus > div.allokinfo").html(
            $("div.topbar_desktop_tab_foldout > div.allokinfo").html()
          ),
            (toplog_is_query_running = !1),
            toplog_state &&
              (toplog_timer = window.setTimeout(toplog_refresh, 1e3));
        }
      },
    });
  }
  return !0;
}
function toplog_kill() {
  return !(toplog_state = !1);
}
var base64 = {
    characters:
      "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    encode: function (t) {
      base64.characters;
      var e = "",
        a = 0;
      do {
        var r = t.charCodeAt(a++),
          n = t.charCodeAt(a++),
          i = t.charCodeAt(a++),
          o = ((r = r || 0) >> 2) & 63,
          s = ((3 & r) << 4) | (((n = n || 0) >> 4) & 15),
          d = ((15 & n) << 2) | (((i = i || 0) >> 6) & 3),
          l = 63 & i;
        n ? i || (l = 64) : (d = l = 64),
          (e +=
            base64.characters.charAt(o) +
            base64.characters.charAt(s) +
            base64.characters.charAt(d) +
            base64.characters.charAt(l));
      } while (a < t.length);
      return e;
    },
    decode: function (t) {
      base64.characters;
      var e = "",
        a = 0;
      do {
        var r = base64.characters.indexOf(t.charAt(a++)),
          n = base64.characters.indexOf(t.charAt(a++)),
          i = base64.characters.indexOf(t.charAt(a++)),
          o = ((63 & r) << 2) | ((n >> 4) & 3),
          s = ((15 & n) << 4) | ((i >> 2) & 15),
          d = ((3 & i) << 6) | (63 & base64.characters.indexOf(t.charAt(a++)));
        e +=
          String.fromCharCode(o) +
          (s ? String.fromCharCode(s) : "") +
          (d ? String.fromCharCode(d) : "");
      } while (a < t.length);
      return e;
    },
  },
  _overlay;
function watchInputsForChanges(t) {
  setTimeout(function () {
    $(t)
      .find(":input")
      .each(function () {
        $(this).attr("data-val", $(this).val());
      }),
      $(t).on("change paste keyup", ":input", function (t) {
        $(this).val() !== $(this).attr("data-val")
          ? ($(this).attr("data-newVal", $(this).val()),
            $(this).attr("data-changed", 1))
          : $(this).attr("data-changed", -1);
      });
  }, 200);
}
function resetChanges() {
  $("[has-changed]").attr("has-changed", 0);
}
function replace_int(t, e) {
  return "number" == typeof e ? e.toString() : e;
}
function hasUnsavedChanges(t, e, a, r) {
  if (null != e) {
    var n = [];
    if (
      ($(".grid-stack-item").each(function () {
        n.push($(this).attr("data-guid"));
      }),
      JSON.stringify(e) != JSON.stringify(n))
    )
      return !0;
  }
  if (-1 < window.location.href.indexOf("missions/")) {
    if (
      JSON.stringify(
        missions_missionview_fetch_actions(
          "missionview",
          "missionview_missionview_actionlist"
        ),
        replace_int
      ) != t
    )
      return !0;
  }
  return 1 === $('[has-changed="1"]:first').length;
}
function submitwarn_set() {}
function playbar_load_name() {
  if (playbar_mission_id !== robot_current_mission) {
    playbar_mission_id = robot_current_mission;
    var t = {
      mode: "get-current-mission",
    };
    $.ajax({
      url: "/",
      data: t,
      method: "GET",
      dataType: "json",
      error: function () {
        window.setTimeout(function () {
          playbar_load_name();
        }, 3e3);
      },
      success: function (t) {
        if (
          t.name ==
          $(
            "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
          ).html()
        );
        else {
          if (
            0 <
            $(
              "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
            ).html().length
          )
            var e = 400;
          else e = 1;
          $(
            "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
          ).fadeOut(e, function () {
            $(
              "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
            ).html(t.name),
              $(
                "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
              ).fadeIn(400, function () {
                playbar_start_textscroll();
              });
          });
        }
        window.setTimeout(function () {
          playbar_load_name();
        }, 3e3);
      },
    });
  } else window.setTimeout(playbar_load_name, 3e3);
  return !0;
}
function playbar_start_textscroll() {
  if (
    (playbar_stop_textscroll(),
    playbar_reset_textscroll(),
    window.clearTimeout(playbar_timer),
    $(
      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
    ).width() >
      $(
        "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning"
      ).width())
  ) {
    var t = Math.ceil(
        $(
          "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning"
        ).width() - 10
      ),
      e = Math.ceil(
        $(
          "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
        ).width()
      );
    e -= t;
    var a = Math.ceil(25 * e);
    a < 2e3 && (a = 2e3),
      (e = 0 - e),
      (e = String(e) + "px"),
      $(
        "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > div.hider_left"
      ).animate(
        {
          opacity: "1",
        },
        400,
        function () {}
      ),
      $(
        "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
      ).animate(
        {
          left: e,
        },
        a,
        function () {
          $(
            "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
          ).animate(
            {
              left: "0",
            },
            a,
            function () {
              $(
                "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > div.hider_left"
              ).animate(
                {
                  opacity: "0",
                },
                200,
                function () {
                  playbar_timer = window.setTimeout(function () {
                    $(
                      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
                    ).animate(
                      {
                        left: "0",
                      },
                      3e3,
                      function () {
                        playbar_start_textscroll();
                      }
                    );
                  }, 3e3);
                }
              );
            }
          );
        }
      );
  }
  return !0;
}
function playbar_stop_textscroll() {
  return (
    $(
      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
    ).stop(),
    $(
      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > div.hider_left"
    ).stop(),
    !0
  );
}
function playbar_reset_textscroll() {
  return (
    $(
      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > p"
    ).css("left", "0"),
    $(
      "div.topbar_desktop > div.playbar > div.subbar > div.currentlyrunning > div.hider_left"
    ).css("opacity", "0"),
    !0
  );
}
function playbar_highlight() {
  return (
    "4" ==
      document.getElementsByTagName("body")[0].getAttribute("data-state-id") &&
      ($("div.playbar").effect(
        "shake",
        {
          times: 4,
          distance: 15,
        },
        500
      ),
      $(
        "div.playbar > div[data-type='continue'].button,li.state_continue"
      ).animate(
        {
          "background-color": "rgba(255,255,255,0.9)",
        },
        150,
        function () {
          $(
            "div.playbar > div[data-type='continue'].button,li.state_continue"
          ).animate(
            {
              "background-color": "#002446",
            },
            450
          );
        }
      )),
    !0
  );
}
function generate_uuid() {
  var a = new Date().getTime();
  return (
    "undefined" != typeof performance &&
      "function" == typeof performance.now &&
      (a += performance.now()),
    "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (t) {
      var e = (a + 16 * Math.random()) % 16 | 0;
      return (
        (a = Math.floor(a / 16)), ("x" === t ? e : (3 & e) | 8).toString(16)
      );
    })
  );
}
function topsubbar_paging() {
  $("#system_content")
    .find(".topsubbar")
    .each(function () {
      var t = this.getAttribute("data-element-id"),
        e = document.getElementById("topsubbar_" + t),
        a = $(e).width(),
        r = document.getElementById("topsubbar_" + t + "_list"),
        n = document.getElementById("topsubbar_" + t + "_paging"),
        i = document.getElementById("topsubbar_" + t + "_scroll_left"),
        o = document.getElementById("topsubbar_" + t + "_scroll_right"),
        s = $(n).width(),
        d = Math.floor(a - s);
      $(r).css("width", d + "px");
      var l = 0,
        u = 1;
      $(r)
        .children("li")
        .each(function () {
          l + Math.ceil($(this).width()) < d - 20 || ((l = 0), u++),
            (l += Math.ceil($(this).width())),
            this.setAttribute("data-page", u);
        });
      var c = u;
      (u = document
        .getElementById("topsubbar_" + t)
        .getAttribute("data-current-page")) < 1
        ? (u = 1)
        : c < u && (u = c),
        document
          .getElementById("topsubbar_" + t)
          .setAttribute("data-num-pages", c),
        document
          .getElementById("topsubbar_" + t)
          .setAttribute("data-current-page", u),
        $(r).children("li").hide(),
        $(r)
          .children('li[data-page="' + u + '"]')
          .show(),
        (i.onclick = function () {
          topsubbar_scroll(
            this.parentNode.parentNode.getAttribute("data-element-id"),
            "left"
          );
        }),
        (o.onclick = function () {
          topsubbar_scroll(
            this.parentNode.parentNode.getAttribute("data-element-id"),
            "right"
          );
        });
    });
}
function topsubbar_scroll(t, e) {
  var a = document.getElementById("topsubbar_" + t),
    r = parseInt(a.getAttribute("data-num-pages")),
    n = parseInt(a.getAttribute("data-current-page")),
    i = document.getElementById("topsubbar_" + t + "_list");
  "left" == e ? (n -= 1) < 1 && (n = r) : r < (n += 1) && (n = 1),
    a.setAttribute("data-current-page", n),
    $(i).children("li").hide(),
    $(i)
      .children('li[data-page="' + n + '"]')
      .show();
}
function topsubbar_group_paging_init(t) {
  document.getElementById("topsubbar_" + t);
  var e = document.getElementById("topsubbar_" + t + "_list"),
    a = parseInt(e.getAttribute("data-per-page"));
  return (
    $(e)
      .children("li")
      .not(".paging")
      .find("ul")
      .each(function () {
        var t = $(this).children("li").not("li.paging");
        if (
          ($(this).attr("data-num-pages", Math.ceil(t.length / a)),
          $(this).attr("data-cur-page", "1"),
          t.length > a)
        ) {
          $(this).children("li[data-page='1']").css("display", "block");
          $(this).children("li.paging").height();
          $(this).css("padding-bottom", "32px");
        } else $(this).children("li").not("li.paging").css("display", "block");
      }),
    !0
  );
}
function topsubbar_group_paging_change(t, e, a) {
  "back" == t || (t = "forward");
  var r = $(a).parent().parent().parent().parent(),
    n = $(r).height(),
    i = -1;
  return (
    "forward" == t &&
    parseInt($(r).attr("data-cur-page")) < parseInt($(r).attr("data-num-pages"))
      ? (i = parseInt($(r).attr("data-cur-page")) + 1)
      : "back" == t &&
        1 < parseInt($(r).attr("data-cur-page")) &&
        (i = parseInt($(r).attr("data-cur-page")) - 1),
    -1 < i &&
      ($(r).attr("data-cur-page", i),
      $(r).children("li").not(".paging").css("display", "none"),
      $(r)
        .children("li[data-page='" + i + "']")
        .not(".paging")
        .css("display", "block"),
      1 == i
        ? $(a).parent().parent().find("li.back").attr("data-active", "false")
        : $(a).parent().parent().find("li.back").attr("data-active", "true"),
      i == parseInt($(r).attr("data-num-pages"))
        ? $(a).parent().parent().find("li.forward").attr("data-active", "false")
        : $(a).parent().parent().find("li.forward").attr("data-active", "true"),
      $(a)
        .parent()
        .parent()
        .find("li.status")
        .children("div")
        .children("span")
        .html(
          mir_translate("Page %(numpage)d of %(numpages)d", {
            numpage: number_format(i, 0, ",", "."),
            numpages: parseInt($(r).attr("data-num-pages")),
          })
        ),
      $(r).css("min-height", n + "px")),
    !0
  );
}
function check_running_status(t, e) {
  void 0 === t && (t = 0);
  var r = !1;
  setTimeout(function () {
    ros.isConnected
      ? (0 == $("#api_status").length &&
          ($(".mir-waiter").append(
            '<div id="api_status" class="api_status waiting">' +
              mir_translate("fleet_api_waiting") +
              "</div>"
          ),
          initial_package_managers()),
        new ROSLIB.Topic({
          ros: ros,
          name: "/node_init",
        }).subscribe(function (t) {
          var e = t.init_suc ? "started" : "notstarted",
            a = t.init_suc
              ? mir_translate("fleet_restart_package_started")
              : mir_translate("fleet_restart_package_notstarted"),
            r =
              '<span class="msg_icon ' +
              e +
              '"></span>' +
              t.package_name +
              " " +
              a;
          $("#" + t.package_name).html(r);
        }),
        new Promise(function (a, t) {
          !(function t() {
            var e = new XMLHttpRequest();
            e.open("GET", "/api/v2.0.0/status", !0),
              (e.onload = function () {
                a();
              }),
              (e.onerror = function () {
                (r = !0),
                  setTimeout(function () {
                    t();
                  }, 1e3);
              }),
              e.send();
          })();
        }).then(function () {
          r
            ? check_running_status(t, e)
            : ($("#api_status").removeClass("waiting").addClass("ready"),
              $("#api_status").html(mir_translate("fleet_api_ready")),
              "function" == typeof e &&
                setTimeout(function () {
                  e();
                }, 1e3));
        }))
      : setTimeout(function () {
          check_running_status(t, e);
        }, 1e3);
  }, t);
}
function initial_package_managers() {
  for (
    var t = [
        "position_locks_manager",
        "area_manager",
        "charging_manager",
        "emergency_zones_manager",
        "mission_schedule_manager",
        "lift_manager",
      ],
      e = 0;
    e < t.length;
    e++
  ) {
    var a =
      '<span class="msg_icon waiting"></span>' +
      t[e] +
      " " +
      mir_translate("fleet_restart_package_starting");
    $(".mir-waiter").append(
      '<div class="init_node_msg" id=' + t[e] + ">" + a + "</div>"
    );
  }
}
function topsubbar_init(a) {
  return (
    $("#topsubbar_" + a)
      .on("mouseenter", "li.headitem", function (t) {
        var e = this;
        $("#topsubbar_" + a)
          .find("li.headitem")
          .each(function () {
            void 0 !== this.timer &&
              (clearTimeout(this.timer), (this.timer = void 0)),
              e !== this && $(this).attr("data-state", "close");
          }),
          $(this).attr("data-state", "open");
      })
      .on("mouseleave", "li.headitem", function (t) {
        var e = this,
          a = "ontouchstart" in window ? 0 : 600;
        void 0 === e.timer &&
          (e.timer = setTimeout(function () {
            $(e).attr("data-state", "close");
          }, a));
      }),
    !0
  );
}
function evacuate_all_zones() {
  var t = {
    title: mir_translate("fleet_dialog_evacuate_all_zones_title"),
    body: mir_translate("fleet_dialog_evacuate_all_zones_subtitle"),
    extra_confirm: mir_translate(
      "fleet_dialog_evacuate_all_zones_confirm_box_label"
    ),
    single_zone: mir_translate("fleet_dialog_evacuate_single_zone"),
  };
  MIR.ui.confirm(t).then(function () {
    $.ajax({
      url: "/system/settings?mode=toggle-evacuation-zone",
      method: "GET",
      dataType: "json",
      data: {
        guid: "all",
        set_value_to: "1",
      },
      success: function (t) {
        201 == t.headers.httpcode &&
          "object" == typeof evacuation_object &&
          evacuation_object.fetch_zones(),
          t.results.error_human && launch_error(t.results.error_human),
          $(".mir-overlay").remove();
      },
    });
  });
}
function get_robot_groups() {
  return new Promise(function (e, a) {
    $.ajax({
      url: "/setup/robots?mode=get-robotgroups&calltype=light",
      method: "POST",
      success: function (t) {
        200 != t.headers.httpcode ? a() : e(t.results);
      },
    });
  });
}
function get_robots() {
  return new Promise(function (e, a) {
    $.ajax({
      url: "/setup/schedule?mode=get-robots&calltype=light",
      method: "POST",
      success: function (t) {
        200 != t.headers.httpcode ? a() : e(t.results);
      },
    });
  });
}
function fleet_schedule_modal(t, e) {
  var a = "schedule_mission_modal_overlay";
  _overlay = MIR.ui.overlay({
    attributes: {
      id: a,
    },
  });
  var r = {};
  e && (r.edit_id = e),
    (r.mission_guid = t),
    (a = "#" + a),
    $.ajax({
      url: "/setup/schedule?mode=schedule-modal&calltype=light",
      method: "POST",
      data: r,
      success: function (t) {
        $(a).append(t),
          $(".datetime_date").datepicker({
            dateFormat: "yy-mm-dd",
          });
      },
    });
}
function set_mapping_engine() {
  $.get(
    "/?mode=get-setting&ros_name=" + MIR.constants.SETTINGS.MAPPING_ALGORITHM,
    function (t) {
      "object" == typeof t.headers &&
        200 == t.headers.httpcode &&
        $("body").attr("mapping-engine", t.results.value);
    }
  );
}
$(function () {
  $("form :input").each(function () {
    $(this).attr("origin-value", $(this).val()).attr("has-changed", 0);
  }),
    $(document).on("change keyup", "[has-changed]", function () {
      var t = $(this).val(),
        e = $(this).attr("origin-value");
      $(this).attr("has-changed", t != e ? 1 : 0);
    });
}),
  (window.onload = function () {
    var e = (this.existing_mission_actions = null),
      a = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform),
      r = mir_translate(
        "Are you sure you want to leave this page with unsaved data?"
      ),
      n = !1;
    function t() {
      var t = this;
      setTimeout(function () {
        t.existing_mission_actions = JSON.stringify(
          missions_missionview_fetch_actions(
            "missionview",
            "missionview_missionview_actionlist"
          ),
          replace_int
        );
      }, 500);
    }
    if (-1 < window.location.href.indexOf("missions/")) {
      $(document).on("click", ".mirbutton[data-template=submit]", function () {
        t();
      });
      var i = setInterval(function () {
        t(),
          null !== this.existing_mission_actions &&
            0 < this.existing_mission_actions.length &&
            clearInterval(i);
      }, 200);
      setTimeout(function () {
        clearInterval(i);
      }, 2e3);
    }
    if (-1 != location.href.indexOf("/designer"))
      var o = setInterval(function () {
        if (null != (e = $(".grid-stack-item")) && 0 < e.length) {
          clearInterval(o);
          var t = [];
          $(".grid-stack-item").each(function () {
            t.push($(this).attr("data-guid"));
          }),
            (e = t);
        }
        setTimeout(function () {
          clearInterval(o), 0 < e.length || (e = null);
        }, 3e3);
      }, 200);
    if (
      ($(document).on("click", ".delete", function () {
        n = !0;
      }),
      -1 == location.href.indexOf("maps/") ||
        -1 != location.href.indexOf("create-map"))
    )
      window.addEventListener("beforeunload", function (t) {
        if (
          !$(".loginwrapper").length &&
          -1 == location.href.indexOf("login") &&
          !n &&
          hasUnsavedChanges(this.existing_mission_actions, e, t)
        )
          return (
            ((t || window.event).returnValue = r), a ? window.confirm(r) : r
          );
      });
    else {
      var s = null,
        d = setInterval(function () {
          null !=
            (s = JSON.stringify(
              window[
                "map_" +
                  $(".mapcontainer").attr("data-element-id") +
                  "_metadata"
              ].layers
            )) && clearInterval(d);
        }, 200);
      window.addEventListener("beforeunload", function (t) {
        s !==
          JSON.stringify(
            window[
              "map_" + $(".mapcontainer").attr("data-element-id") + "_metadata"
            ].layers
          ) &&
          "saved" != $(".mapcontainer").attr("data-save-state") &&
          ((t || window.event).returnValue = r);
      });
    }
  }),
  (playbar_mission_id = null),
  $(document).ready(function () {
    $("html").addClass(
      MIR.util.is_mobile() ? "mir-device-mobile" : "mir-device-desktop"
    );
  }),
  $(document).on("submit", "#schedule_form", function (t) {
    t.preventDefault();
    var e = $(this).serialize();
    $.ajax({
      url: "/setup/schedule?mode=schedule-mission&calltype=light",
      data: e,
      method: "POST",
      success: function (t) {
        if (201 == t.headers.httpcode || 200 == t.headers.httpcode)
          return (
            _overlay.clear(),
            void (
              "undefined" != typeof fleet_schedule &&
              fleet_schedule.fetchAll(!0, t.results.id)
            )
          );
        $("#missionqueue_error").html(t.results.error_human);
      },
    });
  }),
  $(document).on("change", "#run_asap_toggle", function () {
    var t = $(this);
    $("#earliest_start_time").toggleClass("disable", !!t.is(":checked"));
  }),
  $(document).on("click", "#missionqueuequestions_cancelbtn", function () {
    _overlay.clear();
  }),
  set_mapping_engine(),
  $(document).on("click", "[trigger-element]", function () {
    var t = $(this).attr("trigger-element");
    $(t).trigger("click");
  });
function map_toggle_layerpicker(t) {
  map_itemselector_stop(t), map_itemeraser_stop(t), map_shapedrawer_stop(t);
  var e = document.getElementById(t + "_mapcontainer");
  "true" == e.getAttribute("data-show-layers")
    ? e.setAttribute("data-show-layers", "false")
    : (e.setAttribute("data-show-layers", "true"),
      e.setAttribute("data-show-mobiletoolbar", "false"),
      e.setAttribute("data-show-joystick", "false"));
}
function map_toggle_joystick(t) {
  map_itemselector_stop(t), map_itemeraser_stop(t), map_shapedrawer_stop(t);
  var e = document.getElementById(t + "_mapcontainer");
  "true" == e.getAttribute("data-show-joystick")
    ? e.setAttribute("data-show-joystick", "false")
    : (e.setAttribute("data-show-joystick", "true"),
      e.setAttribute("data-show-mobiletoolbar", "false"),
      e.setAttribute("data-show-layers", "false"));
}
function map_adjust_robot(t) {
  var e = new ROSLIB.Service({
      ros: ros,
      name: "/mircontrol/command",
      serviceType: "mirControl/Command",
    }),
    a = new ROSLIB.ServiceRequest({
      cmd: "adjust:6",
    });
  return e.callService(a, function (t) {}), !0;
}
function map_rotate_start(t) {
  var e = {};
  (e["map_" + t + "_rotate"] = "true"),
    $.post("/?mode=set-runtime-settings", e);
  var a,
    r = $("#" + t + "_map"),
    i = $("#" + t + "_layer_robotmap"),
    o = $("#" + t + "_layer_draw"),
    n = document.getElementById(t + "_mapcontainer");
  n.setAttribute("data-rotating", "true"),
    n.setAttribute("data-show-mobiletoolbar", "false"),
    document
      .getElementById(t + "_mapgridscreen")
      .setAttribute("data-visible", "true"),
    r.draggable("disable"),
    map_center_map(t, !1, !0),
    r.children().hide(),
    i.show(),
    o.show(),
    o.rotate({
      onRotate: function () {
        (a = this.angle),
          window.map_shift_holding && (a = 11.25 * Math.round(a / 11.25)),
          i.css("WebkitTransform", "rotate(" + a + "deg)"),
          i.css("-moz-transform", "rotate(" + a + "deg)"),
          i.css("-ms-transform", "rotate(" + a + "deg)"),
          i.css("transform", "rotate(" + a + "deg)"),
          n.setAttribute("data-rotation", a);
      },
      onDragStop: function () {
        o.css("WebkitTransform", "rotate(" + a + "deg)"),
          o.css("-moz-transform", "rotate(" + a + "deg)"),
          o.css("-ms-transform", "rotate(" + a + "deg)"),
          o.css("transform", "rotate(" + a + "deg)");
      },
    });
}
function map_rotate_stop(a) {
  var r = document.getElementById(a + "_mapcontainer"),
    t = document.getElementById(a + "_map");
  $(document).off("touchmove mousemove pointermove", "#" + a + "_layer_draw"),
    $(document).off("touchend mouseup pointerup", "#" + a + "_layer_draw"),
    $(document).off("mouseout pointerleave", "#" + a + "_layer_draw"),
    $(document).off(
      "touchstart mousedown pointerdown",
      "#" + a + "_layer_draw"
    );
  var e = document.getElementById(a + "_mapgridscreen");
  r.setAttribute("data-rotating", "false"),
    r.setAttribute("data-show-mobiletoolbar", "false"),
    e.setAttribute("data-visible", "false"),
    $(t).draggable("enable"),
    $("#" + a + "_layer_draw").data("draggable") &&
      $("#" + a + "_layer_draw").draggable("destroy"),
    r.setAttribute("data-initializing", "true"),
    (document.getElementById(a + "_maploadingscreen").innerHTML =
      "<p>" + map_lang_savingrotation + "</p>");
  var i = {};
  (i.id = r.getAttribute("data-map-guid")),
    (i.rotation = r.getAttribute("data-rotation")),
    (i.origin_x = Math.round(r.getAttribute("data-origin-x"))),
    (i.origin_y = Math.round(r.getAttribute("data-origin-y"))),
    (i.resscale = Math.round(r.getAttribute("data-resscale"))),
    (i.orig_w = Math.round(r.getAttribute("data-map-width"))),
    (i.orig_h = Math.round(r.getAttribute("data-map-height")));
  var o = r.getAttribute("data-map-guid");
  return (
    $.ajax({
      url: "/?mode=map-save-rotation",
      data: i,
      method: "POST",
      dataType: "json",
      id: a,
      guid: o,
      success: function (t) {
        var e = {};
        (e["map_" + a + "_rotate"] = "false"),
          (e.mapping_state = MIR.constants.MAP.state.READY),
          $.post("/?mode=set-runtime-settings", e),
          r.setAttribute("data-initializing", "false"),
          (document.getElementById(a + "_maploadingscreen").innerHTML =
            "<p>" + map_lang_initing + "</p>"),
          r.setAttribute("data-rotating", "false"),
          r.setAttribute("data-rotation", "0"),
          o == robot_map_id
            ? map_init(this.id, this.guid, !1)
            : launch_dialogue(
                map_lang_donemapping_headline,
                map_lang_donemapping_text,
                "map_init('" +
                  this.id +
                  "','" +
                  this.guid +
                  "',false); activate_map('" +
                  this.guid +
                  "',null);",
                "map_init('" + this.id + "','" + this.guid + "',false);",
                map_lang_donemapping_yes,
                map_lang_donemapping_no
              );
      },
    }),
    !0
  );
}
function map_rotate_sethorizon(l) {
  var p = document.getElementById(l + "_mapcontainer"),
    m =
      (document.getElementById(l + "_map"),
      document.getElementById(l + "_layer_robotmap"));
  if ("rotate_sethorizon" == p.getAttribute("data-current-tool")) {
    var a = document.getElementById(l + "_layer_tmpsvg");
    $(a)
      .children("#tmpsvg_sethorizontmp_" + l)
      .remove(),
      $(document).off(
        "touchmove mousemove pointermove",
        "#" + l + "_layer_draw"
      ),
      $(document).off("touchend mouseup pointerup", "#" + l + "_layer_draw"),
      $(document).off(
        "touchstart mousedown pointerdown",
        "#" + l + "_layer_draw"
      ),
      $(document).off("mouseout pointerleave", "#" + l + "_layer_draw"),
      (g = _ = c = u = null),
      0,
      map_rotate_start(l),
      p.setAttribute("data-current-tool", "navigator");
  } else {
    p.setAttribute("data-current-tool", "rotate_sethorizon"),
      map_show_all_layers(l),
      map_layercontrol_toggle_view(l, "robotmap"),
      map_set_guide(
        l,
        mir_translate("Drag a line to define a horizontal or vertical line.")
      ),
      $("#" + l + "_layer_draw").data("draggable") &&
        $("#" + l + "_layer_draw").draggable("destroy"),
      $("#" + l + "_layer_draw").show();
    var u = null,
      c = null,
      _ = null,
      g = null,
      h = parseFloat(p.getAttribute("data-rotation")),
      r = document.getElementById(l + "_layer_draw_canvas");
    a = document.getElementById(l + "_layer_tmpsvg");
    $(document).on(
      "touchstart mousedown pointerdown",
      "#" + l + "_layer_draw",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          $(a)
            .children("#tmpsvg_sethorizontmp_" + l)
            .remove(),
            $(document).off(
              "touchmove mousemove pointermove",
              "#" + l + "_layer_draw"
            ),
            $(document).off(
              "touchend mouseup pointerup",
              "#" + l + "_layer_draw"
            ),
            $(document).off("mouseout pointerleave", "#" + l + "_layer_draw");
          var i = parseFloat(p.getAttribute("data-zoom-scale"));
          if (
            null == t.originalEvent.offsetX &&
            -1 < t.originalEvent.touches.length
          ) {
            var e = document
              .getElementById(l + "_layer_draw")
              .getBoundingClientRect();
            (u = (t.originalEvent.touches[0].clientX - e.left) / i),
              (_ = (t.originalEvent.touches[0].clientY - e.top) / i);
          } else (u = t.originalEvent.offsetX), (_ = t.originalEvent.offsetY);
          var o = document.createElementNS("http://www.w3.org/2000/svg", "svg");
          o.setAttribute("id", "tmpsvg_sethorizontmp_" + l),
            o.setAttribute("x", "0px"),
            o.setAttribute("y", "0px"),
            o.setAttribute("width", r.getAttribute("width") + "px"),
            o.setAttribute("height", r.getAttribute("height") + "px"),
            o.setAttribute(
              "viewbox",
              "0 0 " + r.getAttribute("width") + " " + r.getAttribute("height")
            ),
            o.setAttribute("version", "1.1"),
            o.setAttribute("xml:space", "preserve"),
            a.appendChild(o);
          var n = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "polyline"
          );
          n.setAttribute("id", "tmpsvg_sethorizontmpline_" + l),
            n.setAttribute("polygon", ""),
            n.setAttribute("fill", "none"),
            n.setAttribute("stroke-width", "1"),
            n.setAttribute("opacity", "0.8"),
            n.setAttribute("stroke-linejoin", "square"),
            n.setAttribute("stroke-linecap", "square"),
            n.setAttribute("stroke-dasharray", "0"),
            n.setAttribute("stroke", "#BB0000"),
            o.append(n);
          var s = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "ellipse"
          );
          s.setAttribute("cx", u),
            s.setAttribute("cy", _),
            s.setAttribute("rx", 1),
            s.setAttribute("ry", 1),
            s.setAttribute("fill", "#BB0000"),
            s.setAttribute("id", "tmpsvg_sethorizontmpstart_" + l),
            o.append(s);
          var d = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "ellipse"
          );
          d.setAttribute("cx", u),
            d.setAttribute("cy", _),
            d.setAttribute("rx", 1),
            d.setAttribute("ry", 1),
            d.setAttribute("fill", "#BB0000"),
            d.setAttribute("id", "tmpsvg_sethorizontmpend_" + l),
            o.append(d),
            $(document).on(
              "touchmove mousemove pointermove",
              "#" + l + "_layer_draw",
              function (t) {
                if (!0 !== t.handled) {
                  if (
                    (t.stopPropagation(),
                    t.preventDefault(),
                    null == t.originalEvent.offsetX)
                  ) {
                    var e = document
                      .getElementById(l + "_layer_draw")
                      .getBoundingClientRect();
                    (c = (t.originalEvent.touches[0].clientX - e.left) / i),
                      (g = (t.originalEvent.touches[0].clientY - e.top) / i);
                  } else
                    (c = t.originalEvent.offsetX),
                      (g = t.originalEvent.offsetY);
                  n.setAttribute("polygon", u + " " + _ + "," + c + " " + g),
                    d.setAttribute("cx", c),
                    d.setAttribute("cy", g);
                } else t.handled = !0;
              }
            ),
            $(document).on(
              "mouseout pointerleave",
              "#" + l + "_layer_draw",
              function (t) {
                !0 !== t.handled
                  ? (t.stopPropagation(),
                    t.preventDefault(),
                    $(n).remove(),
                    $(s).remove(),
                    $(d).remove(),
                    $(o).remove(),
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "touchend mouseup pointerup",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "touchstart mousedown pointerdown",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "mouseout pointerleave",
                      "#" + l + "_layer_draw"
                    ),
                    (g = _ = c = u = null),
                    0,
                    map_rotate_start(l),
                    p.setAttribute("data-current-tool", "navigator"))
                  : (t.handled = !0);
              }
            ),
            $(document).on(
              "touchend mouseup mouseout pointerup",
              "#" + l + "_layer_draw",
              function (t) {
                if (!0 !== t.handled) {
                  if (
                    (t.stopPropagation(),
                    t.preventDefault(),
                    null == t.originalEvent.offsetX &&
                      t.originalEvent.touches[0])
                  ) {
                    var e = document
                      .getElementById(l + "_layer_draw")
                      .getBoundingClientRect();
                    (c = (t.originalEvent.touches[0].clientX - e.left) / i),
                      (g = (t.originalEvent.touches[0].clientY - e.top) / i);
                  } else
                    t.originalEvent.offsetX &&
                      ((c = t.originalEvent.offsetX),
                      (g = t.originalEvent.offsetY));
                  var a = calculate_angle_between_points(u, _, c, g);
                  if (((a += 90) < 0 && (a += 360), 0 <= a && a < 45));
                  else if (315 <= a && a <= 360) {
                    a -= 360;
                  } else if (135 <= a && a < 225) {
                    a -= 180;
                  } else if (45 <= a && a < 135) {
                    a -= 90;
                  } else if (225 <= a && a < 315) {
                    a -= 270;
                  }
                  var r = h - a;
                  $(m).css("WebkitTransform", "rotate(" + r + "deg)"),
                    $(m).css("-moz-transform", "rotate(" + r + "deg)"),
                    $(m).css("-ms-transform", "rotate(" + r + "deg)"),
                    $(m).css("transform", "rotate(" + r + "deg)"),
                    p.setAttribute("data-rotation", r),
                    $(n).remove(),
                    $(s).remove(),
                    $(d).remove(),
                    $(o).remove(),
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "touchend mouseup pointerup",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "touchstart mousedown pointerdown",
                      "#" + l + "_layer_draw"
                    ),
                    $(document).off(
                      "mouseout pointerleave",
                      "#" + l + "_layer_draw"
                    ),
                    (g = _ = c = u = null),
                    (a = 0),
                    map_rotate_start(l),
                    p.setAttribute("data-current-tool", "navigator");
                } else t.handled = !0;
              }
            );
        } else t.handled = !0;
      }
    );
  }
  return !0;
}
function map_record_start_check(i, o) {
  var n = document
    .getElementById(i + "_mapcontainer")
    .getAttribute("data-custommap");
  return (
    (o = 1 == o),
    launch_waiter(map_lang_mapping_checking_laserscanners),
    (ros_diagnostics_listener = new ROSLIB.Topic({
      ros: ros,
      name: "/diagnostics_agg",
      messageType: "diagnostic_msgs/DiagnosticArray",
    })),
    ros_diagnostics_listener.subscribe(function (t) {
      ros_diagnostics_listener.unsubscribe();
      for (var e = !1, a = !1, r = 0; r < t.status.length; )
        "/Sensors/Laserscanner (Back)/Communication" == t.status[r].name &&
          0 == t.status[r].level &&
          (e = !0),
          "/Sensors/Laserscanner (Front)/Communication" == t.status[r].name &&
            0 == t.status[r].level &&
            (a = !0),
          r++;
      close_waiter(),
        0 == e || 0 == a
          ? launch_error(map_lang_mapping_checking_laserscanners_nogood)
          : "false" == n
          ? map_record_start(i, !1, o)
          : 1 == o
          ? map_record_start(i, !1, !0)
          : launch_confirm(
              map_lang_mapping_confirm_headline,
              map_lang_mapping_confirm_text,
              "map_record_start('" + i + "');",
              map_lang_mapping_confirm_startmapping,
              map_lang_mapping_confirm_cancel
            );
    }),
    !0
  );
}
function map_record_start(i, t, e) {
  var a = MIR.runtime.maps[i].mir,
    r = a.get_guid();
  if (!t) {
    var o = {};
    (o.mapping_guid = r),
      (o.mapping_origin_x = a.get_origin().x),
      (o.mapping_origin_y = a.get_origin().y),
      (o.mapping_scale = a.get_scale()),
      (o.mapping_robot_start_x = robot_cur_x),
      (o.mapping_robot_start_y = robot_cur_y),
      (o.mapping_robot_start_orientation = robot_cur_degrees),
      (o.mapping_state = MIR.constants.MAP.state.MAPPING),
      (o.mapping_append = Boolean(e)),
      (o["map_" + i + "_appendmapping"] = Boolean(e)),
      (o["map_" + i + "_appendmapping_robot_x"] = robot_cur_x),
      (o["map_" + i + "_appendmapping_robot_y"] = robot_cur_y),
      (o["map_" + i + "_appendmapping_robot_orientation"] = robot_cur_degrees),
      $.post("/?mode=set-runtime-settings", o, function (t) {});
  }
  map_reset_mychoice(i),
    map_center_map(i),
    $("div.joystick > div.holder > div.stick").draggable("enable");
  var n = document.getElementById(i + "_mapcontainer");
  n.setAttribute("data-initializing", "true"),
    (document.getElementById(i + "_maploadingscreen").innerHTML =
      "<p>" + map_lang_mapping_starting + "</p>"),
    $(n).find("div.recording_indicator").hide(),
    n.setAttribute("data-mapping", "true"),
    e
      ? n.setAttribute("data-append-mapping", "true")
      : n.setAttribute("data-append-mapping", "false"),
    n.setAttribute("data-show-mobiletoolbar", "false"),
    n.setAttribute("data-center-robot", "true"),
    map_set_guide(i, map_lang_guide_record);
  var s = document.createElement("img");
  s.setAttribute("class", "mapping-part"),
    s.setAttribute("id", "mapping-part"),
    document.getElementById(i + "_layer_mapping").appendChild(s),
    t ||
      new ROSLIB.Service({
        ros: ros,
        name: "/mircontrol/setMode",
        serviceType: "mirControl/SetMode",
      }).callService(
        new ROSLIB.ServiceRequest({
          robotMode: MIR.constants.ROBOT_MODE.MAPPING,
          modeData: r,
        }),
        function (t) {}
      );
  (window["map_" + i + "_recorder_key"] = -1),
    new ROSLIB.Topic({
      ros: ros,
      name: "/mapping_metadata",
      messageType: "mirMsgs/LocalMapStat",
      throttle_rate: 10,
    }).subscribe(function (a) {
      if (-1 == window["map_" + i + "_recorder_key"]) {
        var t = new Date(),
          e = Math.floor(t.getTime() / 1e3);
        (window["map_" + i + "_recorder_key"] = e),
          (robot_cur_mapping_img_x = Math.round(a.x)),
          (robot_cur_mapping_img_y = Math.round(a.y));
        var r = document.getElementById("mapping-part");
        r &&
          ((r.onload = function () {
            var t =
                parseInt(n.getAttribute("data-map-height")) -
                (this.height + a.y),
              e = a.x;
            $(
              'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype="mapping"] > img.mapping-part'
            ).css("top", t + "px"),
              $(
                'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype="mapping"] > img.mapping-part'
              ).css("left", e + "px"),
              $(
                'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype="positions"]'
              ).show(),
              (window["map_" + i + "_recorder_key"] = -1);
          }),
          (r.onerror = function () {
            window["map_" + i + "_recorder_key"] = -1;
          }),
          (r.src = "/?mode=get-tmp-png&f=mir_map_part.png&t=" + e));
      }
    }),
    new ROSLIB.Topic({
      ros: ros,
      name: "/map_metadata",
      messageType: "nav_msgs/MapMetaData",
    }).subscribe(function (t) {
      var e = 1 / t.resolution,
        a = t.width,
        r = t.height;
      $("div.mapcontainer").attr("data-resscale", e),
        $("div.mapcontainer").attr(
          "data-origin-x",
          Math.round(t.origin.position.x * e)
        ),
        $("div.mapcontainer").attr(
          "data-origin-y",
          Math.round(t.origin.position.y * e)
        ),
        $("div.mapcontainer").attr("data-map-width", Math.round(t.width)),
        $("div.mapcontainer").attr("data-map-height", Math.round(t.height)),
        $("div.mapcontainer").attr("data-resolution", t.resolution),
        $(
          'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype="mapping"]'
        ).css("width", a + "px"),
        $(
          'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype="mapping"]'
        ).css("height", r + "px");
    }),
    map_record_start_statuscheck(i);
}
function map_record_start_statuscheck(t) {
  var e = document.getElementById(t + "_mapcontainer");
  if (
    "11" ==
      document.getElementsByTagName("body")[0].getAttribute("data-state-id") &&
    "3" == document.getElementsByTagName("body")[0].getAttribute("data-mode-id")
  )
    e.setAttribute("data-initializing", "false"),
      (document.getElementById(t + "_maploadingscreen").innerHTML =
        "<p>" + map_lang_initing + "</p>"),
      $(e)
        .children("#" + t + "_mapwrapper")
        .children("#" + t + "_mapholder")
        .children("div.map")
        .children("div.layer")
        .each(function () {
          "mapping" == this.getAttribute("data-layertype") ||
            "robot" == this.getAttribute("data-layertype") ||
            $(this).hide();
        }),
      $(e).find("div.recording_indicator").show(),
      map_center_robot(t);
  else
    window.setTimeout(function () {
      map_record_start_statuscheck(t);
    }, 2e3);
  return !0;
}
function map_record_stop(s) {
  submitwarn_set(),
    (robot_cur_mapping_x = robot_cur_x),
    (robot_cur_mapping_y = robot_cur_y),
    (robot_cur_mapping_orientation = robot_cur_degrees),
    launch_waiter(mir_translate("Stopping mapping-engine..."));
  clearInterval(window["map_" + s + "_mapping_backmap_timer"]);
  var t = document.getElementById(s + "_mapcontainer");
  t.setAttribute("data-mapping", "false"),
    t.setAttribute("data-show-mobiletoolbar", "false"),
    t.setAttribute("data-center-robot", "false"),
    t.setAttribute("data-append-mapping", "false");
  var d = t.getAttribute("data-origin-x"),
    l = t.getAttribute("data-origin-y");
  $.get("/?mode=get-runtime-settings", {}, function (t) {
    var e = t["map_" + s + "_appendmapping"];
    if (t["map_" + s + "_appendmapping_robot_x"])
      var a = t["map_" + s + "_appendmapping_robot_x"];
    else a = 0;
    if (t["map_" + s + "_appendmapping_robot_y"])
      var r = t["map_" + s + "_appendmapping_robot_y"];
    else r = 0;
    if (t["map_" + s + "_appendmapping_robot_orientation"])
      var i = t["map_" + s + "_appendmapping_robot_orientation"];
    else i = 0;
    var o = new ROSLIB.Service({
        ros: ros,
        name: "/mircontrol/setMode",
        serviceType: "mirControl/SetMode",
      }),
      n = {};
    $.get(
      "/?mode=get-setting&ros_name=" + MIR.constants.SETTINGS.MAPPING_ALGORITHM,
      function (t) {
        t.results.value === MIR.constants.MAPPING_ALGORITHM.HECTOR
          ? o.callService(
              new ROSLIB.ServiceRequest({
                robotMode: MIR.constants.ROBOT_MODE.MISSION,
              }),
              function (t) {
                $("#" + s + "_layer_mapping")
                  .find("img")[0]
                  .remove(),
                  window.mode_callbacks[7].push(
                    "map_record_stop_terminate('" +
                      s +
                      "'," +
                      e +
                      ",'" +
                      a +
                      "','" +
                      r +
                      "','" +
                      i +
                      "','" +
                      robot_cur_mapping_x +
                      "','" +
                      robot_cur_mapping_y +
                      "','" +
                      robot_cur_mapping_orientation +
                      "'," +
                      d +
                      "," +
                      l +
                      ");"
                  );
              }
            )
          : ((n.mapping_robot_end_x = robot_cur_x),
            (n.mapping_robot_end_y = robot_cur_y),
            (n.mapping_robot_end_orientation = robot_cur_degrees),
            (n.mapping_state = MIR.constants.MAP.state.FINALIZING),
            $.post("/?mode=set-runtime-settings", n, function (t) {
              o.callService(
                new ROSLIB.ServiceRequest({
                  robotMode: MIR.constants.ROBOT_MODE.MAPPING_FINALIZING,
                }),
                function (t) {
                  resetChanges(), close_waiter(), map_finalizing_start(s);
                }
              );
            }));
      }
    );
  });
}
function map_record_stop_terminate(t, e, a, r, i, o, n, s, d, l) {
  close_waiter(), launch_waiter(mir_translate("Please wait..."));
  var p = document.getElementById(t + "_mapcontainer"),
    m = p.getAttribute("data-origin-x"),
    u = p.getAttribute("data-origin-y"),
    c =
      (p.getAttribute("data-map-width"), p.getAttribute("data-map-height"), {});
  (c.id = p.getAttribute("data-map-guid")),
    (c.resscale = p.getAttribute("data-resscale")),
    (c.origin_x = m),
    (c.origin_y = u),
    (c.mapping_origin_x = d),
    (c.mapping_origin_y = l),
    (c.append = e),
    (c.append_robot_x = a),
    (c.append_robot_y = r),
    (c.append_robot_orientation = i),
    (c.append_mapping_robot_x = o),
    (c.append_mapping_robot_y = n),
    (c.append_mapping_robot_orientation = s),
    $.ajax({
      url: "/?mode=map-save-mapping",
      data: c,
      method: "POST",
      dataType: "json",
      id: t,
      guid: p.getAttribute("data-map-guid"),
      success: function (t) {
        resetChanges(),
          1 == e
            ? map_init(this.id, this.guid, !1, null, !0)
            : map_init(this.id, this.guid, !0),
          close_waiter();
      },
    });
}
function map_upload(t, e) {
  if (e) {
    var a = {};
    (a["map_" + t + "_appendmapping"] = String(e)),
      (a["map_" + t + "_appendmapping_robot_x"] = robot_cur_x),
      (a["map_" + t + "_appendmapping_robot_y"] = robot_cur_y),
      (a["map_" + t + "_appendmapping_robot_orientation"] = robot_cur_degrees),
      $.post("/?mode=set-runtime-settings", a, function (t) {});
  }
  map_itemselector_stop(t),
    map_itemeraser_stop(t),
    map_shapedrawer_stop(t),
    map_navigator(t);
  for (
    var r = document.getElementById(t + "_mapcontainer"),
      i = document.getElementById("map_" + t + "_uploader"),
      o = document.getElementById("map_" + t + "_uploadform"),
      n = document.getElementById("map_" + t + "_uploader_iframe"),
      s = "/",
      d = o.getAttribute("action").split("?")[1].split("&"),
      l = 0;
    l < d.length;

  ) {
    var p = d[l].split("=");
    "append" == p[0] ||
      ((s += 0 == l ? "?" : "&"), (s += String(p[0]) + "=" + String(p[1]))),
      l++;
  }
  (s += 1 == e ? "&append=true" : "&append=false"),
    o.setAttribute("action", s),
    r.setAttribute("data-show-mobiletoolbar", "false"),
    map_reset_mychoice(t),
    (n.onload = function () {
      $(i).val(null),
        r.setAttribute("data-initializing", "false"),
        (document.getElementById(t + "_maploadingscreen").innerHTML =
          "<p>" + map_lang_initing + "</p>"),
        1 == e
          ? map_init(t, r.getAttribute("data-map-guid"), !1, null, !0)
          : map_init(t, r.getAttribute("data-map-guid"), !0);
    }),
    (i.onchange = function () {
      r.setAttribute("data-initializing", "true"),
        (document.getElementById(t + "_maploadingscreen").innerHTML =
          "<p>" + map_lang_uploading + "</p>"),
        document.getElementById("map_" + t + "_uploadform").submit();
    }),
    $(i).trigger("click");
}
function map_download(t) {
  map_itemselector_stop(t),
    map_itemeraser_stop(t),
    map_shapedrawer_stop(t),
    map_navigator(t);
  var e = document.getElementById(t + "_mapcontainer"),
    a = e.getAttribute("data-map-guid");
  e.setAttribute("data-show-mobiletoolbar", "false"),
    (location.href = "/?mode=download-map&id=" + a);
}
function map_save(o, n) {
  var s = document.getElementById(o + "_mapcontainer");
  if ("saved" == s.getAttribute("data-save-state"));
  else if ("savable" == s.getAttribute("data-save-state") || 1 == n) {
    map_set_save_state(o, "saving", !0),
      1 == n ||
        (map_reset_mychoice(o),
        map_itemselector_stop(o),
        map_itemeraser_stop(o),
        map_shapedrawer_stop(o),
        map_navigator(o));
    var d = s.getAttribute("data-map-guid");
    s.setAttribute("data-show-mobiletoolbar", "false");
    document.getElementById(o + "_real_basemap_floor"),
      document.getElementById(o + "_real_basemap_walls");
    var t = {};
    for (var e in ((t.id = s.getAttribute("data-map-guid")),
    (t.metadata = window["map_" + o + "_metadata"]),
    t.metadata.layers))
      if (t.metadata.layers[e].shapes.length)
        for (var a = 0; a < t.metadata.layers[e].shapes.length; a++)
          if ("DELETED" != t.metadata.layers[e].shapes[a]) {
            var r = t.metadata.layers[e].shapes[a].polygon;
            if (r && r.length) {
              for (var i = 0; i < r.length; i++)
                "DELETED" == r[i] && (r.splice(i, 1), (i -= 1));
              t.metadata.layers[e].shapes[a].polygon = r;
            }
          }
    (t.metadata = JSON.stringify(t.metadata)),
      (t.basemap_floor = document.getElementById(
        o + "_real_basemap_floor_img"
      ).src),
      (t.basemap_walls = document.getElementById(
        o + "_real_basemap_walls_img"
      ).src),
      $.post("/?mode=save-map", t, function (t) {
        for (var e in t.areaeventguids)
          for (var a = t.areaeventguids[e], r = 0; r < a.length; )
            (window["map_" + o + "_metadata"].layers[e].shapes[r].guid = a[r]),
              r++;
        if (1 == n) {
          var i = new Date();
          document.getElementById(o + "_real_robotmap").src =
            "/?mode=get-map&pageviewid=" +
            pageviewid +
            "&id=" +
            d +
            "&t=" +
            Math.floor(i.getTime() / 1e3) +
            "&silent=true";
        } else {
          i = new Date();
          document.getElementById(o + "_real_robotmap").src =
            "/?mode=get-map&pageviewid=" +
            pageviewid +
            "&id=" +
            d +
            "&t=" +
            Math.floor(i.getTime() / 1e3);
        }
        (pageviewid = generate_uuid()),
          map_set_save_state(o, "saved", !0),
          "true" == s.getAttribute("data-active-map") &&
            (document
              .getElementsByTagName("body")[0]
              .setAttribute("data-unloaded-map-changes", "true"),
            launch_dialogue(
              map_lang_reloadmap,
              map_lang_reloadmap_text,
              "activate_map('" + s.getAttribute("data-map-guid") + "',null);",
              null,
              map_lang_reloadmap_yes,
              map_lang_reloadmap_no
            ));
      });
  }
  return !0;
}
function map_pointinserter(_) {
  var g = document.getElementById(_ + "_mapcontainer"),
    h = g.getAttribute("data-current-layer");
  map_itemeraser_stop(_),
    g.setAttribute("data-show-layers", "false"),
    g.setAttribute("data-show-joystick", "false"),
    g.setAttribute("data-show-mobiletoolbar", "false"),
    g.setAttribute("data-current-tool", "pointinserter"),
    map_set_guide(_, map_lang_guide_pointinserter_a);
  var f = parseFloat(g.getAttribute("data-zoom-scale")),
    t = document.getElementById(_ + "_layer_" + h),
    e = $(t).find("iframe"),
    v = $(e).contents();
  if (
    (map_toolbars_place(), 0 < g.getAttribute("data-selected-shape").length)
  ) {
    var b = document.getElementById(_ + "_mapdrawer"),
      a = g.getAttribute("data-selected-shape");
    a = Math.round(a.replace(_ + "_" + h + "_", ""));
    var y = JSON.parse(
      JSON.stringify(window["map_" + _ + "_metadata"].layers[h].shapes[a])
    );
    $(".refigurepathhandle").draggable("disable"),
      $(document).on(
        "touchstart mousedown pointerdown",
        "#" + _ + "_mapdrawer > .refigurepathhandle",
        function (t) {
          $(this).attr("data-color", "yellow");
          var u = this,
            c = parseInt(this.getAttribute("data-point")) + 1;
          $(document).off(
            "touchstart mousedown pointerdown",
            "#" + _ + "_mapdrawer > .refigurepathhandle"
          ),
            map_set_guide(_, map_lang_guide_pointinserter_b),
            window.setTimeout(function () {
              $(document).on(
                "touchstart mousedown pointerdown",
                "#" + _ + "_mapdrawer",
                function (t) {
                  if ("mapdrawer" == t.target.getAttribute("class")) {
                    if (
                      (t.stopPropagation(),
                      t.preventDefault(),
                      $(document).off(
                        "touchstart mousedown pointerdown",
                        "#" + _ + "_mapdrawer"
                      ),
                      null == t.originalEvent.offsetX &&
                        -1 < t.originalEvent.touches.length)
                    )
                      var e = document
                          .getElementById(map_id + "_layer_draw_canvas")
                          .getBoundingClientRect(),
                        a = (t.originalEvent.touches[0].clientX - e.left) / f,
                        r = (t.originalEvent.touches[0].clientY - e.top) / f;
                    else
                      (a = t.originalEvent.offsetX),
                        (r = t.originalEvent.offsetY);
                    var i = g.getAttribute("data-selected-shape");
                    i = Math.round(i.replace(_ + "_" + h + "_", ""));
                    var o = {
                      type: "insert_point",
                    };
                    (o.layer = h),
                      (o.path_id = i),
                      (o.point_id = c),
                      (o.svgdata = $(v)
                        .find("#" + _ + "_" + h + "_" + i)
                        .attr("d")),
                      (o.old_obj = y),
                      map_add_to_history(_, o);
                    var n = document.createElement("div");
                    n.setAttribute("class", "refigurepathhandle"),
                      n.setAttribute("data-layer", h),
                      n.setAttribute("data-path", i),
                      n.setAttribute("data-point", c),
                      n.setAttribute("data-element-id", _),
                      $(b)
                        .find(".refigurepathhandle")
                        .each(function () {
                          (parseInt(this.getAttribute("data-point")) == c ||
                            parseInt(this.getAttribute("data-point")) > c) &&
                            this.setAttribute(
                              "data-point",
                              parseInt(this.getAttribute("data-point")) + 1
                            );
                        }),
                      b.appendChild(n);
                    var s = parseFloat(g.getAttribute("data-zoom-scale")),
                      d = {};
                    (d.x = a),
                      (d.y = r),
                      (d.x =
                        d.x -
                        parseFloat(g.getAttribute("data-zoom-offset-left"))),
                      (d.y =
                        d.y -
                        parseFloat(g.getAttribute("data-zoom-offset-top"))),
                      (d.x = Math.round(d.x / s)),
                      (d.y = Math.round(d.y / s)),
                      window["map_" + _ + "_metadata"].layers[h].shapes[
                        i
                      ].polygon.splice(c, 0, d),
                      map_set_save_state(_, "savable", !1);
                    for (
                      var l = "", p = !1, m = 0;
                      m <
                      window["map_" + _ + "_metadata"].layers[h].shapes[i]
                        .polygon.length;

                    )
                      "DELETED" ==
                        window["map_" + _ + "_metadata"].layers[h].shapes[i]
                          .polygon[m] ||
                        (0 == p ? ((p = !0), (l += "M")) : (l += "L"),
                        (l +=
                          window["map_" + _ + "_metadata"].layers[h].shapes[i]
                            .polygon[m].x +
                          " " +
                          window["map_" + _ + "_metadata"].layers[h].shapes[i]
                            .polygon[m].y)),
                        m++;
                    "shape" ==
                      window["map_" + _ + "_metadata"].layers[h].shapes[i]
                        .type && (l += "z"),
                      $(v)
                        .find("#" + _ + "_" + h + "_" + i)
                        .attr("d", l),
                      map_update_ghost(_, h, i),
                      $(n).css("top", r + "px"),
                      $(n).css("left", a + "px"),
                      $(u).attr("data-color", "green"),
                      map_itemselector(_),
                      $(v)
                        .find("#" + _ + "_" + h + "_" + i)
                        .trigger("touchstart"),
                      map_toolbars_place();
                  }
                }
              );
            }, 300);
        }
      );
  }
}
function checkShapePermission(t, e, a) {
  function r(t) {
    switch (t) {
      case "DELETE":
        launch_error(map_lang_area_nopermdel);
        break;
      default:
        launch_error(map_lang_area_noperm);
    }
  }
  if (Array.isArray(t.allowed_methods)) {
    if (t.allowed_methods.indexOf(e) < 0) return r(e), !1;
  } else if (
    a &&
    (($mapcontainer = $("#" + a + "_mapcontainer")),
    0 < $mapcontainer.length &&
      "false" == $mapcontainer.attr("data-allow-edit"))
  )
    return r(e), !1;
  return !0;
}
function map_itemeraser(_) {
  var t = document.getElementById(_ + "_mapcontainer");
  0 < t.getAttribute("data-selected-shape").length
    ? map_autoselect_layer(_, "vectors", !0)
    : (map_autoselect_layer(_, "vectors"),
      map_clean_tempshapes(_),
      map_shapedrawer_stop(_));
  var e = t.getAttribute("data-current-layer");
  t.getAttribute("data-selected-shape").length <= 0 && map_isolate_layer(_, e),
    t.setAttribute("data-show-layers", "false"),
    t.setAttribute("data-show-joystick", "false"),
    t.setAttribute("data-show-mobiletoolbar", "false"),
    t.setAttribute("data-current-tool", "itemeraser");
  var a = document.getElementById(_ + "_layer_" + e),
    r = $(a).find("iframe");
  $(r).contents();
  if (
    (map_toolbars_place(), 0 < t.getAttribute("data-selected-shape").length)
  ) {
    map_set_guide(_, map_lang_guide_itemeraser_point);
    var g = document.getElementById(_ + "_mapdrawer");
    $(".refigurepathhandle").draggable("disable"),
      $(g)
        .find(".refigurepathhandle")
        .click(function (t) {
          var e = this.getAttribute("data-element-id");
          document.getElementById(e + "_mapcontainer");
          map_set_save_state(e, "savable", !1);
          var a = this.getAttribute("data-point"),
            r = this.getAttribute("data-layer"),
            i = this.getAttribute("data-path");
          if (
            !checkShapePermission(
              window["map_" + _ + "_metadata"].layers[r].shapes[i],
              "DELETE"
            )
          )
            return !1;
          var o = {
            type: "delete_point",
          };
          (o.layer = r),
            (o.path_id = i),
            (o.point_id = a),
            (o.old_obj =
              window["map_" + e + "_metadata"].layers[r].shapes[i].polygon[a]),
            map_add_to_history(_, o);
          for (
            var n =
                window["map_" + e + "_metadata"].layers[r].shapes[i].polygon,
              s = "",
              d = 0,
              l = 0,
              p = !1;
            l < n.length;

          )
            l == a ||
              "DELETED" == n[l] ||
              (0 == p ? ((s += "M"), (p = !0)) : (s += "L"),
              (s += n[l].x + " " + n[l].y),
              d++),
              l++;
          "stroke" ==
            window["map_" + e + "_metadata"].layers[r].shapes[i].type ||
            (s += "z");
          var m = document.getElementById(e + "_layer_" + r),
            u = $(m).find("iframe"),
            c = $(u).contents();
          $(c)
            .find("#" + e + "_" + r + "_" + i)
            .attr("d", s),
            map_update_ghost(e, r, i),
            (window["map_" + e + "_metadata"].layers[r].shapes[i].polygon[a] =
              "DELETED"),
            $(this).remove(),
            "stroke" ==
              window["map_" + e + "_metadata"].layers[r].shapes[i].type ||
              (d < 3 &&
                (map_clean_tempshapes(_),
                map_shapedrawer_stop(_),
                (window["map_" + e + "_metadata"].layers[r].shapes[i] =
                  "DELETED"),
                $(g).find(".refigurepathhandle").remove()));
        });
  } else map_set_guide(_, map_lang_guide_itemeraser_shape);
}
function map_delete_shape(t, e, a) {
  var r = t.getAttribute("id");
  r = r.replace("_ghost", "");
  var i = t.getAttribute("id");
  (i = i.replace("_ghost", "")),
    (i = Math.round(i.replace(e + "_" + a + "_", "")));
  var o = window["map_" + e + "_metadata"].layers[a].shapes,
    n = {
      type: "delete_shape",
      layer: a,
      path_id: i,
      svgdata: t.getAttribute("d"),
      old_obj: JSON.parse(JSON.stringify(o[i])),
    };
  if (!checkShapePermission(o[i], "DELETE")) return !1;
  map_add_to_history(e, n),
    map_set_save_state(e, "savable", !1),
    (o[i] = "DELETED"),
    $(t)
      .parent()
      .find("#" + r)
      .remove(),
    map_update_ghost(e, a, i),
    map_toolbars_place();
}
function map_itemeraser_stop(e) {
  var t = document.getElementById(e + "_mapdrawer"),
    a = document.getElementById(e + "_mapcontainer");
  $(t).find(".refigurepathhandle").off("click"),
    $(a)
      .find("iframe")
      .each(function () {
        var t = $(this).contents().find("svg");
        $(t).off(
          "touchstart mousedown pointerdown",
          "." + e + "_svgpath, ." + e + "_svgpath_ghost"
        );
      });
}
function map_clean_tempshapes(t) {
  var e = document.getElementById(t + "_mapcontainer");
  window[t + "_localpoints"] = [];
  $(e)
    .find("iframe")
    .each(function () {
      var t = $(this).contents().find("svg");
      $(t).find("#tempshape").remove();
    });
  var a = document.getElementById(t + "_mapdrawer");
  return $(a).find(".refigurepathhandle").remove(), !0;
}
function reset_all_layer_opacity(t) {
  $("#" + t + "_mapholder div.layer").css({
    opacity: "1",
  });
}
function map_itemselector(r) {
  var t = document.getElementById(r + "_mapcontainer"),
    i = t.getAttribute("data-current-layer"),
    e = t.getAttribute("data-current-tool"),
    a = t.getAttribute("data-selected-shape"),
    o = document.getElementById(r + "_map");
  t.setAttribute("data-show-mobiletoolbar", "false"),
    map_clean_tempshapes(r),
    map_eraser_stop(r),
    map_itemselector_stop(r),
    map_itemeraser_stop(r),
    map_shapedrawer_stop(r),
    map_set_guide(r, map_lang_guide_itemselector),
    "" != i &&
      ("" == a ? map_isolate_layer(r, i) : map_show_all_layers(r),
      $("#" + r + "_layer_" + i).addClass("current_layer")),
    map_toolbars_place(),
    t.setAttribute("data-show-layers", "false"),
    t.setAttribute("data-show-joystick", "false"),
    t.setAttribute("data-selected-shape", ""),
    t.setAttribute("data-selected-shape-type", ""),
    $(o).draggable("disable"),
    t.setAttribute("data-current-tool", "itemselector");
  var n = document.getElementById(r + "_layer_" + i),
    s = $(n).find("iframe"),
    d = $(s).contents();
  $(d).off(
    "touchstart mousedown click",
    "." + r + "_svgpath, ." + r + "_svgpath_ghost"
  ),
    $(d).on(
      "touchstart mousedown click",
      "." + r + "_svgpath, ." + r + "_svgpath_ghost",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          var e = this.getAttribute("id");
          e = e.replace("_ghost", "");
          var a = this.getAttribute("id");
          if (
            ((a = a.replace("_ghost", "")),
            (a = Math.round(a.replace(r + "_" + i + "_", ""))),
            !checkShapePermission(
              window["map_" + r + "_metadata"].layers[i].shapes[a],
              "PUT"
            ))
          )
            return !1;
          $(d).off(
            "touchstart mousedown pointerdown",
            "." + r + "_svgpath, ." + r + "_svgpath_ghost"
          ),
            $(d)
              .find("." + r + "_svgpath")
              .each(function () {
                var t = String($(this).attr("style"));
                (t = t.replace("1.0", "0.8")), $(this).attr("style", t);
              }),
            map_set_guide(r, map_lang_guide_itemselector_selected),
            $(r + "_layer_draw").show(),
            map_draw_shape_on_canvas(r, e),
            map_toolbars_place();
        } else t.handled = !0;
      }
    ),
    "itemeraser" == e &&
      0 < a.length &&
      0 < $(d).find("#" + a).length &&
      $(d)
        .find("#" + a)
        .click();
}
function map_itemselector_stop(t) {
  var e = document.getElementById(t + "_mapcontainer");
  $(e).find(".toolbarbutton_areaeventsettings").hide();
  var a = e.getAttribute("data-current-layer");
  e.setAttribute("data-selected-shape", ""),
    e.setAttribute("data-selected-shape-type", "");
  var r = document.getElementById(t + "_layer_" + a),
    i = $(r).find("iframe"),
    o = $(i).contents();
  $(o)
    .find("." + t + "_svgpath")
    .off("click"),
    $(o)
      .find("." + t + "_svgpath")
      .each(function () {
        var t = String($(this).attr("style"));
        (t = t.replace("1.0", "0.8")), $(this).attr("style", t);
      });
  var n = document.getElementById(t + "_mapdrawer");
  (n.innerHTML = ""), $(n).hide();
}
function map_shapedrawer(h) {
  function f(t, e, a, r) {
    var i = "";
    $.each(e, function (t, e) {
      (i += 0 == t ? "M" : "L"), (i += e.x + " " + e.y);
    }),
      (i += "z");
    var o = $("#" + t + "_layer_" + a)
      .find("iframe")
      .contents()
      .find("svg");
    $(o).find("#tempshape").remove();
    var n = document.createElementNS("http://www.w3.org/2000/svg", "path");
    n.setAttribute("d", i),
      "areaevents_evacuation" == a
        ? n.setAttribute("fill", "url(#pattern_emergency)")
        : n.setAttribute("fill", r),
      n.setAttribute("opacity", "0.8"),
      n.setAttribute("id", "tempshape"),
      o.append(n);
  }
  map_clean_tempshapes(h),
    map_autoselect_layer(h, "vectors"),
    map_shapedrawer_stop(h),
    map_show_all_layers(h);
  var v = document.getElementById(h + "_mapcontainer"),
    b = v.getAttribute("data-current-layer");
  v.getAttribute("data-current-tool"), v.getAttribute("data-selected-shape");
  v.setAttribute("data-show-mobiletoolbar", "false");
  var y = document.getElementById(h + "_mapdrawer");
  $(y).show(),
    map_itemselector_stop(h),
    map_itemeraser_stop(h),
    v.setAttribute("data-show-layers", "false"),
    v.setAttribute("data-show-joystick", "false"),
    v.setAttribute("data-selected-shape", ""),
    v.setAttribute("data-selected-shape-type", ""),
    v.setAttribute("data-current-tool", "shapedrawer"),
    map_set_guide(h, map_lang_guide_shapedrawer),
    map_toolbars_place(),
    $("#" + h + "_layer_draw").show(),
    $(y).css("cursor", "crosshair");
  var t = document.getElementById(h + "_layer_" + b),
    e = $(t).find("iframe");
  $(e).contents();
  window[h + "_localpoints"] = [];
  $(y).show();
  var w = window["map_" + h + "_metadata"].layers[b].shapes.length,
    a = v.getAttribute("data-current-layer");
  if ("floor" == a) color = "#FFFFFF";
  else if ("walls" == a) color = "#000000";
  else if ("areaprefs_preferred" == a) color = "#c8ffc8";
  else if ("areaprefs_unpreferred" == a) color = "#c8c8ff";
  else if ("areaprefs_critical" == a) color = "#f5d8a2";
  else if ("areaprefs_forbidden" == a) color = "#ffc8c8";
  else if ("oneway" == a) color = "#EEEEEE";
  else {
    var r = area_events.getAreaColor(b.replace("areaevents_", ""));
    color = "#" + r.hex;
  }
  $(document).off("touchstart mousedown pointerdown", "#" + h + "_mapdrawer"),
    $(document).on(
      "touchstart mousedown pointerdown",
      "#" + h + "_mapdrawer",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          var n,
            e = parseFloat(v.getAttribute("data-zoom-scale"));
          if (null == t.originalEvent.offsetX)
            var a = document
                .getElementById(h + "_mapdrawer")
                .getBoundingClientRect(),
              r = t.originalEvent.touches[0].clientX - a.left,
              i = t.originalEvent.touches[0].clientY - a.top;
          else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
          var o = {};
          (o.x = r),
            (o.y = i),
            (o.color = color),
            (o.value = n),
            (o.x = o.x - parseFloat(v.getAttribute("data-zoom-offset-left"))),
            (o.y = o.y - parseFloat(v.getAttribute("data-zoom-offset-top"))),
            (o.x = Math.round(o.x / e)),
            (o.y = Math.round(o.y / e));
          var s = -1,
            d = Math.round(10 / e);
          d < 3 && (d = 3);
          for (var l = 0; l < window[h + "_localpoints"].length; )
            o.x > window[h + "_localpoints"][l].x - d &&
              o.x < window[h + "_localpoints"][l].x + d &&
              o.y > window[h + "_localpoints"][l].y - d &&
              o.y < window[h + "_localpoints"][l].y + d &&
              (s = l),
              l++;
          if (-1 < s && 0 == window.map_shift_holding)
            $(document).on(
              "touchmove mousemove pointermove",
              "#" + h + "_mapdrawer",
              function (t) {
                if (
                  (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                ) {
                  var e = parseFloat(v.getAttribute("data-zoom-scale"));
                  if (
                    null == t.originalEvent.offsetX &&
                    -1 < t.originalEvent.touches.length
                  )
                    var a = document
                        .getElementById(h + "_mapdrawer")
                        .getBoundingClientRect(),
                      r = t.originalEvent.touches[0].clientX - a.left,
                      i = t.originalEvent.touches[0].clientY - a.top;
                  else
                    (r = t.originalEvent.offsetX),
                      (i = t.originalEvent.offsetY);
                  $(y)
                    .children("div[data-point='" + s + "'].refigurepathhandle")
                    .css("top", i + "px"),
                    $(y)
                      .children(
                        "div[data-point='" + s + "'].refigurepathhandle"
                      )
                      .css("left", r + "px");
                  var o = {};
                  (o.x = r),
                    (o.y = i),
                    (o.color = color),
                    (o.value = n),
                    (o.x =
                      o.x -
                      parseFloat(v.getAttribute("data-zoom-offset-left"))),
                    (o.y =
                      o.y - parseFloat(v.getAttribute("data-zoom-offset-top"))),
                    (o.x = Math.round(o.x / e)),
                    (o.y = Math.round(o.y / e)),
                    (window[h + "_localpoints"][s] = o),
                    f(h, window[h + "_localpoints"], b, color);
                } else t.handled = !0;
              }
            ),
              $(document).on(
                "touchend mouseup pointerup",
                "#" + h + "_mapdrawer",
                function (t) {
                  if (!0 !== t.handled) {
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + h + "_mapdrawer"
                    ),
                      $(document).off(
                        "touchend mouseup pointerup",
                        "#" + h + "_mapdrawer"
                      );
                    var e = parseFloat(v.getAttribute("data-zoom-scale"));
                    if (
                      null == t.originalEvent.offsetX &&
                      -1 < t.originalEvent.touches.length
                    )
                      var a = document
                          .getElementById(h + "_mapdrawer")
                          .getBoundingClientRect(),
                        r = t.originalEvent.touches[0].clientX - a.left,
                        i = t.originalEvent.touches[0].clientY - a.top;
                    else
                      (r = t.originalEvent.offsetX),
                        (i = t.originalEvent.offsetY);
                    var o = {};
                    (o.x = r),
                      (o.y = i),
                      (o.color = color),
                      (o.value = n),
                      (o.x =
                        o.x -
                        parseFloat(v.getAttribute("data-zoom-offset-left"))),
                      (o.y =
                        o.y -
                        parseFloat(v.getAttribute("data-zoom-offset-top"))),
                      (o.x = Math.round(o.x / e)),
                      (o.y = Math.round(o.y / e)),
                      (window[h + "_localpoints"][s] = o),
                      f(h, window[h + "_localpoints"], b, color);
                  } else t.handled = !0;
                }
              );
          else {
            if (
              1 == window.map_shift_holding &&
              0 < window[h + "_localpoints"].length
            ) {
              var p = calculate_angle_between_points(
                  o.x,
                  o.y,
                  window[h + "_localpoints"][
                    window[h + "_localpoints"].length - 1
                  ].x,
                  window[h + "_localpoints"][
                    window[h + "_localpoints"].length - 1
                  ].y
                ),
                m = "";
              m =
                -45 <= p && p <= 45
                  ? "y"
                  : 45 <= p && p <= 135
                  ? "x"
                  : 135 <= p || p <= -135
                  ? "y"
                  : "x";
              var u =
                  window[h + "_localpoints"][
                    window[h + "_localpoints"].length - 1
                  ].x,
                c =
                  window[h + "_localpoints"][
                    window[h + "_localpoints"].length - 1
                  ].y;
              (u *= e),
                (c *= e),
                (u += parseFloat(v.getAttribute("data-zoom-offset-left"))),
                (c += parseFloat(v.getAttribute("data-zoom-offset-top"))),
                "x" == m
                  ? ((o.x = u),
                    (r = o.x),
                    (o.x =
                      o.x -
                      parseFloat(v.getAttribute("data-zoom-offset-left"))),
                    (o.x = Math.round(o.x / e)))
                  : ((o.y = c),
                    (i = o.y),
                    (o.y =
                      o.y - parseFloat(v.getAttribute("data-zoom-offset-top"))),
                    (o.y = Math.round(o.y / e)));
            }
            var _ = w,
              g = document.createElement("div");
            g.setAttribute("class", "refigurepathhandle"),
              g.setAttribute("data-layer", b),
              g.setAttribute("data-path", _),
              g.setAttribute("data-point", window[h + "_localpoints"].length),
              g.setAttribute("data-element-id", h),
              y.appendChild(g),
              $(g).css("pointer-events", "none");
            if (
              (2 < window[h + "_localpoints"].length &&
              o.x > window[h + "_localpoints"][0].x - 10 &&
              o.x < window[h + "_localpoints"][0].x + 10 &&
              o.y > window[h + "_localpoints"][0].y - 10 &&
              o.y < window[h + "_localpoints"][0].y + 10
                ? ((o.x = window[h + "_localpoints"][0].x),
                  (o.y = window[h + "_localpoints"][0].y),
                  (r =
                    (o.x +
                      parseFloat(v.getAttribute("data-zoom-offset-left"))) *
                    e),
                  (i =
                    (o.x + parseFloat(v.getAttribute("data-zoom-offset-top"))) *
                    e),
                  !0)
                : window[h + "_localpoints"].push(o),
              $(g).css("top", i + "px"),
              $(g).css("left", r + "px"),
              2 < window[h + "_localpoints"].length)
            ) {
              v.getAttribute("data-resscale"),
                v.getAttribute("data-origin-x"),
                v.getAttribute("data-origin-y"),
                v.getAttribute("data-map-height");
              f(h, window[h + "_localpoints"], b, color);
            }
          }
        } else t.handled = !0;
      }
    );
}
function map_shapedrawer_stop(t) {
  var e = document.getElementById(t + "_mapcontainer"),
    a = e.getAttribute("data-current-layer"),
    r = document.getElementById(t + "_mapdrawer");
  $(r).hide();
  var i = $("#" + t + "_layer_" + a)
    .find("iframe")
    .contents()
    .find("svg");
  e.setAttribute("data-selected-shape", ""),
    e.setAttribute("data-selected-shape-type", ""),
    $(document).off("touchstart mousedown pointerdown", "#" + t + "_mapdrawer"),
    $(r).off("click");
  var o = {},
    n = !1;
  if (
    null != window[t + "_localpoints"] &&
    1 < window[t + "_localpoints"].length
  ) {
    n = !0;
    i = $("#" + t + "_layer_" + a)
      .find("iframe")
      .contents()
      .find("svg");
    var s = MIR.runtime.maps[t].mir.layer2choice(a),
      d = $("#" + t + "_toolbutton_mychoice_selector")
        .find('option[value="' + s + '"]')
        .html(),
      l = window["map_" + t + "_metadata"].layers[a].shapes.length + 1;
    (o.name = d + " (" + l + ")"),
      (o.type = "shape"),
      "oneway" == a
        ? ((o.direction = e.getAttribute("data-oneway-direction")),
          (o.color =
            "url(#pattern_arrow_" +
            e.getAttribute("data-oneway-direction") +
            ")"))
        : (o.color =
            "areaevents_evacuation" == a
              ? "url(#pattern_emergency)"
              : window[t + "_localpoints"][
                  window[t + "_localpoints"].length - 1
                ].color),
      (o.value =
        window[t + "_localpoints"][
          window[t + "_localpoints"].length - 1
        ].value),
      (o.polygon = []);
    for (var p = 0; p < window[t + "_localpoints"].length; ) {
      var m = {};
      (m.x = window[t + "_localpoints"][p].x),
        (m.y = window[t + "_localpoints"][p].y),
        o.polygon.push(m),
        p++;
    }
    for (var u = 0; u < o.polygon.length; )
      0 == u ? "M" : "L", o.polygon[u].x + " " + o.polygon[u].y, u++;
    ("z");
    var c = window["map_" + t + "_metadata"].layers[a].shapes.length;
    if ("#FFFFFF" == o.color || "#000000" == o.color) var _ = 1;
    else _ = 0.8;
    e.setAttribute("shape-index", c),
      $(i)
        .find("#tempshape")
        .attr("class", t + "_svgpath"),
      $(i)
        .find("#tempshape")
        .attr(
          "style",
          "fill: " + o.color + "; stroke: none; opacity: " + String(_) + ";"
        ),
      $(i)
        .find("#tempshape")
        .attr("id", t + "_" + a + "_" + c),
      $(i).find("#tempshape").removeAttr("fill"),
      $(i).find("#tempshape").attr("opacity", _),
      window["map_" + t + "_metadata"].layers[a].shapes.push(o);
    var g = {
      type: "create_shape",
    };
    (g.layer = a),
      (g.path_id = t + "_" + a + "_" + c),
      (g.removeid = c),
      map_add_to_history(t, g),
      map_set_save_state(t, "savable", !1);
  }
  if (
    ((window[t + "_localpoints"] = []),
    map_clean_tempshapes(t),
    map_navigator(t),
    map_toolbars_place(),
    n)
  ) {
    var h = [t, a, c].join("_");
    map_draw_shape_on_canvas(t, h),
      (window["map_" + t + "_metadata"].layers[a].shapes[c].allowed_methods = [
        "GET",
        "PUT",
        "UPDATE",
        "DELETE",
      ]);
    -1 ==
    [
      "oneway",
      "areaprefs_preferred",
      "areaprefs_unpreferred",
      "areaprefs_forbidden",
      "areaprefs_critical",
      "floor",
      "walls",
    ].indexOf(a)
      ? (MIR.runtime.maps[t]
          .find(".toolbarbutton_areaeventsettings")
          .show()
          .trigger("click"),
        $("#" + t + "_mapcontainer").attr("navigator-on-close", 1))
      : map_navigator(t);
  }
  return !0;
}
function map_linedrawer_start(y) {
  map_clean_tempshapes(y),
    map_autoselect_layer(y, "vectors"),
    map_linedrawer_stop(y);
  var w = document.getElementById(y + "_mapcontainer"),
    A = w.getAttribute("data-current-layer");
  w.getAttribute("data-current-tool"), w.getAttribute("data-selected-shape");
  w.setAttribute("data-show-mobiletoolbar", "false");
  var E = document.getElementById(y + "_mapdrawer");
  $(E).show(),
    map_itemselector_stop(y),
    map_itemeraser_stop(y),
    w.setAttribute("data-show-layers", "false"),
    w.setAttribute("data-show-joystick", "false"),
    w.setAttribute("data-selected-shape", ""),
    w.setAttribute("data-selected-shape-type", ""),
    w.setAttribute("data-current-tool", "linedrawer"),
    map_set_guide(y, map_lang_guide_linedrawer),
    map_toolbars_place(),
    $("#" + y + "_layer_draw").show(),
    $(E).css("cursor", "crosshair");
  var t = document.getElementById(y + "_layer_" + A),
    e = $(t).find("iframe");
  $(e).contents();
  window[y + "_localpoints"] = [];
  $(E).show();
  var x = window["map_" + y + "_metadata"].layers[A].shapes.length;
  $(document).off("touchstart mousedown pointerdown", "#" + y + "_mapdrawer"),
    $(document).on(
      "touchstart mousedown pointerdown",
      "#" + y + "_mapdrawer",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          t.handled = !0;
          var p = "#CCCCCC";
          "floor" == w.getAttribute("data-current-layer")
            ? (p = "#FFFFFF")
            : "walls" == w.getAttribute("data-current-layer")
            ? (p = "#000000")
            : "areaprefs_preferred" == w.getAttribute("data-current-layer")
            ? (p = "#c8ffc8")
            : "areaprefs_unpreferred" == w.getAttribute("data-current-layer")
            ? (p = "#c8c8ff")
            : "areaprefs_critical" == w.getAttribute("data-current-layer")
            ? (p = "#f5d8a2")
            : "areaprefs_forbidden" == w.getAttribute("data-current-layer") &&
              (p = "#ffc8c8");
          var e = parseFloat(w.getAttribute("data-zoom-scale"));
          if (null == t.originalEvent.offsetX)
            var a = document
                .getElementById(y + "_mapdrawer")
                .getBoundingClientRect(),
              r = t.originalEvent.touches[0].clientX - a.left,
              i = t.originalEvent.touches[0].clientY - a.top;
          else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
          ((s = {}).x = r),
            (s.y = i),
            (s.color = p),
            (s.value = ""),
            (s.x = s.x - parseFloat(w.getAttribute("data-zoom-offset-left"))),
            (s.y = s.y - parseFloat(w.getAttribute("data-zoom-offset-top"))),
            (s.x = Math.round(s.x / e)),
            (s.y = Math.round(s.y / e));
          var m = -1,
            o = Math.round(10 / e);
          o < 3 && (o = 3),
            "true" == document.body.getAttribute("data-touch-support") &&
              (o = Math.round(30 / e));
          for (var n = 0; n < window[y + "_localpoints"].length; )
            s.x > window[y + "_localpoints"][n].x - o &&
              s.x < window[y + "_localpoints"][n].x + o &&
              s.y > window[y + "_localpoints"][n].y - o &&
              s.y < window[y + "_localpoints"][n].y + o &&
              (m = n),
              n++;
          if (-1 < m && 0 == window.map_shift_holding) {
            window["map_" + y + "_hitpoint"] = !0;
            var s,
              d = parseFloat(w.getAttribute("data-zoom-scale"));
            if (null == t.originalEvent.offsetX)
              (a = document
                .getElementById(y + "_mapdrawer")
                .getBoundingClientRect()),
                (r = t.originalEvent.touches[0].clientX - a.left),
                (i = t.originalEvent.touches[0].clientY - a.top);
            else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
            $(E)
              .children("div[data-point='" + m + "'].refigurepathhandle")
              .css("top", i + "px"),
              $(E)
                .children("div[data-point='" + m + "'].refigurepathhandle")
                .css("left", r + "px"),
              ((s = {}).x = r),
              (s.y = i),
              (s.color = p),
              (s.value = ""),
              (s.x = s.x - parseFloat(w.getAttribute("data-zoom-offset-left"))),
              (s.y = s.y - parseFloat(w.getAttribute("data-zoom-offset-top"))),
              (s.x = Math.round(s.x / d)),
              (s.y = Math.round(s.y / d)),
              (window[y + "_localpoints"][m] = s);
            var l = "";
            for (n = 0; n < window[y + "_localpoints"].length; )
              (l += 0 == n ? "M" : "L"),
                (l +=
                  window[y + "_localpoints"][n].x +
                  " " +
                  window[y + "_localpoints"][n].y),
                n++;
            var u = $("#" + y + "_layer_" + A)
              .find("iframe")
              .contents()
              .find("svg");
            $(u).find("#tempshape").remove(),
              (b = document.createElementNS(
                "http://www.w3.org/2000/svg",
                "path"
              )).setAttribute("d", l),
              b.setAttribute("fill", "none"),
              b.setAttribute("stroke", p),
              b.setAttribute(
                "stroke-width",
                w.getAttribute("data-current-linesize") + "px"
              ),
              b.setAttribute("stroke-linecap", "butt"),
              b.setAttribute("stroke-linejoin", "bevel"),
              b.setAttribute("opacity", "0.8"),
              b.setAttribute("id", "tempshape"),
              u.append(b),
              $(document).on(
                "touchmove mousemove pointermove",
                "#" + y + "_mapdrawer",
                function (t) {
                  if (
                    (t.stopPropagation(),
                    t.preventDefault(),
                    !0 !== t.handled && 0 == window.map_shift_holding)
                  ) {
                    var e = parseFloat(w.getAttribute("data-zoom-scale"));
                    if (null == t.originalEvent.offsetX)
                      var a = document
                          .getElementById(y + "_mapdrawer")
                          .getBoundingClientRect(),
                        r = t.originalEvent.touches[0].clientX - a.left,
                        i = t.originalEvent.touches[0].clientY - a.top;
                    else
                      (r = t.originalEvent.offsetX),
                        (i = t.originalEvent.offsetY);
                    $(E)
                      .children(
                        "div[data-point='" + m + "'].refigurepathhandle"
                      )
                      .css("top", i + "px"),
                      $(E)
                        .children(
                          "div[data-point='" + m + "'].refigurepathhandle"
                        )
                        .css("left", r + "px");
                    var o = {};
                    (o.x = r),
                      (o.y = i),
                      (o.color = p),
                      (o.value = ""),
                      (o.x =
                        o.x -
                        parseFloat(w.getAttribute("data-zoom-offset-left"))),
                      (o.y =
                        o.y -
                        parseFloat(w.getAttribute("data-zoom-offset-top"))),
                      (o.x = Math.round(o.x / e)),
                      (o.y = Math.round(o.y / e)),
                      (window[y + "_localpoints"][m] = o);
                    for (
                      var n = "", s = 0;
                      s < window[y + "_localpoints"].length;

                    )
                      (n += 0 == s ? "M" : "L"),
                        (n +=
                          window[y + "_localpoints"][s].x +
                          " " +
                          window[y + "_localpoints"][s].y),
                        s++;
                    var d = $("#" + y + "_layer_" + A)
                      .find("iframe")
                      .contents()
                      .find("svg");
                    $(d).find("#tempshape").remove();
                    var l = document.createElementNS(
                      "http://www.w3.org/2000/svg",
                      "path"
                    );
                    l.setAttribute("d", n),
                      l.setAttribute("fill", "none"),
                      l.setAttribute("stroke", p),
                      l.setAttribute(
                        "stroke-width",
                        w.getAttribute("data-current-linesize") + "px"
                      ),
                      l.setAttribute("stroke-linecap", "butt"),
                      l.setAttribute("stroke-linejoin", "bevel"),
                      l.setAttribute("opacity", "0.8"),
                      l.setAttribute("id", "tempshape"),
                      d.append(l);
                  } else t.handled = !0;
                  return !1;
                }
              ),
              $(document).on(
                "touchend mouseup pointerup",
                "#" + y + "_mapdrawer",
                function (t) {
                  if (
                    (t.stopPropagation(),
                    t.preventDefault(),
                    !0 !== t.handled && 0 == window.map_shift_holding)
                  ) {
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + y + "_mapdrawer"
                    ),
                      $(document).off(
                        "touchend mouseup pointerup",
                        "#" + y + "_mapdrawer"
                      );
                    var e = parseFloat(w.getAttribute("data-zoom-scale"));
                    if (null == t.originalEvent.offsetX)
                      var a = document
                          .getElementById(y + "_mapdrawer")
                          .getBoundingClientRect(),
                        r = t.originalEvent.touches[0].clientX - a.left,
                        i = t.originalEvent.touches[0].clientY - a.top;
                    else
                      (r = t.originalEvent.offsetX),
                        (i = t.originalEvent.offsetY);
                    var o = {};
                    (o.x = r),
                      (o.y = i),
                      (o.color = p),
                      (o.value = ""),
                      (o.x =
                        o.x -
                        parseFloat(w.getAttribute("data-zoom-offset-left"))),
                      (o.y =
                        o.y -
                        parseFloat(w.getAttribute("data-zoom-offset-top"))),
                      (o.x = Math.round(o.x / e)),
                      (o.y = Math.round(o.y / e)),
                      (window[y + "_localpoints"][m] = o);
                    for (
                      var n = "", s = 0;
                      s < window[y + "_localpoints"].length;

                    )
                      (n += 0 == s ? "M" : "L"),
                        (n +=
                          window[y + "_localpoints"][s].x +
                          " " +
                          window[y + "_localpoints"][s].y),
                        s++;
                    var d = $("#" + y + "_layer_" + A)
                      .find("iframe")
                      .contents()
                      .find("svg");
                    $(d).find("#tempshape").remove();
                    var l = document.createElementNS(
                      "http://www.w3.org/2000/svg",
                      "path"
                    );
                    l.setAttribute("d", n),
                      l.setAttribute("fill", "none"),
                      l.setAttribute("stroke", p),
                      l.setAttribute(
                        "stroke-width",
                        w.getAttribute("data-current-linesize") + "px"
                      ),
                      l.setAttribute("stroke-linecap", "butt"),
                      l.setAttribute("stroke-linejoin", "bevel"),
                      l.setAttribute("opacity", "0.8"),
                      l.setAttribute("id", "tempshape"),
                      d.append(l),
                      (window["map_" + y + "_hitpoint"] = !1);
                  } else t.handled = !0;
                }
              );
          } else {
            if (
              1 == window.map_shift_holding &&
              0 < window[y + "_localpoints"].length
            ) {
              var c = calculate_angle_between_points(
                  s.x,
                  s.y,
                  window[y + "_localpoints"][
                    window[y + "_localpoints"].length - 1
                  ].x,
                  window[y + "_localpoints"][
                    window[y + "_localpoints"].length - 1
                  ].y
                ),
                _ = "";
              _ =
                -45 <= c && c <= 45
                  ? "y"
                  : 45 <= c && c <= 135
                  ? "x"
                  : 135 <= c || c <= -135
                  ? "y"
                  : "x";
              var g =
                  window[y + "_localpoints"][
                    window[y + "_localpoints"].length - 1
                  ].x,
                h =
                  window[y + "_localpoints"][
                    window[y + "_localpoints"].length - 1
                  ].y;
              (g *= e),
                (h *= e),
                (g += parseFloat(w.getAttribute("data-zoom-offset-left"))),
                (h += parseFloat(w.getAttribute("data-zoom-offset-top"))),
                "x" == _
                  ? ((s.x = g),
                    (r = s.x),
                    (s.x =
                      s.x -
                      parseFloat(w.getAttribute("data-zoom-offset-left"))),
                    (s.x = Math.round(s.x / e)))
                  : ((s.y = h),
                    (i = s.y),
                    (s.y =
                      s.y - parseFloat(w.getAttribute("data-zoom-offset-top"))),
                    (s.y = Math.round(s.y / e)));
            }
            var f = x,
              v = document.createElement("div");
            if (
              (v.setAttribute("class", "refigurepathhandle"),
              v.setAttribute("data-layer", A),
              v.setAttribute("data-path", f),
              v.setAttribute("data-point", window[y + "_localpoints"].length),
              v.setAttribute("data-element-id", y),
              E.appendChild(v),
              $(v).css("pointer-events", "none"),
              window[y + "_localpoints"].push(s),
              $(v).css("top", i + "px"),
              $(v).css("left", r + "px"),
              1 < window[y + "_localpoints"].length)
            ) {
              for (
                w.getAttribute("data-resscale"),
                  w.getAttribute("data-origin-x"),
                  w.getAttribute("data-origin-y"),
                  w.getAttribute("data-map-height"),
                  l = "",
                  n = 0;
                n < window[y + "_localpoints"].length;

              )
                (l += 0 == n ? "M" : "L"),
                  (l +=
                    window[y + "_localpoints"][n].x +
                    " " +
                    window[y + "_localpoints"][n].y),
                  n++;
              var b;
              u = $("#" + y + "_layer_" + A)
                .find("iframe")
                .contents()
                .find("svg");
              $(u).find("#tempshape").remove(),
                (b = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                )).setAttribute("d", l),
                b.setAttribute("fill", "none"),
                b.setAttribute("stroke", p),
                b.setAttribute(
                  "stroke-width",
                  w.getAttribute("data-current-linesize") + "px"
                ),
                b.setAttribute("stroke-linecap", "butt"),
                b.setAttribute("stroke-linejoin", "bevel"),
                b.setAttribute("opacity", "0.8"),
                b.setAttribute("id", "tempshape"),
                u.append(b);
            }
          }
        } else t.handled = !0;
      }
    );
}
function map_linedrawer_stop(t) {
  var e = document.getElementById(t + "_mapcontainer"),
    a = e.getAttribute("data-current-layer"),
    r = document.getElementById(t + "_mapdrawer");
  $(r).hide();
  var i = $("#" + t + "_layer_" + a)
    .find("iframe")
    .contents()
    .find("svg");
  if (
    ($(i).find("#tempshape").remove(),
    e.setAttribute("data-selected-shape", ""),
    e.setAttribute("data-selected-shape-type", ""),
    $(r).off("click"),
    null != window[t + "_localpoints"] && 1 < window[t + "_localpoints"].length)
  ) {
    !0;
    i = $("#" + t + "_layer_" + a)
      .find("iframe")
      .contents()
      .find("svg");
    var o = parseInt(e.getAttribute("data-current-linesize")),
      n = {},
      s = MIR.runtime.maps[t].mir.layer2choice(a),
      d = $("#" + t + "_toolbutton_mychoice_selector")
        .find('option[value="' + s + '"]')
        .html(),
      l = window["map_" + t + "_metadata"].layers[a].shapes.length + 1;
    (n.name = d + " (" + l + ")"),
      (n.type = "stroke"),
      (n.brushsize = o),
      (n.color =
        "oneway" == a ? "#EEEEEE" : window[t + "_localpoints"][0].color),
      (n.polygon = []);
    for (var p = 0; p < window[t + "_localpoints"].length; ) {
      var m = {};
      (m.x = window[t + "_localpoints"][p].x),
        (m.y = window[t + "_localpoints"][p].y),
        n.polygon.push(m),
        p++;
    }
    for (var u = "", c = 0; c < n.polygon.length; )
      (u += 0 == c ? "M" : "L"),
        (u += n.polygon[c].x + " " + n.polygon[c].y),
        c++;
    var _,
      g = window["map_" + t + "_metadata"].layers[a].shapes.length;
    if ("#FFFFFF" == n.color || "#000000" == n.color) var h = 1;
    else h = 0.8;
    (_ = document.createElementNS(
      "http://www.w3.org/2000/svg",
      "path"
    )).setAttribute("d", u),
      _.setAttribute(
        "style",
        "fill: none; stroke: #FF0000; stroke-width: 30px; stroke-linecap: butt; stroke-linejoin: bevel; opacity: 0;"
      ),
      _.setAttribute("id", t + "_" + a + "_" + g + "_ghost"),
      _.setAttribute("class", t + "_svgpath_ghost"),
      i.append(_),
      (_ = document.createElementNS(
        "http://www.w3.org/2000/svg",
        "path"
      )).setAttribute("d", u),
      _.setAttribute(
        "style",
        "fill: none; stroke: " +
          n.color +
          "; stroke-width: " +
          n.brushsize +
          "px; stroke-linecap: butt; stroke-linejoin: bevel; opacity: " +
          String(h) +
          ";"
      ),
      _.setAttribute("id", t + "_" + a + "_" + g),
      _.setAttribute("class", t + "_svgpath"),
      "oneway" == a &&
        (_.setAttribute("marker-mid", "url(#mid_arrow)"),
        _.setAttribute("marker-start", "url(#start_arrow)"),
        _.setAttribute("marker-end", "url(#end_arrow)")),
      i.append(_),
      window["map_" + t + "_metadata"].layers[a].shapes.push(n);
    var f = {
      type: "create_shape",
    };
    (f.layer = a),
      (f.path_id = t + "_" + a + "_" + g),
      (f.removeid = g),
      map_add_to_history(t, f),
      map_set_save_state(t, "savable", !1);
  }
  (window[t + "_localpoints"] = []), map_navigator(t), map_toolbars_place();
}
function map_pathdrawer_start(m, u) {
  map_clean_tempshapes(m),
    map_autoselect_layer(m, "vectors"),
    map_linedrawer_stop(m);
  var c = document.getElementById(m + "_mapcontainer");
  c.getAttribute("data-current-layer"),
    c.getAttribute("data-current-tool"),
    c.getAttribute("data-selected-shape");
  c.setAttribute("data-show-mobiletoolbar", "false");
  var t = document.getElementById(m + "_mapdrawer");
  $(t).show(),
    map_itemselector_stop(m),
    map_itemeraser_stop(m),
    c.setAttribute("data-show-layers", "false"),
    c.setAttribute("data-show-joystick", "false"),
    c.setAttribute("data-selected-shape", ""),
    c.setAttribute("data-selected-shape-type", ""),
    c.setAttribute("data-current-tool", "pathdrawer"),
    map_set_guide(m, map_lang_guide_linedrawer),
    $("#" + m + "_layer_draw").show(),
    $(t).css("cursor", "crosshair"),
    (window[m + "_localpoints"] = []);
  $(t).show();
  parseFloat(c.getAttribute("data-zoom-scale"));
  var e = $(c).find(
      "div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype='positions'] > div.position[data-guid='" +
        u +
        "']"
    ),
    _ = $(e).attr("data-guid"),
    g = $("#" + m + "_layer_paths")
      .find("iframe")
      .contents()
      .find("svg"),
    a = parseFloat($(e).css("left").replace("px", "")),
    r = parseFloat($(e).css("top").replace("px", "")),
    i = {};
  return (
    (i.x = a),
    (i.y = r),
    (i.orientatation = 0),
    window[m + "_localpoints"].push(i),
    $(document).off("touchmove mousemove pointermove", "#" + m + "_mapdrawer"),
    $(document).on(
      "touchmove mousemove pointermove",
      "#" + m + "_mapdrawer",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          var e = parseFloat(c.getAttribute("data-zoom-scale"));
          if (null == t.originalEvent.offsetX)
            var a = document
                .getElementById(m + "_mapdrawer")
                .getBoundingClientRect(),
              r = t.originalEvent.touches[0].clientX - a.left,
              i = t.originalEvent.touches[0].clientY - a.top;
          else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
          (r -= parseFloat(c.getAttribute("data-zoom-offset-left"))),
            (i -= parseFloat(c.getAttribute("data-zoom-offset-top"))),
            (r = Math.round(r / e)),
            (i = Math.round(i / e));
          for (var o = "", n = 0; n < window[m + "_localpoints"].length; )
            (o += 0 == n ? "M" : "L"),
              (o +=
                window[m + "_localpoints"][n].x +
                " " +
                window[m + "_localpoints"][n].y),
              n++;
          (o += "L" + r + " " + i), $(g).find("#tempshape").remove();
          var s = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "path"
          );
          s.setAttribute("d", o),
            s.setAttribute("fill", "none"),
            s.setAttribute("stroke", "#BBBB00"),
            s.setAttribute("stroke-width", "2px"),
            s.setAttribute("stroke-linecap", "butt"),
            s.setAttribute("stroke-linejoin", "bevel"),
            s.setAttribute("stroke-dasharray", "2,2"),
            s.setAttribute("opacity", "0.8"),
            s.setAttribute("id", "tempshape"),
            g.append(s);
        } else t.handled = !0;
      }
    ),
    $(document).off("touchstart mousedown pointerdown", "#" + m + "_mapdrawer"),
    $(document).on(
      "touchstart mousedown pointerdown",
      "#" + m + "_mapdrawer",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          var e = parseFloat(c.getAttribute("data-zoom-scale"));
          if (null == t.originalEvent.offsetX)
            var a = document
                .getElementById(m + "_mapdrawer")
                .getBoundingClientRect(),
              r = t.originalEvent.touches[0].clientX - a.left,
              i = t.originalEvent.touches[0].clientY - a.top;
          else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
          (r -= parseFloat(c.getAttribute("data-zoom-offset-left"))),
            (i -= parseFloat(c.getAttribute("data-zoom-offset-top"))),
            (r = Math.round(r / e)),
            (i = Math.round(i / e));
          var o = "";
          if (
            ($(c)
              .find(
                "div.mapwrapper > div.mapholder > div.map > div.layer[data-layertype='positions'] > div.position"
              )
              .each(function () {
                var t = parseFloat($(this).css("left").replace("px", "")),
                  e = parseFloat($(this).css("top").replace("px", ""));
                t - 10 < r &&
                  r < t + 10 &&
                  e - 10 < i &&
                  i < e + 10 &&
                  (o = $(this).attr("data-guid"));
              }),
            0 < o.length)
          ) {
            $(document).off(
              "touchstart mousedown pointerdown",
              "#" + m + "_mapdrawer"
            ),
              $(document).off(
                "touchmove mousemove pointermove",
                "#" + m + "_mapdrawer"
              ),
              $(g).find("#tempshape").remove();
            for (var n = [], s = 0; s < window[m + "_localpoints"].length; ) {
              ((p = {}).x = window[m + "_localpoints"].x),
                (p.y = window[m + "_localpoints"].y),
                n.push(p),
                s++;
            }
            var d = new ROSLIB.Service({
                ros: ros,
                name: "/move_base_node/make_plan",
                serviceType: "mirMoveBase/CalculatePath",
              }),
              l = new ROSLIB.ServiceRequest({
                start: _,
                waypoints: n,
                goal: o,
              });
            d.callService(l, function (t) {}), map_pathdrawer_stop(m, u, o, !0);
          } else {
            var p;
            ((p = {}).x = r),
              (p.y = i),
              (p.orientatation = 0),
              window[m + "_localpoints"].push(p);
          }
        } else t.handled = !0;
      }
    ),
    !0
  );
}
function map_pathdrawer_stop(t, e, a, r) {
  document
    .getElementById(t + "_mapcontainer")
    .getAttribute("data-current-layer");
  var i = document.getElementById(t + "_mapdrawer");
  $(i).hide(), (window[t + "_localpoints"] = []);
  return map_navigator(t), !0;
}
function map_toggle_mobiletoolbar(t) {
  var e = document.getElementById(t + "_mapcontainer");
  "true" == e.getAttribute("data-show-mobiletoolbar")
    ? e.setAttribute("data-show-mobiletoolbar", "false")
    : e.setAttribute("data-show-mobiletoolbar", "true");
}
function map_toggle_center_robot(t, e) {
  var a = MIR.runtime.maps[t];
  if ("true" == a.attr("data-active-map") || "true" == a.attr("data-mapping")) {
    void 0 === e && (e = !("true" === a.attr("data-center-robot"))),
      a.attr("data-center-robot", Boolean(e).toString()),
      e &&
        map_center_robot(t, {
          interval: 100,
          callback: function () {
            a.mir.get_zoom() < 0.5 && map_zoom(t, 1);
          },
        });
    var r = a.mir.get_storage_id();
    MIR.storage.set(r, "data-center-robot", e);
  }
}
function map_center_robot(t, e) {
  var a = MIR.runtime.maps[t],
    r = $.extend(
      {
        interval: 50,
        callback: !1,
      },
      e
    );
  if ("fleet" == systemtype) {
    var i = a.attr("data-robotlock"),
      o = a.find('.robot[robot-id="' + i + '"]');
    void 0 !== i &&
      a.mir.center_coords(
        {
          x: parseFloat(o.css("left")),
          y: parseFloat(o.css("top")),
        },
        MIR.constants.MAP.world.MAP,
        r
      );
  } else
    a.mir.center_coords(
      {
        x: robot_cur_x,
        y: robot_cur_y,
      },
      MIR.constants.MAP.world.REAL,
      r
    );
}
function map_center_map(t, e, a) {
  var r = MIR.runtime.maps[t];
  a ||
    (map_clean_tempshapes(t),
    map_itemselector_stop(t),
    map_itemeraser_stop(t),
    map_navigator(t),
    map_toggle_center_robot(t, !1)),
    "false" == r.attr("data-mapping") &&
      r.attr("data-show-mobiletoolbar", "false");
  var i = r.mir.get_map_size(),
    o = r.mir.get_viewport_size(),
    n = (o.width - 20) / i.width,
    s = (o.height - 20) / i.height,
    d = n < s ? n : s,
    l = 200;
  !1 === e && (l = 0);
  var p = r.mir.get_storage_id();
  return (
    MIR.storage.set(p, "data-center-robot", !1),
    r.mir.center_coords(
      {
        x: i.width / 2,
        y: i.height / 2,
      },
      MIR.constants.MAP.world.MAP,
      {
        callback: function () {
          map_zoom(t, d);
        },
        interval: l,
      }
    ),
    !0
  );
}
function map_zoom(e, t, a) {
  var r = $.extend(
      {
        interval: 100,
        callback: !1,
        zoom_to_coords: !1,
      },
      a
    ),
    i = document.getElementById(e + "_mapcontainer"),
    o = parseFloat(i.getAttribute("data-zoom-scale")),
    n = o;
  "in" == t ? (n = 2 * o) : "out" == t ? (n = o / 2) : void 0 !== t && (n = t),
    n < 0.1 ? (n = 0.1) : 10 < n && (n = 10);
  var s = document.getElementById(e + "_mapwrapper");
  i.setAttribute("data-show-mobiletoolbar", "false");
  var d = document.getElementById(e + "_map"),
    l = document.getElementById(e + "_layer_robotmap"),
    p = $(l).width() / 2,
    m = $(l).height() / 2,
    u = parseFloat(i.getAttribute("data-zoom-offset-left")),
    c = parseFloat(i.getAttribute("data-zoom-offset-top"));
  if (r.zoom_to_coords)
    var _ = r.zoom_to_coords.x,
      g = r.zoom_to_coords.y;
  else (_ = $(s).width() / 2), (g = $(s).height() / 2);
  var h = (g - c) / m,
    f = (_ - u) / p;
  i.setAttribute("data-zoom-scale", n),
    (u -= ((p / o) * n - p) * f),
    (c -= ((m / o) * n - m) * h),
    i.setAttribute("data-zoom-offset-top", c),
    i.setAttribute("data-zoom-offset-left", u),
    (d.transformScale = o);
  var v = $(d);
  return (
    (d.transformScale = o),
    v.finish().animate(
      {
        transformScale: n,
        top: c + "px",
        left: u + "px",
      },
      {
        step: function (t, e) {
          "transformScale" === e.prop && v.css("transform", "scale(" + t + ")");
        },
        easing: "linear",
        duration: r.interval,
        complete: function () {
          map_update_handles(e), determine_marker_images(e);
          var t = MIR.runtime.maps[e].mir.get_storage_id();
          MIR.storage.set(t, "data-zoom-scale", n),
            MIR.storage.set(t, "data-zoom-offset-left", u),
            MIR.storage.set(t, "data-zoom-offset-top", c),
            "function" == typeof r.callback && r.callback();
        },
      }
    ),
    !0
  );
}
function map_update_handles(r) {
  var i = document.getElementById(r + "_mapcontainer"),
    o = parseFloat(i.getAttribute("data-zoom-scale")),
    t = i.getAttribute("data-selected-shape"),
    n = -1;
  if (-1 < t.indexOf("_")) {
    var e = t.split("_");
    n = e[e.length - 1];
  }
  var s = i.getAttribute("data-current-layer"),
    d = 0;
  return (
    $(".refigurepathhandle").each(function () {
      if (window[r + "_localpoints"][d]) {
        var t = window[r + "_localpoints"][d],
          e = parseFloat(t.y),
          a = parseFloat(t.x);
        (e *= o),
          (a *= o),
          (e += parseFloat(i.getAttribute("data-zoom-offset-top"))),
          (a += parseFloat(i.getAttribute("data-zoom-offset-left"))),
          $(this).css("top", e + "px"),
          $(this).css("left", a + "px");
      } else if (
        window["map_" + r + "_metadata"].layers[s].shapes[n].polygon[d]
      ) {
        if (
          "DELETED" ==
          (t =
            window["map_" + r + "_metadata"].layers[s].shapes[n].polygon[
              this.getAttribute("data-point")
            ])
        );
        else {
          (e = parseFloat(t.y)), (a = parseFloat(t.x));
          (e *= o),
            (a *= o),
            (e += parseFloat(i.getAttribute("data-zoom-offset-top"))),
            (a += parseFloat(i.getAttribute("data-zoom-offset-left"))),
            $(this).css("top", e + "px"),
            $(this).css("left", a + "px");
        }
      }
      d++;
    }),
    !0
  );
}
function map_navigator(l, t) {
  !0 !== t &&
    (map_clean_tempshapes(l), map_itemselector_stop(l), map_itemeraser_stop(l)),
    map_eraser_stop(l),
    map_deleteselection_stop(l);
  var a = document.getElementById(l + "_mapcontainer"),
    e = document.getElementById(l + "_mapholder"),
    r = document.getElementById(l + "_map");
  a.getAttribute("data-map-guid");
  a.setAttribute("data-positioning-robot", "false");
  var i = document.getElementById(l + "_layer_robot");
  $(i).children("div.ghost").remove(),
    map_set_guide(l, map_lang_guide_navigator),
    a.setAttribute("data-show-mobiletoolbar", "false"),
    a.setAttribute("data-is-drawing", "false"),
    a.setAttribute("data-current-tool", "navigator"),
    map_show_all_layers(l);
  var o = MIR.runtime.maps[l].mir.get_storage_id();
  $(r).draggable({
    start: function (t, e) {
      a.setAttribute("data-center-robot", "false"),
        MIR.storage.set(o, "data-center-robot", !1);
    },
    stop: function (t, e) {
      a.setAttribute("data-zoom-offset-left", e.position.left),
        a.setAttribute("data-zoom-offset-top", e.position.top),
        map_update_handles(l),
        MIR.storage.set(o, "data-zoom-offset-left", e.position.left),
        MIR.storage.set(o, "data-zoom-offset-top", e.position.top);
    },
    delay: 80,
  }),
    $(r).draggable("enable"),
    map_toolbars_place(),
    determine_marker_images(l),
    $(e)
      .off("touchstart.pinchzoom pointerstart.pinchzoom")
      .off("touchmove.pinchzoom pointermove.pinchzoom")
      .off("touchend.pinchzoom touchend.pinchzoom")
      .on("touchstart.pinchzoom pointerstart.pinchzoom", function (t) {
        if (!0 !== t.handled) {
          if (2 == t.targetTouches.length) {
            t.stopPropagation(), t.preventDefault();
            var i = !1,
              o = MIR.runtime.maps[l].mir,
              n = o.get_zoom(),
              s = MIR.constants.MAP.world,
              d = null;
            $(e).on("touchmove.pinchzoom pointermove.pinchzoom", function (t) {
              if (!0 !== t.handled) {
                if (
                  (t.stopPropagation(),
                  t.preventDefault(),
                  void 0 === t.originalEvent.touches)
                );
                else if (2 == t.originalEvent.touches.length) {
                  var e = t.targetTouches.item(0),
                    a = t.targetTouches.item(1),
                    r = Math.sqrt(
                      Math.pow(e.pageX - a.pageX, 2) +
                        Math.pow(e.pageY - a.pageY, 2)
                    );
                  !1 === i &&
                    ((i = r),
                    (d = o.convert_coords(
                      {
                        x: (e.pageX + a.pageX) / 2,
                        y: (e.pageY + a.pageY) / 2,
                      },
                      s.DOM,
                      s.VIEWPORT
                    ))),
                    map_zoom(l, n * (r / i), {
                      interval: 1,
                      zoom_to_coords: d,
                    });
                }
              } else t.handled = !0;
            }),
              $(e).on("touchend.pinchzoom touchend.pinchzoom", function (t) {
                !0 !== t.handled
                  ? (t.stopPropagation(),
                    t.preventDefault(),
                    $(e)
                      .off("touchmove.pinchzoom pointermove.pinchzoom")
                      .off("touchend.pinchzoom touchend.pinchzoom"))
                  : (t.handled = !0);
              });
          }
        } else t.handled = !0;
      }),
    "true" == a.getAttribute("data-locked") && $(r).draggable("disable");
}
function map_move_item(t) {
  var e = document.getElementById(t + "_mapcontainer");
  e.getAttribute("data-current-layer");
  e.setAttribute("data-current-tool", "moveitem");
}
function map_delete_item(t) {
  document
    .getElementById(t + "_mapcontainer")
    .setAttribute("data-current-tool", "deleteitem");
}
function map_draw_square(u) {
  var t = document.getElementById(u + "_mapcontainer");
  t.setAttribute("data-current-tool", "drawsquare"),
    $("#" + u + "_layer_navigation").hide();
  var e = document.getElementById(u + "_layer_draw_canvas"),
    r = document.getElementById(u + "_layer_tmpsvg");
  $(r).show();
  var c = t.getAttribute("data-current-layer");
  $("#" + u + "_layer_draw").show(), $(e).css("cursor", "crosshair");
  e.getContext("2d");
  $(document).on(
    "touchstart click",
    "#" + u + "_layer_draw_canvas",
    function (t) {
      if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
        var e = this.parentNode.parentNode.parentNode.parentNode.parentNode,
          d =
            (e.getAttribute("data-map-guid"),
            e.getAttribute("data-resscale"),
            e.getAttribute("data-origin-x"),
            e.getAttribute("data-origin-y"),
            e.getAttribute("data-map-width"),
            e.getAttribute("data-map-height"),
            t.originalEvent.offsetX),
          l = t.originalEvent.offsetY,
          p = 0,
          m = 0,
          a = document.createElement("div");
        a.setAttribute("id", u + "_tmp_svg"),
          $(a).css("background-color", "rgba(255,0,0,0.6)"),
          $(a).css("width", "0px"),
          $(a).css("height", "0px"),
          $(a).css("position", "absolute"),
          $(a).css("top", l + "px"),
          $(a).css("left", d + "px"),
          r.appendChild(a),
          $(document).off("touchstart click", "#" + u + "_layer_draw_canvas"),
          $(document).on(
            "touchmove mousemove",
            "#" + u + "_layer_draw_canvas",
            function (t) {
              if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
                (p = t.originalEvent.offsetX), (m = t.originalEvent.offsetY);
                var e = document.getElementById(u + "_tmp_svg");
                $(e).css("background-color", "rgba(255,0,0,0.6)"),
                  $(e).css("width", p - d + "px"),
                  $(e).css("height", m - l + "px"),
                  $(e).css("position", "absolute"),
                  $(e).css("top", l + "px"),
                  $(e).css("left", d + "px");
              } else t.handled = !0;
            }
          ),
          $(document).on(
            "touchstart click",
            "#" + u + "_layer_draw_canvas",
            function (t) {
              if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
                $(document).off(
                  "touchmove mousemove",
                  "#" + u + "_layer_draw_canvas"
                ),
                  $(document).off(
                    "touchstart click",
                    "#" + u + "_layer_draw_canvas"
                  ),
                  (p = t.originalEvent.offsetX),
                  (m = t.originalEvent.offsetY),
                  $("#" + u + "_tmp_svg").remove();
                var e = document.getElementById(u + "_mapcontainer"),
                  a = e.getAttribute("data-current-layer");
                e.setAttribute("data-current-tool", "navigator"),
                  $("#" + u + "_layer_draw_canvas").css("cursor", "auto"),
                  $("#" + u + "_layer_navigation").show(),
                  $("#" + u + "_layer_draw").hide();
                var r = $("#" + u + "_layer_" + c)
                    .find("iframe")
                    .contents()
                    .find("svg"),
                  i = "";
                (i += "M" + d + "," + l),
                  (i += " " + p + "," + l),
                  (i += " " + p + "," + m),
                  (i += " " + d + "," + m),
                  (i += " " + d + "," + l),
                  (i += "z");
                var o = document.createElementNS(
                  "http://www.w3.org/2000/svg",
                  "path"
                );
                o.setAttribute("d", i),
                  o.setAttribute("fill", "red"),
                  r.append(o);
                var n,
                  s = [];
                ((n = {}).x = d),
                  (n.y = l),
                  s.push(n),
                  ((n = {}).x = p),
                  (n.y = l),
                  s.push(n),
                  ((n = {}).x = p),
                  (n.y = m),
                  s.push(n),
                  ((n = {}).x = d),
                  (n.y = m),
                  s.push(n),
                  ((n = {}).x = d),
                  (n.y = l),
                  s.push(n),
                  window["map_" + u + "_metadata"].layers[a].shapes.push(s);
              } else t.handled = !0;
            }
          );
      } else t.handled = !0;
    }
  );
}
function map_draw_pencil(n) {
  var r = document.getElementById(n + "_mapcontainer");
  r.setAttribute("data-current-tool", "drawpencil");
  var s = r.getAttribute("data-current-layer");
  $("#" + n + "_layer_navigation").hide();
  var t = document.getElementById(n + "_layer_draw_canvas");
  $("#" + n + "_layer_draw").show(),
    $(t).css("cursor", "crosshair"),
    new CanvasSVG.Deferred().wrapCanvas(t);
  var i = t.getContext("2d");
  (i.webkitImageSmoothingEnabled = !1),
    (i.msImageSmoothingEnabled = !1),
    (i.imageSmoothingEnabled = !1),
    $(document).on(
      "touchstart mousedown pointerdown",
      "#" + n + "_layer_draw_canvas",
      function (t) {
        t.stopPropagation(),
          t.preventDefault(),
          !0 !== t.handled
            ? (t.originalEvent.offsetX,
              t.originalEvent.offsetY,
              r.setAttribute("data-is-drawing", "true"))
            : (t.handled = !0);
      }
    ),
    $(document).on(
      "touchend mouseup pointerup touchleave mouseleave pointerleave",
      "#" + n + "_layer_draw_canvas",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          if ("true" == r.getAttribute("data-is-drawing")) {
            r.setAttribute("data-is-drawing", "false"),
              r.setAttribute("data-current-tool", "navigator"),
              $("#" + n + "_layer_draw_canvas").css("cursor", "auto"),
              $("#" + n + "_layer_navigation").show(),
              $("#" + n + "_layer_draw").hide();
            var o = $("#" + n + "_layer_" + s)
                .find("iframe")
                .contents()
                .find("svg"),
              e = i.getSVG();
            $(e)
              .find("path")
              .each(function () {
                o.append(this);
                for (
                  var t = this.getAttribute("d").split(" "), e = [], a = 0;
                  a < t.length;

                ) {
                  if ("M" == t[a] || "L" == t[a] || "z" == t[a]);
                  else {
                    var r = t[a].split(","),
                      i = {};
                    (i.x = r[0]), (i.y = r[1]), e.push(i);
                  }
                  a++;
                }
                window["map_" + n + "_metadata"].layers[s].shapes.push(e);
              });
          }
        } else t.handled = !0;
      }
    ),
    $(document).on(
      "touchmove mousemove pointermove",
      "#" + n + "_layer_draw_canvas",
      function (t) {
        if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
          if ("true" == r.getAttribute("data-is-drawing")) {
            var e = t.originalEvent.offsetX,
              a = t.originalEvent.offsetY;
            i.beginPath(),
              i.rect(e, a, 2, 2),
              i.closePath(),
              (i.fillStyle = "red"),
              i.fill(),
              e,
              a;
          }
        } else t.handled = !0;
      }
    );
}
function map_eraser_start(p) {
  map_autoselect_layer(p, "pixels");
  var t = document.getElementById(p + "_map"),
    m = document.getElementById(p + "_mapcontainer");
  m.setAttribute("data-show-mobiletoolbar", "false"),
    m.setAttribute("data-current-tool", "eraser"),
    map_deleteselection_stop(p),
    map_set_guide(p, map_lang_guide_eraser),
    $(t).draggable("disable"),
    $("#" + p + "_layer_navigation").hide(),
    $("#" + p + "_layer_draw").show();
  var e = document.getElementById(
      p + "_layer_" + m.getAttribute("data-current-layer")
    ),
    l = document.createElement("div");
  l.setAttribute("class", "pseudocursor"),
    document.getElementById(p + "_layer_draw").appendChild(l),
    $("#" + p + "_layer_draw").css("cursor", "none");
  var a = e.getElementsByTagName("canvas"),
    r = e.getElementsByTagName("img");
  if ((map_toolbars_place(), 1 == a.length && 1 == r.length)) {
    var u = a[0],
      i = r[0];
    u.setAttribute("width", i.getAttribute("width")),
      u.setAttribute("height", i.getAttribute("height"));
    var c = u.getContext("2d");
    c.clearRect(0, 0, i.getAttribute("width"), i.getAttribute("height")),
      c.drawImage(i, 0, 0, i.getAttribute("width"), i.getAttribute("height")),
      (c.webkitImageSmoothingEnabled = !1),
      (c.msImageSmoothingEnabled = !1),
      (c.imageSmoothingEnabled = !1),
      $(u).show(),
      $(i).hide();
    var _ = !1;
    $(document).off(
      "touchstart pointerdown mousedown",
      "#" + p + "_layer_draw_canvas"
    ),
      $(document).on(
        "touchstart pointerdown mousedown",
        "#" + p + "_layer_draw_canvas",
        function (t) {
          if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
            var e = parseFloat(m.getAttribute("data-zoom-scale"));
            if (null == t.originalEvent.offsetX)
              var a = document
                  .getElementById(p + "_layer_draw_canvas")
                  .getBoundingClientRect(),
                r = (t.originalEvent.touches[0].clientX - a.left) / e,
                i = (t.originalEvent.touches[0].clientY - a.top) / e;
            else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
            (_ = !0), m.setAttribute("data-is-drawing", "true");
            var o = {
              type: "delete_pixels",
            };
            (o.layer = m.getAttribute("data-current-layer")),
              (o.data = u.toDataURL()),
              map_add_to_history(p, o);
            var n = parseInt(m.getAttribute("data-current-brushsize")),
              s = parseInt(m.getAttribute("data-current-brushsize")),
              d = r - n / 2,
              l = i - s / 2;
            (c.globalCompositeOperation = "destination-out"),
              c.beginPath(),
              c.moveTo(r, i),
              c.rect(d, l, n, s),
              c.closePath(),
              (c.fillStyle = "#c8c8c8"),
              c.fill(),
              map_set_save_state(p, "savable", !1);
          } else t.handled = !0;
        }
      ),
      $(document).off(
        "touchend mouseup pointerup mouseleave",
        "#" + p + "_layer_draw_canvas"
      ),
      $(document).on(
        "touchend mouseup pointerup mouseleave",
        "#" + p + "_layer_draw_canvas",
        function (t) {
          t.stopPropagation(),
            t.preventDefault(),
            !0 !== t.handled
              ? "true" == m.getAttribute("data-is-drawing") &&
                1 == _ &&
                (_ = !1)
              : (t.handled = !0);
        }
      ),
      $(document).off(
        "touchmove mousemove pointermove",
        "#" + p + "_layer_draw_canvas"
      ),
      $(document).on(
        "touchmove mousemove pointermove",
        "#" + p + "_layer_draw_canvas",
        function (t) {
          if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
            var e = parseFloat(m.getAttribute("data-zoom-scale"));
            if (null == t.originalEvent.offsetX)
              var a = document
                  .getElementById(p + "_layer_draw_canvas")
                  .getBoundingClientRect(),
                r = (t.originalEvent.touches[0].clientX - a.left) / e,
                i = (t.originalEvent.touches[0].clientY - a.top) / e;
            else (r = t.originalEvent.offsetX), (i = t.originalEvent.offsetY);
            var o = parseInt(m.getAttribute("data-current-brushsize")),
              n = parseInt(m.getAttribute("data-current-brushsize")),
              s = r - o / 2,
              d = i - n / 2;
            $(l).css("top", d),
              $(l).css("left", s),
              $(l).css("width", o),
              $(l).css("height", n),
              "true" == m.getAttribute("data-is-drawing") &&
                1 == _ &&
                ((c.globalCompositeOperation = "destination-out"),
                c.beginPath(),
                c.moveTo(r, i),
                c.rect(s, d, o, n),
                c.closePath(),
                (c.fillStyle = "#c8c8c8"),
                c.fill(),
                r,
                i);
          } else t.handled = !0;
        }
      );
  } else map_navigator(p), map_toolbars_place();
}
function map_eraser_stop(t) {
  var e = document.getElementById(t + "_mapcontainer");
  $("#" + t + "_layer_navigation").show(),
    $("#" + t + "_layer_draw").hide(),
    $("#" + t + "_layer_draw")
      .find("div.pseudocursor")
      .remove();
  var a = e.getAttribute("data-current-layer");
  "walls" == a ? (a = "basemap_walls") : "floor" == a && (a = "basemap_floor");
  var r = document.getElementById(t + "_layer_" + a);
  if (1 == $(r).children("canvas").is(":visible")) {
    var i = r.getElementsByTagName("canvas")[0],
      o = r.getElementsByTagName("img")[0];
    $(o).show(), $(i).hide(), (o.src = i.toDataURL());
  }
  return (
    e.setAttribute("data-is-drawing", "false"),
    $("#" + t + "_layer_draw").css("cursor", "auto"),
    $(document).off(
      "touchmove mousemove pointermove",
      "#" + t + "_layer_draw_canvas"
    ),
    $(document).off(
      "touchend mouseup pointerup mouseleave",
      "#" + t + "_layer_draw_canvas"
    ),
    $(document).off(
      "touchstart pointerdown mousedown",
      "#" + t + "_layer_draw_canvas"
    ),
    !0
  );
}
function map_deleteselection_start(s) {
  map_autoselect_layer(s, "pixels");
  var t = document.getElementById(s + "_map"),
    d = document.getElementById(s + "_mapcontainer");
  d.setAttribute("data-show-mobiletoolbar", "false"),
    d.setAttribute("data-current-tool", "deleteselection"),
    map_eraser_stop(s),
    map_set_guide(s, map_lang_guide_deleteselection),
    $("#" + s + "_layer_draw").css("cursor", "crosshair"),
    $(t).draggable("disable"),
    $("#" + s + "_layer_navigation").hide(),
    $("#" + s + "_layer_draw").show();
  var e = document.getElementById(
      s + "_layer_" + d.getAttribute("data-current-layer")
    ),
    a = e.getElementsByTagName("canvas"),
    r = e.getElementsByTagName("img");
  if (1 == a.length && 1 == r.length) {
    var i = a[0],
      o = r[0];
    i.setAttribute("width", o.getAttribute("width")),
      i.setAttribute("height", o.getAttribute("height"));
    var l,
      p,
      m,
      u,
      c,
      _,
      g = i.getContext("2d");
    g.clearRect(0, 0, o.getAttribute("width"), o.getAttribute("height")),
      g.drawImage(o, 0, 0, o.getAttribute("width"), o.getAttribute("height")),
      (g.webkitImageSmoothingEnabled = !1),
      (g.msImageSmoothingEnabled = !1),
      (g.imageSmoothingEnabled = !1),
      $(i).show(),
      $(o).hide();
    var h;
    $(document).off(
      "touchstart pointerdown mousedown",
      "#" + s + "_layer_draw_canvas"
    ),
      $(document).on(
        "touchstart pointerdown mousedown",
        "#" + s + "_layer_draw_canvas",
        function (t) {
          if (window.map_space_holding) return !0;
          if ((t.stopPropagation(), t.preventDefault(), !0 !== t.handled)) {
            var e = parseFloat(d.getAttribute("data-zoom-scale"));
            if (null == t.originalEvent.offsetX)
              var a = document
                  .getElementById(s + "_layer_draw_canvas")
                  .getBoundingClientRect(),
                o = (t.originalEvent.touches[0].clientX - a.left) / e,
                n = (t.originalEvent.touches[0].clientY - a.top) / e;
            else (o = t.originalEvent.offsetX), (n = t.originalEvent.offsetY);
            d.setAttribute("data-is-drawing", "true"),
              (h = document.createElement("div")).setAttribute(
                "class",
                "draw_square"
              ),
              document.getElementById(s + "_layer_draw").appendChild(h);
            $(document).off(
              "touchmove mousemove pointermove",
              "#" + s + "_layer_draw_canvas"
            ),
              $(document).on(
                "touchmove mousemove pointermove",
                "#" + s + "_layer_draw_canvas",
                function (t) {
                  if (
                    (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                  ) {
                    var e = parseFloat(d.getAttribute("data-zoom-scale"));
                    if (null == t.originalEvent.offsetX)
                      var a = document
                          .getElementById(s + "_layer_draw_canvas")
                          .getBoundingClientRect(),
                        r = (t.originalEvent.touches[0].clientX - a.left) / e,
                        i = (t.originalEvent.touches[0].clientY - a.top) / e;
                    else
                      (r = t.originalEvent.offsetX),
                        (i = t.originalEvent.offsetY);
                    (m = o < r ? ((l = o), r) : ((l = r), o)),
                      (u = n < i ? ((p = n), i) : ((p = i), n)),
                      (l = Math.round(l)),
                      (p = Math.round(p)),
                      (m = Math.round(m)),
                      (u = Math.round(u)),
                      (c = m - l),
                      (_ = u - p),
                      "true" == d.getAttribute("data-is-drawing") &&
                        ($(h).css("opacity", 0.6),
                        $(h).css("top", p),
                        $(h).css("left", l),
                        $(h).css("width", c),
                        $(h).css("height", _));
                  } else t.handled = !0;
                }
              ),
              $(document).off(
                "touchend mouseup pointerup",
                "#" + s + "_layer_draw_canvas"
              ),
              $(document).on(
                "touchend mouseup pointerup",
                "#" + s + "_layer_draw_canvas",
                function (t) {
                  if (
                    ($(document).off(
                      "touchend mouseup pointerup",
                      "#" + s + "_layer_draw_canvas"
                    ),
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + s + "_layer_draw_canvas"
                    ),
                    t.stopPropagation(),
                    t.preventDefault(),
                    !0 !== t.handled)
                  ) {
                    var e = {
                      type: "delete_pixels",
                    };
                    (e.layer = d.getAttribute("data-current-layer")),
                      (e.data = i.toDataURL()),
                      map_add_to_history(s, e),
                      (g.globalCompositeOperation = "destination-out"),
                      g.beginPath(),
                      g.rect(l, p, c, _),
                      g.closePath(),
                      (g.fillStyle = "#c8c8c8"),
                      g.fill(),
                      $("#" + s + "_layer_draw")
                        .find("div.draw_square")
                        .remove(),
                      d.setAttribute("data-is-drawing", "false"),
                      map_set_save_state(s, "savable", !1);
                  } else t.handled = !0;
                }
              );
          } else t.handled = !0;
        }
      );
  }
}
function map_deleteselection_stop(t) {
  var e = document.getElementById(t + "_mapcontainer");
  $("#" + t + "_layer_navigation").show(),
    $("#" + t + "_layer_draw").hide(),
    $("#" + t + "_layer_draw")
      .find("div.draw_square")
      .remove(),
    $("#" + t + "_layer_draw").css("cursor", "auto");
  var a = e.getAttribute("data-current-layer");
  "walls" == a ? (a = "basemap_walls") : "floor" == a && (a = "basemap_floor");
  var r = document.getElementById(t + "_layer_" + a);
  if (1 == $(r).children("canvas").is(":visible")) {
    var i = r.getElementsByTagName("canvas")[0],
      o = r.getElementsByTagName("img")[0];
    $(o).show(), $(i).hide(), (o.src = i.toDataURL());
  }
  (e = document.getElementById(t + "_mapcontainer")).setAttribute(
    "data-is-drawing",
    "false"
  ),
    $(document).off(
      "touchmove mousemove pointermove",
      "#" + t + "_layer_draw_canvas"
    ),
    $(document).off(
      "touchend mouseup pointerup",
      "#" + t + "_layer_draw_canvas"
    ),
    $(document).off(
      "touchstart pointerdown mousedown",
      "#" + t + "_layer_draw_canvas"
    );
}
function map_draw_path(t) {
  document
    .getElementById(t + "_mapcontainer")
    .setAttribute("data-current-tool", "drawpath");
}
function map_settarget(f) {
  map_reset_mychoice(f),
    map_clean_tempshapes(f),
    map_itemselector_stop(f),
    map_itemeraser_stop(f);
  var v = document.getElementById(f + "_mapcontainer");
  v.setAttribute("data-positioning-robot", "false");
  var o = parseFloat(v.getAttribute("data-zoom-scale")),
    a = document.getElementById(f + "_layer_robot");
  $(a).children("div.ghost").remove();
  var t = document.getElementById(f + "_map"),
    e = document.getElementById(f + "_layer_draw_canvas");
  $(document).off(
    "touchstart pointerstart click",
    "#" + f + "_layer_draw_canvas"
  ),
    "settarget" == v.getAttribute("data-current-tool")
      ? ($(e).css("cursor", ""), map_navigator(f))
      : (map_set_guide(f, map_lang_guide_settarget_a),
        v.setAttribute("data-current-tool", "settarget"),
        $("#" + f + "_layer_draw_canvas")
          .parents(".layer")
          .siblings(".layer")
          .each(function () {
            var t = $(this);
            t.data("pointer-events", t.css("pointer-events")).css(
              "pointer-events",
              "none"
            );
          }),
        $(t).draggable("disable"),
        $("#" + f + "_layer_draw").show(),
        $(e).css("cursor", "crosshair"),
        $("#" + f + "_layer_navigation").hide(),
        $(document).on(
          "touchstart pointerstart click",
          "#" + f + "_layer_draw_canvas",
          function (t) {
            if (
              ($(document).off(
                "touchstart pointerstart click",
                "#" + f + "_layer_draw_canvas"
              ),
              map_set_guide(f, map_lang_guide_settarget_b),
              t.stopPropagation(),
              t.preventDefault(),
              !0 !== t.handled)
            ) {
              if (null == t.originalEvent.offsetX)
                var e = document
                    .getElementById(f + "_layer_draw_canvas")
                    .getBoundingClientRect(),
                  u = (t.originalEvent.touches[0].clientX - e.left) / o,
                  c = (t.originalEvent.touches[0].clientY - e.top) / o;
              else (u = t.originalEvent.offsetX), (c = t.originalEvent.offsetY);
              var _ = document.createElement("div");
              _.setAttribute("class", "ghost"), a.appendChild(_);
              var g = 0,
                h = 0;
              $(_).css("left", u + "px"),
                $(_).css("top", c + "px"),
                $(document).on(
                  "touchmove mousemove pointermove",
                  "#" + f + "_layer_draw_canvas",
                  function (t) {
                    if (
                      (t.stopPropagation(),
                      t.preventDefault(),
                      !0 !== t.handled)
                    ) {
                      if (null == t.originalEvent.offsetX) {
                        var e = document
                          .getElementById(f + "_layer_draw_canvas")
                          .getBoundingClientRect();
                        (g = (t.originalEvent.touches[0].clientX - e.left) / o),
                          (h =
                            (t.originalEvent.touches[0].clientY - e.top) / o);
                      } else
                        (g = t.originalEvent.offsetX),
                          (h = t.originalEvent.offsetY);
                      var a = c - h,
                        r = u - g,
                        i = Math.atan2(a, r);
                      (i *= 180 / Math.PI),
                        (i -= 90),
                        (i += 180),
                        $(_).css("WebkitTransform", "rotate(" + i + "deg)"),
                        $(_).css("-moz-transform", "rotate(" + i + "deg)"),
                        $(_).css("-ms-transform", "rotate(" + i + "deg)"),
                        $(_).css("transform", "rotate(" + i + "deg)");
                    } else t.handled = !0;
                  }
                );
            } else t.handled = !0;
            $(document).on(
              "touchend pointerend click",
              "#" + f + "_layer_draw_canvas",
              function (t) {
                if (
                  (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                ) {
                  $(document).off(
                    "touchmove mousemove pointermove",
                    "#" + f + "_layer_draw_canvas"
                  ),
                    $(document).off(
                      "touchstart pointerstart click",
                      "#" + f + "_layer_draw_canvas"
                    ),
                    null == t.originalEvent.offsetX ||
                      ((g = t.originalEvent.offsetX),
                      (h = t.originalEvent.offsetY));
                  var e = c - h,
                    a = u - g,
                    r = Math.atan2(e, a);
                  r *= 180 / Math.PI;
                  var i = (r -= 90);
                  r < -180 && (r += 360),
                    (i += 180),
                    $(_).css("WebkitTransform", "rotate(" + i + "deg)"),
                    $(_).css("-moz-transform", "rotate(" + i + "deg)"),
                    $(_).css("-ms-transform", "rotate(" + i + "deg)"),
                    $(_).css("transform", "rotate(" + i + "deg)");
                  var o = v.getAttribute("data-resscale"),
                    n = v.getAttribute("data-origin-x"),
                    s = v.getAttribute("data-origin-y"),
                    d = v.getAttribute("data-map-height"),
                    l = u / parseFloat(o) + parseFloat(n) / parseFloat(o),
                    p = (d - c) / parseFloat(o) + parseFloat(s) / parseFloat(o),
                    m = {};
                  (m.x = l),
                    (m.y = p),
                    (m.orientation = 90 - r),
                    m.orientation < -180
                      ? (m.orientation = m.orientation + 360)
                      : 180 < m.orientation &&
                        (m.orientation = m.orientation - 360),
                    (calculated_pos_orientation = m.orientation),
                    (m.mode = "map-go-to-coordinates"),
                    $.ajax({
                      url: "/",
                      data: m,
                      method: "GET",
                      dataType: "json",
                      x: l,
                      y: p,
                      orientation: calculated_pos_orientation,
                      success: function (t) {
                        "question" == t.status &&
                          MIR.runtime.get_mission_queue_prompt(
                            function () {
                              map_go_to_coordinates(
                                l,
                                p,
                                calculated_pos_orientation,
                                !0
                              );
                            },
                            function () {
                              map_go_to_coordinates(
                                l,
                                p,
                                calculated_pos_orientation,
                                !1
                              );
                            }
                          );
                      },
                    }),
                    map_settarget(f);
                } else t.handled = !0;
              }
            );
          }
        ));
}
function map_go_to_coordinates(t, e, a, r) {
  var i = {};
  return (
    (i.clearall = 1 == r ? "yes" : "no"),
    (i.x = t),
    (i.y = e),
    (i.orientation = a),
    (i.mode = "map-go-to-coordinates"),
    $.ajax({
      url: "/",
      data: i,
      method: "GET",
      dataType: "json",
      x: t,
      y: e,
      orientation: a,
      success: function (t) {},
    }),
    !0
  );
}
function map_position_robot(f) {
  map_reset_mychoice(f);
  var v = document.getElementById(f + "_mapcontainer");
  if ("true" == v.getAttribute("data-positioning-robot"))
    v.setAttribute("data-positioning-robot", "false"),
      $(document).off(
        "touchstart pointerstart click",
        "#" + f + "_layer_draw_canvas"
      ),
      $(document).off(
        "touchmove mousemove pointermove",
        "#" + f + "_layer_draw_canvas"
      ),
      $(document).off(
        "touchend pointerend click",
        "#" + f + "_layer_draw_canvas"
      ),
      map_clean_tempshapes(f),
      map_itemselector_stop(f),
      map_itemeraser_stop(f),
      map_navigator(f);
  else {
    map_clean_tempshapes(f),
      map_itemselector_stop(f),
      map_itemeraser_stop(f),
      map_navigator(f),
      v.setAttribute("data-current-tool", "position-robot"),
      $("#" + f + "_layer_draw_canvas")
        .parents(".layer")
        .siblings(".layer")
        .each(function () {
          var t = $(this);
          t.data("pointer-events", t.css("pointer-events")).css(
            "pointer-events",
            "none"
          );
        }),
      v.setAttribute("data-show-mobiletoolbar", "false"),
      v.setAttribute("data-positioning-robot", "true"),
      map_set_guide(f, map_lang_guide_positionrobot_a),
      $(document).off(
        "touchstart pointerstart click",
        "#" + f + "_layer_draw_canvas"
      ),
      $(document).off(
        "touchmove mousemove pointermove",
        "#" + f + "_layer_draw_canvas"
      ),
      $(document).off(
        "touchend pointerend click",
        "#" + f + "_layer_draw_canvas"
      );
    var o = parseFloat(v.getAttribute("data-zoom-scale"));
    $("#" + f + "_layer_navigation").hide();
    var n = document.getElementById(f + "_layer_draw_canvas");
    $("#" + f + "_layer_draw").show(), $(n).css("cursor", "crosshair");
    var s = n.getContext("2d");
    (s.webkitImageSmoothingEnabled = !1),
      (s.msImageSmoothingEnabled = !1),
      (s.imageSmoothingEnabled = !1),
      $(document).on(
        "touchstart pointerstart click",
        "#" + f + "_layer_draw_canvas",
        function (t) {
          if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled))
            return !1;
          map_set_guide(f, map_lang_guide_positionrobot_b);
          var e = this.parentNode.parentNode.parentNode.parentNode.parentNode,
            d =
              (e.getAttribute("data-map-guid"),
              e.getAttribute("data-resscale")),
            l = e.getAttribute("data-origin-x"),
            p = e.getAttribute("data-origin-y"),
            m = e.getAttribute("data-map-height");
          if (null == t.originalEvent.offsetX)
            var a = document
                .getElementById(f + "_layer_draw_canvas")
                .getBoundingClientRect(),
              u = (t.originalEvent.touches[0].clientX - a.left) / o,
              c = (t.originalEvent.touches[0].clientY - a.top) / o;
          else (u = t.originalEvent.offsetX), (c = t.originalEvent.offsetY);
          var _ = 0,
            g = 0,
            h = document.getElementById(f + "_layer_robot_robot");
          $(h).css("left", u + "px"),
            $(h).css("top", c + "px"),
            $(document).off(
              "touchstart pointerstart click",
              "#" + f + "_layer_draw_canvas"
            ),
            $(document).on(
              "touchmove mousemove pointermove",
              "#" + f + "_layer_draw_canvas",
              function (t) {
                if (
                  (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                ) {
                  if (
                    (s.clearRect(0, 0, n.width, n.height),
                    null == t.originalEvent.offsetX)
                  ) {
                    var e = document
                      .getElementById(f + "_layer_draw_canvas")
                      .getBoundingClientRect();
                    (_ = (t.originalEvent.touches[0].clientX - e.left) / o),
                      (g = (t.originalEvent.touches[0].clientY - e.top) / o);
                  } else
                    (_ = t.originalEvent.offsetX),
                      (g = t.originalEvent.offsetY);
                  var a = c - g,
                    r = u - _,
                    i = Math.atan2(a, r);
                  (i *= 180 / Math.PI),
                    (i -= 90),
                    (i += 180),
                    $(h).css("WebkitTransform", "rotate(" + i + "deg)"),
                    $(h).css("-moz-transform", "rotate(" + i + "deg)"),
                    $(h).css("-ms-transform", "rotate(" + i + "deg)"),
                    $(h).css("transform", "rotate(" + i + "deg)");
                } else t.handled = !0;
              }
            ),
            $(document).on(
              "touchend pointerend click",
              "#" + f + "_layer_draw_canvas",
              function (t) {
                if (
                  (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                ) {
                  $(document).off(
                    "touchmove mousemove pointermove",
                    "#" + f + "_layer_draw_canvas"
                  ),
                    $(document).off(
                      "touchstart pointerstart click",
                      "#" + f + "_layer_draw_canvas"
                    ),
                    $(document).off(
                      "touchend pointerend click",
                      "#" + f + "_layer_draw_canvas"
                    ),
                    null == t.originalEvent.offsetX ||
                      ((_ = t.originalEvent.offsetX),
                      (g = t.originalEvent.offsetY));
                  var e = c - g,
                    a = u - _,
                    r = Math.atan2(e, a);
                  r *= 180 / Math.PI;
                  var i = (r -= 90);
                  r < -180 && (r += 360),
                    (i += 180),
                    $(h).css("WebkitTransform", "rotate(" + i + "deg)"),
                    $(h).css("-moz-transform", "rotate(" + i + "deg)"),
                    $(h).css("-ms-transform", "rotate(" + i + "deg)"),
                    $(h).css("transform", "rotate(" + i + "deg)");
                  var o = u / parseFloat(d) + parseFloat(l) / parseFloat(d),
                    n = (m - c) / parseFloat(d) + parseFloat(p) / parseFloat(d),
                    s = {};
                  (s.x = o),
                    (s.y = n),
                    (s.orientation = 90 - r),
                    s.orientation < -180
                      ? (s.orientation = s.orientation + 360)
                      : 180 < s.orientation &&
                        (s.orientation = s.orientation - 360),
                    $.ajax({
                      url: "/?mode=set-robot-position",
                      data: s,
                      method: "POST",
                      dataType: "json",
                      element_id: f,
                      success: function (t) {
                        $(h).hide(),
                          map_navigator(f),
                          $("#" + f + "_layer_draw").hide(),
                          v.setAttribute("data-positioning-robot", "false"),
                          map_clear_guide(f);
                      },
                    });
                } else t.handled = !0;
              }
            ),
            (t.handled = !0);
        }
      );
  }
}
function map_draw_marker(t) {
  map_itemselector_stop(t), map_itemeraser_stop(t);
  var e = document.getElementById(t + "_mapcontainer");
  return (
    e.setAttribute("data-show-mobiletoolbar", "false"),
    map_position_dialogue(t, e.getAttribute("data-map-guid"), null, "marker"),
    !0
  );
}
function map_draw_position(f, v, b) {
  var y = document.getElementById(f + "_mapcontainer");
  if ("true" == y.getAttribute("data-mapping")) {
    var t = y.getAttribute("data-map-guid"),
      e = {};
    (e.map_id = t),
      (e.name = ""),
      (e.guid = ""),
      (e.orientation = robot_cur_degrees),
      (e.pos_x = robot_cur_x),
      (e.pos_y = robot_cur_y),
      (e.type_id = 0),
      map_position_dialogue(f, t, e, "position");
  } else {
    map_itemselector_stop(f),
      map_itemeraser_stop(f),
      y.setAttribute("data-show-mobiletoolbar", "false"),
      y.setAttribute("data-current-tool", "drawposition"),
      y.setAttribute("data-positioning-robot", "false"),
      $(document).off(
        "touchstart pointerstart click",
        "#" + f + "_layer_draw_canvas"
      ),
      $("#" + f + "_layer_draw_canvas")
        .parents(".layer")
        .siblings(".layer")
        .each(function () {
          var t = $(this);
          t.data("pointer-events", t.css("pointer-events")).css(
            "pointer-events",
            "none"
          );
        });
    var a = document.getElementById(f + "_map");
    parseFloat(y.getAttribute("data-zoom-scale"));
    $("#" + f + "_layer_navigation").hide();
    var w = document.getElementById(f + "_layer_draw_canvas");
    $("#" + f + "_layer_draw").show(), $(w).css("cursor", "crosshair");
    var A = w.getContext("2d");
    $(a).draggable("disable"),
      map_set_guide(f, map_lang_guide_drawposition_a),
      (A.webkitImageSmoothingEnabled = !1),
      (A.msImageSmoothingEnabled = !1),
      (A.imageSmoothingEnabled = !1),
      $(document).on(
        "touchstart pointerstart click",
        "#" + f + "_layer_draw_canvas",
        function (t) {
          if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled))
            return !1;
          var e = this.parentNode.parentNode.parentNode.parentNode.parentNode,
            a = parseFloat(y.getAttribute("data-zoom-scale")),
            s = e.getAttribute("data-map-guid"),
            d = e.getAttribute("data-resscale"),
            l = e.getAttribute("data-origin-x"),
            p = e.getAttribute("data-origin-y"),
            m = e.getAttribute("data-map-height");
          if (
            (null == v ||
              ($(
                "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.position[data-guid='" +
                  v +
                  "']"
              ).hide(),
              $(
                "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                  v +
                  "']"
              ).hide()),
            null == t.originalEvent.offsetX)
          )
            var r = document
                .getElementById(f + "_layer_draw_canvas")
                .getBoundingClientRect(),
              u = (t.originalEvent.touches[0].clientX - r.left) / a,
              c = (t.originalEvent.touches[0].clientY - r.top) / a;
          else (u = t.originalEvent.offsetX), (c = t.originalEvent.offsetY);
          if (
            u > robot_pos_left - 10 &&
            u < robot_pos_left + 10 &&
            c < robot_pos_top + 10 &&
            c > robot_pos_top - 10
          )
            $(document).off(
              "touchstart pointerstart click",
              "#" + f + "_layer_draw_canvas"
            ),
              ((i = {}).map_id = s),
              (i.name = ""),
              (i.guid = ""),
              (i.orientation = robot_cur_degrees),
              (i.pos_x = robot_cur_x),
              (i.pos_y = robot_cur_y),
              (i.type_id = 0),
              map_position_dialogue(f, s, i, "position");
          else if (
            u > cart_pos_left - 10 &&
            u < cart_pos_left + 10 &&
            c < cart_pos_top + 10 &&
            c > cart_pos_top - 10
          ) {
            var i;
            $(document).off(
              "touchstart pointerstart click",
              "#" + f + "_layer_draw_canvas"
            ),
              ((i = {}).map_id = s),
              (i.name = ""),
              (i.guid = ""),
              (i.orientation = cart_front_degrees),
              (i.pos_x = cart_front_x),
              (i.pos_y = cart_front_y),
              (i.type_id = 1),
              map_position_dialogue(f, s, i, "position");
          } else {
            var _ = 0,
              g = 0,
              o = document.getElementById(f + "_layer_positions"),
              h = document.createElement("img");
            h.setAttribute("src", "/graphics/icon_mapposition_grey.svg");
            var n = document.createElement("div");
            n.setAttribute("class", "position"),
              n.setAttribute("id", "tmp_pos"),
              n.appendChild(h),
              o.appendChild(n),
              $(n).css("left", u + "px"),
              $(n).css("top", c + "px"),
              map_set_guide(f, map_lang_guide_drawposition_b),
              $(document).off(
                "touchstart pointerstart click",
                "#" + f + "_layer_draw_canvas"
              ),
              $(document).on(
                "touchmove mousemove pointermove",
                "#" + f + "_layer_draw_canvas",
                function (t) {
                  A.clearRect(0, 0, w.width, w.height);
                  var e = parseFloat(y.getAttribute("data-zoom-scale"));
                  if (null == t.originalEvent.offsetX) {
                    var a = document
                      .getElementById(f + "_layer_draw_canvas")
                      .getBoundingClientRect();
                    (_ = (t.originalEvent.touches[0].clientX - a.left) / e),
                      (g = (t.originalEvent.touches[0].clientY - a.top) / e);
                  } else
                    (_ = t.originalEvent.offsetX),
                      (g = t.originalEvent.offsetY);
                  var r = c - g,
                    i = u - _,
                    o = Math.atan2(r, i);
                  (o *= 180 / Math.PI),
                    (o -= 90),
                    $(h).css("WebkitTransform", "rotate(" + o + "deg)"),
                    $(h).css("-moz-transform", "rotate(" + o + "deg)"),
                    $(h).css("-ms-transform", "rotate(" + o + "deg)"),
                    $(h).css("transform", "rotate(" + o + "deg)");
                }
              ),
              $(document).on(
                "touchend pointerend mouseup click",
                "#" + f + "_layer_draw_canvas",
                function (t) {
                  if (
                    (t.stopPropagation(), t.preventDefault(), !0 !== t.handled)
                  ) {
                    $(document).off(
                      "touchmove mousemove pointermove",
                      "#" + f + "_layer_draw_canvas"
                    ),
                      $(document).off(
                        "touchend pointerend mouseup click",
                        "#" + f + "_layer_draw_canvas"
                      );
                    var e = c - g,
                      a = u - _,
                      r = Math.atan2(e, a);
                    (r *= 180 / Math.PI),
                      (r -= 90) < -180 && (r += 360),
                      $(h).css("WebkitTransform", "rotate(" + r + "deg)"),
                      $(h).css("-moz-transform", "rotate(" + r + "deg)"),
                      $(h).css("-ms-transform", "rotate(" + r + "deg)"),
                      $(h).css("transform", "rotate(" + r + "deg)");
                    var i = u / parseFloat(d) + parseFloat(l) / parseFloat(d),
                      o =
                        (m - c) / parseFloat(d) + parseFloat(p) / parseFloat(d),
                      n = {};
                    (n.map_id = s),
                      (n.name = null == v ? "" : b),
                      (n.guid = null == v ? "" : v),
                      (n.pos_x = i),
                      (n.pos_y = o),
                      (n.orientation = 90 - r),
                      n.orientation < -180
                        ? (n.orientation = n.orientation + 360)
                        : 180 < n.orientation &&
                          (n.orientation = n.orientation - 360),
                      (n.orientation = number_format(
                        n.orientation,
                        3,
                        ".",
                        ""
                      )),
                      (n.pos_x = number_format(n.pos_x, 3, ".", "")),
                      (n.pos_y = number_format(n.pos_y, 3, ".", "")),
                      $(
                        "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.position[data-guid='" +
                          v +
                          "']"
                      ).attr("data-type-id")
                        ? (n.type_id = $(
                            "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.position[data-guid='" +
                              v +
                              "']"
                          ).attr("data-type-id"))
                        : $(
                            "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                              v +
                              "']"
                          ).attr("data-type-id")
                        ? (n.type_id = $(
                            "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                              v +
                              "']"
                          ).attr("data-type-id"))
                        : (n.type_id = 0),
                      $(
                        "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                          v +
                          "']"
                      ).attr("data-parent-id")
                        ? (n.parent_id = $(
                            "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                              v +
                              "']"
                          ).attr("data-parent-id"))
                        : (n.parent_id = ""),
                      map_position_dialogue(f, s, n, "position"),
                      null == v ||
                        ($(
                          "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.position[data-guid='" +
                            v +
                            "']"
                        ).show(),
                        $(
                          "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                            v +
                            "']"
                        ).show());
                  } else t.handled = !0;
                }
              );
          }
          t.handled = !0;
        }
      );
  }
}
function map_layercontrol_toggle_view(a, t) {
  var e = document.getElementById(a + "_maplayercontroller_viewcontrol_" + t),
    r = document.getElementById(a + "_layer_" + t),
    i = document.getElementById(a + "_layer_robotmap"),
    o = document.getElementById(a + "_maplayercontroller_viewcontrol_robotmap");
  if ("robotmap" == t && "false" == e.getAttribute("data-active"))
    (window["map_" + a + "_visible_layers"] = []),
      $("#" + a + "_maplayercontroller > tr.layercontrollerrow")
        .not("[data-systemname='robotmap']")
        .each(function () {
          var t = $(this).attr("data-systemname"),
            e = $(this).find("td").first().find("div.view");
          "true" == $(e).attr("data-active") &&
            window["map_" + a + "_visible_layers"].push(t),
            $("#" + a + "_layer_" + t).hide(),
            document
              .getElementById(a + "_maplayercontroller_viewcontrol_" + t)
              .setAttribute("data-active", "false");
        }),
      $(i).show(),
      o.setAttribute("data-active", "true");
  else if ("robotmap" == t && "true" == e.getAttribute("data-active")) {
    $(i).hide(), o.setAttribute("data-active", "false");
    for (var n = 0; n < window["map_" + a + "_visible_layers"].length; )
      $("#" + a + "_layer_" + window["map_" + a + "_visible_layers"][n]).show(),
        document
          .getElementById(
            a +
              "_maplayercontroller_viewcontrol_" +
              window["map_" + a + "_visible_layers"][n]
          )
          .setAttribute("data-active", "true"),
        n++;
  } else {
    "true" == e.getAttribute("data-active")
      ? (e.setAttribute("data-active", "false"), $(r).hide())
      : (e.setAttribute("data-active", "true"), $(r).show());
    var s = 0;
    $("#" + a + "_maplayercontroller > tr.layercontrollerrow")
      .not("[data-systemname='robotmap']")
      .each(function () {
        var t = $(this).find("td").first().find("div.view");
        "true" == $(t).attr("data-active") && s++;
      }),
      0 == s
        ? ($(i).show(), o.setAttribute("data-active", "true"))
        : ($(i).hide(), o.setAttribute("data-active", "false")),
      (window["map_" + a + "_visible_layers"] = []),
      $("#" + a + "_maplayercontroller > tr.layercontrollerrow")
        .not("[data-systemname='robotmap']")
        .each(function () {
          var t = $(this).attr("data-systemname"),
            e = $(this).find("td").first().find("div.view");
          "true" == $(e).attr("data-active") &&
            window["map_" + a + "_visible_layers"].push(t);
        });
  }
  var d = {};
  return (
    (d["map_" + a + "_visible_layers"] =
      window["map_" + a + "_visible_layers"]),
    $.post("/?mode=set-runtime-settings", d, function (t) {}),
    !0
  );
}
function map_layercontrol_set_layer(t, e) {
  document
    .getElementById(t + "_mapcontainer")
    .setAttribute("data-current-layer", e),
    $("#" + t + "_maplayercontroller > tr.layercontrollerrow").attr(
      "data-active",
      "false"
    ),
    $(
      "#" +
        t +
        "_maplayercontroller > tr[data-systemname='" +
        e +
        "'].layercontrollerrow"
    ).attr("data-active", "true");
}
function map_add_layercontrol(t, e, a, r, i, o) {
  var n = !0;
  "object" == typeof window["map_" + t + "_visible_layers"]
    ? -1 == window["map_" + t + "_visible_layers"].indexOf(r) && (n = !1)
    : (n = !1);
  var s = window["map_" + t + "_layercount"] + 1,
    d = document.getElementById(t + "_mapcontainer"),
    l = document.getElementById(t + "_maplayercontroller"),
    p =
      (document.getElementById(t + "_maplayercontroller_layer_toprow"),
      document.createElement("tr"));
  p.setAttribute("class", "layercontrollerrow"),
    p.setAttribute("data-systemname", r),
    p.setAttribute("id", t + "_maplayercontroller_layer_row_" + s),
    1 == s
      ? l.appendChild(p)
      : l.insertBefore(
          p,
          document.getElementById(
            t + "_maplayercontroller_layer_row_" + (s - 1)
          )
        );
  var m,
    u = document.createElement("div");
  u.setAttribute("class", "view"),
    u.setAttribute("id", t + "_maplayercontroller_viewcontrol_" + r),
    1 == n
      ? u.setAttribute("data-active", "true")
      : u.setAttribute("data-active", "false"),
    (u.innerHTML = "<span>View</span>"),
    (u.onclick = function () {
      map_layercontrol_toggle_view(t, r);
    }),
    (m = document.createElement("td")).appendChild(u),
    p.appendChild(m),
    ((m = document.createElement("td")).innerHTML =
      1 == o
        ? '<div class="edit" onclick="map_layercontrol_set_layer(\'' +
          t +
          "','" +
          r +
          "');\"><span>Edit</span></div>\n"
        : '<div class="lock"><span>Edit</span></div>\n'),
    p.appendChild(m),
    ((m = document.createElement("td")).innerHTML = "<div>" + a + "</div>\n"),
    p.appendChild(m),
    1 == o &&
      ($("#" + t + "_maplayercontroller > tr.layercontrollerrow").attr(
        "data-active",
        "false"
      ),
      $(p).attr("data-active", "true"),
      d.setAttribute("data-current-layer", r)),
    (window["map_" + t + "_layercount"] = s),
    1 == n
      ? $("#" + t + "_layer_" + r).show()
      : $("#" + t + "_layer_" + r).hide();
}
function map_toolbutton_trigger_init(t) {
  var e = document.getElementById(t).getAttribute("data-call"),
    a = document.getElementById(t).getAttribute("data-args");
  $(document).on("touchstart click", "#" + t, function (t) {
    if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled)) return !1;
    window[e].apply(this, a.split(";")), (t.handled = !0);
  });
}
function map_init_choice_selector(s) {
  if (area_events.areas.length <= 0)
    setTimeout(function () {
      map_init_choice_selector(s);
    }, 500);
  else {
    var t = $("#" + s + "_toolbutton_mychoice_selector");
    0 < t.length &&
      t.selectmenu({
        width: 230,
        position: {
          collision: "flip",
        },
        create: function (t, e) {
          $("#" + this.id + "-button")
            .children("span.colorholder")
            .remove();
          var a = document.createElement("span");
          a.setAttribute("class", "colorholder"),
            document.getElementById(this.id + "-button").appendChild(a);
        },
        select: function (t, e) {
          map_set_mychoice(s);
        },
        open: function (t, e) {
          $("ul#" + s + "_toolbutton_mychoice_selector-menu")
            .children("li")
            .each(function (t) {
              this.setAttribute(
                "data-value",
                document.getElementById(s + "_toolbutton_mychoice_selector")
                  .options[t].value
              );
              var e = document.getElementById(
                  s + "_toolbutton_mychoice_selector"
                ).options[t].value,
                a = $(this).children("div").text(),
                r = document.createElement("div");
              $(r).addClass("colordot");
              var i = area_events.getAreaColor(e);
              if ("object" == typeof i) {
                var o = {
                  "background-color": "rgba(" + i.rgb_string + ", 0.8)",
                  border: "1px solid rgba(" + i.rgb_string + ")",
                };
                $(r).css(o);
              }
              var n = document.createElement("div");
              $(n).addClass("name"),
                $(n).text(a),
                $(this).children("div").html(""),
                $(this).children("div").prepend($(r)),
                $(this).children("div").append($(n));
            });
        },
      });
  }
}
var robots_fetched,
  area_events = !(MIR.constants.MAP = {
    world: {
      REAL: 0,
      MAP: 1,
      VIEWPORT: 2,
      DOM: 3,
    },
    state: {
      MAPPING: 0,
      FINALIZING: 1,
      ROTATING: 2,
      APPENDING: 3,
      READY: 4,
    },
    tools: {
      SELECTOR: "itemselector",
      NAVIGATOR: "navigator",
      DELETE: "itemeraser",
      POSITION: "drawposition",
    },
    choice_layers: {
      walls: "walls",
      positions: "positions",
      markers: "positions",
      floors: "floor",
      oneway: "oneway",
      preferred: "areaprefs_preferred",
      unpreferred: "areaprefs_unpreferred",
      forbidden: "areaprefs_forbidden",
      critical: "areaprefs_critical",
      blink: "areaevents_blink",
    },
  });
function map_init(Z, Q, tt, et, at, rt) {
  if (
    (!1 === area_events &&
      (area_events = new MIR.components.areaEvents()).init().then(function () {
        $.extend(MIR.constants.MAP.choice_layers, area_events.parsedAreas);
      }),
    area_events.loaded)
  ) {
    var it = document.getElementById(Z + "_mapcontainer"),
      o = (document.getElementById(Z + "_map"), $("#" + Z + "_map")),
      i = it.getAttribute("data-current-tool");
    map_init_choice_selector(Z);
    var n,
      s,
      ot = $(it);
    if (
      ($.extend(ot, {
        mir: {
          $container: ot,
          $holder: ot.find(".mapholder"),
          $map: ot.find(".map"),
          config: {
            CLICK_AREA_SIZE: 2,
          },
          is_locked: function () {
            return "true" === this.$container.attr("data-locked");
          },
          is_rotating: function () {
            return "true" === this.$container.attr("data-rotating");
          },
          is_editable: function () {
            return "true" === this.$container.attr("data-drawable");
          },
          is_robot_centered: function () {
            return "true" === this.$container.attr("data-center-robot");
          },
          get_tool: function () {
            return this.$container.attr("data-current-tool");
          },
          get_zoom: function () {
            return parseFloat(this.$container.attr("data-zoom-scale"));
          },
          get_guid: function () {
            return this.$container.attr("data-map-guid");
          },
          get_element_id: function () {
            return this.$container.attr("data-element-id");
          },
          get_viewport_size: function () {
            return {
              width: this.$holder.width(),
              height: this.$holder.height(),
            };
          },
          get_map_size: function () {
            return {
              width: this.$container.attr("data-map-width"),
              height: this.$container.attr("data-map-height"),
            };
          },
          set_map_cursor: function (t) {
            this.$container.find(".mapholder").css("cursor", t);
          },
          choice2layer: function (t) {
            return MIR.constants.MAP.choice_layers[t];
          },
          layer2choice: function (t) {
            for (var e in MIR.constants.MAP.choice_layers)
              if (MIR.constants.MAP.choice_layers[e] === t) return e;
          },
          get_chosen_layer: function () {
            var t = this.$container.attr("data-mychoice");
            return this.choice2layer(t);
          },
          dom_to_view: function (t) {
            var e = this.$holder.offset();
            return {
              x: t.x - e.left,
              y: t.y - e.top,
            };
          },
          view_to_map: function (t) {
            var e = this.$map.position(),
              a = this.get_zoom();
            return {
              x: (t.x - e.left) / a,
              y: (t.y - e.top) / a,
            };
          },
          dom_to_map: function (t) {
            return this.convert_coords(
              t,
              MIR.constants.MAP.world.DOM,
              MIR.constants.MAP.world.MAP
            );
          },
          get_origin: function () {
            return {
              x: this.$container.attr("data-origin-x"),
              y: this.$container.attr("data-origin-y"),
            };
          },
          get_scale: function () {
            return this.$container.attr("data-resscale");
          },
          real_to_map: function (t) {
            var e = this.get_scale(),
              a = this.get_origin(),
              r = this.get_map_size();
            return {
              x: t.x * e - a.x,
              y: r.height - (t.y * e - a.y),
            };
          },
          map_to_viewport: function (t) {
            var e = this.get_zoom(),
              a = this.get_map_offset();
            return {
              x: t.x * e + a.left,
              y: t.y * e + a.top,
            };
          },
          get_map_offset: function () {
            return {
              left: parseFloat(this.$container.attr("data-zoom-offset-left")),
              top: parseFloat(this.$container.attr("data-zoom-offset-top")),
            };
          },
          set_map_offset: function (t, e) {
            if (
              (this.$container.attr({
                "data-zoom-offset-left": t.left,
                "data-zoom-offset-top": t.top,
              }),
              this.$map.css({
                top: t.top + "px",
                left: t.left + "px",
              }),
              e)
            ) {
              var a = this.get_storage_id();
              MIR.storage.set(a, "data-zoom-offset-left", t.left),
                MIR.storage.set(a, "data-zoom-offset-top", t.top);
            }
          },
          get_storage_id: function () {
            return this.$container.attr("alt-id")
              ? this.$container.attr("alt-id") + "_" + this.get_guid()
              : this.get_element_id() + "_mapcontainer_" + this.get_guid();
          },
          get_saved_parameters: function () {
            var t = this.get_storage_id();
            return {
              zoom: MIR.storage.get(t, "data-zoom-scale"),
              offset_left: MIR.storage.get(t, "data-zoom-offset-left"),
              offset_top: MIR.storage.get(t, "data-zoom-offset-top"),
            };
          },
          get_click_area: function (t, e) {
            var a = MIR.constants.MAP.world,
              r = this.convert_coords(t, a.DOM, a.MAP),
              i =
                Math.max(e || 0, this.config.CLICK_AREA_SIZE) / this.get_zoom();
            return {
              top_left: {
                x: r.x - i,
                y: r.y - i,
              },
              bottom_right: {
                x: r.x + i,
                y: r.y + i,
              },
            };
          },
          get_position_sizing: function (t) {
            $pos = this.$container.find(".position:first");
            var e = parseFloat(90 - t.orientation).toFixed(2);
            $pos.css("transform", "rotate(0deg)");
            var a = Math.abs($pos.outerWidth());
            return $pos.css("transform", "rotate(" + e + "deg)"), a;
          },
          get_position_type: function (e) {
            return MIR.runtime.position_types.find(function (t) {
              return t.id == e;
            });
          },
          convert_coords: function (a, t, e) {
            var r,
              i = this;
            if (void 0 === t || void 0 === e)
              throw new Error("Worlds are undefined.");
            if (t < e)
              r = [
                this.real_to_map,
                this.map_to_viewport,
                function (t) {
                  return t;
                },
              ].slice(t, e);
            else {
              if (!(e < t)) return a;
              r = [
                function (t) {
                  return t;
                },
                this.view_to_map,
                this.dom_to_view,
              ]
                .slice(e, t)
                .reverse();
            }
            return (
              $.each(r, function (t, e) {
                a = e.call(i, a);
              }),
              a
            );
          },
          center_coords: function (t, e, a) {
            var r = this,
              i = this.convert_coords(t, e, MIR.constants.MAP.world.VIEWPORT),
              o = this.get_viewport_size(),
              n = this.get_map_offset(),
              s = {
                left: n.left - i.x + o.width / 2,
                top: n.top - i.y + o.height / 2,
              };
            (a = $.extend(
              {
                callback: !1,
                interval: 200,
              },
              a
            )),
              this.$map.finish().animate(
                {
                  top: s.top + "px",
                  left: s.left + "px",
                },
                {
                  easing: "linear",
                  duration: a.interval,
                  complete: function () {
                    r.set_map_offset(s, !0),
                      map_update_handles(r.get_element_id()),
                      "function" == typeof a.callback && a.callback();
                  },
                }
              );
          },
        },
      }),
      $.extend(!0, MIR.runtime, {
        maps: {},
        get_mission_queue_prompt: function (t, e) {
          var a = new MIR.ui.prompt({
            headline: mir_translate("Clear mission queue?"),
            message: mir_translate(
              "The mission queue is not empty. Do you want to clear it?"
            ),
            buttons: [
              new MIR.ui.button({
                label: mir_translate("Clear and queue"),
                attr: {
                  class: "mir-red",
                },
                events: {
                  click: function () {
                    t(), a.mir.$overlay.remove();
                  },
                },
              }),
              new MIR.ui.button({
                label: mir_translate("Append"),
                attr: {
                  class: "mir-green",
                },
                events: {
                  click: function () {
                    e(), a.mir.$overlay.remove();
                  },
                },
              }),
            ],
          });
        },
      }),
      (MIR.runtime.maps[Z] = ot),
      void 0 === MIR.runtime.position_types &&
        ((MIR.runtime.position_types = null),
        $.getJSON(
          "/?mode=get-data&endpoint=/position_types?only_data=true",
          function (t) {
            MIR.runtime.position_types = t.results;
          }
        )),
      $(window).keydown(function (t) {
        if (t.keyCode == MIR.ui.constants.KEY_SPACE) {
          var e = !1;
          if (
            ($(document.activeElement).is("input") && (e = !0),
            !window.map_space_holding &&
              !e &&
              ((window.map_space_holding = !0),
              0 == $("#" + Z + "_mapdialogscreen:visible").length &&
                0 === $(".mir-overlay").length &&
                0 === $(".mapsettings_overlay:visible").length))
          ) {
            t.preventDefault();
            var a = it.getAttribute("data-rotating"),
              r = $("#" + Z + "_layer_robotmap");
            (n = o.css("cursor")),
              (s = ot.attr("data-current-tool")),
              ot.attr("data-current-tool", "navigator"),
              $("#" + Z + "_mapdrawer")
                .data("was-visible", $("#" + Z + "_mapdrawer").is(":visible"))
                .hide(),
              "true" == a && (o.children().hide(), r.show()),
              o
                .data("draggable", o.draggable("option", "disabled"))
                .draggable("enable")
                .css("cursor", "move")
                .find("*")
                .each(function (t, e) {
                  var a = $(e);
                  a.data("pointer-events", a.css("pointer-events"))
                    .css("pointer-events", "")
                    .data("cursor", a.css("cursor"))
                    .css("cursor", "inherit");
                });
          }
        }
        if (t.keyCode == MIR.ui.constants.KEY_SHIFT) {
          window.map_shift_holding = !0;
          var i = it.getAttribute("data-current-tool");
          ("shapedrawer" == i || "linedrawer" == i) &&
            0 < window[Z + "_localpoints"].length &&
            map_draw_helpline(Z, !0);
        }
      }),
      $(window).keyup(function (t) {
        if (
          t.keyCode == MIR.ui.constants.KEY_SPACE &&
          ((window.map_space_holding = !1),
          0 == $("#" + Z + "_mapdialogscreen:visible").length &&
            0 === $(".mir-overlay").length &&
            0 === $(".mapsettings_overlay:visible").length)
        ) {
          (0 < it.getAttribute("data-selected-shape").length ||
            "linedrawer" == i ||
            "shapedrawer" == i) &&
            map_update_handles(Z),
            $("#" + Z + "_mapdrawer").data("was-visible") &&
              $("#" + Z + "_mapdrawer").show();
          var e = it.getAttribute("data-rotating"),
            a = $("#" + Z + "_layer_robotmap"),
            r = $("#" + Z + "_layer_draw");
          "true" == e && (a.show(), r.show()),
            ot.attr("data-current-tool", s),
            o.css("cursor", n).children().css("cursor", "");
        }
        t.keyCode == MIR.ui.constants.KEY_SHIFT &&
          ((window.map_shift_holding = !1), map_clean_helpline(Z));
      }),
      (window["map_" + Z + "_last_mouse_x"] = 0),
      (window["map_" + Z + "_last_mouse_y"] = 0),
      (window["map_" + Z + "_hitpoint"] = !1),
      $(document).on("mousemove", "#" + Z + "_mapdrawer", function (t) {
        if (null == t.originalEvent.offsetX) {
          var e = document
            .getElementById(Z + "_mapdrawer")
            .getBoundingClientRect();
          (window["map_" + Z + "_last_mouse_x"] =
            t.originalEvent.touches[0].clientX - e.left),
            (window["map_" + Z + "_last_mouse_y"] =
              t.originalEvent.touches[0].clientY - e.top);
        } else (window["map_" + Z + "_last_mouse_x"] = t.originalEvent.offsetX), (window["map_" + Z + "_last_mouse_y"] = t.originalEvent.offsetY);
      }),
      map_toolbars_place(),
      $("#" + Z + "_maplayercontroller")
        .find(".layercontrollerrow")
        .remove(),
      $("#" + Z + "_map")
        .find(".layer")
        .remove(),
      "false" == it.getAttribute("data-initializing"))
    ) {
      it.setAttribute("data-initializing", "true");
      var t = {
        mode: "get-map-data",
      };
      (t.id = Q),
        (t.pageviewid = pageviewid),
        $.get("/", t, function (t) {
          var a = !0,
            r = $("#" + Z + "_toolbutton_mychoice_selector").attr(
              "areaevents-edit-allowed"
            ),
            i = $("#" + Z + "_toolbutton_mychoice_selector").attr(
              "positions-edit-allowed"
            );
          -1 == t.allowed_methods.indexOf("PUT")
            ? ((a = !1), it.setAttribute("data-allow-edit", "false"))
            : it.setAttribute("data-allow-edit", "true"),
            $("#" + Z + "_toolbutton_mychoice_selector")
              .children("option")
              .each(function () {
                var t = this.getAttribute("value"),
                  e = MIR.constants.MAP.choice_layers[t];
                ("markers" != t && "positions" != t) ||
                  1 == i ||
                  $(this).remove(),
                  ((("walls" == t || "floors" == t || "oneway" == t) &&
                    1 != a) ||
                    (void 0 !== e && -1 < e.indexOf("areaprefs_") && 1 != a)) &&
                    $(this).remove(),
                  void 0 !== e &&
                    -1 < e.indexOf("areaevents_") &&
                    1 != r &&
                    $(this).remove();
              }),
            -1 == t.allowed_methods.indexOf("DELETE")
              ? it.setAttribute("data-allow-delete", "false")
              : it.setAttribute("data-allow-delete", "true");
          var e = t.metadata;
          it.setAttribute("data-custommap", t.custommap),
            (window["map_" + Z + "_metadata"] = t.metadata),
            area_events.setWindowLayers(Z),
            $.extend(!0, MIR.runtime, {
              layers: {},
            }),
            (MIR.runtime.layers[Z] = window["map_" + Z + "_metadata"].layers);
          var o = t.resolution,
            n = 1 / o,
            s = e.width,
            d = e.height,
            l = (1 / o) * t.origin_x,
            p = (1 / o) * t.origin_y;
          it.setAttribute("data-resolution", o),
            it.setAttribute("data-resscale", n),
            it.setAttribute("data-origin-x", l),
            it.setAttribute("data-origin-y", p);
          var m = document.getElementById(Z + "_map"),
            u = (document.getElementById(Z + "_mapdrawer"), new Date()),
            c = document.createElement("img");
          c.setAttribute(
            "src",
            "/?mode=get-map&calltype=light&id=" +
              Q +
              "&t=" +
              Math.floor(u.getTime() / 1e3)
          ),
            c.setAttribute("data-elementid", Z),
            c.setAttribute("data-mapid", Q),
            c.setAttribute("id", Z + "_real_robotmap");
          var _ = document.createElement("div");
          _.setAttribute("class", "layer"),
            _.appendChild(c),
            _.setAttribute("id", Z + "_layer_robotmap"),
            _.setAttribute("data-layertype", "robotmap"),
            m.appendChild(_),
            map_add_layercontrol(Z, Q, "Robot map", "robotmap", !0, !1);
          u = new Date();
          var g = document.createElement("img");
          g.setAttribute("width", s),
            g.setAttribute("height", d),
            g.setAttribute("id", Z + "_real_basemap_floor_img"),
            g.setAttribute("src", "data:image/png;base64, " + e.base_map_floor);
          var h = document.createElement("canvas");
          h.setAttribute("id", Z + "_real_basemap_floor");
          h.getContext("2d");
          $(h).hide();
          var f = document.createElement("div");
          f.setAttribute("class", "layer"),
            f.setAttribute("id", Z + "_layer_basemap_floor"),
            f.setAttribute("data-layertype", "basemap"),
            f.appendChild(h),
            f.appendChild(g),
            m.appendChild(f),
            map_add_layercontrol(
              Z,
              Q,
              "Base map floor",
              "basemap_floor",
              !0,
              !0
            );
          var v = document.createElement("div");
          v.setAttribute("class", "layer"),
            v.setAttribute("id", Z + "_layer_floor"),
            v.setAttribute("style", "width: " + s + "px; height: " + d + "px"),
            m.appendChild(v);
          var b = document.createElement("iframe");
          b.setAttribute(
            "src",
            "/?calltype=light&mode=map-get-svg&pageviewid=" +
              pageviewid +
              "&id=" +
              Q +
              "&layer=floor&eid=" +
              Z
          ),
            b.setAttribute("width", s),
            b.setAttribute("height", d),
            b.setAttribute("frameborder", 0),
            b.setAttribute("scrolling", "no"),
            b.setAttribute("id", Z + "_layer_floor_svg"),
            b.setAttribute("data-element-id", Z),
            v.appendChild(b),
            map_add_layercontrol(Z, Q, "Floors", "floor", !0, !0);
          var y = document.createElement("div");
          y.setAttribute("class", "layer"),
            y.setAttribute("id", Z + "_layer_oneway"),
            m.appendChild(y);
          var w = document.createElement("iframe");
          w.setAttribute(
            "src",
            "/?calltype=light&mode=map-get-svg&pageviewid=" +
              pageviewid +
              "&id=" +
              Q +
              "&layer=oneway&eid=" +
              Z
          ),
            w.setAttribute("width", s),
            w.setAttribute("height", d),
            w.setAttribute("frameborder", 0),
            w.setAttribute("scrolling", "no"),
            w.setAttribute("data-element-id", Z),
            y.appendChild(w);
          var A = [];
          A.push("preferred"),
            A.push("unpreferred"),
            A.push("forbidden"),
            A.push("critical");
          for (var E = 0; E < A.length; ) {
            var x = document.createElement("div");
            x.setAttribute("class", "layer"),
              x.setAttribute("id", Z + "_layer_areaprefs_" + A[E]),
              m.appendChild(x);
            var I = document.createElement("iframe");
            I.setAttribute(
              "src",
              "/?calltype=light&mode=map-get-svg&pageviewid=" +
                pageviewid +
                "&id=" +
                Q +
                "&layer=areaprefs_" +
                A[E] +
                "&eid=" +
                Z
            ),
              I.setAttribute("width", s),
              I.setAttribute("height", d),
              I.setAttribute("frameborder", 0),
              I.setAttribute("scrolling", "no"),
              I.setAttribute("data-element-id", Z),
              x.appendChild(I),
              map_add_layercontrol(
                Z,
                Q,
                capitalize(A[E]),
                "areaprefs_" + A[E],
                !0,
                !0
              ),
              E++;
          }
          area_events.areas.forEach(function (t) {
            var e = document.createElement("div");
            e.setAttribute("class", "layer"),
              e.setAttribute("id", Z + "_layer_areaevents_" + t.legacyName),
              m.appendChild(e);
            var a = new Date(),
              r = document.createElement("iframe");
            r.setAttribute(
              "src",
              "/?calltype=light&mode=map-get-svg&pageviewid=" +
                pageviewid +
                "&id=" +
                Q +
                "&layer=areaevents_" +
                t.legacyName +
                "&eid=" +
                Z +
                "&s=" +
                a.getTime()
            ),
              r.setAttribute("width", s),
              r.setAttribute("height", d),
              r.setAttribute("frameborder", 0),
              r.setAttribute("scrolling", "no"),
              r.setAttribute("data-element-id", Z),
              e.appendChild(r),
              map_add_layercontrol(
                Z,
                Q,
                t.name,
                "areaevents_" + t.legacyName,
                !0,
                !0
              );
          });
          var B = document.createElement("div");
          B.setAttribute("class", "layer"),
            B.setAttribute("id", Z + "_layer_paths"),
            B.setAttribute("style", "width: " + s + "px; height: " + d + "px"),
            m.appendChild(B);
          var M = document.createElement("iframe");
          M.setAttribute(
            "src",
            "/?calltype=light&mode=map-get-svg&pageviewid=" +
              pageviewid +
              "&id=" +
              Q +
              "&layer=paths&eid=" +
              Z
          ),
            M.setAttribute("width", s),
            M.setAttribute("height", d),
            M.setAttribute("frameborder", 0),
            M.setAttribute("scrolling", "no"),
            M.setAttribute("id", Z + "_layer_paths_svg"),
            M.setAttribute("data-element-id", Z),
            B.appendChild(M),
            map_add_layercontrol(Z, Q, "Paths", "paths", !0, !0);
          var C = document.createElement("img");
          C.setAttribute("id", Z + "_gridmap"),
            C.setAttribute("data-element-id", Z);
          var k = document.createElement("div");
          k.setAttribute("class", "layer"),
            k.setAttribute("id", Z + "_layer_gridmap"),
            k.setAttribute("data-layertype", "gridmap"),
            k.appendChild(C),
            m.appendChild(k),
            map_add_layercontrol(Z, Q, "Grid map", "gridmap", !0, !1);
          var T = document.createElement("img");
          T.setAttribute("width", s),
            T.setAttribute("height", d),
            T.setAttribute("id", Z + "_real_basemap_walls_img"),
            T.setAttribute("src", "data:image/png;base64, " + e.base_map_walls);
          var z = document.createElement("canvas");
          z.setAttribute("id", Z + "_real_basemap_walls");
          z.getContext("2d");
          $(z).hide();
          var R = document.createElement("div");
          R.setAttribute("class", "layer"),
            R.setAttribute("id", Z + "_layer_basemap_walls"),
            R.setAttribute("data-layertype", "basemap"),
            R.appendChild(z),
            R.appendChild(T),
            m.appendChild(R),
            map_add_layercontrol(
              Z,
              Q,
              "Base map walls",
              "basemap_walls",
              !0,
              !0
            );
          var L = document.createElement("div");
          L.setAttribute("class", "layer"),
            L.setAttribute("id", Z + "_layer_walls"),
            L.setAttribute("style", "width: " + s + "px; height: " + d + "px"),
            m.appendChild(L);
          var F = document.createElement("iframe");
          F.setAttribute(
            "src",
            "/?calltype=light&mode=map-get-svg&pageviewid=" +
              pageviewid +
              "&id=" +
              Q +
              "&layer=walls&eid=" +
              Z
          ),
            F.setAttribute("width", s),
            F.setAttribute("height", d),
            F.setAttribute("frameborder", 0),
            F.setAttribute("scrolling", "no"),
            F.setAttribute("data-element-id", Z),
            L.appendChild(F),
            map_add_layercontrol(Z, Q, "Walls", "walls", !0, !0);
          var P = document.createElement("img");
          P.setAttribute("id", Z + "_laserscans"),
            P.setAttribute("data-element-id", Z);
          var S = document.createElement("div");
          S.setAttribute("class", "layer"),
            S.setAttribute("id", Z + "_layer_laserscans"),
            S.setAttribute("data-layertype", "laserscans"),
            S.appendChild(P),
            m.appendChild(S),
            map_add_layercontrol(Z, Q, "Laser scans", "laserscans", !0, !1);
          var D = document.createElement("div");
          D.setAttribute("class", "layer"),
            D.setAttribute("data-layertype", "path"),
            D.setAttribute("id", Z + "_layer_path");
          var N = document.createElementNS("http://www.w3.org/2000/svg", "svg");
          N.setAttribute("id", "layer_path_svg_" + Z),
            N.setAttribute("x", "0px"),
            N.setAttribute("y", "0px"),
            N.setAttribute("width", s + "px"),
            N.setAttribute("height", d + "px"),
            N.setAttribute("viewbox", "0 0 " + s + " " + d),
            N.setAttribute("version", "1.1"),
            N.setAttribute("xml:space", "preserve");
          var H = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "polyline"
          );
          H.setAttribute("id", "robot_path_points_" + Z),
            H.setAttribute("polygon", ""),
            H.setAttribute("fill", "none"),
            H.setAttribute("stroke-width", "3"),
            H.setAttribute("stroke-linejoin", "round"),
            H.setAttribute("stroke-linecap", "round"),
            H.setAttribute("stroke-dasharray", "0, 8"),
            H.setAttribute("stroke", "#004771"),
            N.appendChild(H),
            D.appendChild(N),
            m.appendChild(D),
            map_add_layercontrol(Z, Q, "Path", "path", !0, !1);
          var X = document.createElement("div");
          X.setAttribute("class", "layer"),
            X.setAttribute("data-layertype", "positions"),
            X.setAttribute("id", Z + "_layer_positions"),
            X.setAttribute("style", "width: " + s + "px; height: " + d + "px"),
            m.appendChild(X),
            map_add_layercontrol(Z, Q, "Positions", "positions", !0, !1);
          var j = document.createElement("div");
          j.setAttribute("class", "layer"),
            j.setAttribute("data-layertype", "mapping"),
            j.setAttribute("id", Z + "_layer_mapping"),
            m.appendChild(j);
          var O = document.createElement("div");
          O.setAttribute("class", "robot"),
            O.setAttribute("id", Z + "_layer_robot_robot");
          var Y = $(
              document.createElementNS("http://www.w3.org/2000/svg", "polygon")
            ).attr({
              transform: "rotate(90), translate(15 -15)",
            }),
            q = $(document.createElementNS("http://www.w3.org/2000/svg", "svg"))
              .attr({
                id: Z + "_layer_footprint_footprint",
                class: "footprint",
              })
              .append(Y),
            G = document.createElement("div");
          G.setAttribute("class", "cart"),
            G.setAttribute("id", Z + "_layer_cart_cart");
          var W = document.createElement("div");
          W.setAttribute("class", "layer"),
            W.setAttribute("data-layertype", "robot"),
            W.setAttribute("id", Z + "_layer_robot"),
            W.setAttribute("style", "width: " + s + "px; height: " + d + "px"),
            W.appendChild(O),
            W.appendChild(q[0]),
            W.appendChild(G),
            m.appendChild(W),
            map_add_layercontrol(Z, Q, "Robot", "robot", !0, !1);
          var U = document.createElement("div");
          U.setAttribute("class", "layer"),
            U.setAttribute("data-layertype", "tmpsvg"),
            U.setAttribute("id", Z + "_layer_tmpsvg"),
            m.appendChild(U);
          var V = document.createElement("canvas");
          V.setAttribute("id", Z + "_layer_draw_canvas"),
            V.setAttribute("width", s),
            V.setAttribute("height", d);
          var K = document.createElement("div");
          K.setAttribute("class", "layer"),
            K.setAttribute("data-layertype", "draw"),
            K.setAttribute("id", Z + "_layer_draw"),
            K.appendChild(V),
            m.appendChild(K);
          var J = document.createElement("div");
          J.setAttribute("class", "layer"),
            J.setAttribute("data-layertype", "patheditor"),
            J.setAttribute("id", Z + "_layer_patheditor"),
            m.appendChild(J),
            (c.onload = function () {
              if ("&silent=true" == this.getAttribute("src").slice(-12));
              else {
                map_start_pathmap(this.getAttribute("data-elementid"));
                var f = document.getElementById(
                  this.getAttribute("data-elementid") + "_mapcontainer"
                );
                f.setAttribute("data-map-width", this.width),
                  f.setAttribute("data-map-height", this.height);
                var t = this.getAttribute("data-mapid"),
                  v = this.getAttribute("data-elementid");
                map_set_mychoice(v);
                var e = {
                  mode: "get-map-positions",
                  calltype: "light",
                };
                (e.id = t),
                  $.ajax({
                    mapid: t,
                    elementid: v,
                    url: "/",
                    data: e,
                    method: "GET",
                    dataType: "json",
                    success: function (t) {
                      for (
                        var e = document.getElementById(
                            this.elementid + "_mapcontainer"
                          ),
                          a = document.getElementById(
                            this.elementid + "_layer_positions"
                          ),
                          r = e.getAttribute("data-resscale"),
                          i = e.getAttribute("data-origin-x"),
                          o = e.getAttribute("data-origin-y"),
                          n = e.getAttribute("data-map-height"),
                          s = 0;
                        s < t.length;

                      ) {
                        (t[s].pos_left = t[s].pos_x * r - i),
                          (t[s].pos_top = n - (t[s].pos_y * r - o));
                        var d = document.createElement("div");
                        d.setAttribute("class", "position"),
                          d.setAttribute("data-guid", t[s].guid),
                          d.setAttribute("data-type-id", t[s].type_id),
                          d.setAttribute("data-name", t[s].name),
                          d.setAttribute("data-parent-id", ""),
                          d.setAttribute(
                            "data-map-guid",
                            e.getAttribute("data-map-guid")
                          ),
                          a.appendChild(d),
                          (m = document.createElement("img")).setAttribute(
                            "src",
                            "/graphics/icon_position_" + t[s].type_id + ".svg"
                          ),
                          d.appendChild(m);
                        var l = 90 - t[s].orientation;
                        $(d).css("left", t[s].pos_left + "px"),
                          $(d).css("top", t[s].pos_top + "px"),
                          $(d).css("WebkitTransform", "rotate(" + l + "deg)"),
                          $(d).css("-moz-transform", "rotate(" + l + "deg)"),
                          $(d).css("-ms-transform", "rotate(" + l + "deg)"),
                          $(d).css("transform", "rotate(" + l + "deg)");
                        for (var p = 0; p < t[s].child_positions.length; ) {
                          (t[s].child_positions[p].pos_left =
                            t[s].child_positions[p].pos_x * r - i),
                            (t[s].child_positions[p].pos_top =
                              n - (t[s].child_positions[p].pos_y * r - o)),
                            (t[s].child_positions[p].orientation =
                              90 - t[s].child_positions[p].orientation);
                          var m,
                            u = document.createElement("div");
                          u.setAttribute("class", "child_position"),
                            u.setAttribute(
                              "data-guid",
                              t[s].child_positions[p].guid
                            ),
                            u.setAttribute(
                              "data-name",
                              t[s].child_positions[p].name
                            ),
                            u.setAttribute(
                              "data-map-guid",
                              e.getAttribute("data-map-guid")
                            ),
                            u.setAttribute("data-parent-id", t[s].guid),
                            u.setAttribute(
                              "data-type-id",
                              t[s].child_positions[p].type_id
                            ),
                            a.appendChild(u),
                            (m = document.createElement("img")).setAttribute(
                              "src",
                              "/graphics/icon_position_helper.svg"
                            ),
                            u.appendChild(m),
                            $(u).css(
                              "left",
                              t[s].child_positions[p].pos_left + "px"
                            ),
                            $(u).css(
                              "top",
                              t[s].child_positions[p].pos_top + "px"
                            ),
                            $(u).css(
                              "WebkitTransform",
                              "rotate(" +
                                t[s].child_positions[p].orientation +
                                "deg)"
                            ),
                            $(u).css(
                              "-moz-transform",
                              "rotate(" +
                                t[s].child_positions[p].orientation +
                                "deg)"
                            ),
                            $(u).css(
                              "-ms-transform",
                              "rotate(" +
                                t[s].child_positions[p].orientation +
                                "deg)"
                            ),
                            $(u).css(
                              "transform",
                              "rotate(" +
                                t[s].child_positions[p].orientation +
                                "deg)"
                            ),
                            p++;
                        }
                        s++;
                      }
                      var c = {};
                      (c[v] = t),
                        $.extend(!0, MIR.runtime, {
                          positions: c,
                        });
                      var _ = MIR.storage.get(
                          ot.mir.get_storage_id(),
                          "data-center-robot"
                        ),
                        g = !0;
                      if ("false" == f.getAttribute("data-locked"))
                        if ((map_set_guide(v, map_lang_guide_ready), et))
                          map_record_start(v, !0, at);
                        else if (rt) map_finalizing_start(v), (g = !1);
                        else if (at)
                          map_center_map(v, !1, !0), map_appendplacer_start(v);
                        else if (1 == tt) map_rotate_start(v);
                        else {
                          var h = ot.mir.get_saved_parameters();
                          h.zoom && h.offset_left && h.offset_top
                            ? (map_zoom(ot.mir.get_element_id(), h.zoom, {
                                interval: 0,
                                callback: function () {
                                  ot.mir.set_map_offset(
                                    {
                                      top: h.offset_top,
                                      left: h.offset_left,
                                    },
                                    !0
                                  );
                                },
                              }),
                              _ && map_toggle_center_robot(v, !0))
                            : map_center_map(v, !1);
                        }
                      else
                        rt
                          ? (map_finalizing_start(v), (g = !1))
                          : (map_zoom(v, 2, {
                              interval: 0,
                            }),
                            map_toggle_center_robot(v, !0));
                      g && f.setAttribute("data-initializing", "false");
                    },
                  });
              }
            }),
            (window["map_" + Z + "_pathseq"] = -1),
            "false" == it.getAttribute("data-locked") &&
              (map_start_laserscans(Z), map_start_gridmap(Z)),
            "fleet" == systemtype &&
              (map_fleet_init(Z), it.getAttribute("data-locked")),
            map_init_click_handler(MIR.runtime.maps[Z]),
            map_init_scroll_zoom(MIR.runtime.maps[Z]);
        }).fail(function (t) {
          console.warn(t.responseText);
        }),
        "false" == it.getAttribute("data-locked") && map_navigator(Z);
    }
    return !0;
  }
  setTimeout(function () {
    map_init(Z, Q, tt, et, at, rt);
  }, 500);
}
function activate_laserscans() {
  if ("robot" == systemtype) {
    var t = new ROSLIB.Service({
        ros: ros,
        name: "/mirwebapp/command",
        serviceType: "mirWebApp/Command",
      }),
      e = new ROSLIB.ServiceRequest({
        cmd: "cont:5",
      });
    t.callService(e, function (t) {});
  }
}
function map_start_pathmap(l) {
  if ("robot" == systemtype) {
    var p = document.getElementById(l + "_mapcontainer");
    p.getAttribute("data-map-guid") == robot_map_id &&
      ((window["ros_path_listener_" + l] = new ROSLIB.Topic({
        ros: ros,
        name: "/mirwebapp/web_path",
        messageType: "mirMsgs/WebPath",
        throttle_rate: 10,
      })),
      window["ros_path_listener_" + l].subscribe(function (t) {
        if (p.getAttribute("data-map-guid") == robot_map_id) {
          var e = document.getElementById(l + "_mapcontainer"),
            a = e.getAttribute("data-map-height"),
            r = e.getAttribute("data-resscale"),
            i = e.getAttribute("data-origin-x"),
            o = e.getAttribute("data-origin-y");
          window["map_" + l + "_pathseq"] = t.seq;
          for (var n = 0, s = ""; n < t.x.length; ) {
            (s += t.x[n] * r - i + " " + (a - (t.y[n] * r - o)) + " "), n++;
          }
          var d = document.getElementById("robot_path_points_" + l);
          d && d.setAttribute("points", s);
        }
      }));
  }
  return !0;
}
function map_start_gridmap(o) {
  if ("robot" == systemtype) {
    var t = document.getElementById(o + "_mapcontainer");
    if (
      ((window["map_" + o + "_gridmap_idx"] = -1),
      t.getAttribute("data-map-guid") == robot_map_id)
    )
      new ROSLIB.Topic({
        ros: ros,
        name: "/mirwebapp/grid_map_metadata",
        messageType: "mirMsgs/LocalMapStat",
        throttle_rate: 10,
      }).subscribe(function (r) {
        if (document.getElementById(o + "_gridmap")) {
          var t = document.getElementById(o + "_gridmap"),
            i = document.getElementById(o + "_mapcontainer");
          if (-1 == window["map_" + o + "_gridmap_idx"]) {
            var e = new Date();
            (t.src =
              "/robot-images/grid_map/grid_map_" +
              r.idx +
              ".png?t=" +
              e.getTime()),
              (window["map_" + o + "_gridmap_idx"] = r.idx),
              (t.onload = function () {
                var t = i.getAttribute("data-map-height"),
                  e = r.x - this.width / 2,
                  a = parseFloat(t) + (r.y - this.height / 2);
                $(this).css("top", a + "px"),
                  $(this).css("left", e + "px"),
                  (window["map_" + o + "_gridmap_idx"] = -1);
              });
          }
        }
      });
  }
  return !0;
}
function map_start_laserscans(o) {
  if ("robot" == systemtype) {
    var t = document.getElementById(o + "_mapcontainer");
    if (
      ((window["map_" + o + "_laserscans_agent_timer"] = 0),
      (window["map_" + o + "_laserscans_idx"] = -1),
      window["map_" + o + "_laserscans_agent"] &&
        window.clearInterval(window["map_" + o + "_laserscans_agent"]),
      window["map_" + o + "_laserscantimer"] &&
        window.clearInterval(window["map_" + o + "_laserscantimer"]),
      t.getAttribute("data-map-guid") == robot_map_id)
    )
      (window["map_" + o + "_laserscantimer"] = setInterval(
        (function t() {
          return activate_laserscans(), t;
        })(),
        8e3
      )),
        (window["map_" + o + "_laserscans_agent"] = setInterval(function () {
          var t = new Date();
          window["map_" + o + "_laserscans_agent_timer"] < t.getTime() - 3e3 &&
            0 < window["map_" + o + "_laserscans_agent_timer"] &&
            (window.clearInterval(window["map_" + o + "_laserscans_agent"]),
            window.clearInterval(window["map_" + o + "_laserscantimer"]),
            map_start_laserscans(o),
            map_start_gridmap(o),
            map_start_pathmap(o));
        }, 5e3)),
        new ROSLIB.Topic({
          ros: ros,
          name: "/mirwebapp/laser_map_metadata",
          messageType: "mirMsgs/LocalMapStat",
          throttle_rate: 10,
        }).subscribe(function (r) {
          if (document.getElementById(o + "_laserscans")) {
            var t = document.getElementById(o + "_laserscans"),
              i = document.getElementById(o + "_mapcontainer"),
              e = new Date().getTime();
            (window["map_" + o + "_laserscans_agent_timer"] = e),
              -1 == window["map_" + o + "_laserscans_idx"] &&
                ((t.src =
                  "/robot-images/laser_map/laser_map_" + r.idx + ".png?t=" + e),
                (window["map_" + o + "_laserscans_idx"] = r.idx),
                (t.onload = function () {
                  var t = i.getAttribute("data-map-height"),
                    e = r.x - this.width / 2,
                    a = parseFloat(t) + (r.y - this.height / 2);
                  $(this).css("top", a + "px"),
                    $(this).css("left", e + "px"),
                    (window["map_" + o + "_laserscans_idx"] = -1);
                }));
          }
        });
  }
  return !0;
}
function map_isolate_layer(t, e) {
  var a = $("#" + t + "_mapholder").find("div.layer"),
    r = [],
    i = 0;
  $("#" + t + "_maplayercontroller > tr.layercontrollerrow").attr(
    "data-active",
    "false"
  ),
    $("#" + t + "_maplayercontroller")
      .find("tr.layercontrollerrow")
      .find("td")
      .find("div.view")
      .attr("data-active", "false"),
    $(
      "#" +
        t +
        "_maplayercontroller > tr.layercontrollerrow[data-systemname='" +
        e +
        "']"
    ).attr("data-active", "true"),
    $("#" + t + "_maplayercontroller_viewcontrol_" + e).attr(
      "data-active",
      "true"
    ),
    (i =
      "floor" === e || "walls" === e
        ? ((r = [
            "#" + t + "_layer_basemap_floor",
            "#" + t + "_layer_floor",
            "#" + t + "_layer_basemap_walls",
            "#" + t + "_layer_walls",
            "#" + t + "_layer_draw",
          ]),
          0)
        : ((r = ["#" + t + "_layer_" + e]), 0.2)),
    a.not(r.join(",")).css("opacity", i),
    a.filter(r.join(",")).css("opacity", 1);
}
function checkDialogBoxIsVisible(t) {
  return !!$("." + t[0].className).find(".box").length;
}
function map_init_scroll_zoom(i) {
  var e = MIR.util.throttle(function (t) {
    var e = i.mir,
      a = MIR.constants.MAP.world,
      r =
        !e.is_robot_centered() &&
        e.convert_coords(
          {
            x: t.pageX,
            y: t.pageY,
          },
          a.DOM,
          a.VIEWPORT
        );
    t.deltaY < 0
      ? map_zoom(i.mir.get_element_id(), "out", {
          zoom_to_coords: r,
          interval: 300,
        })
      : map_zoom(i.mir.get_element_id(), "in", {
          zoom_to_coords: r,
          interval: 300,
        });
  }, 300);
  if ((i.off("mousewheel.zoom"), i.mir.is_locked())) return !1;
  i.on("mousewheel.zoom", function (t) {
    return (
      checkDialogBoxIsVisible(i)
        ? (i.off("mousewheel.zoom"),
          $("#cancel").on("click", function () {
            map_init_scroll_zoom(i);
          }),
          $("#submit").on("click", function () {
            map_init_scroll_zoom(i);
          }))
        : e(t),
      !1
    );
  });
}
function map_show_all_layers(t) {
  var e = document.getElementById(t + "_mapcontainer");
  $("#" + t + "_mapholder")
    .find("div.layer")
    .not("[data-layertype='grid']")
    .show(),
    $("#" + t + "_mapholder")
      .find("div.layer")
      .not("[data-layertype='grid']")
      .css("opacity", 1),
    $("#" + t + "_mapholder")
      .find("div.layer")
      .not("[data-layertype='grid']")
      .css("pointer-events", ""),
    $("#" + t + "_mapholder")
      .find("div.layer#" + t + "_layer_draw")
      .hide(),
    $("#" + t + "_maplayercontroller")
      .find("tr.layercontrollerrow")
      .find("td")
      .find("div.view")
      .attr("data-active", "true"),
    $("#" + t + "_mapholder")
      .find("div.layer#" + t + "_layer_robotmap")
      .hide(),
    $("#" + t + "_maplayercontroller")
      .find("tr.layercontrollerrow[data-systemname='robotmap']")
      .find("td")
      .find("div.view")
      .attr("data-active", "false"),
    "walls" == e.getAttribute("data-mychoice") ||
    "floors" == e.getAttribute("data-mychoice")
      ? $("#" + t + "_mapholder")
          .find("div.layer#" + t + "_layer_positions")
          .hide()
      : document.getElementById(
          t + "_maplayercontroller_viewcontrol_positions"
        ) &&
        $("#" + t + "_mapholder")
          .find("div.layer#" + t + "_layer_positions")
          .show();
}
function map_init_click_handler(y) {
  var w = y.mir;
  if ((y.off("click.map-click"), w.is_locked())) return !1;
  y.on("click.map-click touchend", "div.mapholder", function (t) {
    if (w.is_rotating()) return !1;
    var m = MIR.runtime.positions[w.get_element_id()],
      e = MIR.runtime.layers[w.get_element_id()],
      s = MIR.math,
      n = MIR.constants.MAP.tools;
    if (-1 !== $.inArray(w.get_tool(), [n.SELECTOR, n.NAVIGATOR, n.DELETE])) {
      if (null == t.pageX || null == t.pageY) {
        if ("touchend" != t.type) return;
        t.originalEvent.pageX && t.originalEvent.pageY
          ? ((t.pageX = t.originalEvent.pageX),
            (t.pageY = t.originalEvent.pageY))
          : ((t.pageX = t.changedTouches[0].pageX),
            (t.pageY = t.changedTouches[0].pageY));
      }
      var a = {
          x: t.pageX,
          y: t.pageY,
        },
        r = w.get_chosen_layer(),
        i = 1 <= y.find(".position").length,
        o = w.is_editable() && "positions" !== r;
      if (i && (!r || "positions" == r)) {
        var d = (function (t) {
            function a(t) {
              if (
                (($pos = $(
                  '.position[data-guid="' +
                    t.guid +
                    '"], .child_position[data-guid="' +
                    t.guid +
                    '"]'
                )),
                ($pos_offset = $pos.offset()),
                0 != $pos.length)
              ) {
                var e = Math.abs($pos.outerWidth() / 2),
                  a = {
                    x: $pos_offset.left + e,
                    y: $pos_offset.top + e,
                  };
                if (!s.check_point_in_circle(a, o, i)) return !1;
                var r = w.get_position_type(t.type_id);
                n.push({
                  name: t.name + " / " + mir_translate(r.name),
                  value: t.guid,
                });
              }
            }
            w.dom_to_map(t);
            var i = t,
              o = w.get_position_sizing(m[0]) / 2,
              n = [];
            return (
              $.each(m, function (t, e) {
                a(e),
                  e.show_children &&
                    $.each(e.child_positions, function (t, e) {
                      a(e);
                    });
              }),
              n
            );
          })(a),
          l = 1 <= y.find(".robot").length && "robot" === t.target.className;
        if (1 === d.length && !l)
          return void v(y.find("[data-guid='" + d.pop().value + "']")[0]);
        if (l) {
          $.each(d, function (t, e) {
            e.hasOwnProperty("im_a_robot") &&
              e.im_a_robot &&
              d.splice($.inArray(e, d), 1);
          });
          var p = t.target;
          d.push({
            value: p.getAttribute("robot-ip"),
            name: p.getAttribute("data-name"),
            im_a_robot: !0,
          });
        }
        if (1 < d.length)
          return (
            f(mir_translate("Pick a position"), d, function (t) {
              var e = y.find(
                "[data-guid='" +
                  t.value +
                  "'],.robot[robot-ip='" +
                  t.value +
                  "']"
              );
              if (t.hasOwnProperty("im_a_robot")) {
                var a = $(e).each(function (t, e) {
                  return !!e.classList.contains("robot");
                });
                return a.length && robot_dialog(a[0]), !1;
              }
              v(e[0]);
            }),
            !1
          );
      }
      if (o && "navigator" != w.get_tool()) {
        (layers_to_check = {}),
          r ? (layers_to_check[r] = e[r]) : (layers_to_check = e);
        var u,
          c,
          _,
          g,
          h =
            ((u = a),
            (c = layers_to_check),
            (_ = []),
            (g = w.dom_to_map(u)),
            $.each(c, function (o, t) {
              $.each(t.shapes, function (t, e) {
                if (
                  (!e.polygon &&
                    e.points &&
                    "object" == typeof e.points &&
                    (e.polygon = e.points),
                  e && e.polygon && e.polygon.constructor === Array)
                ) {
                  if ("stroke" !== e.type) {
                    if (!s.check_point_in_shape(g, e.polygon)) return;
                  } else if (
                    !s.check_polyline_area_intersect(
                      w.get_click_area(u, e.brushsize),
                      e.polygon
                    )
                  )
                    return;
                  if (!e.name) {
                    var a = w.layer2choice(o),
                      r = $(
                        "#" +
                          w.get_element_id() +
                          "_toolbutton_mychoice_selector"
                      )
                        .find('option[value="' + a + '"]')
                        .html(),
                      i = t + 1;
                    e.name = r + " (" + i + ")";
                  }
                  _.push({
                    name: e.name,
                    value: e.guid ? e.guid : generate_uuid(),
                    idx_layer: o,
                    idx_shape: t,
                  });
                }
              });
            }),
            _);
        if (0 !== h.length) {
          if (1 !== h.length)
            return (
              f(mir_translate("Choose an area"), h, function (t) {
                b(t);
              }),
              !1
            );
          b(h.pop());
        }
      }
    }
    function f(t, e, a) {
      var r = {
        header: t,
        parent: y,
        options: e,
        on_select: function (t, e) {
          t && a(e);
        },
        on_before_render: function (t) {
          t.mir.$dialog_label.hide(), t.mir.$dialog_input.hide();
        },
      };
      MIR.ui.search_dialog(r);
    }
    function v(t) {
      var e = $(t).find("img").attr("src");
      if (
        "7" ==
          (e = (e = e.replace("/graphics/icon_position_", "")).replace(
            ".svg",
            ""
          )) ||
        "9" == e ||
        "11" == e ||
        "13" == e ||
        "16" == e ||
        "18" == e ||
        "20" == e ||
        "22" == e ||
        "24" == e
      )
        var a = "marker";
      else a = "position";
      var i = t.parentNode.parentNode.parentNode.parentNode.parentNode;
      document.getElementById(
        i.getAttribute("data-element-id") + "_robotinfoscreen"
      );
      robot_dialog_close();
      var o = document.getElementById(
        i.getAttribute("data-element-id") + "_mapdialogscreen"
      );
      o.innerHTML = "";
      var r = document.createElement("div");
      r.setAttribute("class", "box"),
        r.setAttribute(
          "id",
          i.getAttribute("data-element-id") + "_position_box"
        ),
        o.appendChild(r);
      var n = document.createElement("h1");
      (n.innerHTML =
        "marker" == a
          ? "<span>" +
            map_lang_position_marker +
            ":</span> " +
            t.getAttribute("data-name")
          : "<span>" +
            map_lang_position_position +
            ":</span> " +
            t.getAttribute("data-name")),
        r.appendChild(n);
      var s = document.createElement("table");
      s.setAttribute("cellpadding", 0),
        s.setAttribute("cellspacing", 0),
        s.setAttribute("class", "optionholder"),
        r.appendChild(s);
      var d = document.createElement("tr");
      if (
        (s.appendChild(d),
        (p = document.createElement("td")).setAttribute("class", "buttoncell"),
        d.appendChild(p),
        (l = document.createElement("div")).setAttribute(
          "data-guid",
          t.getAttribute("data-guid")
        ),
        l.setAttribute("data-type", e),
        l.setAttribute("data-action", "goto"),
        (l.innerHTML = map_lang_positionsdialogue_goto),
        (l.onclick = function () {
          var e = this.getAttribute("data-guid"),
            a = this.getAttribute("data-type");
          if ("fleet" == systemtype)
            document
              .getElementById(
                i.getAttribute("data-element-id") + "_position_box"
              )
              .parentNode.removeChild(
                document.getElementById(
                  i.getAttribute("data-element-id") + "_position_box"
                )
              ),
              $(o).hide(),
              map_fleet_go_to_position(i.getAttribute("data-element-id"), e, a);
          else {
            var t = {
              mode: "map-go-to-position",
            };
            (t.id = this.getAttribute("data-guid")),
              (t.type = this.getAttribute("data-type")),
              $.ajax({
                url: "/",
                data: t,
                method: "GET",
                dataType: "json",
                guid: this.getAttribute("data-guid"),
                success: function (t) {
                  document
                    .getElementById(
                      i.getAttribute("data-element-id") + "_position_box"
                    )
                    .parentNode.removeChild(
                      document.getElementById(
                        i.getAttribute("data-element-id") + "_position_box"
                      )
                    ),
                    $(o).hide(),
                    "question" == t.status &&
                      MIR.runtime.get_mission_queue_prompt(
                        function () {
                          map_go_to_position(e, a, "yes");
                        },
                        function () {
                          map_go_to_position(e, a, "no");
                        }
                      );
                },
              });
          }
        }),
        p.appendChild(l),
        (p = document.createElement("td")).setAttribute(
          "class",
          "descriptioncell"
        ),
        (p.innerHTML = "<p>" + map_lang_positionsdialogue_goto_text + "</p>\n"),
        d.appendChild(p),
        "position" == a)
      ) {
        d = document.createElement("tr");
        s.appendChild(d),
          (p = document.createElement("td")).setAttribute(
            "class",
            "buttoncell"
          ),
          d.appendChild(p),
          ((l = document.createElement(
            "div"
          )).innerHTML = map_lang_positionsdialogue_move),
          l.setAttribute("data-guid", t.getAttribute("data-guid")),
          l.setAttribute("data-action", "move"),
          l.setAttribute("data-element-id", i.getAttribute("data-element-id")),
          l.setAttribute("data-name", t.getAttribute("data-name")),
          l.setAttribute("data-type-id", t.getAttribute("data-type-id")),
          l.setAttribute("data-parent-id", t.getAttribute("data-parent-id")),
          (l.onclick = function () {
            map_draw_position(
              this.getAttribute("data-element-id"),
              this.getAttribute("data-guid"),
              this.getAttribute("data-name")
            ),
              document
                .getElementById(
                  i.getAttribute("data-element-id") + "_position_box"
                )
                .parentNode.removeChild(
                  document.getElementById(
                    i.getAttribute("data-element-id") + "_position_box"
                  )
                ),
              $(o).hide();
          }),
          p.appendChild(l),
          (p = document.createElement("td")).setAttribute(
            "class",
            "descriptioncell"
          ),
          (p.innerHTML =
            "<p>" + map_lang_positionsdialogue_move_text + "</p>\n"),
          d.appendChild(p);
      }
      d = document.createElement("tr");
      if (
        (s.appendChild(d),
        (p = document.createElement("td")).setAttribute("class", "buttoncell"),
        d.appendChild(p),
        (l = document.createElement("div")).setAttribute(
          "data-guid",
          t.getAttribute("data-guid")
        ),
        l.setAttribute("data-map-guid", t.getAttribute("data-map-guid")),
        l.setAttribute("data-element-id", i.getAttribute("data-element-id")),
        (l.innerHTML = map_lang_positionsdialogue_edit),
        l.setAttribute("data-action", "edit"),
        (l.onclick = function () {
          var t = this.getAttribute("data-guid"),
            r = this.getAttribute("data-element-id"),
            i = this.getAttribute("data-map-guid"),
            e = {
              mode: "get-data",
            };
          (e.endpoint = "/positions/" + t),
            (e.calltype = "light"),
            $.ajax({
              url: "/",
              data: e,
              method: "GET",
              dataType: "json",
              success: function (t) {
                if (200 == t.headers.httpcode)
                  if (-1 == t.results.allowed_methods.indexOf("PUT"))
                    launch_error(map_lang_position_noperm);
                  else {
                    var e = {};
                    if (
                      ((e.pos_x = t.results.pos_x),
                      (e.pos_y = t.results.pos_y),
                      (e.orientation = t.results.orientation),
                      (e.type_id = t.results.type_id),
                      (e.name = t.results.name),
                      (e.guid = t.results.guid),
                      (e.parent_id = t.results.parent_id),
                      "7" == e.type_id ||
                        "9" == e.type_id ||
                        "11" == e.type_id ||
                        "13" == e.type_id ||
                        "16" == e.type_id ||
                        "18" == e.type_id ||
                        "20" == e.type_id ||
                        "22" == e.type_id ||
                        "24" == e.type_id)
                    )
                      var a = "marker";
                    else a = "position";
                    void 0 !== t.results.charging_group &&
                      (e.charging_group = t.results.charging_group),
                      "marker" == a &&
                        ((e.offset_x = t.results.offset_x),
                        (e.offset_y = t.results.offset_y),
                        (e.offset_orientation = t.results.offset_orientation),
                        void 0 !== t.results.bar_distance &&
                          void 0 !== t.results.bar_length &&
                          ((e.bar_length = t.results.bar_length
                            ? t.results.bar_length
                            : 0),
                          (e.bar_distance = t.results.bar_distance
                            ? t.results.bar_distance
                            : 0)),
                        void 0 !== t.results.shelf_leg_asymmetry_x &&
                          (e.shelf_leg_asymmetry_x = t.results
                            .shelf_leg_asymmetry_x
                            ? t.results.shelf_leg_asymmetry_x
                            : 0)),
                      document
                        .getElementById(r + "_position_box")
                        .parentNode.removeChild(
                          document.getElementById(r + "_position_box")
                        ),
                      $(o).hide(),
                      map_position_dialogue(r, i, e, a);
                  }
              },
            });
        }),
        p.appendChild(l),
        (p = document.createElement("td")).setAttribute(
          "class",
          "descriptioncell"
        ),
        (p.innerHTML = "<p>" + map_lang_positionsdialogue_edit_text + "</p>\n"),
        d.appendChild(p),
        "" == t.getAttribute("data-parent-id"))
      ) {
        d = document.createElement("tr");
        s.appendChild(d),
          (p = document.createElement("td")).setAttribute(
            "class",
            "buttoncell"
          ),
          d.appendChild(p),
          (l = document.createElement("div")).setAttribute(
            "data-guid",
            t.getAttribute("data-guid")
          ),
          (l.innerHTML = map_lang_positionsdialogue_delete),
          l.setAttribute("data-action", "delete"),
          (l.onclick = function () {
            var t = {
              mode: "map-delete-position",
            };
            (t.id = this.getAttribute("data-guid")),
              $.ajax({
                url: "/",
                data: t,
                method: "GET",
                dataType: "json",
                guid: this.getAttribute("data-guid"),
                success: function (t) {
                  var r = this.guid;
                  204 == t.headers.httpcode
                    ? ($(
                        'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div[data-guid="' +
                          r +
                          '"].position'
                      ).remove(),
                      $(
                        'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div[data-parent-id="' +
                          r +
                          '"].child_position'
                      ).remove(),
                      document
                        .getElementById(
                          i.getAttribute("data-element-id") + "_position_box"
                        )
                        .parentNode.removeChild(
                          document.getElementById(
                            i.getAttribute("data-element-id") + "_position_box"
                          )
                        ),
                      $.each(MIR.runtime.positions, function (a) {
                        MIR.runtime.maps[a].mir.get_guid() === w.get_guid() &&
                          $.each(MIR.runtime.positions[a], function (t, e) {
                            if (e.guid == r)
                              return MIR.runtime.positions[a].splice(t, 1), !1;
                          });
                      }))
                    : launch_error(map_lang_position_nopermdel),
                    $(o).hide();
                },
              });
          }),
          p.appendChild(l),
          (p = document.createElement("td")).setAttribute(
            "class",
            "descriptioncell"
          ),
          (p.innerHTML =
            "<p>" + map_lang_positionsdialogue_delete_text + "</p>\n"),
          d.appendChild(p);
      }
      if ("fleet" == MIR.config.product) {
        d = document.createElement("tr");
        s.appendChild(d),
          (p = document.createElement("td")).setAttribute(
            "class",
            "buttoncell"
          ),
          d.appendChild(p),
          (l = document.createElement("div")).setAttribute(
            "data-guid",
            t.getAttribute("data-guid")
          ),
          l.setAttribute("data-map-guid", t.getAttribute("data-map-guid")),
          l.setAttribute("data-element-id", i.getAttribute("data-element-id")),
          (l.innerHTML = mir_translate("fleet_map_dialog_resource_queue")),
          (l.onclick = function () {
            var r = $(this).closest(".box"),
              i = this.getAttribute("data-guid"),
              t =
                (this.getAttribute("data-element-id"),
                this.getAttribute("data-map-guid"),
                {});
            (t.mode = "get-data"),
              (t.endpoint = "/positions/" + i),
              (t.calltype = "light"),
              $.ajax({
                url: "/",
                data: t,
                method: "GET",
                dataType: "json",
                success: function (t) {
                  var e = t.results,
                    a =
                      '<div class="resource-box"><h1>' +
                      mir_translate("fleet_map_dialog_resource_queue_title") +
                      e.name +
                      '</h1><div class="current_use_wrap"><fieldset><legend>' +
                      mir_translate(
                        "fleet_map_dialog_resource_currently_using"
                      ) +
                      '</legend><div class="current_using"><p>' +
                      mir_translate(
                        "fleet_map_dialog_resource_no_currently_using"
                      ) +
                      '</p></div></fieldset></div><fieldset class="queue_wrap"><legend>' +
                      mir_translate("fleet_map_dialog_resource_queue") +
                      '</legend><div class="robots_in_queue"><p>' +
                      mir_translate("fleet_map_dialog_resource_no_in_queue") +
                      '</p></div></fieldset><input type="button" value="' +
                      mir_translate("Cancel") +
                      '" class="dialog-cancel-btn" name="cancel" id="cancel"></div>';
                  r.append(a),
                    ($resource_box = r.find(".resource-box")),
                    ($cancel_button = r.find("#cancel")),
                    $cancel_button.on("click", function () {
                      $resource_box.remove();
                    }),
                    (function (e) {
                      $.ajax({
                        url: "/?mode=get-resource-queue",
                        method: "POST",
                        data: {
                          guid: i,
                        },
                        dataType: "json",
                        success: function (t) {
                          var a = e.find(".current_using"),
                            r = e.find(".robots_in_queue");
                          e.find(".res-robot").remove(),
                            $.each(t.assigned, function (t, e) {
                              a.prepend(
                                '<div class="res-robot">' +
                                  e.status.robot_name +
                                  "</div>"
                              );
                            }),
                            $.each(t.queue, function (t, e) {
                              r.prepend(
                                '<div class="res-robot">' +
                                  e.status.robot_name +
                                  "</div>"
                              );
                            });
                        },
                      });
                    })(r);
                },
              });
          }),
          p.appendChild(l),
          (p = document.createElement("td")).setAttribute(
            "class",
            "descriptioncell"
          ),
          (p.innerHTML =
            "<p>" +
            mir_translate("fleet_map_dialog_resource_queue_description") +
            "</p>\n"),
          d.appendChild(p);
      }
      if (
        0 <
        $(
          'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div[data-parent-id="' +
            t.getAttribute("data-guid") +
            '"].child_position'
        ).length
      ) {
        d = document.createElement("tr");
        s.appendChild(d),
          (p = document.createElement("td")).setAttribute(
            "class",
            "buttoncell"
          ),
          d.appendChild(p),
          (l = document.createElement("div")).setAttribute(
            "data-guid",
            t.getAttribute("data-guid")
          ),
          l.setAttribute("data-type", e),
          "block" ==
          $(
            'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div[data-parent-id="' +
              t.getAttribute("data-guid") +
              '"].child_position'
          ).css("display")
            ? (l.setAttribute("data-action", "hidehelpers"),
              (l.innerHTML = mir_translate("Hide entry-position(s)")))
            : (l.setAttribute("data-action", "showhelpers"),
              (l.innerHTML = mir_translate("Show entry-position(s)"))),
          l.setAttribute("data-guid", t.getAttribute("data-guid")),
          (l.onclick = function () {
            var a = "showhelpers" == this.getAttribute("data-action"),
              r = this.getAttribute("data-guid");
            $(
              'div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div[data-parent-id="' +
                r +
                '"].child_position'
            ).toggle(a),
              $.each(m, function (t, e) {
                if (e.guid === r) return (e.show_children = a), !1;
              }),
              document
                .getElementById(
                  i.getAttribute("data-element-id") + "_position_box"
                )
                .parentNode.removeChild(
                  document.getElementById(
                    i.getAttribute("data-element-id") + "_position_box"
                  )
                ),
              $(o).hide();
          }),
          p.appendChild(l),
          (p = document.createElement("td")).setAttribute(
            "class",
            "descriptioncell"
          ),
          (p.innerHTML =
            "<p>" +
            mir_translate("Show entry position(s) for this position") +
            "</p>\n"),
          d.appendChild(p);
      }
      var l, p;
      d = document.createElement("tr");
      s.appendChild(d),
        (p = document.createElement("td")).setAttribute("class", "buttoncell"),
        d.appendChild(p),
        ((l = document.createElement(
          "div"
        )).innerHTML = map_lang_positionsdialogue_cancel),
        l.setAttribute("data-guid", t.getAttribute("data-guid")),
        l.setAttribute("data-action", "cancel"),
        (l.onclick = function () {
          document
            .getElementById(i.getAttribute("data-element-id") + "_position_box")
            .parentNode.removeChild(
              document.getElementById(
                i.getAttribute("data-element-id") + "_position_box"
              )
            ),
            $(o).hide();
        }),
        p.appendChild(l),
        (p = document.createElement("td")).setAttribute(
          "class",
          "descriptioncell"
        ),
        (p.innerHTML =
          "<p>" + map_lang_positionsdialogue_cancel_text + "</p>\n"),
        d.appendChild(p),
        $(o).show();
    }
    function b(t) {
      var e = w.get_element_id(),
        a = [e, t.idx_layer, t.idx_shape].join("_"),
        r = [e, "layer", t.idx_layer].join("_"),
        i = w.layer2choice(t.idx_layer),
        o =
          window["map_" + w.get_element_id() + "_metadata"].layers[t.idx_layer]
            .shapes[t.idx_shape];
      if ((y.attr("shape-index", t.idx_shape), w.get_tool() === n.DELETE)) {
        if (!checkShapePermission(o, "DELETE", e)) return;
        map_delete_shape(
          y
            .find("#" + r + " iframe")
            .contents()
            .find("#" + a)
            .get(0),
          e,
          t.idx_layer
        );
      } else {
        if (!checkShapePermission(o, "PUT", e)) return;
        y.find("select").val() !== i &&
          (y.find("select").val(i).selectmenu("refresh"), map_set_mychoice(e)),
          y.attr("data-selected-shape", r),
          map_itemselector(e),
          map_layercontrol_set_layer(e, t.idx_layer),
          $(e + "_layer_draw").show(),
          map_draw_shape_on_canvas(e, a);
        -1 ==
          [
            "oneway",
            "areaprefs_preferred",
            "areaprefs_unpreferred",
            "areaprefs_forbidden",
            "areaprefs_critical",
            "floor",
            "walls",
          ].indexOf(t.idx_layer) &&
          y.find(".toolbarbutton_areaeventsettings").show(),
          MIR.runtime.maps[e].mir.get_chosen_layer() ||
            reset_all_layer_opacity(e);
      }
    }
  });
}
function map_go_to_position(t, e, a, r) {
  var i = {
    mode: "map-go-to-position",
  };
  (i.id = t),
    (i.type = e),
    (i.clearall = a),
    (i.robot_id = r || 0),
    $.ajax({
      url: "/",
      data: i,
      method: "GET",
      dataType: "json",
      success: function (t) {
        playbar_highlight();
      },
    });
}
function map_draw_shape_on_canvas(t, e) {
  var a = document.getElementById(t + "_mapcontainer"),
    r = a.getAttribute("data-current-layer");
  a.setAttribute("data-selected-shape", e);
  document.getElementById(t + "_layer_patheditor");
  var i = document.getElementById(t + "_mapdrawer"),
    o = e;
  o = Math.round(o.replace(t + "_" + r + "_", ""));
  var n = window["map_" + t + "_metadata"].layers[r].shapes[o];
  a.setAttribute("data-selected-shape-type", n.type),
    "stroke" == n.type && a.setAttribute("data-current-linesize", n.brushsize),
    "oneway" == r &&
      "shape" == n.type &&
      n.direction &&
      a.setAttribute("data-oneway-direction", n.direction);
  var s = n.polygon,
    d = parseFloat(a.getAttribute("data-zoom-scale"));
  (i.innerHTML = ""),
    "areaprefs_preferred" == r
      ? ((n.color = "#c8ffc8"),
        a.setAttribute("data-current-prefarea", "preferred"),
        a.setAttribute("data-areaeventsettings-type", "-1"))
      : "areaprefs_unpreferred" == r
      ? ((n.color = "#c8c8ff"),
        a.setAttribute("data-current-prefarea", "unpreferred"),
        a.setAttribute("data-areaeventsettings-type", "-1"))
      : "areaprefs_critical" == r
      ? ((n.color = "#f5d8a2"),
        a.setAttribute("data-current-prefarea", "critical"),
        a.setAttribute("data-areaeventsettings-type", "-1"))
      : "areaprefs_forbidden" == r &&
        ((n.color = "#ffc8c8"),
        a.setAttribute("data-current-prefarea", "forbidden"),
        a.setAttribute("data-areaeventsettings-type", "-1")),
    a.setAttribute("data-areaevent-name", n.name);
  for (var l = 0; l < s.length; ) {
    var p = document.createElement("div");
    p.setAttribute("class", "refigurepathhandle"),
      p.setAttribute("data-layer", r),
      p.setAttribute("data-path", o),
      p.setAttribute("data-point", l),
      p.setAttribute("data-element-id", t),
      i.appendChild(p);
    var m = parseFloat(s[l].y),
      u = parseFloat(s[l].x);
    (m *= d),
      (u *= d),
      (m += parseFloat(a.getAttribute("data-zoom-offset-top"))),
      (u += parseFloat(a.getAttribute("data-zoom-offset-left"))),
      $(p).css("top", m + "px"),
      $(p).css("left", u + "px"),
      l++;
  }
  var v = !1;
  $(".refigurepathhandle").draggable({
    drag: function (t, e) {
      var a = this.getAttribute("data-element-id"),
        r = document.getElementById(a + "_mapcontainer"),
        i = parseFloat(r.getAttribute("data-zoom-scale")),
        o = this.getAttribute("data-point"),
        n = this.getAttribute("data-layer"),
        s = this.getAttribute("data-path");
      if (0 == v) {
        var d = {
          type: "move_point",
        };
        (d.layer = n),
          (d.path_id = s),
          (d.point_id = o),
          (d.old_x =
            window["map_" + a + "_metadata"].layers[n].shapes[s].polygon[o].x),
          (d.old_y =
            window["map_" + a + "_metadata"].layers[n].shapes[s].polygon[o].y),
          map_add_to_history(a, d),
          (v = !0);
      }
      var l = e.position.left,
        p = e.position.top;
      (l -= parseFloat(r.getAttribute("data-zoom-offset-left"))),
        (p -= parseFloat(r.getAttribute("data-zoom-offset-top"))),
        (l = Math.round(l / i)),
        (p = Math.round(p / i));
      for (
        var m = window["map_" + a + "_metadata"].layers[n].shapes[s].polygon,
          u = "",
          c = !1,
          _ = 0;
        _ < m.length;

      )
        _ == o
          ? (0 == c ? ((u += "M"), (c = !0)) : (u += "L"), (u += l + " " + p))
          : "DELETED" == m[_] ||
            (0 == c ? ((u += "M"), (c = !0)) : (u += "L"),
            (u += m[_].x + " " + m[_].y)),
          _++;
      (window["map_" + a + "_metadata"].layers[n].shapes[s].polygon[o].x = l),
        (window["map_" + a + "_metadata"].layers[n].shapes[s].polygon[o].y = p),
        "shape" == window["map_" + a + "_metadata"].layers[n].shapes[s].type &&
          (u += "z");
      var g = document.getElementById(a + "_layer_" + n),
        h = $(g).find("iframe"),
        f = $(h).contents();
      $(f)
        .find("#" + a + "_" + n + "_" + s)
        .attr("d", u),
        map_set_save_state(a, "savable", !1);
    },
    stop: function (t, e) {
      map_update_ghost(
        this.getAttribute("data-element-id"),
        this.getAttribute("data-layer"),
        this.getAttribute("data-path")
      ),
        (v = !1);
    },
  }),
    $(i).show();
}
function keydown_parent(t) {
  var e = jQuery.Event("keydown", {
    keyCode: t.keyCode,
  });
  $(window).trigger(e);
}
function map_position_dialogue_check_name_used(a, t, e, r, i) {
  $.ajax({
    mapid: e,
    elementid: t,
    url: "/",
    data: {
      mode: "get-map-site-positions",
      calltype: "light",
      id: e,
    },
    method: "GET",
    dataType: "json",
    success: function (t) {
      var e = $.grep(t, function (t) {
        return t.name === a && (!r || !r.guid || r.guid !== t.guid);
      });
      i(0 !== e.length);
    },
  });
}
function map_position_dialogue(_, g, h, f) {
  var v = document.getElementById(_ + "_map");
  if (
    ($(v).draggable("disable"),
    (null != h && 0 != h.guid.length) || "marker" != f)
  )
    if ("marker" == f) t = map_lang_positiondialogue_headline_edit_marker;
    else if ((null != h && 0 != h.guid.length) || "position" != f)
      t = map_lang_positiondialogue_headline_edit_position;
    else var t = map_lang_positiondialogue_headline_create_position;
  else var t = map_lang_positiondialogue_headline_create_marker;
  "marker" == f && start_process("move_base");
  var b = document.getElementById(_ + "_mapcontainer"),
    y = document.getElementById(_ + "_mapdialogscreen");
  y.innerHTML = "";
  var e = document.createElement("div");
  e.setAttribute("class", "box"),
    e.setAttribute("id", _ + "_position_formbox"),
    y.appendChild(e);
  var a = document.createElement("h1");
  (a.innerHTML = t), e.appendChild(a);
  var r = document.createElement("p");
  (r.innerHTML = ""),
    r.setAttribute("id", "position_error"),
    r.setAttribute("class", "position_error"),
    e.appendChild(r);
  var o = document.createElement("form");
  o.setAttribute("action", ""),
    o.setAttribute("method", "POST"),
    o.setAttribute("autocomplete", "off"),
    e.appendChild(o),
    (o.onsubmit = function (t) {
      t.preventDefault(),
        $("p#position_error").html(""),
        $("p.fielderror").html(""),
        $(
          "div.mapdialogscreen > div.box > form > div.fieldholder > input"
        ).attr("data-error", "false"),
        $(
          "div.mapdialogscreen > div.box > form > div.fieldholder > select"
        ).attr("data-error", "false");
      var e = document.getElementById("position_name").value,
        a = document.getElementById("position_type").options[
          document.getElementById("position_type").selectedIndex
        ].value,
        r = document.getElementById("position_orientation").value,
        i = document.getElementById("position_x").value,
        o = document.getElementById("position_y").value,
        n = {};
      if (
        ((n["name:::::string"] = e),
        (n["type_id:::::integer"] = a),
        (n["orientation:::::float"] = r),
        (n["pos_x:::::float"] = i),
        (n["pos_y:::::float"] = o),
        (n["map_id:::::string"] = g),
        "marker" == f)
      ) {
        var s = document.getElementById("offset_orientation").value,
          d = document.getElementById("offset_x").value,
          l = document.getElementById("offset_y").value,
          p = document.getElementById("bar_length").value,
          m = document.getElementById("bar_distance").value,
          u = document.getElementById("shelf_leg_asymmetry_x").value;
        (n["offset_orientation:::::float"] = s),
          (n["offset_x:::::float"] = d),
          (n["offset_y:::::float"] = l),
          (n["bar_length:::::float"] = p),
          (n["bar_distance:::::float"] = m),
          (n["shelf_leg_asymmetry_x:::::float"] = u),
          "fleet" == MIR.config.product &&
            1 <= $("#charging_group").length &&
            (n.charging_group = $("#charging_group").val());
      }
      if (null == h || 0 == h.guid.length)
        var c = "/?endpoint=/positions&mode=update-item";
      else
        c =
          "/?endpoint=/positions/" + h.guid + "&mode=update-item&id=" + h.guid;
      return (
        $.ajax({
          url: c,
          data: n,
          method: "POST",
          dataType: "json",
          success: function (s) {
            if (200 == s.headers.httpcode || 201 == s.headers.httpcode) {
              var d = b.getAttribute("data-resscale"),
                l = b.getAttribute("data-origin-x"),
                p = b.getAttribute("data-origin-y"),
                m = b.getAttribute("data-map-height"),
                t = s.results.pos_x * d - l,
                e = m - (s.results.pos_y * d - p);
              (s.results.pos_left = t), (s.results.pos_top = e);
              var a = s.results.orientation;
              200 == s.headers.httpcode
                ? $.each(MIR.runtime.positions, function (r, t) {
                    $.each(t, function (a, t) {
                      t.guid === s.results.guid &&
                        $.extend(MIR.runtime.positions[r][a], s.results),
                        $.each(t.child_positions, function (t, e) {
                          e.guid === s.results.guid &&
                            $.extend(
                              MIR.runtime.positions[r][a].child_positions[t],
                              s.results
                            );
                        });
                    });
                  })
                : $.each(MIR.runtime.positions, function (t) {
                    MIR.runtime.maps[t].mir.get_guid() === g &&
                      MIR.runtime.positions[t].push(s.results);
                  }),
                h &&
                  null != h &&
                  0 != h.guid.length &&
                  ($(
                    "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.position[data-guid='" +
                      h.guid +
                      "']"
                  ).remove(),
                  $(
                    "div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.child_position[data-guid='" +
                      h.guid +
                      "']"
                  ).remove()),
                null == s.results.parent_id && (s.results.parent_id = "");
              var r = document.createElement("div");
              h && null != h.parent_id && "" != h.parent_id
                ? r.setAttribute("class", "child_position")
                : r.setAttribute("class", "position"),
                r.setAttribute("data-guid", s.results.guid),
                r.setAttribute("data-name", s.results.name),
                r.setAttribute("data-type-id", s.results.type_id),
                r.setAttribute(
                  "data-map-guid",
                  b.getAttribute("data-map-guid")
                ),
                r.setAttribute("data-parent-id", s.results.parent_id),
                document.getElementById(_ + "_layer_positions").appendChild(r);
              var i = document.createElement("img");
              h && h.parent_id && 36 == h.parent_id.length
                ? i.setAttribute("src", "/graphics/icon_position_helper.svg")
                : i.setAttribute(
                    "src",
                    "/graphics/icon_position_" + s.results.type_id + ".svg"
                  ),
                r.appendChild(i);
              a = 90 - s.results.orientation;
              if (
                ($(r).css("left", t + "px"),
                $(r).css("top", e + "px"),
                $(r).css("WebkitTransform", "rotate(" + a + "deg)"),
                $(r).css("-moz-transform", "rotate(" + a + "deg)"),
                $(r).css("-ms-transform", "rotate(" + a + "deg)"),
                $(r).css("transform", "rotate(" + a + "deg)"),
                36 == s.results.parent_id.length && $(r).show(),
                $("#" + _ + "_layer_positions")
                  .find("div#tmp_pos")
                  .remove(),
                "block" ==
                  $("#" + _ + "_layer_positions")
                    .find(
                      "div.child_position[data-parent-id='" +
                        s.results.guid +
                        "']"
                    )
                    .css("display"))
              )
                var u = !0;
              else u = !1;
              $("#" + _ + "_layer_positions")
                .find(
                  "div.child_position[data-parent-id='" + s.results.guid + "']"
                )
                .remove();
              var o = {
                mode: "get-data",
              };
              (o.endpoint =
                "/positions/" +
                s.results.guid +
                "/helper_positions?whitelist=pos_x,pos_y,guid,name,type_id,orientation"),
                (o.calltype = "light"),
                $.ajax({
                  url: "/",
                  data: o,
                  method: "GET",
                  dataType: "json",
                  success: function (a) {
                    for (var r = 0; r < a.results.length; ) {
                      var i = a.results[r].pos_x * d - l,
                        o = m - (a.results[r].pos_y * d - p);
                      $.each(MIR.runtime.positions, function (t, e) {
                        $.each(e, function (t, e) {
                          if (e.guid === s.results.guid)
                            return (
                              e.child_positions || (e.child_positions = []),
                              e.child_positions.push({
                                guid: a.results[r].guid,
                                pos_left: i,
                                pos_top: o,
                                name: a.results[r].name,
                                type_id: a.results[r].type_id,
                              }),
                              (e.show_children = u),
                              !1
                            );
                        });
                      });
                      var t = 90 - a.results[r].orientation,
                        e = document.createElement("div");
                      e.setAttribute("class", "child_position"),
                        e.setAttribute("data-guid", a.results[r].guid),
                        e.setAttribute("data-name", a.results[r].name),
                        e.setAttribute("data-type-id", a.results[r].type_id),
                        e.setAttribute(
                          "data-map-guid",
                          b.getAttribute("data-map-guid")
                        ),
                        e.setAttribute("data-parent-id", s.results.guid),
                        document
                          .getElementById(_ + "_layer_positions")
                          .appendChild(e);
                      var n = document.createElement("img");
                      n.setAttribute(
                        "src",
                        "/graphics/icon_position_helper.svg"
                      ),
                        e.appendChild(n),
                        $(e).css("left", i + "px"),
                        $(e).css("top", o + "px"),
                        $(e).css("WebkitTransform", "rotate(" + t + "deg)"),
                        $(e).css("-moz-transform", "rotate(" + t + "deg)"),
                        $(e).css("-ms-transform", "rotate(" + t + "deg)"),
                        $(e).css("transform", "rotate(" + t + "deg)"),
                        1 == u && $(e).show(),
                        r++;
                    }
                  },
                }),
                document
                  .getElementById(_ + "_position_formbox")
                  .parentNode.removeChild(
                    document.getElementById(_ + "_position_formbox")
                  ),
                $(y).hide(),
                $(v).draggable("enable"),
                map_navigator(_);
            } else
              for (var n in ((document.getElementById(
                "position_error"
              ).innerHTML = s.results.error_human),
              s.results.field_errors)) {
                if ("name" == n)
                  var c = document.getElementById("position_name");
                else if ("type_id" == n)
                  c = document.getElementById("position_type");
                else if ("orientation" == n)
                  c = document.getElementById("position_orientation");
                else if ("pos_x" == n)
                  c = document.getElementById("position_x");
                else if ("pos_y" == n)
                  c = document.getElementById("position_y");
                else if ("offset_x" == n && "marker" == f)
                  c = document.getElementById("offset_x");
                else if ("offset_y" == n && "marker" == f)
                  c = document.getElementById("offset_y");
                else if ("offset_orientation" == n && "marker" == f)
                  c = document.getElementById("offset_orientation");
                else if ("bar_length" == n && "marker" == f)
                  c = document.getElementById("bar_length");
                else if ("bar_distance" == n && "marker" == f)
                  c = document.getElementById("bar_distance");
                else if ("shelf_leg_asymmetry_x" == n && "marker" == f)
                  c = document.getElementById("shelf_leg_asymmetry_x");
                else c = document.getElementById("position_name");
                c.setAttribute("data-error", "true"),
                  0 < n.length &&
                    (document.getElementById("fielderror_" + n).innerHTML =
                      s.results.field_errors[n].error_human);
              }
          },
        }),
        !1
      );
    }),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "position_name"),
    (l.innerHTML = map_lang_positiondialogue_name),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h ? p.setAttribute("value", "") : p.setAttribute("value", h.name),
    p.setAttribute("maxlength", 100),
    p.setAttribute("name", "position_name"),
    p.setAttribute("id", "position_name"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    $(p).on("keyup", function () {
      var t = $(this);
      $("#fieldwarn_name").toggle(!1),
        void 0 !== this.position_warn_timeout &&
          (window.clearTimeout(this.position_warn_timeout),
          delete this.position_warn_timeout),
        (this.position_warn_timeout = setTimeout(function () {
          t.attr("data-spinning", "false"),
            map_position_dialogue_check_name_used(
              t.val(),
              _,
              g,
              h,
              function (t) {
                $("#fieldwarn_name").toggle(t);
              }
            );
        }, 300)),
        t.attr("data-spinning", "true");
    });
  var i = document.createElement("p");
  i.setAttribute("id", "fieldwarn_name"),
    i.setAttribute("class", "fieldwarn"),
    (i.innerHTML = mir_translate(
      "A position with this name already exists on this site!"
    )),
    d.appendChild(i),
    null != h &&
      map_position_dialogue_check_name_used(h.name, _, g, h, function (t) {
        $("#fieldwarn_name").toggle(t);
      }),
    (n = document.createElement("p")).setAttribute("id", "fielderror_name"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "position_type"),
    (l.innerHTML = map_lang_positiondialogue_type),
    d.appendChild(l),
    (p = document.createElement("select")).setAttribute(
      "name",
      "position_type"
    ),
    p.setAttribute("id", "position_type"),
    p.setAttribute("data-element-id", _),
    (p.onchange = function () {
      o.setAttribute("position_type_chosen", $("select#position_type").val()),
        map_position_dialogue_toggle_offset(
          this.getAttribute("data-element-id")
        );
    }),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute("id", "fielderror_type_id"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n);
  var n,
    s = {
      mode: "get-data",
      endpoint: "/position_types?sort_by=name,asc",
    };
  if (
    ($.ajax({
      url: "/",
      data: s,
      method: "GET",
      dataType: "json",
      success: function (t) {
        if (200 == t.headers.httpcode) {
          for (var e = [1, 5], a = 0; a < t.results.length; ) {
            var r = !1;
            if (
              (h &&
              h.parent_id &&
              36 == h.parent_id.length &&
              "position" == f &&
              t.results[a].id == h.type_id
                ? (r = !0)
                : "marker" == f &&
                  ("7" == t.results[a].id ||
                    "9" == t.results[a].id ||
                    "11" == t.results[a].id ||
                    "13" == t.results[a].id ||
                    (check_feature(MIR.constants.FEATURES.PRECISION_DOCKING) &&
                      "16" == t.results[a].id) ||
                    "18" == t.results[a].id ||
                    "20" == t.results[a].id ||
                    "22" == t.results[a].id ||
                    "24" == t.results[a].id)
                ? (r = !0)
                : "position" != f ||
                  (h.parent_id && 0 != h.parent_id.length) ||
                  !(
                    "0" == t.results[a].id ||
                    (check_feature("hook") && "1" == t.results[a].id) ||
                    (check_feature("shelf") && "5" == t.results[a].id) ||
                    (check_feature("fleet") && "42" == t.results[a].id) ||
                    "15" == t.results[a].id ||
                    "42" == t.results[a].id
                  )
                ? "position" == f &&
                  "fleet" == MIR.config.product &&
                  -1 < e.indexOf(t.results[a].id) &&
                  (r = !0)
                : (r = !0),
              1 == r)
            ) {
              var i = document.createElement("option");
              i.setAttribute("value", t.results[a].id),
                null == h ||
                  (h.type_id == t.results[a].id &&
                    i.setAttribute("selected", "selected")),
                (i.innerHTML = t.results[a].name),
                document.getElementById("position_type").appendChild(i);
            }
            a++;
          }
          map_position_dialogue_toggle_offset(_);
        }
        document.getElementById("position_name").focus(),
          o.setAttribute(
            "position_type_chosen",
            $("select#position_type").val()
          );
      },
    }),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute(
      "for",
      "position_orientation"
    ),
    (l.innerHTML = map_lang_positiondialogue_orientation),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", number_format(h.orientation, 3, ".", "")),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "position_orientation"),
    p.setAttribute("id", "position_orientation"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute(
      "id",
      "fielderror_orientation"
    ),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "position_x"),
    (l.innerHTML = map_lang_positiondialogue_xcoordinate),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", number_format(h.pos_x, 3, ".", "")),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "position_x"),
    p.setAttribute("id", "position_x"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute("id", "fielderror_pos_x"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "position_y"),
    (l.innerHTML = map_lang_positiondialogue_ycoordinate),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", number_format(h.pos_y, 3, ".", "")),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "position_y"),
    p.setAttribute("id", "position_y"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute("id", "fielderror_pos_y"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "offset_x"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "offset_x"),
    (l.innerHTML = map_lang_positiondialogue_xoffset),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.offset_x),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "offset_x"),
    p.setAttribute("id", "offset_x"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute("id", "fielderror_offset_x"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "offset_y"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "offset_y"),
    (l.innerHTML = map_lang_positiondialogue_yoffset),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.offset_y),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "offset_y"),
    p.setAttribute("id", "offset_y"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute("id", "fielderror_offset_y"),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "offset_orientation"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute(
      "for",
      "offset_orientation"
    ),
    (l.innerHTML = map_lang_positiondialogue_offsetorientation),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.offset_orientation),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "offset_orientation"),
    p.setAttribute("id", "offset_orientation"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute(
      "id",
      "fielderror_offset_orientation"
    ),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "bar_length"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "bar_length"),
    (l.innerHTML = map_lang_positiondialogue_barlength),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h || void 0 === h.bar_length
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.bar_length),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "bar_length"),
    p.setAttribute("id", "bar_length"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute(
      "id",
      "fielderror_bar_length"
    ),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "bar_distance"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute("for", "bar_distance"),
    (l.innerHTML = map_lang_positiondialogue_bardistance),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h || void 0 === h.bar_distance
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.bar_distance),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "bar_distance"),
    p.setAttribute("id", "bar_distance"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute(
      "id",
      "fielderror_bar_distance"
    ),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
    d.setAttribute("data-field", "shelf_leg_asymmetry_x"),
    o.appendChild(d),
    (l = document.createElement("label")).setAttribute(
      "for",
      "shelf_leg_asymmetry_x"
    ),
    (l.innerHTML = map_lang_positiondialogue_shelflegasymmetry),
    d.appendChild(l),
    (p = document.createElement("input")).setAttribute("type", "text"),
    null == h || void 0 === h.shelf_leg_asymmetry_x
      ? p.setAttribute("value", "")
      : p.setAttribute("value", h.shelf_leg_asymmetry_x),
    p.setAttribute("maxlength", 10),
    p.setAttribute("name", "shelf_leg_asymmetry_x"),
    p.setAttribute("id", "shelf_leg_asymmetry_x"),
    p.setAttribute("autocomplete", "off"),
    d.appendChild(p),
    (n = document.createElement("p")).setAttribute(
      "id",
      "fielderror_shelf_leg_asymmetry_x"
    ),
    n.setAttribute("class", "fielderror"),
    (n.innerHTML = ""),
    d.appendChild(n),
    $(d).hide(),
    "fleet" == MIR.config.product)
  ) {
    var d, l, p;
    (d = document.createElement("div")).setAttribute("class", "fieldholder"),
      d.setAttribute("data-field", "charging_group"),
      o.appendChild(d),
      (l = document.createElement("label")).setAttribute(
        "for",
        "position_type"
      ),
      (l.innerHTML = mir_translate("fleet_map_dialog_marker_charging_group")),
      d.appendChild(l),
      (p = document.createElement("select")).setAttribute(
        "name",
        "charging_group"
      ),
      p.setAttribute("id", "charging_group");
    var m = document.createElement("option");
    m.setAttribute("value", "0"),
      (m.innerHTML = mir_translate(
        "fleet_map_dialog_marker_charging_group_option_default"
      )),
      p.appendChild(m),
      $.ajax({
        url: "/?mode=get-charging-groups&calltype=light",
        method: "GET",
        dataType: "json",
        success: function (t) {
          200 == t.headers.httpcode &&
            $.each(t.results, function (t, e) {
              var a = document.createElement("option");
              a.setAttribute("value", e.id),
                (a.innerHTML = e.name),
                void 0 !== h.charging_group &&
                  h.charging_group == e.id &&
                  a.setAttribute("selected", "selected"),
                p.appendChild(a);
            });
        },
      }),
      d.appendChild(p);
  }
  var u = document.createElement("div");
  if (
    (u.setAttribute("class", "buttonholder"),
    o.appendChild(u),
    (c = document.createElement("input")).setAttribute("type", "submit"),
    c.setAttribute("value", map_lang_positiondialogue_ok),
    c.setAttribute("name", "submit"),
    c.setAttribute("id", "submit"),
    u.appendChild(c),
    "marker" == f && "true" == b.getAttribute("data-active-map"))
  )
    (c = document.createElement("input")).setAttribute("type", "button"),
      c.setAttribute("value", mir_translate("Detect marker")),
      c.setAttribute("name", "userobotposition"),
      c.setAttribute("id", "userobotposition"),
      u.appendChild(c),
      (c.onclick = function () {
        (document.getElementById("position_x").value = ""),
          (document.getElementById("position_y").value = ""),
          (document.getElementById("position_orientation").value = ""),
          (document.getElementById("offset_x").value = ""),
          (document.getElementById("offset_y").value = ""),
          (document.getElementById("offset_orientation").value = "");
        var t = parseInt($("select#position_type").val()),
          e = 1,
          a = 0;
        ("MIR500" != mir_product && "MIR1000" != mir_product) ||
          ((e = 1.2), (a = -0.15)),
          (18 != t && 24 != t) || ((e = 1.925), (a = 0)),
          13 == t &&
            ((e = 0.7),
            (a = 0),
            ("MIR500" != mir_product && "MIR1000" != mir_product) ||
              ((e = 1), (a = 0)));
        var r = (robot_cur_degrees * Math.PI) / 180;
        22 == t &&
        (document.getElementById("bar_length").value < 0.3 ||
          document.getElementById("bar_distance").value < 0.75)
          ? (document.getElementById("bar_length").value < 0.3 &&
              (document
                .getElementById("bar_length")
                .setAttribute("data-error", "true"),
              (document.getElementById(
                "fielderror_bar_length"
              ).innerHTML = mir_translate("input_error_bar_length_too_short"))),
            document.getElementById("bar_distance").value < 0.75 &&
              (document
                .getElementById("bar_distance")
                .setAttribute("data-error", "true"),
              (document.getElementById(
                "fielderror_bar_distance"
              ).innerHTML = mir_translate(
                "input_error_bar_distance_too_short"
              ))))
          : (document
              .getElementById("bar_length")
              .setAttribute("data-error", "false"),
            document
              .getElementById("bar_distance")
              .setAttribute("data-error", "false"),
            (document.getElementById("fielderror_bar_distance").innerHTML = ""),
            detect_marker(
              e,
              a,
              r,
              t,
              !(document.getElementById("fielderror_bar_length").innerHTML = "")
            ),
            launch_waiter(map_lang_positiondialogue_tryingtodetectmarker)),
          24 == t &&
            (document.getElementById("bar_length").value < 0.3 ||
              document.getElementById("bar_distance").value < 0.75 ||
              document.getElementById("shelf_leg_asymmetry_x").value < -0.75 ||
              0.75 < document.getElementById("shelf_leg_asymmetry_x").value) &&
            (document.getElementById("bar_length").value < 0.3 &&
              (document
                .getElementById("bar_length")
                .setAttribute("data-error", "true"),
              (document.getElementById(
                "fielderror_bar_length"
              ).innerHTML = mir_translate("input_error_bar_length_too_short"))),
            document.getElementById("bar_distance").value < 0.75 &&
              (document
                .getElementById("bar_distance")
                .setAttribute("data-error", "true"),
              (document.getElementById(
                "fielderror_bar_distance"
              ).innerHTML = mir_translate(
                "input_error_bar_distance_too_short"
              ))),
            (document.getElementById("shelf_leg_asymmetry_x").value < -0.75 ||
              0.75 < document.getElementById("shelf_leg_asymmetry_x").value) &&
              (document
                .getElementById("shelf_leg_asymmetry_x")
                .setAttribute("data-error", "true"),
              (document.getElementById(
                "fielderror_shelf_leg_asymmetry_x"
              ).innerHTML = mir_translate(
                "input_error_shelf_leg_asymmetry_x_too_big"
              ))));
      });
  else if ("true" == b.getAttribute("data-active-map")) {
    var c;
    if (
      ((c = document.createElement("input")).setAttribute("type", "button"),
      c.setAttribute("value", mir_translate("Use robot position")),
      c.setAttribute("name", "userobotposition"),
      c.setAttribute("id", "userobotposition"),
      u.appendChild(c),
      (c.onclick = function () {
        (document.getElementById("position_x").value = number_format(
          robot_cur_x,
          3,
          ".",
          ""
        )),
          (document.getElementById("position_y").value = number_format(
            robot_cur_y,
            3,
            ".",
            ""
          )),
          (document.getElementById(
            "position_orientation"
          ).value = number_format(robot_cur_degrees, 3, ".", ""));
      }),
      cart_attached)
    )
      (c = document.createElement("input")).setAttribute("type", "button"),
        c.setAttribute("value", map_lang_positiondialogue_usecartposition),
        c.setAttribute("name", "usecartposition"),
        c.setAttribute("id", "usecartposition"),
        u.appendChild(c),
        (c.onclick = function () {
          (document.getElementById("position_x").value = number_format(
            cart_front_x,
            3,
            ".",
            ""
          )),
            (document.getElementById("position_y").value = number_format(
              cart_front_y,
              3,
              ".",
              ""
            )),
            (document.getElementById(
              "position_orientation"
            ).value = number_format(cart_front_degrees, 3, ".", ""));
        });
  }
  (c = document.createElement("input")).setAttribute("type", "button"),
    c.setAttribute("value", mir_translate("Cancel")),
    c.setAttribute("name", "cancel"),
    c.setAttribute("id", "cancel"),
    u.appendChild(c),
    (c.onclick = function () {
      $("#" + _ + "_layer_positions")
        .find("div#tmp_pos")
        .remove(),
        document
          .getElementById(_ + "_position_formbox")
          .parentNode.removeChild(
            document.getElementById(_ + "_position_formbox")
          ),
        $(y).hide(),
        map_navigator(_);
    }),
    $(y).show();
}
function map_position_dialogue_toggle_offset(t) {
  var e = $("select#position_type").val();
  return (
    9 == e || 11 == e || 13 == e || 18 == e
      ? ($(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_x']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_y']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_orientation']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_length']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_distance']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='shelf_leg_asymmetry_x']"
        ).hide())
      : 22 == e
      ? ($(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_x']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_y']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_orientation']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_length']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_distance']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='shelf_leg_asymmetry_x']"
        ).hide())
      : 24 == e
      ? ($(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_x']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_y']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_orientation']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_length']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_distance']"
        ).show(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='shelf_leg_asymmetry_x']"
        ).show())
      : ($(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_x']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_y']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='offset_orientation']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_length']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='bar_distance']"
        ).hide(),
        $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='shelf_leg_asymmetry_x']"
        ).hide()),
    7 == e || 20 == e
      ? $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='charging_group']"
        ).show()
      : $(
          "div.mapcontainer > div.mapwrapper > div.mapdialogscreen > div.box > form > div.fieldholder[data-field='charging_group']"
        ).hide(),
    !0
  );
}
function detect_marker(e, a, t, d, r) {
  var i = new ROSLIB.ActionClient({
      ros: ros,
      serverName: "move_base",
      actionName: "mir_actions/MirMoveBaseAction",
    }),
    o = (robot_cur_degrees * Math.PI) / 180,
    n = robot_cur_x + Math.cos(o) * e - Math.sin(o) * a,
    s = robot_cur_y + Math.sin(o) * e + Math.cos(o) * a,
    l = !1,
    p = 0,
    m = 0,
    u = 0,
    c = 0;
  22 == d
    ? ((m = parseFloat($("input#bar_length").val())),
      (u = parseFloat($("input#bar_distance").val())))
    : 24 == d &&
      ((m = parseFloat($("input#bar_length").val())),
      (u = parseFloat($("input#bar_distance").val())),
      (c = parseFloat($("input#shelf_leg_asymmetry_x").val())));
  var _ = new ROSLIB.Goal({
    actionClient: i,
    goalMessage: {
      move_task: 4,
      only_track: !0,
      pattern_type: d,
      pose: {
        x: n,
        y: s,
        theta: t,
      },
      offset: {
        x: 0,
        y: 0,
        theta: r ? 0 : Math.PI,
      },
      bar_length: m,
      bar_distance: u,
      shelf_leg_asymmetry_x: c,
      tolerance: 1,
    },
  });
  _.send(),
    _.on("feedback", function (t) {
      if (0 < ++p && !l) {
        l = !0;
        var e = t.pose.x - robot_cur_x,
          a = t.pose.y - robot_cur_y,
          r = t.pose.theta - Math.atan2(a, e),
          i = robot_cur_degrees - (180 * t.pose.theta) / Math.PI;
        180 < i ? (i -= 360) : i < -180 && (i += 360);
        var o = Math.sqrt(e * e + a * a);
        if (
          ((document.getElementById("position_x").value = t.pose.x.toFixed(3)),
          (document.getElementById("position_y").value = t.pose.y.toFixed(3)),
          (document.getElementById("position_orientation").value = (
            (180 * t.pose.theta) /
            Math.PI
          ).toFixed(3)),
          18 == d || 22 == d || 24 == d)
        )
          (document.getElementById("offset_x").value = 0),
            (document.getElementById("offset_y").value = 0),
            Math.abs(i) < 90
              ? (document.getElementById(
                  "offset_orientation"
                ).value = (0).toFixed(3))
              : (document.getElementById(
                  "offset_orientation"
                ).value = (180).toFixed(3));
        else if (13 == d) {
          var n = 0.3;
          t.marker_inversion && (n = -0.05);
          var s = 0.5;
          ("MIR500" != mir_product && "MIR1000" != mir_product) ||
            ((n = 0.65), t.marker_inversion && (n = -0.3), (s = 0.9)),
            (document.getElementById("offset_x").value = n),
            0 < (Math.sin(r) * o).toFixed(3) &&
            0 < Math.cos((i * Math.PI) / 180).toFixed(3)
              ? ((document.getElementById("offset_y").value = s),
                (document.getElementById("offset_orientation").value = 0))
              : (Math.sin(r) * o).toFixed(3) < 0 &&
                0 < Math.cos((i * Math.PI) / 180).toFixed(3)
              ? ((document.getElementById("offset_y").value = -s),
                (document.getElementById("offset_orientation").value = 0))
              : (0 < (Math.sin(r) * o).toFixed(3) &&
                Math.cos((i * Math.PI) / 180).toFixed(3) < 0
                  ? (document.getElementById("offset_y").value = s)
                  : (document.getElementById("offset_y").value = -s),
                (document.getElementById("offset_orientation").value = 180));
        } else
          (document.getElementById("offset_x").value = (
            -Math.cos(r) * o
          ).toFixed(3)),
            (document.getElementById("offset_y").value = (
              Math.sin(r) * o
            ).toFixed(3)),
            (document.getElementById("offset_orientation").value = i.toFixed(
              3
            ));
        0 == document.getElementById("offset_x").value.length &&
          (document.getElementById("offset_x").value = 0),
          0 == document.getElementById("offset_y").value.length &&
            (document.getElementById("offset_y").value = 0),
          0 == document.getElementById("offset_orientation").value.length &&
            (document.getElementById("offset_orientation").value = 0),
          _.cancel(),
          close_waiter();
      }
    }),
    setTimeout(function () {
      if (!l)
        if ((_.cancel(), r)) {
          var t = (robot_cur_degrees * Math.PI) / 180 + Math.PI;
          t > Math.PI ? (t -= 2 * Math.PI) : t < -Math.PI && (t += 2 * Math.PI),
            detect_marker(-e, -a, t, d, !1);
        } else
          _.cancel(),
            close_waiter(),
            launch_error(map_lang_positiondialogue_failedtolocatemarker);
    }, 3e3);
}
function map_areaeventsettings(o) {
  var t = document.getElementById(o + "_mapcontainer"),
    e = parseInt(t.getAttribute("data-areaeventsettings-type")),
    n = document.getElementById(o + "_mapdialogscreen");
  (n.innerHTML = ""),
    document.getElementById(o + "_areaeventsettings") &&
      document
        .getElementById(o + "_areaeventsettings")
        .parentNode.removeChild(
          document.getElementById(o + "_areaeventsettings")
        ),
    $(n).hide();
  var a = t.getAttribute("data-selected-shape"),
    r = t.getAttribute("data-current-layer"),
    i = document.createElement("div");
  i.setAttribute("class", "box"),
    i.setAttribute("id", o + "_areaeventsettings"),
    n.appendChild(i);
  var s = document.createElement("h1");
  s.innerHTML = map_lang_zonesettings;
  var d = document.createElement("i");
  d.setAttribute("class", "help-icon"),
    (d.onclick = function () {
      MIR.ui.helptext(
        mir_translate("shared_maps_popup_dialog_zone_settings_help_text"),
        mir_translate("shared_maps_popup_dialog_zone_settings_help_headline"),
        !0
      );
    }),
    s.appendChild(d),
    i.appendChild(s);
  var l = document.createElement("form");
  l.setAttribute("novalidate", !0),
    l.setAttribute("action", ""),
    l.setAttribute("method", ""),
    l.setAttribute("data-element-id", o),
    l.setAttribute("data-type-id", e),
    i.appendChild(l),
    (l.onsubmit = function (t) {
      if ((t.preventDefault(), !area_events.save(this))) return !1;
      var e = document
        .getElementById(this.getAttribute("data-element-id") + "_mapcontainer")
        .getAttribute("data-selected-shape");
      if (0 < e.length)
        for (var a = (e = e.split("_")).length, r = (e[a - 1], 1); r < a; )
          r < a - 1 && (1 < r && "_", e[r]), r++;
      $(n).hide(),
        map_set_save_state(this.getAttribute("data-element-id"), "savable", !1);
      var i = $("#" + o + "_mapcontainer");
      return (
        1 == i.attr("navigator-on-close") &&
          (i.removeAttr("navigator-on-close"), map_navigator(o)),
        !1
      );
    });
  var p = document.createElement("div");
  p.setAttribute("class", "fieldgroup"),
    p.setAttribute("id", "areaeventsettings_fieldgroup_" + e),
    p.setAttribute("data-for", a),
    l.appendChild(p),
    (u = document.createElement("div")).setAttribute("class", "fieldholder"),
    p.appendChild(u);
  var m = document.createElement("label");
  m.setAttribute("for", "areaevent_name"),
    (m.innerHTML = mir_translate("Name")),
    u.appendChild(m);
  var u,
    c =
      void 0 !==
      window["map_" + o + "_metadata"].layers[r].shapes[
        t.getAttribute("shape-index")
      ]
        ? window["map_" + o + "_metadata"].layers[r].shapes[
            t.getAttribute("shape-index")
          ].name
        : t.getAttribute("data-areaevent-name"),
    _ = document.createElement("input");
  _.setAttribute("type", "text"),
    _.setAttribute("autocomplete", "off"),
    _.setAttribute("id", "areaevent_name"),
    _.setAttribute("name", "areaevent_name"),
    _.setAttribute("value", c),
    u.appendChild(_),
    (u = document.createElement("div")).setAttribute("class", "fieldholder"),
    p.appendChild(u);
  var g = {
    modal: n,
    layer: r,
    shape_index: t.getAttribute("shape-index"),
  };
  area_events.settingsModal(o, g);
  var h,
    f = document.createElement("div");
  return (
    f.setAttribute("class", "buttonholder"),
    l.appendChild(f),
    (h = document.createElement("input")).setAttribute("type", "submit"),
    h.setAttribute("value", mir_translate("OK")),
    h.setAttribute("name", "submit"),
    h.setAttribute("id", "submit"),
    f.appendChild(h),
    (h = document.createElement("input")).setAttribute("type", "button"),
    h.setAttribute("value", mir_translate("Cancel")),
    h.setAttribute("name", "cancel"),
    h.setAttribute("id", "cancel"),
    f.appendChild(h),
    (h.onclick = function () {
      document
        .getElementById(o + "_areaeventsettings")
        .parentNode.removeChild(
          document.getElementById(o + "_areaeventsettings")
        ),
        $(n).hide();
    }),
    $(n).show(),
    (9 != e && 8 != e) || document.getElementById("areaevent_name").focus(),
    !0
  );
}
function map_brushsettings(t) {
  var e = document.getElementById(t + "_mapcontainer"),
    a = document.getElementById(t + "_mapdialogscreen");
  a.innerHTML = "";
  var r = document.createElement("div");
  r.setAttribute("class", "box"),
    r.setAttribute("id", t + "_brushsizepicker"),
    a.appendChild(r);
  var i = document.createElement("h1");
  (i.innerHTML = map_lang_brushsettings), r.appendChild(i);
  for (var o = 5; o <= 50; ) {
    var n = document.createElement("div");
    n.setAttribute("class", "areaprefholder"),
      n.setAttribute("data-element-id", t),
      n.setAttribute("data-prefbrushsize", o),
      parseInt(e.getAttribute("data-current-brushsize")) == o
        ? n.setAttribute("data-active", "true")
        : n.setAttribute("data-active", "false"),
      r.appendChild(n),
      (n.onclick = function () {
        document
          .getElementById(
            this.getAttribute("data-element-id") + "_mapcontainer"
          )
          .setAttribute(
            "data-current-brushsize",
            this.getAttribute("data-prefbrushsize")
          ),
          document
            .getElementById(
              this.getAttribute("data-element-id") + "_brushsizepicker"
            )
            .parentNode.removeChild(
              document.getElementById(
                this.getAttribute("data-element-id") + "_brushsizepicker"
              )
            ),
          $(a).hide();
      });
    var s = document.createElement("div");
    s.setAttribute("class", "sizebox"),
      s.setAttribute("data-size", o),
      n.appendChild(s);
    var d = document.createElement("div");
    d.setAttribute("class", "explainbox"), n.appendChild(d);
    var l = document.createElement("p");
    (l.innerHTML = o + " " + map_lang_brushsettings_pixels),
      d.appendChild(l),
      (o += 10 == o ? 15 : 25 == o ? 5 : 29 < o ? 10 : 5);
  }
  $(a).show();
}
function map_linesettings(t) {
  var e = document.getElementById(t + "_mapcontainer"),
    a = document.getElementById(t + "_mapdialogscreen"),
    r = e.getAttribute("data-current-layer"),
    i = parseInt(e.getAttribute("data-current-linesize"));
  a.innerHTML = "";
  var o = document.createElement("div");
  o.setAttribute("class", "box"),
    o.setAttribute("id", t + "_mapsettings"),
    a.appendChild(o);
  var n = document.createElement("h1");
  (n.innerHTML = map_lang_linesettings), o.appendChild(n);
  var s = document.createElement("div");
  s.setAttribute("class", "linesettingswrapper"), o.appendChild(s);
  var d = document.createElement("div");
  d.setAttribute("class", "previewcolumn"), s.appendChild(d);
  var l = document.createElement("div");
  l.setAttribute("class", "pickercolumn"), s.appendChild(l);
  var p = document.createElement("h3");
  p.setAttribute("class", "list-head"),
    (p.innerHTML = map_lang_linesetting_preset_header),
    l.appendChild(p);
  var m = document.createElement("ul");
  l.appendChild(m);
  var u = ["oneway"],
    c = ["walls"],
    _ = !1,
    g = !1;
  Array.isArray(u) && -1 < $.inArray(r, u) && (_ = !0),
    Array.isArray(c) && -1 < $.inArray(r, c) && (g = !0);
  var h,
    f = [];
  _ ||
    (((h = {}).name = map_lang_linesettings_five),
    (h.value = 1),
    (h.extra = map_lang_linesettings_goodforwalls),
    f.push(h),
    ((h = {}).name = map_lang_linesettings_ten),
    (h.value = 2),
    (h.extra = map_lang_linesettings_goodforwalls),
    f.push(h));
  g ||
    (((h = {}).name = map_lang_linesettings_fifty),
    (h.value = 10),
    (h.extra = map_lang_linesettings_goodforlanes),
    f.push(h),
    ((h = {}).name = map_lang_linesettings_hundred),
    (h.value = 20),
    (h.extra = map_lang_linesettings_goodforlanes),
    f.push(h));
  for (var v = !1, b = 0; b < f.length; ) {
    (B = document.createElement("li")).setAttribute("data-value", f[b].value),
      B.setAttribute("data-element-id", t),
      f[b].value == i
        ? (B.setAttribute("data-active", "true"), (v = !0))
        : B.setAttribute("data-active", "false"),
      m.appendChild(B);
    var y = document.createElement("div");
    if (
      (y.setAttribute("class", "name"),
      (y.innerHTML = f[b].name),
      B.appendChild(y),
      0 < f[b].extra.length)
    ) {
      var w = document.createElement("div");
      w.setAttribute("class", "label"),
        (w.innerHTML = f[b].extra),
        B.appendChild(w);
    }
    (B.onclick = function () {
      var t = document.getElementById(
        this.getAttribute("data-element-id") + "_mapcontainer"
      );
      t.setAttribute("data-current-linesize", this.getAttribute("data-value"));
      var e = t.getAttribute("data-current-layer");
      $(t)
        .find(
          "div.mapwrapper > div.mapdialogscreen > div.box > div.linesettingswrapper > div.pickercolumn > ul > li"
        )
        .attr("data-active", "false"),
        this.setAttribute("data-active", "true");
      var a = t.getAttribute("data-selected-shape");
      if (0 < a.length) {
        for (
          var r = (a = a.split("_")).length, i = a[r - 1], o = "", n = 1;
          n < r;

        )
          n < r - 1 && (1 < n && (o += "_"), (o += a[n])), n++;
        window["map_" + this.getAttribute("data-element-id") + "_metadata"]
          .layers[o].shapes[i];
        (window[
          "map_" + this.getAttribute("data-element-id") + "_metadata"
        ].layers[o].shapes[i].brushsize = parseInt(
          this.getAttribute("data-value")
        )),
          map_set_save_state(
            this.getAttribute("data-element-id"),
            "savable",
            !1
          );
        var s = document.getElementById(
            this.getAttribute("data-element-id") + "_layer_" + o
          ),
          d = $(s).find("iframe"),
          l = $(d).contents(),
          p = $(l)
            .find(
              "#" + this.getAttribute("data-element-id") + "_" + o + "_" + i
            )
            .attr("style");
        p = p.split(";");
        var m = " stroke-width:";
        for (n = 0; n < p.length; )
          p[n].substr(0, m.length) == m &&
            (p[n] = m + " " + this.getAttribute("data-value") + "px"),
            n++;
        (p = p.join(";")),
          $(l)
            .find(
              "#" + this.getAttribute("data-element-id") + "_" + o + "_" + i
            )
            .attr("style", p);
      }
      document
        .getElementById("maplinesettingspreview")
        .setAttribute(
          "style",
          "fill: none; stroke-width: " +
            this.getAttribute("data-value") +
            "px; stroke: #75ACD8; stroke-linecap: butt; stroke-linejoin: bevel;"
        );
      var u = $("#" + this.getAttribute("data-element-id") + "_layer_" + e)
        .find("iframe")
        .contents()
        .find("svg")
        .find("#tempshape");
      1 == u.length &&
        $(u).attr(
          "stroke-width",
          t.getAttribute("data-current-linesize") + "px"
        );
    }),
      b++;
  }
  var A = 5 * parseInt(i);
  if (_ || g) (x = 10 * (E = _ ? 50 : 5)), (I = _ ? 10 : 5);
  else
    var E = 5,
      x = 500,
      I = 5;
  (B = document.createElement("li")).setAttribute("data-value", A / 5),
    B.setAttribute("data-element-id", t),
    B.setAttribute("data-active", !v),
    B.setAttribute("class", "input");
  var B,
    M = document.createElement("h3");
  M.setAttribute("class", "list-head"),
    (M.innerHTML = map_lang_linesetting_custom_header),
    (B = $(B)).append(M);
  var C =
    '<div class="number-step-group"><i class="checkmark"></i><a href="#" class="less">-' +
    I +
    '</a><input type="number" min="' +
    E +
    '" step="' +
    I +
    '" max="' +
    x +
    '" value="' +
    A +
    '" /><label>cm</label><a href="#" class="more">+' +
    I +
    "</a></div>";
  B.append(C);
  var k = B.find(".less"),
    T = B.find(".more"),
    z = B.find("input");
  B.on("click change", function () {
    var t = z.val(),
      e = parseInt(t) / 5;
    B.attr("data-value", e);
    var a = document.getElementById(
      this.getAttribute("data-element-id") + "_mapcontainer"
    );
    a.setAttribute("data-current-linesize", this.getAttribute("data-value"));
    var r = a.getAttribute("data-current-layer");
    $(a)
      .find(
        "div.mapwrapper > div.mapdialogscreen > div.box > div.linesettingswrapper > div.pickercolumn > ul > li"
      )
      .attr("data-active", "false"),
      this.setAttribute("data-active", "true");
    var i = a.getAttribute("data-selected-shape");
    if (0 < i.length) {
      for (
        var o = (i = i.split("_")).length, n = i[o - 1], s = "", d = 1;
        d < o;

      )
        d < o - 1 && (1 < d && (s += "_"), (s += i[d])), d++;
      window["map_" + this.getAttribute("data-element-id") + "_metadata"]
        .layers[s].shapes[n];
      (window[
        "map_" + this.getAttribute("data-element-id") + "_metadata"
      ].layers[s].shapes[n].brushsize = parseInt(
        this.getAttribute("data-value")
      )),
        map_set_save_state(this.getAttribute("data-element-id"), "savable", !1);
      var l = document.getElementById(
          this.getAttribute("data-element-id") + "_layer_" + s
        ),
        p = $(l).find("iframe"),
        m = $(p).contents(),
        u = $(m)
          .find("#" + this.getAttribute("data-element-id") + "_" + s + "_" + n)
          .attr("style");
      u = u.split(";");
      var c = " stroke-width:";
      for (d = 0; d < u.length; )
        u[d].substr(0, c.length) == c &&
          (u[d] = c + " " + this.getAttribute("data-value") + "px"),
          d++;
      (u = u.join(";")),
        $(m)
          .find("#" + this.getAttribute("data-element-id") + "_" + s + "_" + n)
          .attr("style", u);
    }
    document
      .getElementById("maplinesettingspreview")
      .setAttribute(
        "style",
        "fill: none; stroke-width: " +
          this.getAttribute("data-value") +
          "px; stroke: #75ACD8; stroke-linecap: butt; stroke-linejoin: bevel;"
      );
    var _ = $("#" + this.getAttribute("data-element-id") + "_layer_" + r)
      .find("iframe")
      .contents()
      .find("svg")
      .find("#tempshape");
    1 == _.length &&
      $(_).attr("stroke-width", a.getAttribute("data-current-linesize") + "px");
  }),
    k.on("click", function (t) {
      t.preventDefault();
      var e = parseInt(z.val()) - I;
      (e = e < E ? E : e), z.val(e), B.trigger("change");
    }),
    T.on("click", function (t) {
      t.preventDefault();
      var e = parseInt(z.val()) + I;
      (e = x < e ? x : e), z.val(e), B.trigger("change");
    }),
    z.on("blur", function () {
      var t = z.val();
      (t = (t = x < t ? x : t) < E ? E : t), z.val(t), B.trigger("change");
    }),
    z.on("keyup", function (t) {
      if (
        (8 != t.which &&
          isNaN(String.fromCharCode(t.which)) &&
          t.preventDefault(),
        13 === t.keyCode)
      ) {
        var e = z.val();
        (e = (e = x < e ? x : e) < E ? E : e), z.val(e), B.trigger("change");
      }
    }),
    $(m).append(B);
  var R = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  R.setAttribute("width", 200), R.setAttribute("height", 200), d.appendChild(R);
  var L = document.createElementNS("http://www.w3.org/2000/svg", "path");
  L.setAttribute("d", "M10 10L10 190L60 190L60 110L130 110L180 10"),
    L.setAttribute(
      "style",
      "fill: none; stroke: #75ACD8; stroke-width: " +
        i +
        "px; stroke-linecap: butt; stroke-linejoin: bevel;"
    ),
    L.setAttribute("id", "maplinesettingspreview"),
    R.appendChild(L);
  var F = document.createElement("div");
  F.setAttribute("class", "okbutton"),
    F.setAttribute("data-element-id", t),
    (F.innerHTML = map_lang_linesettings_close),
    o.appendChild(F),
    (F.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(a).hide();
    }),
    $(a).show();
}
function map_set_mychoice(t) {
  $(".current_layer").removeClass("current_layer");
  var e = document.getElementById(t + "_mapcontainer"),
    a = "";
  if (document.getElementById(t + "_toolbutton_mychoice_selector"))
    try {
      var r = document.getElementById(t + "_toolbutton_mychoice_selector");
      (a = r.options[r.selectedIndex].value), $(r).parent().attr("data-val", a);
    } catch (t) {
      console.log(t);
    }
  e.setAttribute("data-mychoice", a),
    a || $(".toolbarbutton_itemselector").show(),
    "walls" == a
      ? e.setAttribute("data-current-linesize", "1")
      : e.setAttribute("data-current-linesize", "20"),
    e.setAttribute("data-areaevent-name", "");
  var i =
    void 0 !== MIR.constants.MAP.choice_layers[a]
      ? MIR.constants.MAP.choice_layers[a]
      : "";
  e.setAttribute("data-current-layer", i);
  var o = document.getElementById(t + "_layer_" + i),
    n = $(o).find("iframe");
  if (n) {
    var s = $(n).contents();
    $(s).find("#tempshape").remove();
  }
  window[t + "_localpoints"] = [];
  map_navigator(t),
    0 < a.length
      ? map_set_guide(t, window["map_lang_guide_mychoice_" + a])
      : map_clear_guide(t),
    map_toolbars_place(),
    map_show_all_layers(t);
  var d = MIR.runtime.maps[t].mir.get_chosen_layer();
  if (
    d &&
    (map_itemselector(t),
    map_isolate_layer(t, d),
    -1 != d.indexOf("areaevents_"))
  ) {
    var l = area_events.getAreaColor(a);
    if ("object" == typeof l) {
      var p = {
        "background-color": "rgba(" + l.rgb_string + ", 0.8)",
        border: "1px solid rgba(" + l.rgb_string + ")",
      };
      $(".colorholder").css(p);
    }
  }
  return !0;
}
function map_reset_mychoice(t) {
  var e = document.getElementById(t + "_mapcontainer");
  if (
    (e.setAttribute("data-mychoice", ""),
    "true" == e.getAttribute("data-drawable"))
  ) {
    var a = document.getElementById(t + "_toolbutton_mychoice_selector");
    $(a).val("").selectmenu("refresh");
  }
  return !0;
}
function map_autoselect_layer(t, e, a) {
  var r = document
      .getElementById(t + "_mapcontainer")
      .getAttribute("data-mychoice"),
    i = "";
  return (
    (i =
      "walls" == r && "vectors" == e
        ? "walls"
        : "walls" == r
        ? "basemap_walls"
        : "floors" == r && "vectors" == e
        ? "floor"
        : "floors" == r
        ? "basemap_floor"
        : "oneway" == r
        ? "oneway"
        : "preferred" == r ||
          "unpreferred" == r ||
          "forbidden" == r ||
          "critical" == r
        ? "areaprefs_" + r
        : "areaevents_" + r),
    1 == a || map_layercontrol_set_layer(t, i),
    !0
  );
}
function map_set_save_state(t, e, a) {
  var r = document.getElementById(t + "_mapcontainer"),
    i = r.getAttribute("data-save-state");
  return (
    "saved" == e || "saving" == e ? resetChanges() : submitwarn_set(),
    "saving" == i && "saved" == e && 1 == a
      ? 0 < r.getAttribute("data-next-save-state").length
        ? (r.setAttribute(
            "data-save-state",
            r.getAttribute("data-next-save-state")
          ),
          r.setAttribute("data-next-save-state", ""))
        : r.setAttribute("data-save-state", "saved")
      : "saving" == e && 1 == a
      ? r.setAttribute("data-save-state", "saving")
      : "saving" == i
      ? r.setAttribute("data-next-save-state", e)
      : (r.setAttribute("data-save-state", e),
        r.setAttribute("data-next-save-state", "")),
    !0
  );
}
function map_autosave(t) {
  "savable" ==
    document
      .getElementById(t + "_mapcontainer")
      .getAttribute("data-save-state") && map_save(t, !0);
}
function map_set_guide(t, e) {
  return (
    (document.getElementById(t + "_mapguide").innerHTML = e),
    map_determine_guide_visibility(t),
    !0
  );
}
function map_clear_guide(t) {
  return (
    (document.getElementById(t + "_mapguide").innerHTML = ""),
    map_determine_guide_visibility(t),
    !0
  );
}
function map_determine_guide_visibility(t) {
  var e = document.getElementById(t + "_mapguidescreen");
  return (
    0 == document.getElementById(t + "_mapguide").innerHTML.length
      ? e.setAttribute("data-visible", "false")
      : e.setAttribute("data-visible", "true"),
    !0
  );
}
function map_misc(t) {
  document.getElementById(t + "_mapcontainer");
  var e = document.getElementById(t + "_mapdialogscreen");
  e.innerHTML = "";
  var a = document.createElement("div");
  a.setAttribute("class", "box"),
    a.setAttribute("id", t + "_mapsettings"),
    e.appendChild(a);
  var r = document.createElement("h1");
  (r.innerHTML = "<span>" + mir_translate("Miscellaneous") + "</span>"),
    a.appendChild(r);
  var i = document.createElement("div");
  i.setAttribute("class", "mapmiscwrapper"), a.appendChild(i);
  var o = document.createElement("table");
  o.setAttribute("cellpadding", "0"),
    o.setAttribute("cellspacing", "0"),
    i.appendChild(o);
  var n = document.createElement("tr");
  if (
    (o.appendChild(n),
    (p = document.createElement("td")).setAttribute("class", "buttoncell"),
    n.appendChild(p),
    (s = document.createElement("div")).setAttribute(
      "class",
      "upload_destructive"
    ),
    (s.innerHTML = "<span>" + mir_translate("Destructive upload") + "</span>"),
    s.setAttribute("data-element-id", t),
    (s.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(e).hide(),
        map_upload(this.getAttribute("data-element-id"));
    }),
    p.appendChild(s),
    (p = document.createElement("td")).setAttribute("class", "explaincell"),
    n.appendChild(p),
    ((d = document.createElement("span")).innerHTML = mir_translate(
      "Destructive upload"
    )),
    p.appendChild(d),
    ((l = document.createElement("p")).innerHTML = mir_translate(
      "Replace existing map with uploaded map."
    )),
    p.appendChild(l),
    "robot" == systemtype)
  ) {
    (p = document.createElement("td")).setAttribute("class", "buttoncell"),
      n.appendChild(p),
      (s = document.createElement("div")).setAttribute(
        "class",
        "record_destructive"
      ),
      (s.innerHTML =
        "<span>" + mir_translate("Destructive record") + "</span>"),
      s.setAttribute("data-element-id", t),
      (s.onclick = function () {
        document
          .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
          .parentNode.removeChild(
            document.getElementById(
              this.getAttribute("data-element-id") + "_mapsettings"
            )
          ),
          $(e).hide(),
          map_record_start_check(this.getAttribute("data-element-id"));
      }),
      p.appendChild(s),
      (p = document.createElement("td")).setAttribute("class", "explaincell"),
      n.appendChild(p),
      ((d = document.createElement("span")).innerHTML = mir_translate(
        "Destructive record"
      )),
      p.appendChild(d),
      ((l = document.createElement("p")).innerHTML = mir_translate(
        "Replace existing map with new recording of map."
      )),
      p.appendChild(l);
    n = document.createElement("tr");
    o.appendChild(n);
  }
  (p = document.createElement("td")).setAttribute("class", "buttoncell"),
    n.appendChild(p),
    (s = document.createElement("div")).setAttribute("class", "upload_append"),
    (s.innerHTML = "<span>" + mir_translate("Append upload") + "</span>"),
    s.setAttribute("data-element-id", t),
    (s.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(e).hide(),
        map_upload(this.getAttribute("data-element-id"), !0);
    }),
    p.appendChild(s),
    (p = document.createElement("td")).setAttribute("class", "explaincell"),
    n.appendChild(p),
    ((d = document.createElement("span")).innerHTML = mir_translate(
      "Append upload"
    )),
    p.appendChild(d),
    ((l = document.createElement("p")).innerHTML = mir_translate(
      "Upload a new map to append to current map."
    )),
    p.appendChild(l),
    "robot" == systemtype &&
      ((p = document.createElement("td")).setAttribute("class", "buttoncell"),
      n.appendChild(p),
      (s = document.createElement("div")).setAttribute(
        "class",
        "record_append"
      ),
      (s.innerHTML = "<span>" + mir_translate("Append record") + "</span>"),
      s.setAttribute("data-element-id", t),
      (s.onclick = function () {
        document
          .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
          .parentNode.removeChild(
            document.getElementById(
              this.getAttribute("data-element-id") + "_mapsettings"
            )
          ),
          $(e).hide(),
          map_record_start_check(this.getAttribute("data-element-id"), !0);
      }),
      p.appendChild(s),
      (p = document.createElement("td")).setAttribute("class", "explaincell"),
      n.appendChild(p),
      ((d = document.createElement("span")).innerHTML = mir_translate(
        "Append record"
      )),
      p.appendChild(d),
      ((l = document.createElement("p")).innerHTML = mir_translate(
        "Record a new map and append it to existing map."
      )),
      p.appendChild(l));
  var s, d, l, p;
  n = document.createElement("tr");
  o.appendChild(n),
    (p = document.createElement("td")).setAttribute("class", "buttoncell"),
    n.appendChild(p),
    (s = document.createElement("div")).setAttribute("class", "download"),
    (s.innerHTML = "<span>" + mir_translate("Download map") + "<span>"),
    s.setAttribute("data-element-id", t),
    (s.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(e).hide(),
        map_download(this.getAttribute("data-element-id"));
    }),
    p.appendChild(s),
    (p = document.createElement("td")).setAttribute("class", "explaincell"),
    n.appendChild(p),
    ((d = document.createElement("span")).innerHTML = mir_translate(
      "Download map"
    )),
    p.appendChild(d),
    ((l = document.createElement("p")).innerHTML = mir_translate(
      "Download the current map."
    )),
    p.appendChild(l),
    (p = document.createElement("td")).setAttribute("class", "buttoncell"),
    (p.innerHTML = "&nbsp;"),
    n.appendChild(p),
    (p = document.createElement("td")).setAttribute("class", "explaincell"),
    (p.innerHTML = "&nbsp;"),
    n.appendChild(p);
  var m = document.createElement("div");
  return (
    m.setAttribute("class", "okbutton"),
    m.setAttribute("data-element-id", t),
    (m.innerHTML = mir_translate("Cancel")),
    a.appendChild(m),
    (m.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(e).hide();
    }),
    $(e).show(),
    !0
  );
}
function map_undo(t) {
  var e = document.getElementById(t + "_mapcontainer");
  return (
    "shapedrawer" == e.getAttribute("data-current-tool") ||
      "linedrawer" == e.getAttribute("data-current-tool") ||
      ("true" == e.getAttribute("data-undoable") &&
      0 < window["map_" + t + "_history"].length
        ? (map_perform_undo(t, window["map_" + t + "_history"][0]),
          window["map_" + t + "_history"].splice(0, 1),
          0 < window["map_" + t + "_history"].length
            ? e.setAttribute("data-undoable", "true")
            : e.setAttribute("data-undoable", "false"))
        : e.setAttribute("data-undoable", "false")),
    !0
  );
}
function map_add_to_history(t, e) {
  var a = document.getElementById(t + "_mapcontainer");
  return (
    window["map_" + t + "_history"].unshift(e),
    10 < window["map_" + t + "_history"].length &&
      window["map_" + t + "_history"].splice(
        10,
        window["map_" + t + "_history"].length - 10
      ),
    0 < window["map_" + t + "_history"].length
      ? a.setAttribute("data-undoable", "true")
      : a.setAttribute("data-undoable", "false"),
    !0
  );
}
function map_perform_undo(t, e) {
  var a = document.getElementById(t + "_mapcontainer"),
    r = document.getElementById(t + "_mapdrawer"),
    i = parseFloat(a.getAttribute("data-zoom-scale"));
  if ("move_point" == e.type) {
    for (
      var o =
          window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id]
            .polygon,
        n = "",
        s = !1,
        d = 0;
      d < o.length;

    )
      d == e.point_id
        ? (0 == s ? ((n += "M"), (s = !0)) : (n += "L"),
          (n += e.old_x + " " + e.old_y))
        : "DELETED" == o[d] ||
          (0 == s ? ((n += "M"), (s = !0)) : (n += "L"),
          (n += o[d].x + " " + o[d].y)),
        d++;
    (window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id].polygon[
      e.point_id
    ].x = e.old_x),
      (window["map_" + t + "_metadata"].layers[e.layer].shapes[
        e.path_id
      ].polygon[e.point_id].y = e.old_y),
      "shape" ==
        window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id]
          .type && (n += "z");
    var l = document.getElementById(t + "_layer_" + e.layer),
      p = $(l).find("iframe"),
      m = $(p).contents();
    $(m)
      .find("#" + t + "_" + e.layer + "_" + e.path_id)
      .attr("d", n);
    var u =
        Math.round(e.old_y * i) +
        parseFloat(a.getAttribute("data-zoom-offset-top")),
      c =
        Math.round(e.old_x * i) +
        parseFloat(a.getAttribute("data-zoom-offset-left"));
    $(r)
      .find(
        "div.refigurepathhandle[data-layer='" +
          e.layer +
          "'][data-path='" +
          e.path_id +
          "'][data-point='" +
          e.point_id +
          "']"
      )
      .css("top", u),
      $(r)
        .find(
          "div.refigurepathhandle[data-layer='" +
            e.layer +
            "'][data-path='" +
            e.path_id +
            "'][data-point='" +
            e.point_id +
            "']"
        )
        .css("left", c),
      map_set_save_state(t, "savable", !1);
  } else if ("delete_point" == e.type) {
    window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id].polygon[
      e.point_id
    ] = e.old_obj;
    for (
      o =
        window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id]
          .polygon,
        n = "",
        d = 0,
        s = !1;
      d < o.length;

    )
      ("DELETED" == o[d] && d !== e.point_id) ||
        (0 == s ? ((n += "M"), (s = !0)) : (n += "L"),
        (n += o[d].x + " " + o[d].y)),
        d++;
    "stroke" ==
      window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id].type ||
      (n += "z");
    (l = document.getElementById(t + "_layer_" + e.layer)),
      (p = $(l).find("iframe")),
      (m = $(p).contents());
    $(m)
      .find("#" + t + "_" + e.layer + "_" + e.path_id)
      .attr("d", n);
    (u =
      Math.round(e.old_obj.y * i) +
      parseFloat(a.getAttribute("data-zoom-offset-top"))),
      (c =
        Math.round(e.old_obj.x * i) +
        parseFloat(a.getAttribute("data-zoom-offset-left")));
    var _ = document.createElement("div");
    _.setAttribute("class", "refigurepathhandle"),
      _.setAttribute("data-layer", e.layer),
      _.setAttribute("data-path", e.path_id),
      _.setAttribute("data-point", e.point_id),
      _.setAttribute("data-element-id", t),
      r.appendChild(_),
      $(_).css("top", u),
      $(_).css("left", c),
      map_set_save_state(t, "savable", !1);
  } else if ("delete_shape" == e.type) {
    var g = $("#" + t + "_layer_" + e.layer)
        .find("iframe")
        .contents()
        .find("svg"),
      h = document.createElementNS("http://www.w3.org/2000/svg", "path");
    h.setAttribute("d", e.svgdata),
      "shape" == e.old_obj.type
        ? h.setAttribute(
            "style",
            "fill: " + e.old_obj.color + "; stroke: none; opacity: 1;"
          )
        : h.setAttribute(
            "style",
            "fill: none; stroke: " +
              e.old_obj.color +
              "; stroke-width: " +
              e.old_obj.brushsize +
              "px; stroke-linecap: butt; stroke-linejoin: bevel; opacity: 1;"
          ),
      h.setAttribute("id", t + "_" + e.layer + "_" + e.path_id),
      h.setAttribute("class", t + "_svgpath"),
      g.append(h),
      (window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id] =
        e.old_obj),
      map_set_save_state(t, "savable", !1);
  } else if ("insert_point" == e.type) {
    (l = document.getElementById(t + "_layer_" + e.layer)),
      (p = $(l).find("iframe")),
      (m = $(p).contents());
    $(m)
      .find("#" + t + "_" + e.layer + "_" + e.path_id)
      .attr("d", e.svgdata),
      (window["map_" + t + "_metadata"].layers[e.layer].shapes[e.path_id] =
        e.old_obj),
      $(r)
        .find(
          "div.refigurepathhandle[data-layer='" +
            e.layer +
            "'][data-path='" +
            e.path_id +
            "'][data-point='" +
            e.point_id +
            "']"
        )
        .remove(),
      map_set_save_state(t, "savable", !1);
  } else if ("delete_pixels" == e.type) {
    (l = document.getElementById(t + "_layer_" + e.layer)).getElementsByTagName(
      "canvas"
    )[0];
    "basemap_floor" == e.layer
      ? (document.getElementById(t + "_real_basemap_floor_img").src = e.data)
      : (document.getElementById(t + "_real_basemap_walls_img").src = e.data),
      map_set_save_state(t, "savable", !1);
  } else if ("create_shape" == e.type) {
    (l = document.getElementById(t + "_layer_" + e.layer)),
      (p = $(l).find("iframe")),
      (m = $(p).contents());
    $(m)
      .find("#" + e.path_id)
      .remove(),
      map_set_save_state(
        t,
        "savable",
        !(window["map_" + t + "_metadata"].layers[e.layer].shapes[e.removeid] =
          "DELETED")
      );
  }
  return map_navigator(t), !0;
}
function map_delete(t, e) {
  1 == e
    ? (launch_waiter(map_lang_deletemap_deleting),
      instant_delete("/maps", t, "location.href='/setup/maps';"))
    : launch_confirm(
        map_lang_deletemap_headline,
        map_lang_deletemap_text,
        "map_delete('" + t + "',true)",
        map_lang_deletemap_btn_delete,
        map_lang_deletemap_btn_cancel
      );
}
function map_update_ghost(t, e, a) {
  var r = document.getElementById(t + "_layer_" + e),
    i = $(r).find("iframe"),
    o = $(i).contents();
  return (
    1 == $(o).find("#" + t + "_" + e + "_" + a).length
      ? $(o)
          .find("#" + t + "_" + e + "_" + a + "_ghost")
          .attr(
            "d",
            $(o)
              .find("#" + t + "_" + e + "_" + a)
              .attr("d")
          )
      : $(o)
          .find("#" + t + "_" + e + "_" + a + "_ghost")
          .remove(),
    !0
  );
}
function map_toolbars_place() {
  return (
    $("div.mapcontainer").each(function () {
      $(this).attr("data-toollines", "1"),
        40 < $(this).children("div.maptoolbar").height()
          ? $(this).attr("data-toollines", "2")
          : $(this).attr("data-toollines", "1");
    }),
    !0
  );
}
function map_draw_helpline(u, t) {
  var c = document.getElementById(u + "_mapcontainer"),
    _ = c.getAttribute("data-current-layer");
  return (
    $(document).off("mousemove", "#" + u + "_mapdrawer"),
    $(document).on("mousemove", "#" + u + "_mapdrawer", function (t) {
      if ((t.stopPropagation(), t.preventDefault(), !0 === t.handled))
        return !1;
      t.handled = !0;
      var e = parseFloat(c.getAttribute("data-zoom-scale"));
      if (null == t.originalEvent)
        var a = window["map_" + u + "_last_mouse_x"],
          r = window["map_" + u + "_last_mouse_y"];
      else if (
        null == t.originalEvent.offsetX &&
        -1 < t.originalEvent.touches[0].length
      ) {
        var i = document
          .getElementById(u + "_mapdrawer")
          .getBoundingClientRect();
        (a = t.originalEvent.touches[0].clientX - i.left),
          (r = t.originalEvent.touches[0].clientY - i.top);
      } else (a = t.originalEvent.offsetX), (r = t.originalEvent.offsetY);
      (window["map_" + u + "_last_mouse_x"] = a),
        (window["map_" + u + "_last_mouse_y"] = r),
        (a -= parseFloat(c.getAttribute("data-zoom-offset-left"))),
        (r -= parseFloat(c.getAttribute("data-zoom-offset-top"))),
        (a = Math.round(a / e)),
        (r = Math.round(r / e));
      var o = calculate_angle_between_points(
          a,
          r,
          window[u + "_localpoints"][window[u + "_localpoints"].length - 1].x,
          window[u + "_localpoints"][window[u + "_localpoints"].length - 1].y
        ),
        n = "";
      n =
        -45 <= o && o <= 45
          ? "y"
          : 45 <= o && o <= 135
          ? "x"
          : 135 <= o || o <= -135
          ? "y"
          : "x";
      var s =
          window[u + "_localpoints"][window[u + "_localpoints"].length - 1].x,
        d = window[u + "_localpoints"][window[u + "_localpoints"].length - 1].y;
      (s *= e),
        (d *= e),
        (s += parseFloat(c.getAttribute("data-zoom-offset-left"))),
        (d += parseFloat(c.getAttribute("data-zoom-offset-top"))),
        "x" == n
          ? ((a = s),
            (a -= parseFloat(c.getAttribute("data-zoom-offset-left"))),
            (a = Math.round(a / e)))
          : ((r = d),
            (r -= parseFloat(c.getAttribute("data-zoom-offset-top"))),
            (r = Math.round(r / e)));
      document.getElementById(u + "_layer_" + _);
      var l = $("#" + u + "_layer_" + _)
        .find("iframe")
        .contents()
        .find("svg");
      if (
        ($(l).find("#helpline").remove(), 0 == window["map_" + u + "_hitpoint"])
      ) {
        var p =
            "M" +
            window[u + "_localpoints"][window[u + "_localpoints"].length - 1]
              .x +
            " " +
            window[u + "_localpoints"][window[u + "_localpoints"].length - 1]
              .y +
            "L" +
            a +
            " " +
            r,
          m = document.createElementNS("http://www.w3.org/2000/svg", "path");
        m.setAttribute("d", p),
          m.setAttribute("fill", "none"),
          m.setAttribute("stroke", "#bb0000"),
          m.setAttribute("stroke-width", "1px"),
          m.setAttribute("stroke-linecap", "butt"),
          m.setAttribute("stroke-linejoin", "bevel"),
          m.setAttribute("stroke-dasharray", "3,3"),
          m.setAttribute("opacity", "1"),
          m.setAttribute("id", "helpline"),
          l.append(m);
      }
    }),
    1 == t && $("#" + u + "_mapdrawer").trigger("mousemove"),
    !0
  );
}
function map_clean_helpline(a) {
  var t = document
    .getElementById(a + "_mapcontainer")
    .getAttribute("data-current-layer");
  $(document).off("mousemove", "#" + a + "_mapdrawer");
  document.getElementById(a + "_layer_" + t);
  var e = $("#" + a + "_layer_" + t)
    .find("iframe")
    .contents()
    .find("svg");
  return (
    $(e).find("#helpline").remove(),
    $(document).on("mousemove", "#" + a + "_mapdrawer", function (t) {
      if (null == t.originalEvent.offsetX) {
        var e = document
          .getElementById(a + "_mapdrawer")
          .getBoundingClientRect();
        (window["map_" + a + "_last_mouse_x"] =
          t.originalEvent.touches[0].clientX - e.left),
          (window["map_" + a + "_last_mouse_y"] =
            t.originalEvent.touches[0].clientY - e.top);
      } else (window["map_" + a + "_last_mouse_x"] = t.originalEvent.offsetX), (window["map_" + a + "_last_mouse_y"] = t.originalEvent.offsetY);
    }),
    !0
  );
}
function determine_marker_images(t) {
  var a = Object.values(MIR.constants.MARKER_TYPES),
    e = $("#" + t + "_layer_positions>.position")
      .filter(function (t, e) {
        return -1 < a.indexOf(parseInt($(e).attr("data-type-id")));
      })
      .children();
  if (0 < e.length) {
    var r = e.height() < 30;
    e.toggle(!r);
  }
  return !0;
}
function map_appendplacer_start(c) {
  launch_waiter(mir_translate("Setting up workspace..."));
  var _ = document.getElementById(c + "_mapcontainer"),
    g = document.getElementById(c + "_map");
  _.setAttribute("data-appendmode", "true");
  var h = parseFloat(_.getAttribute("data-resscale")),
    f = parseFloat(_.getAttribute("data-origin-x")),
    v = parseFloat(_.getAttribute("data-origin-y")),
    b = parseInt(_.getAttribute("data-map-height")),
    t = {
      mode: "map-get-appendlayers",
    };
  return (
    (t.id = _.getAttribute("data-map-guid")),
    $.ajax({
      url: "/",
      data: t,
      method: "GET",
      dataType: "json",
      success: function (t) {
        if (0 < t.appendlayers.length) {
          var e = document.createElement("div");
          e.setAttribute("class", "appendholder"),
            e.setAttribute("id", c + "_layer_appendholder"),
            g.appendChild(e);
          for (var a = 0; a < t.appendlayers.length; ) {
            var r = document.createElement("img");
            r.setAttribute(
              "src",
              "/?calltype=light&mode=map-appendlayer-preview&map_id=" +
                _.getAttribute("data-map-guid") +
                "&id=" +
                t.appendlayers[a].id
            ),
              r.setAttribute("width", Math.round(t.appendlayers[a].width)),
              r.setAttribute("height", Math.round(t.appendlayers[a].height));
            var i = document.createElement("div");
            i.setAttribute("class", "handle_drag"),
              i.setAttribute("data-action", "drag");
            var o = document.createElement("div");
            o.setAttribute("class", "handle_rotate_upleft"),
              o.setAttribute("data-action", "rotate");
            var n = document.createElement("div");
            n.setAttribute("class", "handle_rotate_upright"),
              n.setAttribute("data-action", "rotate");
            var s = document.createElement("div");
            s.setAttribute("class", "handle_rotate_downleft"),
              s.setAttribute("data-action", "rotate");
            var d = document.createElement("div");
            d.setAttribute("class", "handle_rotate_downright"),
              d.setAttribute("data-action", "rotate");
            var l = parseFloat(t.appendlayers[a].pos_x),
              p = parseFloat(t.appendlayers[a].pos_y);
            (l = l * h - f), (p = b - (p = p * h - v));
            var m = parseFloat(t.appendlayers[a].rotation),
              u = document.createElement("div");
            u.setAttribute("class", "appendee"),
              u.setAttribute("data-id", t.appendlayers[a].id),
              u.setAttribute("data-pos-x", l),
              u.setAttribute("data-pos-y", p),
              u.setAttribute("data-width", t.appendlayers[a].width),
              u.setAttribute("data-height", t.appendlayers[a].height),
              u.setAttribute("data-rotation", m),
              u.setAttribute("data-rotating", "false"),
              u.setAttribute("data-rotation-start-angle", ""),
              u.setAttribute("data-rotation-current-angle", ""),
              u.setAttribute(
                "style",
                "top: " +
                  p +
                  "px; left: " +
                  l +
                  "px; width: " +
                  Math.round(t.appendlayers[a].width) +
                  "px; height: " +
                  Math.round(t.appendlayers[a].height) +
                  "px;"
              ),
              u.appendChild(r),
              u.appendChild(i),
              u.appendChild(o),
              u.appendChild(n),
              u.appendChild(s),
              u.appendChild(d),
              e.appendChild(u),
              $(u).css("WebkitTransform", "rotate(" + m + "deg)"),
              $(u).css("-moz-transform", "rotate(" + m + "deg)"),
              $(u).css("-ms-transform", "rotate(" + m + "deg)"),
              $(u).css("transform", "rotate(" + m + "deg)");
            $(u).draggable({
              handle:
                ".handle_drag,.handle_rotate_upleft,.handle_rotate_upright,.handle_rotate_downleft,.handle_rotate_downright",
              start: function (t, e) {
                if (
                  "rotate" == t.originalEvent.target.getAttribute("data-action")
                ) {
                  var a = $(this).offset(),
                    r = a.left + $(this).width() / 2,
                    i = a.top + $(this).height() / 2,
                    o = t.originalEvent.originalEvent.clientX,
                    n = t.originalEvent.originalEvent.clientY,
                    s = calculate_angle_between_points(r, i, o, n) + 180;
                  this.setAttribute("data-rotation-start-angle", s),
                    this.setAttribute("data-rotation-center-x", r),
                    this.setAttribute("data-rotation-center-y", i),
                    this.setAttribute("data-rotating", "true");
                } else t.clientX, t.clientY;
              },
              stop: function (t, e) {
                "true" == this.getAttribute("data-rotating")
                  ? (this.setAttribute(
                      "data-rotation",
                      this.getAttribute("data-rotation-current-angle")
                    ),
                    this.setAttribute("data-rotation-start-angle", ""),
                    this.setAttribute("data-rotation-current-angle", ""),
                    this.setAttribute("data-rotating", "false"))
                  : (this.setAttribute("data-pos-x", e.position.left),
                    this.setAttribute("data-pos-y", e.position.top));
              },
              drag: function (t, e) {
                if ("true" == this.getAttribute("data-rotating")) {
                  (e.position.left = this.getAttribute("data-pos-x")),
                    (e.position.top = this.getAttribute("data-pos-y"));
                  var a = parseFloat(
                      this.getAttribute("data-rotation-center-x")
                    ),
                    r = parseFloat(this.getAttribute("data-rotation-center-y")),
                    i = t.originalEvent.originalEvent.clientX,
                    o = t.originalEvent.originalEvent.clientY,
                    n = calculate_angle_between_points(a, r, i, o) + 180,
                    s =
                      parseFloat(this.getAttribute("data-rotation")) +
                      (n -
                        parseFloat(
                          this.getAttribute("data-rotation-start-angle")
                        ));
                  this.setAttribute("data-rotation-current-angle", s),
                    $(this).css("WebkitTransform", "rotate(" + s + "deg)"),
                    $(this).css("-moz-transform", "rotate(" + s + "deg)"),
                    $(this).css("-ms-transform", "rotate(" + s + "deg)"),
                    $(this).css("transform", "rotate(" + s + "deg)");
                }
              },
            }),
              a++;
          }
        } else map_appendplacer_stop(c, !1);
        close_waiter();
      },
    }),
    !0
  );
}
function map_appendplacer_stop(r, t) {
  var i = document.getElementById(r + "_mapcontainer");
  if ((i.setAttribute("data-appendmode", "false"), 1 == t)) {
    launch_waiter(mir_translate("Merging the maps..."));
    var e = [];
    $(i)
      .find("#" + r + "_layer_appendholder > div.appendee")
      .each(function () {
        var t = {};
        (t.pos_x = parseFloat(this.getAttribute("data-pos-x"))),
          (t.pos_y = parseFloat(this.getAttribute("data-pos-y"))),
          (t.rotation = parseFloat(this.getAttribute("data-rotation"))),
          (t.id = this.getAttribute("data-id")),
          e.push(t);
      }),
      ((a = {}).id = i.getAttribute("data-map-guid")),
      (a.resscale = i.getAttribute("data-resscale")),
      (a.origin_x = i.getAttribute("data-origin-x")),
      (a.origin_y = i.getAttribute("data-origin-y")),
      (a.resolution = i.getAttribute("data-resolution")),
      (a.appendlayers = e),
      $.ajax({
        url: "/?mode=map-save-appendlayers",
        data: a,
        method: "POST",
        dataType: "json",
        success: function (t) {
          var e = {};
          (e["map_" + r + "_appendmapping"] = "false"),
            $.post("/?mode=set-runtime-settings", e);
          var a = new Date();
          (window.pageviewid = "refresh_" + a.getTime()),
            $(i)
              .find("#" + r + "_layer_appendholder")
              .remove(),
            $.post("/?mode=delete-runtime-settings"),
            close_waiter(),
            map_init(r, i.getAttribute("data-map-guid"));
        },
      });
  } else {
    var a;
    launch_waiter(mir_translate("Removing the recorded map...")),
      ((a = {}).id = i.getAttribute("data-map-guid")),
      $.ajax({
        url: "/?mode=map-discard-appendlayers",
        data: a,
        method: "POST",
        dataType: "json",
        success: function (t) {
          var e = {};
          (e["map_" + r + "_appendmapping"] = "false"),
            $.post("/?mode=set-runtime-settings", e);
          var a = new Date();
          (window.pageviewid = "refresh_" + a.getTime()),
            $(i)
              .find("#" + r + "_layer_appendholder")
              .remove(),
            $.post("/?mode=delete-runtime-settings"),
            close_waiter(),
            map_init(r, i.getAttribute("data-map-guid"));
        },
      });
  }
  return !0;
}
function map_fleet_go_to_position(t, e, a) {
  var r = document.getElementById(t + "_mapcontainer"),
    i = document.getElementById(t + "_mapdialogscreen");
  i.innerHTML = "";
  var o = document.createElement("div");
  o.setAttribute("class", "box"),
    o.setAttribute("id", t + "_mapsettings"),
    i.appendChild(o);
  var n = document.createElement("h1");
  (n.innerHTML =
    mir_translate("Select a") + "<span> " + mir_translate("robot") + "</span>"),
    o.appendChild(n);
  var s = document.createElement("p");
  (s.innerHTML =
    "<span>" +
    mir_translate(
      "Please select which robot you want to go to the selected position."
    ) +
    "</span>"),
    o.appendChild(s);
  var d = document.createElement("form");
  d.setAttribute("action", ""),
    d.setAttribute("method", "post"),
    d.setAttribute("data-guid", e),
    d.setAttribute("data-type", a),
    o.appendChild(d),
    (d.onsubmit = function () {
      var t = this.getAttribute("data-guid"),
        e = this.getAttribute("data-type"),
        a = $(this).find("select#robot_id").val();
      return (
        document
          .getElementById(r.getAttribute("data-element-id") + "_mapsettings")
          .parentNode.removeChild(
            document.getElementById(
              r.getAttribute("data-element-id") + "_mapsettings"
            )
          ),
        $(i).hide(),
        map_go_to_position(t, e, "no", a),
        !1
      );
    });
  var l = document.createElement("div");
  l.setAttribute("class", "fieldholder"), d.appendChild(l);
  var p = document.createElement("label");
  p.setAttribute("for", "robot_id"),
    (p.innerHTML = mir_translate("Robot:")),
    l.appendChild(p);
  var m = document.createElement("select");
  m.setAttribute("name", "robot_id"),
    m.setAttribute("id", "robot_id"),
    m.setAttribute("data-element-id", t),
    l.appendChild(m);
  var u,
    c = document.createElement("div");
  c.setAttribute("class", "buttonholder"),
    d.appendChild(c),
    (u = document.createElement("input")).setAttribute("type", "submit"),
    u.setAttribute("value", mir_translate("OK")),
    u.setAttribute("name", "submit"),
    u.setAttribute("id", "submit"),
    c.appendChild(u),
    (u = document.createElement("input")).setAttribute("type", "button"),
    u.setAttribute("value", mir_translate("Cancel")),
    u.setAttribute("name", "cancel"),
    u.setAttribute("id", "cancel"),
    u.setAttribute("data-element-id", t),
    c.appendChild(u),
    (u.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_mapsettings")
        .parentNode.removeChild(
          document.getElementById(
            this.getAttribute("data-element-id") + "_mapsettings"
          )
        ),
        $(i).hide();
    });
  var _ = {
    endpoint: "/robots",
    fields: ["id", "status"],
  };
  return (
    $.ajax({
      url: "/?mode=get-api-list",
      data: _,
      method: "POST",
      dataType: "json",
      success: function (t) {
        for (var e = 0; e < t.results.length; ) {
          var a = document.createElement("option");
          a.setAttribute("value", t.results[e].id),
            (a.innerHTML = t.results[e].status.robot_name),
            $(i).find("select#robot_id").append(a),
            e++;
        }
      },
    }),
    $(i).show(),
    !0
  );
}
function map_fleet_init(t) {
  var u = MIR.runtime.maps[t],
    c = u.attr("data-robotlock"),
    i = $("#" + t + '_mapcontainer  .layer[data-layertype="robot"]');
  i.find(".robot").remove();
  var e = u.attr("data-map-guid");
  window.fleet_robot_dialog_active_robot = 1;
  var o = [];
  function n(t, e) {
    t.attr("current-state", e.state);
    var a = u.attr("data-resscale"),
      r = u.attr("data-origin-x"),
      i = u.attr("data-origin-y"),
      o = u.attr("data-map-height");
    if (
      ((window["fleet_robot_data_" + e.robot_id] = e),
      update_robotinfo(),
      e.position)
    ) {
      var n = e.position.x * a - r,
        s = o - (e.position.y * a - i);
      "true" == u.attr("data-locked") &&
        c == e.robot_id &&
        u.mir.center_coords(
          {
            x: parseFloat(n),
            y: parseFloat(s),
          },
          MIR.constants.MAP.world.MAP,
          {
            interval: 100,
            callback: !1,
          }
        );
      var d = e.position.orientation;
      (d = -(d + 90)) < 0 ? (d += 360) : 360 < d && (d -= 360),
        t.css("top", s),
        t.css("left", n),
        t.css({
          transform: "rotate(" + d + "deg)",
          WebkitTransform: "rotate(" + d + "deg)",
          "-moz-transform": "rotate(" + d + "deg)",
          "-ms-transform": "rotate(" + d + "deg)",
        });
      var l = t.parent().find(".footprint").find("polygon");
      if (
        l.length &&
        e.robot_id.toString() === window.fleet_robot_dialog_active_robot
      ) {
        var p = JSON.parse(e.footprint);
        if (p) {
          var m = $.map(p, function (t) {
            return [t[0] * a + "," + t[1] * a];
          }).join(" ");
          l.attr("points", m),
            l.parent().css({
              transform: "rotate(" + d + "deg)",
              WebkitTransform: "rotate(" + d + "deg)",
              "-moz-transform": "rotate(" + d + "deg)",
              "-ms-transform": "rotate(" + d + "deg)",
              left: n,
              top: s,
            });
        }
      }
    }
  }
  var a = {
    url: "/?mode=map-get-fleet-robots",
    data: {
      id: e,
    },
    dataType: "json",
    success: function (t) {
      !(function (a) {
        $.each(a.robots, function (t, a) {
          if (
            o.filter(function (t) {
              return t.id === a.id;
            }).length <= 0
          ) {
            var e = a;
            o.push(a),
              i.append(
                '<div class="robot" robot-id="' +
                  a.id +
                  '" current-state="' +
                  a.state +
                  '" robot-ip="' +
                  a.ip +
                  '" robot-model="' +
                  a.robot_model +
                  '" data-name="' +
                  a.name +
                  '"><div class="light"></div></div>'
              );
            var r = i.find('.robot[robot-id="' + a.id + '"]');
            (e.ros = new ROSLIB.Ros({
              url: "ws://" + a.ip + ":9090",
            })),
              ((window["robot_ros_" + a.id] = e).topic = new ROSLIB.Topic({
                ros: e.ros,
                name: "/robot_status",
                messageType: "mirMsgs/RobotStatus",
              })),
              $(".footprint").remove(),
              e.topic.subscribe(function (t) {
                var e = {
                  position: t.position,
                  state: t.state_id,
                  robot_id: a.id,
                  errors: t.errors,
                  mode_id: t.mode_id,
                  mode_text: t.mode_text,
                  name: a.name,
                  mission_text: mir_translate_from_rosbridge(t.mission_text),
                  battery_percentage: t.battery_percentage,
                  fleet_state_text: a.fleet_state_text,
                  ip_address: a.ip,
                  software_version: t.software_version,
                  state_text: t.state_text,
                  safety_muted: t.safety_system_muted,
                  footprint: a.footprint,
                };
                n(r, e);
              }),
              e.ros.on("error", function (t) {
                n(r, e);
              });
          }
        }),
          $.each(o, function (t, e) {
            a.robots.filter(function (t) {
              return t.id === e.id;
            }).length <= 0 &&
              (o[t].topic.unsubscribe(),
              o.splice(t, 1),
              i.find('.robot[robot-id="' + e.id + '"]').remove());
          });
      })(t),
        (robots_fetched = !0);
    },
  };
  setInterval(function () {
    !1 !== robots_fetched && ((robots_fetched = !1), $.post(a));
  }, 2e3);
}
function map_set_oneway_direction(t) {
  var e = document.getElementById(t + "_mapcontainer"),
    n = document.getElementById(t + "_mapdialogscreen");
  (n.innerHTML = ""),
    document.getElementById(t + "_onewaydirectionsettings") &&
      document
        .getElementById(t + "_onewaydirectionsettings")
        .parentNode.removeChild(
          document.getElementById(t + "_onewaydirectionsettings")
        ),
    $(n).hide();
  var a = document.createElement("div");
  a.setAttribute("class", "box"),
    a.setAttribute("data-type", "onewaydirectionsettings"),
    a.setAttribute("id", t + "_onewaydirectionsettings"),
    n.appendChild(a);
  var r = document.createElement("h1");
  (r.innerHTML = mir_translate("Choose direction")), a.appendChild(r);
  var i = document.createElement("div");
  i.setAttribute("class", "dirpicker"), a.appendChild(i);
  var o = document.createElement("div");
  o.setAttribute("class", "cirque"), i.appendChild(o);
  for (
    var s = [
        "upleft",
        "up",
        "upright",
        "right",
        "left",
        "downright",
        "down",
        "downleft",
      ],
      d = 0;
    d < s.length;

  ) {
    var l = document.createElement("div");
    l.setAttribute("data-dir", s[d]),
      l.setAttribute("data-element-id", t),
      s[d] == e.getAttribute("data-oneway-direction")
        ? l.setAttribute("data-active", "true")
        : l.setAttribute("data-active", "false"),
      l.setAttribute("class", s[d]),
      (l.innerHTML = "<span>" + s[d] + "</span>\n"),
      i.appendChild(l),
      (l.onclick = function () {
        var t = document.getElementById(
          this.getAttribute("data-element-id") + "_mapcontainer"
        );
        if (
          (t.setAttribute(
            "data-oneway-direction",
            this.getAttribute("data-dir")
          ),
          0 < t.getAttribute("data-selected-shape").length &&
            "shape" == t.getAttribute("data-selected-shape-type") &&
            "oneway" == t.getAttribute("data-current-layer"))
        ) {
          var e = t.getAttribute("data-selected-shape"),
            a = -1;
          if (-1 < e.indexOf("_")) {
            var r = e.split("_");
            a = r[r.length - 1];
          }
          if (-1 < a) {
            window[
              "map_" + this.getAttribute("data-element-id") + "_metadata"
            ].layers.oneway.shapes[a].direction = this.getAttribute("data-dir");
            var i = $(
                "#" + this.getAttribute("data-element-id") + "_layer_oneway"
              ).find("iframe"),
              o = $(i).contents();
            $(o)
              .find("#" + t.getAttribute("data-selected-shape"))
              .css(
                "fill",
                "url(#pattern_arrow_" + this.getAttribute("data-dir") + ")"
              ),
              map_set_save_state(
                this.getAttribute("data-element-id"),
                "savable",
                !1
              );
          }
        }
        return (
          document
            .getElementById(
              this.getAttribute("data-element-id") + "_onewaydirectionsettings"
            )
            .parentNode.removeChild(
              document.getElementById(
                this.getAttribute("data-element-id") +
                  "_onewaydirectionsettings"
              )
            ),
          $(n).hide(),
          !0
        );
      }),
      d++;
  }
  return $(n).show(), !0;
}
function robot_dialog(e) {
  var s = e.closest(".mapcontainer"),
    d = s.getAttribute("data-element-id"),
    t = document.getElementById(d + "_robotinfoscreen");
  (window.fleet_robot_dialog_active_robot = e.getAttribute("robot-id")),
    (document.getElementsByClassName(
      "robot-name"
    )[0].innerHTML = e.getAttribute("data-name"));
  var a = $(e).parent(),
    r = $(
      document.createElementNS("http://www.w3.org/2000/svg", "polygon")
    ).attr({
      transform: "rotate(90), translate(15 -15)",
    }),
    i = $(document.createElementNS("http://www.w3.org/2000/svg", "svg"))
      .attr({
        id: d + "_layer_footprint_footprint",
        class: "footprint",
      })
      .append(r);
  a.append(i[0]);
  var o =
    !!e.getAttribute("robot-id") &&
    window["robot_ros_" + window.fleet_robot_dialog_active_robot];
  if (o) {
    var n = {};
    n.topic = new ROSLIB.Topic({
      ros: o.ros,
      name: "/mirwebapp/web_path",
      messageType: "mirMsgs/WebPath",
      throttle_rate: 10,
    });
    var l = document.getElementById("robot_path_points_" + d);
    n.topic.subscribe(function (t) {
      var e = s.getAttribute("data-map-height"),
        a = s.getAttribute("data-resscale"),
        r = s.getAttribute("data-origin-x"),
        i = s.getAttribute("data-origin-y");
      window["map_" + d + "_pathseq"] = t.seq;
      for (var o = 0, n = ""; o < t.x.length; ) {
        (n += t.x[o] * a - r + " " + (e - (t.y[o] * a - i)) + " "), o++;
      }
      l && (l.setAttribute("points", n), $(l).show());
    });
  }
  document.getElementById("robotinfo-close").onclick = function () {
    robot_dialog_close();
  };
  var p = $(t).find('.state_continue[data-type="continue"]'),
    m = $(t).find('.state_stop[data-type="pause"]');
  p.click(function (t) {
    t.preventDefault(), fleet_robot_change_state(e.getAttribute("robot-ip"), 3);
  }),
    m.click(function (t) {
      t.preventDefault(),
        fleet_robot_change_state(e.getAttribute("robot-ip"), 4);
    }),
    $(".mapgridscreen,.mapguidescreen,.mapdialogscreen").hide(),
    $(t).show();
}
function robot_dialog_close() {
  var t = $(".robotinfoscreen")[0];
  $(t).hide();
  var e = $(t).find('.state_continue[data-type="continue"]'),
    a = $(t).find('.state_stop[data-type="pause"]');
  $(e).replaceWith($(e).clone()), $(a).replaceWith($(a).clone());
  var r = $(t).find("a.go-to-interface");
  if (r) {
    var i = r.attr("href");
    if (i) {
      i = i.replace("//", "");
      var o = $('.robot[robot-ip="' + i + '"]'),
        n = window.fleet_robot_dialog_active_robot;
      o && $(o).parent().find(".footprint").remove();
    }
  }
  if (t) {
    var s = $(t).closest(".mapcontainer").attr("data-element-id");
    document
      .getElementById(s + "_mapcontainer")
      .removeEventListener("click", robot_dialog_close);
    var d = document.getElementById("robot_path_points_" + s);
    d && "fleet" == MIR.config.product.toLowerCase() && $(d).hide();
  }
  n &&
    i &&
    new ROSLIB.Topic({
      ros: i,
      name: "/mirwebapp/web_path",
      messageType: "mirMsgs/WebPath",
      throttle_rate: 1e3,
    }).unsubscribe();
}
function update_robotinfo() {
  if (
    !window.fleet_robot_dialog_active_robot ||
    window["fleet_robot_data_" + window.fleet_robot_dialog_active_robot]
  ) {
    var t =
        window["fleet_robot_data_" + window.fleet_robot_dialog_active_robot],
      e = document.getElementsByClassName("go-to-interface")[0];
    e.setAttribute("href", "//" + t.ip_address),
      e.setAttribute("target", "_blank");
    var a = document.getElementsByClassName("go-to-robot-setup")[0];
    a.setAttribute("href", "/setup/robots/" + t.robot_id),
      a.setAttribute("target", "_self"),
      (document.getElementsByClassName("robot-state")[0].innerHTML =
        t.state_text || mir_translate("offline")),
      (document.getElementsByClassName(
        "robot-battery"
      )[0].innerHTML = t.battery_percentage
        ? Math.ceil(parseFloat(t.battery_percentage)) + "%"
        : mir_translate("unknown battery percentage")),
      (document.getElementsByClassName("robot-mission")[0].innerHTML =
        t.mission_text || ""),
      (document.getElementsByClassName("robot-mode")[0].innerHTML =
        t.mode_text || ""),
      document
        .getElementsByClassName("robotinfoscreen")[0]
        .setAttribute("data-state-id", t.state),
      t.errors && 0 < t.errors.length
        ? ($(".robot-errors-holder").show(),
          (document.getElementsByClassName("robot-error")[0].innerHTML =
            t.errors[0].code +
            ": " +
            mir_translate_from_rosbridge(t.errors[0].description) +
            " (" +
            t.errors[0].module +
            ")"))
        : $(".robot-errors-holder").hide();
  }
}
function map_reverse_oneway_direction(t) {
  var e = document
      .getElementById(t + "_mapcontainer")
      .getAttribute("data-selected-shape"),
    a = -1;
  if (-1 < e.indexOf("_")) {
    var r = e.split("_");
    a = r[r.length - 1];
  }
  window["map_" + t + "_metadata"].layers.oneway.shapes[a].polygon.reverse();
  for (
    var i = $("#" + t + "_layer_oneway").find("iframe"),
      o = $(i).contents(),
      n = "",
      s = 0;
    s < window["map_" + t + "_metadata"].layers.oneway.shapes[a].polygon.length;

  )
    (n += 0 == s ? "M" : "L"),
      (n +=
        window["map_" + t + "_metadata"].layers.oneway.shapes[a].polygon[s].x +
        " " +
        window["map_" + t + "_metadata"].layers.oneway.shapes[a].polygon[s].y),
      s++;
  return (
    $(o)
      .find("#" + e)
      .attr("d", n),
    $(o)
      .find("#" + e + "_ghost")
      .attr("d", n),
    map_update_handles(t),
    map_set_save_state(t, "savable", !1),
    !0
  );
}
function map_find(a) {
  if (!MIR.runtime) return !1;
  if (
    !MIR.runtime.position_types ||
    !MIR.runtime.positions ||
    !MIR.runtime.maps
  )
    return !1;
  if (!MIR.runtime.positions[a] || !MIR.runtime.maps[a]) return !1;
  var t = MIR.runtime.positions[a],
    o = MIR.runtime.maps[a],
    n = [];
  $.each(t, function (t, r) {
    var i = o.mir.get_position_type(r.type_id);
    n.push({
      name: r.name,
      value: r.guid,
      groupname: mir_translate(i.name),
      coords: {
        x: r.pos_x,
        y: r.pos_y,
      },
      is_child: !1,
    }),
      $.each(r.child_positions, function (t, e) {
        var a = o.mir.get_position_type(e.type_id);
        n.push({
          name: r.name + " / " + mir_translate(a.name),
          value: e.guid,
          is_child: !0,
          groupname: mir_translate(i.name),
          coords: {
            x: e.pos_x,
            y: e.pos_y,
          },
        });
      });
  });
  var s = !1;
  MIR.ui.search_dialog({
    header: "Find positions",
    parent: "body",
    options: n,
    on_before_render: function (t) {
      var e = t.mir,
        a = {
          type: "input",
          opts: {
            attr: s
              ? {
                  type: "checkbox",
                  checked: "checked",
                }
              : {
                  type: "checkbox",
                },
          },
        },
        r = {
          text: " " + mir_translate("Show helper _positions "),
        },
        i = (e.$show_helper = new MIR.ui.form_element(r, a));
      i.insertAfter(e.$header).on("change", function () {
        (s = i.mir.$control.prop("checked")),
          e.filter_list(e.$dialog_input.val());
      }),
        e.filter_list(e.$dialog_input.val()),
        e.$dialog_label.find(".mir-label").hide(),
        e.$dialog_input.focus();
    },
    on_filter_option: function (t) {
      return !(t.is_child && !s) || (t.$node.hide(), !1);
    },
    on_select: function (r, t) {
      if (r) {
        var i = !1;
        if (
          ($.each(MIR.runtime.positions[a], function (a, t) {
            return (
              t.guid !== r &&
              ($.each(t.child_positions, function (t, e) {
                if (e.guid === r) return (i = a), !1;
              }),
              !1 === i && void 0)
            );
          }),
          i)
        ) {
          var e = MIR.runtime.positions[a][i];
          (e.show_children = !0),
            $(
              'div.mapcontainer .child_position[data-parent-id="' +
                e.guid +
                '"]'
            ).show();
        }
        map_toggle_center_robot(a, !1),
          o.mir.center_coords(t.coords, MIR.constants.MAP.world.REAL, {
            callback: function () {
              map_zoom(a, 3);
            },
          });
      }
    },
  });
}
function map_finalizing_start(t) {
  document
    .getElementById(t + "_mapcontainer")
    .setAttribute("data-initializing", "true"),
    (document.getElementById(t + "_maploadingscreen").innerHTML =
      "<p id=\"map-status\">{{ _('Processing map %(procent)s% ( %(done)s  of %(total)s )', {procent:procent, done:done, total:total}) }}</p>"),
    new Vue({
      el: "#map-status",
      data: MIR.runtime.map_finalization_data,
    });
}
function map_finalizing_stop(t) {
  document
    .getElementById(t + "_mapcontainer")
    .setAttribute("data-initializing", "false"),
    (document.getElementById(t + "_maploadingscreen").innerHTML = "");
}
$(document).on(
  "touchstart click",
  "body[data-type='fleet'] div.mapcontainer > div.mapwrapper > div.mapholder > div.map > div.layer > div.robot",
  function (t) {
    t.stopPropagation(),
      t.preventDefault(),
      robot_dialog_close(),
      robot_dialog(t.target),
      (t.handled = !0);
  }
);
function missions_summary_catalogue_launch_delete(e, t) {
  var i = document.createElement("div");
  i.setAttribute("class", "overlay_delete"),
    i.setAttribute("id", "missiondelete_overlay"),
    document.getElementsByTagName("body")[0].appendChild(i);
  var s = document.createElement("div");
  s.setAttribute("class", "box"), i.appendChild(s);
  var n = document.createElement("h1");
  (n.innerHTML = lang_main_missions_deletemission), s.appendChild(n);
  var a = document.createElement("p");
  (a.innerHTML = lang_main_missions_deletemission_text), s.appendChild(a);
  var r = document.createElement("div");
  r.setAttribute("class", "buttonholder"), s.appendChild(r);
  var o = document.createElement("div");
  o.setAttribute("class", "delete"),
    o.setAttribute("id", "missiondelete_submitbtn"),
    o.setAttribute("data-guid", t),
    o.setAttribute("data-element-id", e),
    (o.innerHTML = lang_main_missions_deletemission_btn_delete),
    r.appendChild(o),
    (o.onclick = function () {
      this.getAttribute("data-guid");
      var e = {
        mode: "delete-mission",
      };
      (e.id = this.getAttribute("data-guid")),
        $.ajax({
          url: "/?mode=get-group-missions&calltype=light",
          data: e,
          method: "GET",
          dataType: "json",
          guid: this.getAttribute("data-guid"),
          element_id: this.getAttribute("data-element-id"),
          success: function (e) {
            204 == e.headers.httpcode
              ? 0 <
                $("#" + this.element_id + "_items").find(
                  "div[data-guid='" + this.guid + "']"
                ).length
                ? ($("#" + this.element_id + "_items")
                    .find("div[data-guid='" + this.guid + "']")
                    .remove(),
                  document
                    .getElementById("missiondelete_overlay")
                    .parentNode.removeChild(
                      parent.document.getElementById("missiondelete_overlay")
                    ))
                : 0 <
                  $(
                    "div.dashboard > div.row > div[data-widget='missiongroup'].widget"
                  ).find("div[data-guid='" + this.guid + "']").length
                ? ($(
                    "div.dashboard > div.row > div[data-widget='missiongroup'].widget"
                  )
                    .find("div[data-guid='" + this.guid + "']")
                    .remove(),
                  document
                    .getElementById("missiondelete_overlay")
                    .parentNode.removeChild(
                      parent.document.getElementById("missiondelete_overlay")
                    ))
                : (location.href = "/setup/missions")
              : (document
                  .getElementById("missiondelete_overlay")
                  .parentNode.removeChild(
                    parent.document.getElementById("missiondelete_overlay")
                  ),
                launch_error(mir_translate(e.results.error_human)));
          },
        });
    });
  var d = document.createElement("div");
  d.setAttribute("class", "cancel"),
    d.setAttribute("id", "missiondelete_cancelbtn"),
    (d.innerHTML = lang_main_missions_deletemission_btn_cancel),
    r.appendChild(d),
    (d.onclick = function () {
      document
        .getElementById("missiondelete_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiondelete_overlay")
        );
    });
}
function missions_summary_catalogue_load_missions(s) {
  return (
    clearTimeout(missions_missionview_summary_timer),
    (missions_missionview_summary_timer = setTimeout(function () {
      var p = document.getElementById(s + "_items");
      p.innerHTML = "";
      var e = document.getElementById("group_id"),
        t = e.options[e.selectedIndex].value;
      $.post(
        "/?mode=set-user-settings",
        {
          missions_summary_group: t,
        },
        function (e) {}
      );
      var i = {};
      (i.group = t),
        $.ajax({
          url: "/?mode=get-group-missions",
          data: i,
          method: "POST",
          dataType: "json",
          element_id: s,
          success: function (e) {
            p.innerHTML = "";
            var t = p.getAttribute("data-open-url");
            if (0 < e.length) {
              for (var i = 0; i < e.length; ) {
                var s = document.createElement("div");
                s.setAttribute("class", "mission"),
                  s.setAttribute("data-guid", e[i].guid),
                  s.setAttribute("data-element-id", this.element_id),
                  s.setAttribute("data-name", e[i].htmlname),
                  s.setAttribute("data-openurl", t),
                  p.appendChild(s);
                var n = document.createElement("div");
                e[i].valid
                  ? n.setAttribute(
                      "class",
                      e[i].is_template ? "icon-template" : "icon"
                    )
                  : (n.setAttribute("class", "icon-warn"),
                    n.setAttribute(
                      "title",
                      mir_translate(
                        "The mission contains invalid actions or sub-missions."
                      )
                    )),
                  s.appendChild(n);
                var a = document.createElement("div");
                a.setAttribute("class", "info"), s.appendChild(a);
                var r = document.createElement("p");
                r.setAttribute("class", "name"),
                  (r.innerHTML = e[i].htmlname),
                  a.appendChild(r);
                var o = document.createElement("p");
                if (
                  (o.setAttribute("class", "site"),
                  (o.innerHTML = e[i].htmlsite),
                  a.appendChild(o),
                  1 == e[i].queueable && "fleet" != MIR.config.product)
                ) {
                  var d = document.createElement("div");
                  d.setAttribute("class", "queuebutton"),
                    d.setAttribute("data-element-id", this.element_id),
                    d.setAttribute("data-guid", e[i].guid),
                    d.setAttribute("data-name", e[i].name),
                    s.appendChild(d),
                    e[i].valid
                      ? (d.onclick = function () {
                          missions_summary_queue(
                            this.getAttribute("data-element-id"),
                            this.getAttribute("data-guid"),
                            this.getAttribute("data-name")
                          );
                        })
                      : (d.onclick = function () {
                          launch_error(
                            mir_translate(
                              "This mission contains invalid actions or sub-missions. You can't queue it."
                            )
                          );
                        });
                }
                if (1 == e[i].editable) {
                  var m = document.createElement("div");
                  m.setAttribute("class", "deletebutton"),
                    m.setAttribute("data-element-id", this.element_id),
                    m.setAttribute("data-guid", e[i].guid),
                    s.appendChild(m),
                    (m.onclick = function () {
                      missions_summary_catalogue_launch_delete(
                        this.getAttribute("data-element-id"),
                        this.getAttribute("data-guid")
                      );
                    });
                  var l = document.createElement("div");
                  l.setAttribute("class", "editbutton"),
                    l.setAttribute("data-element-id", this.element_id),
                    l.setAttribute("data-guid", e[i].guid),
                    s.appendChild(l),
                    (l.onclick = function () {
                      location.href = t.replace(
                        "[guid]",
                        this.getAttribute("data-guid")
                      );
                    });
                } else {
                  var u = document.createElement("div");
                  u.setAttribute("class", "watchbutton"),
                    u.setAttribute("data-element-id", this.element_id),
                    u.setAttribute("data-guid", e[i].guid),
                    s.appendChild(u),
                    (u.onclick = function () {
                      location.href = t.replace(
                        "[guid]",
                        this.getAttribute("data-guid")
                      );
                    });
                }
                i++;
              }
              $(document).on(
                "click",
                "body[data-mobile='true'] > div.wrapper > div.content > div.missions_summary > div.missions_summary_catalogue > div.items > div.mission",
                function (e) {
                  missions_summary_mobile_mission_menu(
                    this.getAttribute("data-element-id"),
                    this.getAttribute("data-guid"),
                    this.getAttribute("data-name"),
                    this.getAttribute("data-openurl")
                  );
                }
              );
            } else {
              var _ = document.createElement("p");
              _.setAttribute("class", "nodata"),
                (_.innerHTML = lang_main_missions_nomissionsingroup),
                p.appendChild(_);
            }
          },
        });
    }, 200)),
    !0
  );
}
function missions_summary_mobile_mission_menu(e, t, i, s) {
  var n = document.createElement("div");
  n.setAttribute("class", "mobilemissionmenu"),
    n.setAttribute("id", "mobilemissionmenu"),
    document.getElementsByTagName("body")[0].appendChild(n);
  var a = document.createElement("div");
  a.setAttribute("class", "box"), n.appendChild(a);
  var r = document.createElement("ul");
  a.appendChild(r);
  var o = document.createElement("li");
  o.setAttribute("class", "queue"),
    o.setAttribute("data-element-id", e),
    o.setAttribute("data-guid", t),
    o.setAttribute("data-name", i),
    (o.innerHTML = "<div><span>" + lang_main_missions_queue + "</span></div>"),
    r.appendChild(o);
  var d = document.createElement("li");
  d.setAttribute("class", "edit"),
    d.setAttribute("data-element-id", e),
    d.setAttribute("data-guid", t),
    d.setAttribute("data-name", i),
    d.setAttribute("data-open-url", s),
    (d.innerHTML = "<div><span>" + lang_main_missions_edit + "</span></div>"),
    r.appendChild(d);
  var m = document.createElement("li");
  m.setAttribute("class", "delete"),
    (m.innerHTML = "<div><span>" + lang_main_missions_delete + "</span></div>"),
    m.setAttribute("data-element-id", e),
    m.setAttribute("data-guid", t),
    r.appendChild(m);
  var l = document.createElement("li");
  return (
    l.setAttribute("class", "cancel"),
    (l.innerHTML = "<div><span>" + lang_main_missions_cancel + "</span></div>"),
    r.appendChild(l),
    (o.onclick = function () {
      "fleet" == MIR.config.product
        ? fleet_schedule_modal(this.getAttribute("data-guid"))
        : missions_summary_queue(
            this.getAttribute("data-element-id"),
            this.getAttribute("data-guid"),
            this.getAttribute("data-name")
          ),
        document
          .getElementById("mobilemissionmenu")
          .parentNode.removeChild(
            parent.document.getElementById("mobilemissionmenu")
          );
    }),
    (d.onclick = function () {
      location.href = this.getAttribute("data-open-url").replace(
        "[guid]",
        this.getAttribute("data-guid")
      );
    }),
    (m.onclick = function () {
      missions_summary_catalogue_launch_delete(
        this.getAttribute("data-element-id"),
        this.getAttribute("data-guid")
      ),
        document
          .getElementById("mobilemissionmenu")
          .parentNode.removeChild(
            parent.document.getElementById("mobilemissionmenu")
          );
    }),
    (l.onclick = function () {
      document
        .getElementById("mobilemissionmenu")
        .parentNode.removeChild(
          parent.document.getElementById("mobilemissionmenu")
        );
    }),
    !0
  );
}
function missions_summary_check_queue(o, r) {
  var d = document.getElementById(o + "_queue"),
    e = {
      mode: "get-mission-queue",
      calltype: "light",
    };
  $.ajax({
    url: "/",
    data: e,
    method: "GET",
    dataType: "json",
    element_id: o,
    success: function (e) {
      if ("NOPRIV" == e[0])
        $("#" + o + "_queue_loader").hide(),
          $("#" + o + "_queue_nopriv").show();
      else {
        for (var t = !1, i = $(d).children("li"), s = 0; s < e.length; ) {
          if (
            parseInt($(i[s]).attr("data-queue-id")) == parseInt(e[s].id) &&
            $(i[s]).attr("data-mission-guid") == e[s].mission_id
          ) {
            var n = $(i[s]).find("div.state"),
              a = $(i[s]).find("div.remove");
            $(n).html("<span>" + e[s].state + "</span>"),
              $(a).attr("data-state", e[s].state),
              "Pending" == e[s].state
                ? $(n).attr("data-state-color", "yellow")
                : "Executing" == e[s].state &&
                  $(n).attr("data-state-color", "green");
          } else t = !0;
          s++;
        }
        if (
          (i.length != e.length && (t = !0),
          0 == e.length && (t = !0),
          1 == window["missions_summary_" + o + "_force_reload"] && (t = !0),
          1 == t &&
            0 == window["missions_summary_" + o + "_dragging"] &&
            (0 == window.missions_summary_queue_adding ||
              null == window.missions_summary_queue_adding))
        ) {
          1 == $("#" + o + "_queue").hasClass("ui-sortable") &&
            $("#" + o + "_queue").sortable("cancel"),
            $("#" + o + "_queue_loader").show(),
            (d.innerHTML = "");
          for (s = 0; s < e.length; )
            missions_summary_add_queue_item(o, e[s]), s++;
          $("#" + o + "_queue_loader").hide(),
            missions_summary_queue_checkifitems(o),
            $("#" + o + "_queue").sortable({
              items: "li:not(.running)",
              handle: ".movehandle",
              start: function (e, t) {
                window["missions_summary_" + o + "_dragging"] = !0;
              },
              stop: function (e, t) {
                for (
                  var i = t.item[0].getAttribute("data-queue-id"),
                    s = -1,
                    n = $("#" + o + "_queue").children("li.still"),
                    a = 0;
                  a < n.length;

                )
                  n[a].getAttribute("data-queue-id") == i && (s = a + 1), a++;
                if (-1 < s) {
                  var r = {};
                  (r.id = i),
                    (r.position = s),
                    $.ajax({
                      url: "/?mode=order-mission-queue",
                      data: r,
                      method: "POST",
                      dataType: "json",
                      element_id: o,
                      success: function (e) {
                        window["missions_summary_" + o + "_dragging"] = !1;
                      },
                    });
                }
              },
            });
        }
        !1 !== r &&
          setTimeout(function () {
            missions_summary_check_queue(o);
          }, 2e3);
      }
    },
  });
}
function missions_summary_queue(l, u, e) {
  var t = new Date().getTime(),
    i = {
      id: -1,
    };
  (i.mission_id = "tmp_" + t),
    (i.name = "Temp"),
    (i.state = "Queueing"),
    (window.missions_summary_queue_adding = !0),
    "fleet" == window.systemtype
      ? launch_waiter("Placing mission in queue...")
      : missions_summary_add_queue_item(l, i, e);
  var s = {};
  return (
    (s.id = u),
    $.ajax({
      url: "/?mode=queue-mission",
      data: s,
      method: "POST",
      dataType: "json",
      element_id: l,
      replaceguid: "tmp_" + t,
      success: function (s) {
        if (
          ("fleet" == window.systemtype && close_waiter(),
          $("ul#" + this.element_id + "_queue")
            .find("li[data-mission-guid='" + this.replaceguid + "']")
            .remove(),
          "questions" == s.type)
        ) {
          var e = document.createElement("div");
          e.setAttribute("class", "missionqueuequestions_overlay"),
            e.setAttribute("id", "missionqueuequestions_overlay"),
            document.getElementsByTagName("body")[0].appendChild(e);
          var n = document.createElement("div");
          n.setAttribute("class", "box"), e.appendChild(n);
          var t = document.createElement("h1");
          (t.innerHTML = mir_translate("Please respond...")), n.appendChild(t);
          var i = document.createElement("p");
          (i.innerHTML = mir_translate("Text about mission variables...")),
            n.appendChild(i);
          var a = document.createElement("form");
          a.setAttribute("action", ""),
            a.setAttribute("method", ""),
            n.appendChild(a),
            (a.onsubmit = function () {
              $("div.box > form > div.fieldholder").attr("data-error", "false"),
                $("div.box > form > p.error").html("");
              for (var e = {}, t = 0; t < s.questions.length; )
                (e[
                  s.questions[t].systemname
                ] = mission_summary_queue_field_fetch_value(
                  s.questions[t].systemname,
                  s.questions[t].type,
                  s.questions[t].constraints.nullable
                )),
                  t++;
              var i = {};
              return (
                (i.id = u),
                (i.vals = e),
                $.ajax({
                  url: "/?mode=queue-mission",
                  data: i,
                  method: "POST",
                  dataType: "json",
                  element_id: l,
                  success: function (e) {
                    if (
                      ((window.missions_summary_queue_adding = !1),
                      201 == e.headers.httpcode)
                    )
                      playbar_highlight(),
                        "fleet" == window.systemtype
                          ? "fleet_schedule" ==
                              document
                                .getElementsByTagName("body")[0]
                                .getAttribute("data-module") &&
                            fleet_schedule_load(l, !0)
                          : missions_summary_add_queue_item(
                              this.element_id,
                              e.results
                            ),
                        (window[
                          "missions_summary_" + l + "_force_reload"
                        ] = !0),
                        document
                          .getElementById("missionqueuequestions_overlay")
                          .parentNode.removeChild(
                            parent.document.getElementById(
                              "missionqueuequestions_overlay"
                            )
                          );
                    else if (
                      (0 < e.results.error_human.length &&
                        ((r.innerHTML = mir_translate(e.results.error_human)),
                        $(n).animate(
                          {
                            scrollTop: 0,
                          },
                          100
                        )),
                      void 0 === e.results.field_errors)
                    );
                    else {
                      for (var t in e.results.field_errors.parameters)
                        document
                          .getElementById(
                            "missionqueue_fieldholder_" +
                              e.results.field_errors.parameters[t].systemname
                          )
                          .setAttribute("data-error", "true"),
                          (document.getElementById(
                            "missionqueue_error_" +
                              e.results.field_errors.parameters[t].systemname
                          ).innerHTML = mir_translate(
                            e.results.field_errors.parameters[t].error_human
                          ));
                      e.results.field_errors.earliest_start_time &&
                        (document
                          .getElementById(
                            "missionqueue_fieldholder_earliest_start_time"
                          )
                          .setAttribute("data-error", "true"),
                        (document.getElementById(
                          "missionqueue_error_earliest_start_time"
                        ).innerHTML = mir_translate(
                          e.results.field_errors.earliest_start_time.error_human
                        ))),
                        e.results.field_errors.robot_id &&
                          (document
                            .getElementById("missionqueue_fieldholder_robot_id")
                            .setAttribute("data-error", "true"),
                          (document.getElementById(
                            "missionqueue_error_robot_id"
                          ).innerHTML = mir_translate(
                            e.results.field_errors.robot_id.error_human
                          )));
                    }
                  },
                }),
                !1
              );
            });
          var r = document.createElement("p");
          r.setAttribute("id", "missionqueue_error"),
            r.setAttribute("class", "error"),
            (r.innerHTML = ""),
            a.appendChild(r),
            mission_summary_queue_fieldgenerator(s.questions, a);
          var o = document.createElement("div");
          o.setAttribute("class", "buttonholder"), a.appendChild(o);
          var d = document.createElement("input");
          d.setAttribute("type", "submit"),
            d.setAttribute("name", "submit"),
            d.setAttribute("id", "missiondynvareditor_submitbtn"),
            d.setAttribute("value", mir_translate("OK")),
            o.appendChild(d);
          var m = document.createElement("input");
          m.setAttribute("type", "button"),
            m.setAttribute("name", "missionqueuequestions_cancelbtn"),
            m.setAttribute("id", "missionqueuequestions_cancelbtn"),
            m.setAttribute("value", mir_translate("Cancel")),
            o.appendChild(m),
            (m.onclick = function () {
              document
                .getElementById("missionqueuequestions_overlay")
                .parentNode.removeChild(
                  parent.document.getElementById(
                    "missionqueuequestions_overlay"
                  )
                );
            });
        } else
          201 == s.headers.httpcode &&
            ("fleet" == window.systemtype ||
              missions_summary_add_queue_item(this.element_id, s.results, null),
            playbar_highlight(),
            (window.missions_summary_queue_adding = !1));
      },
    }),
    !0
  );
}
function mission_summary_queue_field_fetch_value(e, t, i) {
  if ("Selection" == t || "Reference" == t)
    var s = document.getElementById(e).value;
  else if ("Duration" == t) {
    var n = document.getElementById("missionqueue_fieldholder_" + e + "_hours"),
      a = document.getElementById("missionqueue_fieldholder_" + e + "_minutes"),
      r = document.getElementById("missionqueue_fieldholder_" + e + "_seconds"),
      o = n.value;
    1 == o.length && (o = "0" + o);
    var d = a.value;
    1 == d.length && (d = "0" + d);
    var m = r.value;
    1 == m.length && (m = "0" + m);
    s = o + ":" + d + ":" + m + ".000000";
  } else if ("Duration_old" == t)
    s = missions_missionview_transform_duration_totime(
      document
        .getElementById(data.questions[c].systemname)
        .getAttribute("data-cur")
    );
  else if ("DateTime" == t) {
    s = "";
    (s += document.getElementById(e + "_date").value),
      (s += "@"),
      (s += document.getElementById(e + "_hour").value),
      (s += ":"),
      (s += document.getElementById(e + "_minute").value);
  } else if ("Boolean" == t) s = 1 == document.getElementById(e).checked;
  else s = document.getElementById(e).value;
  return (
    i && "Reference" == t && "" == s
      ? (s = MIR.ui.constants.NULL_VALUE)
      : 1 == i &&
        "Reference" != t &&
        1 == document.getElementById(e + "_nulloption").checked &&
        (s = MIR.ui.constants.NULL_VALUE),
    s
  );
}
function mission_summary_queue_fieldgenerator(e, t) {
  for (var i = 0; i < e.length; ) {
    var s = document.createElement("div");
    if (
      (s.setAttribute("class", "fieldholder"),
      s.setAttribute("data-error", "false"),
      s.setAttribute("data-field-type", e[i].type),
      s.setAttribute("id", "missionqueue_fieldholder_" + e[i].systemname),
      t.appendChild(s),
      "Boolean" == e[i].type)
    );
    else
      (B = document.createElement("label")).setAttribute(
        "for",
        "missiondynvareditor_field_name"
      ),
        (B.innerHTML = e[i].name),
        s.appendChild(B);
    if ("Reference" == e[i].type || "Selection" == e[i].type) {
      e[i].constraints.nullable &&
        e[i].options.splice(0, 0, {
          name: e[i].constraints.null_option,
          value: "",
        });
      var n = {
        attr: {
          id: e[i].systemname,
          name: e[i].systemname,
        },
        options: e[i].options,
        header: e[i].name,
        parent: "#missionqueuequestions_overlay",
      };
      e[i].is_position &&
        (n.extra_dialog_options = {
          sort_options: function (e, t) {
            var i =
                (e.has_priority ? "0" : "1") +
                e.clean_group_name +
                e.clean_name,
              s =
                (t.has_priority ? "0" : "1") +
                t.clean_group_name +
                t.clean_name;
            return i < s ? -1 : s < i ? 1 : 0;
          },
          on_create_group_node: function (e, t, i) {
            i.has_priority &&
              ((e.$text_node = $("<span>" + i.groupname + "</span>")),
              e.$node
                .html("")
                .append(e.$text_node)
                .append(
                  '<span class="mir-txt-silent">&nbsp;' +
                    mir_translate("(Active map)") +
                    "</span>"
                ));
          },
        });
      var a = MIR.ui.search_select(n);
      e[i].default
        ? a.val(e[i].default)
        : !e[i].default && e[i].constraints.nullable && a.val(""),
        a.appendTo(s);
    } else if ("DateTime" == e[i].type) {
      var r = document.createElement("input");
      r.setAttribute("type", "text"),
        r.setAttribute("maxlength", "50"),
        r.setAttribute("autocomplete", "off"),
        r.setAttribute("readonly", "readonly"),
        r.setAttribute("class", "datetime_date"),
        r.setAttribute("name", e[i].systemname + "_date"),
        r.setAttribute("id", e[i].systemname + "_date"),
        r.setAttribute("value", e[i].default_date),
        s.appendChild(r);
      var o = document.createElement("div");
      o.setAttribute("class", "datetime_clock"), s.appendChild(o);
      var d = document.createElement("input");
      d.setAttribute("type", "text"),
        d.setAttribute("maxlength", "2"),
        d.setAttribute("autocomplete", "off"),
        d.setAttribute("class", "datetime_hour"),
        d.setAttribute("name", e[i].systemname + "_hour"),
        d.setAttribute("id", e[i].systemname + "_hour"),
        d.setAttribute("value", e[i].default_hour),
        s.appendChild(d);
      var m = document.createElement("span");
      m.setAttribute("class", "datetime_sep"),
        (m.innerHTML = ":"),
        s.appendChild(m);
      var l = document.createElement("input");
      l.setAttribute("type", "text"),
        l.setAttribute("maxlength", "2"),
        l.setAttribute("autocomplete", "off"),
        l.setAttribute("class", "datetime_minute"),
        l.setAttribute("name", e[i].systemname + "_minute"),
        l.setAttribute("id", e[i].systemname + "_minute"),
        l.setAttribute("value", e[i].default_minute),
        s.appendChild(l),
        $("input#" + e[i].systemname + "_date").datepicker({
          dateFormat: "mm-dd-yy",
          firstDay: 1,
          maxDate: e[i].constraints.max,
          minDate: e[i].constraints.min,
          beforeShow: function () {
            return "true" != $(this).parent().attr("data-disabled");
          },
        });
    } else if ("Duration" == e[i].type) {
      if (null == e[i].default) var u = 0;
      else u = missions_missionview_transform_duration_toseconds(e[i].default);
      var _ = Math.floor(u / 60),
        p = Math.floor(_ / 60),
        c = u - 60 * _;
      _ = _ - 60 * p;
      1 == String(c).length && (c = "0" + String(c)),
        1 == String(_).length && (_ = "0" + _),
        1 == String(p).length && (p = "0" + p);
      var v = [p, _, c],
        h = ["hours", "minutes", "seconds"],
        g = [mir_translate("Hrs"), mir_translate("Min"), mir_translate("Sec")],
        b = document.createElement("div");
      b.setAttribute("class", "durationpickerholder"),
        b.setAttribute("data-cur", u),
        b.setAttribute("id", "missionqueue_fieldholder_" + e[i].systemname),
        b.setAttribute("data-systemname", e[i].systemname),
        s.appendChild(b);
      var w = document.createElement("table");
      w.setAttribute("cellpadding", "0"),
        w.setAttribute("cellspacing", "0"),
        b.appendChild(w);
      var A = document.createElement("tr");
      w.appendChild(A);
      for (var f = 0; f < h.length; ) {
        (C = document.createElement("td")).setAttribute("class", "arrow_up"),
          A.appendChild(C),
          (I = document.createElement("div")).setAttribute(
            "data-timetype",
            h[f]
          ),
          I.setAttribute("data-systemname", e[i].systemname),
          (I.innerHTML = "<span>+</span>"),
          (I.onclick = function () {
            var e = document.getElementById(
                "missionqueue_fieldholder_" +
                  this.getAttribute("data-systemname") +
                  "_" +
                  this.getAttribute("data-timetype")
              ),
              t = "00";
            if (parseInt(e.value)) var i = parseInt(e.value);
            else i = 0;
            24 <= i && "hours" == this.getAttribute("data-timetype")
              ? (t = "00")
              : 59 <= i && "minutes" == this.getAttribute("data-timetype")
              ? (t = "00")
              : 59 <= i && "seconds" == this.getAttribute("data-timetype")
              ? (t = "00")
              : 1 == (t = String(i + 1)).length && (t = "0" + t),
              (e.value = t);
          }),
          C.appendChild(I),
          f++;
      }
      A = document.createElement("tr");
      w.appendChild(A);
      for (f = 0; f < h.length; ) {
        (C = document.createElement("td")).setAttribute("class", "field"),
          A.appendChild(C);
        var y = document.createElement("input");
        y.setAttribute("type", "text"),
          y.setAttribute("maxlength", "2"),
          y.setAttribute("value", v[f]),
          y.setAttribute("data-timetype", h[f]),
          y.setAttribute("data-old-value", ""),
          y.setAttribute(
            "name",
            "missionqueue_fieldholder_" + e[i].systemname + "_" + h[f]
          ),
          y.setAttribute(
            "id",
            "missionqueue_fieldholder_" + e[i].systemname + "_" + h[f]
          ),
          (y.onkeyup = function (e) {
            var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
            if (
              2 == this.value.length &&
              -1 < t.indexOf(e.key) &&
              e.target == this &&
              this.value !== this.getAttribute("data-old-value")
            ) {
              var i =
                "missiondynvareditor_field_def_" +
                this.getAttribute("data-timetype");
              "hours" == this.getAttribute("data-timetype")
                ? (i += "minutes")
                : "minutes" == this.getAttribute("data-timetype")
                ? (i += "seconds")
                : (i += "hours"),
                $("#" + i).select(),
                $("#" + i).focus();
            } else
              -1 < t.indexOf(e.key) && this.setAttribute("data-old-value", "");
          }),
          (y.onblur = function (e) {
            if (e.target == this) {
              for (
                var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
                  i = !1,
                  s = 0;
                s < this.value.length;

              )
                -1 == t.indexOf(this.value[s]) && (i = !0), s++;
              0 == this.value.length || 1 == i
                ? (this.value = "00")
                : "hours" == this.getAttribute("data-timetype") &&
                  24 < parseInt(this.value)
                ? (this.value = "24")
                : "hours" == this.getAttribute("data-timetype") &&
                  parseInt(this.value) < 0
                ? (this.value = "00")
                : "minutes" == this.getAttribute("data-timetype") &&
                  59 < parseInt(this.value)
                ? (this.value = "59")
                : "minutes" == this.getAttribute("data-timetype") &&
                  parseInt(this.value) < 0
                ? (this.value = "00")
                : "seconds" == this.getAttribute("data-timetype") &&
                  59 < parseInt(this.value)
                ? (this.value = "59")
                : "seconds" == this.getAttribute("data-timetype") &&
                  parseInt(this.value) < 0
                ? (this.value = "00")
                : 1 == this.value.length && (this.value = "0" + this.value),
                this.setAttribute("data-old-value", this.value);
            }
          }),
          C.appendChild(y),
          f++;
      }
      A = document.createElement("tr");
      w.appendChild(A);
      for (f = 0; f < h.length; ) {
        (C = document.createElement("td")).setAttribute("class", "text"),
          A.appendChild(C);
        var E = document.createElement("div");
        (E.innerHTML = "<span>" + g[f] + "</span>"), C.appendChild(E), f++;
      }
      A = document.createElement("tr");
      w.appendChild(A);
      for (f = 0; f < h.length; ) {
        var C, I;
        (C = document.createElement("td")).setAttribute("class", "arrow_down"),
          A.appendChild(C),
          (I = document.createElement("div")).setAttribute(
            "data-timetype",
            h[f]
          ),
          I.setAttribute("data-systemname", e[i].systemname),
          (I.innerHTML = "<span>-</span>"),
          (I.onclick = function () {
            var e = document.getElementById(
                "missionqueue_fieldholder_" +
                  this.getAttribute("data-systemname") +
                  "_" +
                  this.getAttribute("data-timetype")
              ),
              t = "00";
            if (parseInt(e.value)) var i = parseInt(e.value);
            else i = 0;
            i <= 0 && "hours" == this.getAttribute("data-timetype")
              ? (t = "24")
              : i <= 0 && "minutes" == this.getAttribute("data-timetype")
              ? (t = "59")
              : i <= 0 && "seconds" == this.getAttribute("data-timetype")
              ? (t = "59")
              : 1 == (t = String(i - 1)).length && (t = "0" + t),
              (e.value = t);
          }),
          C.appendChild(I),
          f++;
      }
    } else if (
      "String" == e[i].type ||
      "Float" == e[i].type ||
      "Duration" == e[i].type ||
      "Integer" == e[i].type
    ) {
      (T = document.createElement("input")).setAttribute("type", "text"),
        T.setAttribute("maxlength", "50"),
        null == e[i].default || T.setAttribute("value", e[i].default),
        T.setAttribute("autocomplete", "off"),
        T.setAttribute("name", e[i].systemname),
        T.setAttribute("id", e[i].systemname),
        s.appendChild(T);
    } else if ("Boolean" == e[i].type) {
      var T, B;
      (T = document.createElement("input")).setAttribute("type", "checkbox"),
        T.setAttribute("value", "1"),
        T.setAttribute("name", e[i].systemname),
        T.setAttribute("id", e[i].systemname),
        1 == e[i].default && T.setAttribute("checked", "checked"),
        s.appendChild(T),
        (B = document.createElement("label")).setAttribute(
          "for",
          e[i].systemname
        ),
        (B.innerHTML = e[i].name),
        s.appendChild(B);
    }
    var L = document.createElement("p");
    if (
      (L.setAttribute("id", "missionqueue_error_" + e[i].systemname),
      L.setAttribute("class", "fielderror"),
      (L.innerHTML = ""),
      s.appendChild(L),
      1 == e[i].constraints.nullable && "Reference" != e[i].type)
    ) {
      var k = document.createElement("div");
      k.setAttribute("class", "nullerholder"), s.appendChild(k);
      var M = document.createElement("input");
      M.setAttribute("type", "checkbox"),
        M.setAttribute("name", "missiondynvareditor_field_nullable"),
        M.setAttribute("id", e[i].systemname + "_nulloption"),
        M.setAttribute("value", "1"),
        null == e[i].default &&
          (M.setAttribute("checked", "true"),
          s.setAttribute("data-disabled", "true"),
          s.setAttribute("disabled", "disabled")),
        k.appendChild(M);
      var x = document.createElement("label");
      x.setAttribute("for", e[i].systemname + "_nulloption"),
        (x.innerHTML = e[i].constraints.null_option),
        k.appendChild(x),
        (M.onclick = function () {
          1 == this.checked
            ? (this.parentNode.parentNode.setAttribute("data-disabled", "true"),
              this.parentNode.parentNode.setAttribute("disabled", "disabled"))
            : (this.parentNode.parentNode.setAttribute(
                "data-disabled",
                "false"
              ),
              this.parentNode.parentNode.removeAttribute("disabled"));
        });
    }
    i++;
  }
}
function missions_summary_add_queue_item(e, t, i) {
  if (null == e);
  else {
    var s = document.getElementById(e + "_queue"),
      n = document.createElement("li");
    "Executing" == t.state
      ? n.setAttribute("class", "running")
      : "Queueing" == t.state
      ? n.setAttribute("class", "queueing")
      : n.setAttribute("class", "still"),
      n.setAttribute("data-queue-id", t.id),
      n.setAttribute("data-mission-guid", t.mission_id),
      s.appendChild(n);
    var a = document.createElement("div");
    a.setAttribute("class", "movehandle"),
      (a.innerHTML = "<span>" + lang_main_missions_move + "</span>"),
      n.appendChild(a);
    var r = document.createElement("div");
    if (
      (r.setAttribute("class", "name"),
      "Queueing" == t.state
        ? (r.innerHTML = "<span>" + i + "</span>")
        : (r.innerHTML = "<span>" + t.name + "</span>"),
      n.appendChild(r),
      "Queueing" == t.state)
    );
    else {
      var o = document.createElement("span");
      o.innerHTML = t.state;
      var d = document.createElement("div");
      d.setAttribute("class", "state"),
        "Pending" == t.state
          ? d.setAttribute("data-state-color", "yellow")
          : "Executing" == t.state &&
            d.setAttribute("data-state-color", "green"),
        d.appendChild(o),
        n.appendChild(d);
      var m = document.createElement("div");
      m.setAttribute("class", "remove"),
        "undefined" != typeof systemtype &&
          "fleet" != systemtype &&
          (m.innerHTML = "<span>x</span>"),
        m.setAttribute("data-queue-id", t.id),
        m.setAttribute("data-state", t.state),
        -1 == t.allowed_methods.indexOf("DELETE")
          ? m.setAttribute("data-active", "false")
          : m.setAttribute("data-active", "true"),
        n.appendChild(m),
        -1 < t.allowed_methods.indexOf("DELETE") &&
          (m.onclick = function () {
            "Executing" == this.getAttribute("data-state")
              ? launch_confirm(
                  lang_missions_summary_remove_executing_mission,
                  lang_missions_summary_remove_executing_mission_text,
                  "missions_summary_remove_queue_item('" +
                    e +
                    "','" +
                    this.getAttribute("data-queue-id") +
                    "');"
                )
              : missions_summary_remove_queue_item(
                  e,
                  this.getAttribute("data-queue-id")
                );
          });
    }
    missions_summary_queue_checkifitems(e);
  }
  return !0;
}
function missions_summary_remove_queue_item(e, t) {
  var i = document.getElementById(e + "_queue");
  $(i)
    .children("li[data-queue-id='" + t + "']")
    .hide();
  var s = {};
  return (
    (s.id = t),
    (s.mode = "delete-mission-queue-item"),
    $.ajax({
      url: "/",
      data: s,
      method: "GET",
      dataType: "json",
      element_id: e,
      qid: t,
      success: function (e) {
        missions_summary_delete_queue_item(this.element_id, this.qid);
      },
    }),
    !0
  );
}
function missions_summary_delete_queue_item(e, t) {
  var i = document.getElementById(e + "_queue");
  return (
    $(i)
      .children("li[data-queue-id='" + t + "']")
      .remove(),
    missions_summary_queue_checkifitems(e),
    !0
  );
}
function missions_summary_queue_checkifitems(e) {
  var t = document.getElementById(e + "_queue");
  return (
    0 == $(t).children("li").length
      ? ($(t).hide(), $(t.parentNode).children("div.nodataholder").show())
      : ($(t).show(), $(t.parentNode).children("div.nodataholder").hide()),
    !0
  );
}
function missions_missionview_toggle_mobileactions(e) {
  var t = document.getElementById(e + "_missionview");
  "true" == t.getAttribute("data-show-mobileactionpicker")
    ? t.setAttribute("data-show-mobileactionpicker", "false")
    : t.setAttribute("data-show-mobileactionpicker", "true");
}
function missions_missionview_make_sortable(e, i) {
  e.sortable({
    cursorAt: {
      left: -5,
      top: -5,
    },
    tolerance: "pointer",
    helper: "clone",
    handle: ".movehandle",
    element_id: i,
    placeholder: "sortable-placeholder",
    forcePlaceholderSize: !0,
    appendTo: "#missionview_" + i + "_list_main",
    zIndex: 999999999999,
    connectWith: ".missionview_" + i + "_list",
    stop: function (e, t) {
      missions_missionview_move_item(i, t.item),
        missions_missionview_align_settings_panel(i);
    },
  });
}
function missions_missionview_init(e) {
  var t = document.getElementById("missionview_" + e + "_actionlist"),
    i = document.createElement("ul");
  i.setAttribute("class", "missionview_" + e + "_list"),
    i.setAttribute("id", "missionview_" + e + "_list_main"),
    t.appendChild(i);
  var s = document.createElement("div");
  s.setAttribute("class", "no_action"),
    (s.innerHTML = mir_translate("This mission contains no actions.")),
    t.appendChild(s),
    (-1 < window["missions_missionview_" + e + "_permissions"].indexOf("PUT") ||
      window["missions_missionview_" + e + "_data"].is_template) &&
      missions_missionview_make_sortable(
        $("#missionview_" + e + "_list_main"),
        e
      ),
    missions_missionview_load_actions(
      e,
      "",
      "missionview_" + e + "_list_main",
      window["missions_missionview_" + e + "_data"].is_template
    ),
    missions_missionview_get_active_action(e),
    topsubbar_init(e);
}
function missions_missionview_move_item(e, t) {
  var i = $(t).parent("ul").attr("id"),
    s = $(t).attr("id");
  (window["missions_missionview_" + e + "_elements"][s].mother =
    i == "missionview_" + e + "_list_main" ? "" : i),
    submitwarn_set();
}
function missions_missionview_clone(e, t) {
  var i = window["missions_missionview_" + e + "_elements"];
  if (!t in i) return !1;
  $(".ui-sortable").sortable("destroy"),
    $(".ui-draggable").removeClass("ui-draggable");
  var s = $("#" + t)
      .clone(!0, !0)
      .wrap("<div/>")
      .parent(),
    n = [
      {
        action_id: t,
        action_mom: i[t].mother,
      },
    ];
  for (
    s.find("[data-action-guid]").attr("data-action-guid", "").end();
    0 !== n.length;

  ) {
    var a = n.shift(),
      r = a.action_id,
      o = a.action_mom,
      d = i[r],
      m = $.extend(!0, {}, d);
    $.each(m.vals, function (e) {
      /local_guid$/.test(e) && delete m.vals[e];
    }),
      (m.mother = o);
    var l =
      "missions_missionview_" +
      e +
      "_action_" +
      window["missions_missionview_" + e + "_element_counter"];
    window["missions_missionview_" + e + "_element_counter"]++,
      (window["missions_missionview_" + e + "_elements"][l] = m),
      $.each(i, function (e, t) {
        t.mother.substr(0, r.length + 1) === r + "_" &&
          n.push({
            action_id: e,
            action_mom: t.mother.replace(r, l),
          });
      }),
      s
        .find('[id="' + r + '"]')
        .attr("id", l)
        .end()
        .find("[data-settings-open]")
        .attr("data-settings-open", "false")
        .end()
        .find("[data-highlighted]")
        .attr("data-highlighted", "false")
        .end()
        .find('[data-item-id="' + r + '"]')
        .attr("data-item-id", l)
        .end()
        .find('[id^="' + r + '_"]')
        .each(function () {
          var e = $(this),
            t = e.attr("id").replace(r, l);
          e.attr("id", t);
        })
        .end()
        .find('[data-for-item^="' + r + '_"]')
        .each(function () {
          var e = $(this),
            t = e.attr("data-for-item").replace(r, l);
          e.attr("data-for-item", t);
        })
        .end();
  }
  s
    .find("li:first")
    .unwrap()
    .insertAfter("#" + t),
    (-1 < window["missions_missionview_" + e + "_permissions"].indexOf("PUT") ||
      window["missions_missionview_" + e + "_data"].is_template) &&
      missions_missionview_make_sortable(
        $(
          "#missionview_" +
            e +
            '_list_main,[id^="missions_' +
            e +
            '_missionview_action"][id*="_sublist_"]'
        ),
        e
      );
}
function missions_missionview_add_action(y, e, t, E, i, s, n) {
  null == E && submitwarn_set();
  var C = document.getElementById(y + "_missionview"),
    a = C.getAttribute("data-highlighted-scope");
  "go_figure" == i && 0 < a.length && document.getElementById(a)
    ? (i = a)
    : "go_figure" == i && (i = "missionview_" + y + "_list_main");
  var r = document.getElementById(i),
    o =
      "missions_missionview_" +
      y +
      "_action_" +
      window["missions_missionview_" + y + "_element_counter"];
  (window["missions_missionview_" + y + "_elements"][o] = {}),
    r.getAttribute("id") == "missionview_" + y + "_list_main"
      ? (window["missions_missionview_" + y + "_elements"][o].mother = "")
      : (window["missions_missionview_" + y + "_elements"][
          o
        ].mother = r.getAttribute("id")),
    window["missions_missionview_" + y + "_element_counter"]++;
  var I = e;
  "load_mission_" == I.substr(0, 13) && (I = "load_mission");
  var d = document.createElement("li");
  d.setAttribute("data-settings-open", "false"),
    d.setAttribute("data-selected", "false"),
    d.setAttribute("data-has-scopes", "false"),
    d.setAttribute("data-num-scopes", 0),
    d.setAttribute("data-collapsed", "false"),
    d.setAttribute("class", "action"),
    d.setAttribute("id", o),
    d.setAttribute("data-action-guid", t),
    d.setAttribute("data-error", "false"),
    d.setAttribute("data-action-type", I),
    d.setAttribute("data-is-template", n.toString()),
    r.appendChild(d);
  var m = document.createElement("div");
  m.setAttribute("class", "mainitem"), d.appendChild(m);
  var T = document.createElement("div");
  T.setAttribute("class", "movehandle"), m.appendChild(T);
  var l = {
    mode: "get-mission-action-structure",
    calltype: "light",
  };
  if (
    ((l.my_user_group_id = user_group_id),
    (l.action_type = e),
    (l.pageviewid = pageviewid),
    (l.mission_guid = C.getAttribute("data-mission-guid")),
    null == E && (submitwarn_set(), "load_mission" == I))
  ) {
    var u = e.substr(13, e.length);
    l.mission_guid = u;
  }
  return (
    (l.site_guid = C.getAttribute("data-site-guid")),
    (l.language = document
      .getElementsByTagName("body")[0]
      .getAttribute("data-current-language")),
    $.ajax({
      url: "/",
      data: l,
      method: "GET",
      dataType: "json",
      element_id: y,
      item_id: o,
      settings: E,
      guid: t,
      success: function (e) {
        if (
          ((window["missions_missionview_" + this.element_id + "_elements"][
            this.item_id
          ].info = e),
          (window["missions_missionview_" + this.element_id + "_elements"][
            this.item_id
          ].vals = {}),
          (window["missions_missionview_" + this.element_id + "_elements"][
            this.item_id
          ].dynvals = {}),
          e.description)
        )
          e.description;
        else;
        if (
          "load_mission" == I &&
          null == this.settings &&
          void 0 !== e.parameters
        )
          for (var t = 0; t < e.parameters.length; t++)
            null != e.parameters[t].dependencies &&
              (this.settings = e.parameters);
        if (null != this.settings)
          for (var i = this, s = 0; s < this.settings.length; ) {
            if ("load_mission" == I) {
              if (E) {
                var n = E.find(function (e) {
                  return e.id == i.settings[s].id;
                });
                n && "object" == typeof n && (this.settings[s].value = n.value);
              }
              for (var a = 0; a < this.settings.length; a++) {
                var r = this.settings[a];
                r.dependencies &&
                  $.each(r.dependencies, function (e, t) {
                    t.dependency_id &&
                      (window[
                        "missions_missionview_" + i.element_id + "_elements"
                      ][i.item_id].dynvals[t.dependency_id] = 1);
                  });
              }
            }
            (null !== this.settings[s].value &&
              void 0 !== this.settings[s].value) ||
              void 0 === this.settings[s].default ||
              (this.settings[s].value = this.settings[s].default),
              void 0 === this.settings[s].value &&
                "Reference" == this.settings[s].type &&
                "object" == typeof this.settings[s].options &&
                0 < this.settings[s].options.length &&
                (this.settings[s].value = this.settings[s].options[0].value),
              null == this.settings[s].value &&
                (this.settings[s].value = MIR.ui.constants.NULL_VALUE),
              (window["missions_missionview_" + this.element_id + "_elements"][
                this.item_id
              ].vals[this.settings[s].id] = this.settings[s].value),
              (window["missions_missionview_" + this.element_id + "_elements"][
                this.item_id
              ].vals[this.settings[s].id + "_local_guid"] = this.settings[
                s
              ].guid);
            var o = -1;
            if (null == this.settings[s].input_name);
            else {
              var d = {};
              (d.name = this.settings[s].input_name),
                (d.def = this.settings[s].value),
                (d.type = this.settings[s].type),
                ("Selection" != d.type && "Reference" != d.type) ||
                  (d.type =
                    this.settings[s].type + ":::" + this.settings[s].id);
              for (
                var m = 0;
                m < window["missions_missionview_" + y + "_dynvars"].length;

              )
                window["missions_missionview_" + y + "_dynvars"][m].name ==
                  d.name &&
                  window["missions_missionview_" + y + "_dynvars"][m].type ==
                    d.type &&
                  (o = m),
                  m++;
              -1 == o &&
                (window["missions_missionview_" + y + "_dynvars"].push(d),
                (o =
                  window["missions_missionview_" + y + "_dynvars"].length - 1));
            }
            (window["missions_missionview_" + this.element_id + "_elements"][
              this.item_id
            ].dynvals[this.settings[s].id] = o),
              s++;
          }
        var l = document.getElementById(this.item_id);
        1 == e.existing
          ? l.setAttribute("data-existing", "true")
          : (l.setAttribute("data-existing", "false"),
            T.setAttribute("class", "movehandle_disabled"));
        var u = l.childNodes[0],
          _ = document.createElement("div");
        _.setAttribute("class", "description"),
          1 == e.existing
            ? "load_mission" == e.action_type
              ? (_.innerHTML = "<p>" + e.name + "</p>")
              : (_.innerHTML = "<p>" + mir_translate(e.name) + "</p>")
            : (_.innerHTML =
                "<p>" + lang_missions_missionview_submission_deleted + "</p>"),
          u.appendChild(_);
        var p = document.createElement("div");
        p.setAttribute("class", "settingsicon"),
          p.setAttribute("data-element-id", this.element_id),
          p.setAttribute("data-item-id", this.item_id);
        var c = document.createElement("div");
        c.setAttribute("class", "viewicon"),
          c.setAttribute("data-item-id", this.item_id);
        var v = document.createElement("div");
        v.setAttribute("class", "cloneicon"),
          v.setAttribute("data-item-id", this.item_id),
          u.appendChild(v),
          u.appendChild(c),
          u.appendChild(p),
          $(p).click(function () {
            (-1 <
              window[
                "missions_missionview_" +
                  this.getAttribute("data-element-id") +
                  "_permissions"
              ].indexOf("PUT") ||
              window["missions_missionview_" + y + "_data"].is_template) &&
              ("true" ==
              document
                .getElementById(this.getAttribute("data-item-id"))
                .getAttribute("data-settings-open")
                ? missions_missionview_validation_action(
                    this.getAttribute("data-element-id"),
                    this.getAttribute("data-item-id"),
                    !0,
                    !0
                  )
                : missions_missionview_launch_settings(
                    this.getAttribute("data-element-id"),
                    this.getAttribute("data-item-id")
                  ));
          }),
          $(c).click(function () {
            "true" ==
            document
              .getElementById(this.getAttribute("data-item-id"))
              .getAttribute("data-collapsed")
              ? document
                  .getElementById(this.getAttribute("data-item-id"))
                  .setAttribute("data-collapsed", "false")
              : (document
                  .getElementById(this.getAttribute("data-item-id"))
                  .setAttribute("data-collapsed", "true"),
                C.getAttribute("data-highlighted-scope").substr(
                  0,
                  this.parentNode.parentNode.getAttribute("id").length
                ) == this.parentNode.parentNode.getAttribute("id") &&
                  (C.setAttribute("data-highlighted-scope", ""),
                  $(C)
                    .find("div.substatement,div.subholder")
                    .attr("data-highlighted", "false")));
          }),
          $(v).click(function () {
            missions_missionview_clone(y, this.getAttribute("data-item-id"));
          });
        var h = 0;
        if (
          void 0 !==
          window["missions_missionview_" + this.element_id + "_elements"][
            this.item_id
          ].info.parameters
        )
          for (
            var g = 0;
            g <
            window["missions_missionview_" + this.element_id + "_elements"][
              this.item_id
            ].info.parameters.length;

          ) {
            if (
              void 0 ===
              window["missions_missionview_" + this.element_id + "_elements"][
                this.item_id
              ].info.parameters[g].default
            )
              o = "";
            else
              o =
                window["missions_missionview_" + this.element_id + "_elements"][
                  this.item_id
                ].info.parameters[g].default;
            if (
              ("" ===
                window["missions_missionview_" + this.element_id + "_elements"][
                  this.item_id
                ].vals[
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].info.parameters[g].id
                ] ||
                void 0 ===
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].vals[
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].id
                  ] ||
                (o =
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].vals[
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].id
                  ]),
              null == o &&
                1 ==
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].info.parameters[g].nullable &&
                (o = MIR.ui.constants.NULL_VALUE),
              "" == o
                ? "Scope" ==
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].info.parameters[g].type
                  ? (window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].vals[
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].id
                    ] = [])
                  : "String" ==
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].type
                  ? (window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].vals[
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].id
                    ] = "")
                  : "Reference" ==
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].type ||
                    "Selection" ==
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].type
                  ? (0 <
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].options.length
                      ? (window[
                          "missions_missionview_" +
                            this.element_id +
                            "_elements"
                        ][this.item_id].vals[
                          window[
                            "missions_missionview_" +
                              this.element_id +
                              "_elements"
                          ][this.item_id].info.parameters[g].id
                        ] =
                          window[
                            "missions_missionview_" +
                              this.element_id +
                              "_elements"
                          ][this.item_id].info.parameters[g].options[0].value)
                      : (window[
                          "missions_missionview_" +
                            this.element_id +
                            "_elements"
                        ][this.item_id].vals[
                          window[
                            "missions_missionview_" +
                              this.element_id +
                              "_elements"
                          ][this.item_id].info.parameters[g].id
                        ] = ""),
                    0 <
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].options.length &&
                      (window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].vals[
                        window[
                          "missions_missionview_" +
                            this.element_id +
                            "_elements"
                        ][this.item_id].info.parameters[g].id
                      ] =
                        window[
                          "missions_missionview_" +
                            this.element_id +
                            "_elements"
                        ][this.item_id].info.parameters[g].options[0].value))
                  : (window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].vals[
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].id
                    ] = 0)
                : (window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].vals[
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].id
                  ] = o),
              missions_missionview_set_action_names(
                this.element_id,
                this.item_id
              ),
              "Scope" ==
                window["missions_missionview_" + this.element_id + "_elements"][
                  this.item_id
                ].info.parameters[g].type)
            ) {
              var b = document.createElement("div");
              b.setAttribute("class", "substatement"),
                b.setAttribute("data-highlighted", "false"),
                b.setAttribute("data-element-id", y),
                b.setAttribute(
                  "data-for-item",
                  this.item_id + "_sublist_" + (h + 1)
                ),
                (b.innerHTML =
                  "<p>" +
                  mir_translate(
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].name
                  ) +
                  "</p>"),
                l.appendChild(b),
                $(b).click(function () {
                  var e = this.getAttribute("data-highlighted"),
                    t = document.getElementById(
                      this.getAttribute("data-element-id") + "_missionview"
                    );
                  if (
                    ($(
                      "ul#missionview_" +
                        this.getAttribute("data-element-id") +
                        "_list_main"
                    )
                      .find("div.substatement,div.subholder")
                      .attr("data-highlighted", "false"),
                    "true" == e)
                  )
                    t.setAttribute("data-highlighted-scope", "");
                  else {
                    var i = this.parentNode;
                    t.setAttribute(
                      "data-highlighted-scope",
                      this.getAttribute("data-for-item")
                    ),
                      this.setAttribute("data-highlighted", "true"),
                      $(i)
                        .children(
                          "div[data-for-item='" +
                            this.getAttribute("data-for-item") +
                            "'].subholder"
                        )
                        .attr("data-highlighted", "true");
                  }
                });
              var w = document.createElement("div");
              w.setAttribute("class", "subholder"),
                w.setAttribute("data-highlighted", "false"),
                w.setAttribute(
                  "data-for-item",
                  this.item_id + "_sublist_" + (h + 1)
                ),
                l.appendChild(w);
              var A = document.createElement("ul");
              A.setAttribute("id", this.item_id + "_sublist_" + (h + 1)),
                A.setAttribute(
                  "class",
                  "missionview_" + this.element_id + "_list"
                ),
                w.appendChild(A);
              var f = document.createElement("div");
              f.setAttribute("class", "subholder_msg"),
                (f.innerHTML = mir_translate("You can drop action(s) here.")),
                w.appendChild(f),
                void 0 !==
                  window[
                    "missions_missionview_" + this.element_id + "_elements"
                  ][this.item_id].vals[
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].info.parameters[g].id + "_local_guid"
                  ] &&
                  missions_missionview_load_actions(
                    y,
                    window[
                      "missions_missionview_" + this.element_id + "_elements"
                    ][this.item_id].vals[
                      window[
                        "missions_missionview_" + this.element_id + "_elements"
                      ][this.item_id].info.parameters[g].id + "_local_guid"
                    ],
                    this.item_id + "_sublist_" + (h + 1),
                    window["missions_missionview_" + y + "_data"].is_template
                  ),
                (-1 <
                  window["missions_missionview_" + y + "_permissions"].indexOf(
                    "PUT"
                  ) ||
                  window["missions_missionview_" + y + "_data"].is_template) &&
                  missions_missionview_make_sortable(
                    $("#" + this.item_id + "_sublist_" + (h + 1)),
                    y
                  ),
                h++;
            }
            g++;
          }
        0 < h
          ? (l.setAttribute("data-has-scopes", "true"),
            l.setAttribute("data-num-scopes", h))
          : l.setAttribute("data-has-scopes", "false");
      },
    }),
    (i = document.getElementById(y + "_missionview")).setAttribute(
      "data-show-mobileactionpicker",
      "false"
    ),
    o
  );
}
function missions_missionview_set_action_names(element_id, item_id) {
  var is_simple_cond = function (e) {
      return (
        "object" == typeof e &&
        "value" in e &&
        "operator" in e &&
        "parameter_id" in e
      );
    },
    eval_cond = function (cond) {
      if (is_simple_cond(cond)) {
        var parameter_val,
          cond_val =
            null === cond.value ? MIR.ui.constants.NULL_VALUE : cond.value;
        return (
          cond.parameter_id in _dyn_values &&
          -1 < _dyn_values[cond.parameter_id]
            ? (parameter_val = _dyn_values[cond.parameter_id])
            : cond.parameter_id in _values &&
              (parameter_val = _values[cond.parameter_id]),
          eval('"' + parameter_val + '"' + cond.operator + '"' + cond_val + '"')
        );
      }
      if (Array.isArray(cond))
        return cond.some(function (e) {
          return eval_cond(e);
        });
      throw new Error("Invalid conditions in action!");
    },
    itemholder = document.getElementById(item_id),
    nameholder = $(itemholder)
      .children("div.mainitem")
      .children("div.description")
      .children("p"),
    current_action =
      window["missions_missionview_" + element_id + "_elements"][item_id],
    _dyn_values = current_action.dynvals,
    _values = current_action.vals,
    desc;
  if (Array.isArray(current_action.info.descriptions)) {
    var _descriptions = current_action.info.descriptions,
      description = _descriptions.find(function (e) {
        return e.conditions.every(function (e) {
          return eval_cond(e);
        });
      });
    description && (desc = description.text);
  }
  if (
    (void 0 === desc &&
      (desc =
        "string" == typeof current_action.info.description
          ? current_action.info.description
          : ""),
    0 < desc.length && current_action.info.parameters)
  ) {
    for (
      var properties = {}, c = 0;
      c < current_action.info.parameters.length;

    ) {
      var current_parameter = current_action.info.parameters[c],
        curid = current_parameter.id,
        curtype = current_parameter.type;
      if (current_parameter.options) var curoptions = current_parameter.options;
      else var curoptions = [];
      var curval = current_action.vals[current_parameter.id],
        curdynval = current_action.dynvals[current_parameter.id];
      if (-1 < curdynval)
        var dt = "dynval",
          curwritingval =
            window["missions_missionview_" + element_id + "_dynvars"][curdynval]
              .name;
      else {
        var dt = "regular",
          curwritingval = curval;
        if ("Reference" == curtype || "Selection" == curtype) {
          for (var s = 0; s < curoptions.length; )
            curoptions[s].value == curval &&
              (curwritingval = curoptions[s].name),
              s++;
          curval &&
            curwritingval == curval &&
            36 == curval.length &&
            (curwritingval = lang_missions_missionview_unknown_element);
        } else if ("Duration" == curtype)
          if (
            void 0 !== curval &&
            curval &&
            curval !== MIR.ui.constants.NULL_VALUE
          ) {
            curwritingval = curval.split(".")[0];
            var time_array = curwritingval.split(":");
            (curwritingval = ""),
              (time_array = time_array.map(function (e) {
                return parseInt(e);
              })),
              time_array[0]
                ? (time_array[0] += " " + mir_translate("hour"))
                : (time_array[0] = null),
              time_array[1]
                ? (time_array[1] += " " + mir_translate("min"))
                : (time_array[1] = null),
              time_array[2]
                ? (time_array[2] += " " + mir_translate("sec"))
                : (time_array[2] = null),
              (time_array = time_array.filter(function (e) {
                return null !== e;
              })),
              (curwritingval = time_array.join("/"));
          } else curwritingval = mir_translate("Forever");
        curwritingval == MIR.ui.constants.NULL_VALUE &&
          (curwritingval = current_parameter.null_option.toLowerCase());
      }
      (properties[curid] =
        '<strong data-type="' + dt + '">' + curwritingval + "</strong>"),
        c++;
    }
    desc = mir_translate(desc, properties);
  } else desc = mir_translate(current_action.info.name);
  $(nameholder).html(desc);
}
function missions_missionview_toggle_parameters(l, u) {
  $.each(
    window["missions_missionview_" + l + "_elements"][u].info.parameters,
    function () {
      var e = this,
        t = u + "_fieldwrapper_" + e.saveid,
        o = !1,
        d = window["missions_missionview_" + l + "_elements"][u].dynvals,
        m = window["missions_missionview_" + l + "_elements"][u].vals;
      if (
        (e.dependencies
          ? $.each(e.dependencies, function () {
              var e = d[this.dependency_id];
              if (-1 !== e && void 0 !== e) return (o = !0);
              var t = m[this.dependency_id];
              if (
                (null === this.value &&
                  t === MIR.ui.constants.NULL_VALUE &&
                  (o = !0),
                this.check_field)
              ) {
                var i = t,
                  s = this.dependency_id,
                  n =
                    window["missions_missionview_" + l + "_elements"][u].info
                      .parameters,
                  a = $.grep(n, function (e) {
                    return e.id == s;
                  })[0],
                  r = $.grep(a.options, function (e) {
                    return e.value == i;
                  })[0];
                r && (t = r[this.check_field]);
              }
              if (Array.isArray(this.value)) o = -1 < $.inArray(t, this.value);
              else if (t == this.value) return (o = !0);
            })
          : (o = !0),
        $("#" + t).toggle(o),
        !o && e.nullable)
      ) {
        var i = l + "_missionview_settingspanel_field_" + e.id + "_nullfield",
          s = $("#" + i);
        s.is(":checked") || s.click();
      }
    }
  );
}
function missions_missionview_launch_settings(i, s) {
  (window["missions_missionview_" + i + "_original_elements"] = $.extend(
    !0,
    {},
    window["missions_missionview_" + i + "_elements"][s]
  )),
    (window["missions_missionview_" + i + "_original_dynvars"] = $.extend(
      !0,
      [],
      window["missions_missionview_" + i + "_dynvars"]
    )),
    (window["missions_missionview_" + i + "_original_errors"] = $.extend(
      !0,
      [],
      window["missions_missionview_" + i + "errors"]
    ));
  window["missions_missionview_" + i + "_elements"][s];
  submitwarn_set(),
    document
      .getElementById(i + "_missionview")
      .setAttribute("data-show-settings", "true"),
    $("li.action").attr("data-settings-open", "false"),
    document.getElementById(s).setAttribute("data-settings-open", "true");
  var e = document.getElementById(i + "_missionview_settingspanel");
  e.innerHTML = "";
  var t = document.createElement("h3"),
    n = "";
  if (
    (0 <
      window["missions_missionview_" + i + "_elements"][s].info.help.length &&
    1 == window["missions_missionview_" + i + "_elements"][s].info.existing
      ? ((window.help_window_text =
          window["missions_missionview_" + i + "_elements"][s].info.help),
        (n +=
          '<span class="help" onclick="help_launch(help_window_text);"></span>'),
        t.setAttribute("data-has-help", "true"))
      : t.setAttribute("data-has-help", "false"),
    1 == window["missions_missionview_" + i + "_elements"][s].info.existing
      ? (n += mir_translate(
          window["missions_missionview_" + i + "_elements"][s].info.name
        ))
      : (n += lang_missions_missionview_deleted_mission),
    (t.innerHTML = n),
    e.appendChild(t),
    void 0 ===
      window["missions_missionview_" + i + "_elements"][s].info.parameters)
  );
  else
    for (
      var a = 0;
      a <
      window["missions_missionview_" + i + "_elements"][s].info.parameters
        .length;

    ) {
      var r =
          window["missions_missionview_" + i + "_elements"][s].dynvals[
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ],
        o =
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].type,
        d = document.createElement("div");
      if (
        (d.setAttribute("class", "fieldwrapper"),
        d.setAttribute("data-dynbutton", "false"),
        d.setAttribute("data-ftype", o),
        d.setAttribute("data-error", "false"),
        d.setAttribute("data-inactive", "false"),
        -1 < r
          ? d.setAttribute("data-dynval", "true")
          : d.setAttribute("data-dynval", "false"),
        d.setAttribute(
          "id",
          s +
            "_fieldwrapper_" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid
        ),
        e.appendChild(d),
        "Reference" == o ||
          "Selection" == o ||
          "Integer" == o ||
          "Float" == o ||
          "String" == o ||
          "Duration" == o)
      ) {
        (R = document.createElement("label")).setAttribute(
          "for",
          i +
            "_missionview_settingspanel_field_" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid
        );
        var m = mir_translate(
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].name
        );
        0 <
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].help.length &&
          ((window[
            "help_window_text_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ] =
            window["missions_missionview_" + i + "_elements"][
              s
            ].info.parameters[a].help),
          (m +=
            '<span class="help" onclick="help_launch(help_window_text_' +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid +
            ');"></span>')),
          (R.innerHTML = m),
          d.appendChild(R);
      }
      var l = document.createElement("div");
      l.setAttribute("class", "fieldholder"),
        l.setAttribute(
          "id",
          s +
            "_fieldholder_" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
        ),
        d.appendChild(l);
      var u = !1;
      if ("Reference" == o || "Selection" == o) {
        u = !0;
        var _ = document.createElement("select");
        if (
          (_.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          _.setAttribute(
            "name",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
          ),
          _.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          _.setAttribute("data-item-id", s),
          _.setAttribute("data-element-id", i),
          _.setAttribute("data-count", a),
          l.appendChild(_),
          (_.onchange = function () {
            if ("popuppositionpicker" == this.options[this.selectedIndex].value)
              missions_missionview_launch_popuppositionpicker(
                this.getAttribute("data-element-id"),
                this.getAttribute("data-item-id"),
                this.getAttribute("data-parameter-id"),
                window[
                  "missions_missionview_" +
                    this.getAttribute("data-element-id") +
                    "_elements"
                ][this.getAttribute("data-item-id")].info.parameters[
                  this.getAttribute("data-count")
                ].options
              );
            else {
              var e = this.getAttribute("data-item-id"),
                t = this.getAttribute("data-parameter-id"),
                i = this.getAttribute("data-element-id");
              (window["missions_missionview_" + i + "_elements"][e].vals[
                t
              ] = this.options[this.selectedIndex].value),
                missions_missionview_set_action_names(i, e),
                missions_missionview_toggle_parameters(i, e);
            }
          }),
          void 0 ===
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].options ||
            0 ==
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].options.length)
        ) {
          (b = document.createElement("option")).setAttribute("value", ""),
            b.setAttribute("selected", "selected"),
            (b.innerHTML = lang_missions_missionview_nooptionsavailable),
            _.appendChild(b),
            _.setAttribute("disabled", "disabled");
        } else {
          var p = "",
            c = !1,
            v = 0;
          for (
            window["missions_missionview_" + i + "_elements"][
              s
            ].info.parameters[a].options.sort(function (e, t) {
              return e.prioritize || t.prioritize
                ? e.prioritize
                  ? -1
                  : 1
                : e.groupname && t.groupname && e.groupname != t.groupname
                ? e.groupname.toUpperCase() < t.groupname.toUpperCase()
                  ? -1
                  : 1
                : e.name.toUpperCase() < t.name.toUpperCase()
                ? -1
                : 1;
            });
            v <
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].options.length;

          ) {
            if (
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].options[0].groupname
            ) {
              if (
                window["missions_missionview_" + i + "_elements"][s].info
                  .parameters[a].options[v].groupname == p
              );
              else {
                var h = document.createElement("optgroup");
                h.setAttribute(
                  "label",
                  window["missions_missionview_" + i + "_elements"][s].info
                    .parameters[a].options[v].groupname
                ),
                  _.appendChild(h),
                  (p =
                    window["missions_missionview_" + i + "_elements"][s].info
                      .parameters[a].options[v].groupname);
              }
              var g = h;
            } else g = _;
            var b;
            (b = document.createElement("option")).setAttribute(
              "value",
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].options[v].value
            ),
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].options[v].value ==
                window["missions_missionview_" + i + "_elements"][s].vals[
                  window["missions_missionview_" + i + "_elements"][s].info
                    .parameters[a].id
                ] && (b.setAttribute("selected", "selected"), (c = !0)),
              (b.innerHTML =
                window["missions_missionview_" + i + "_elements"][
                  s
                ].info.parameters[a].options[v].name),
              g.appendChild(b),
              v++;
          }
          if (!c) {
            var w = window["missions_missionview_" + i + "_elements"][s],
              A = w.info.parameters[a].id;
            (w.vals[A] == MIR.ui.constants.NULL_VALUE &&
              w.info.parameters[a].nullable) ||
              (w.vals[A] = $(_).val()),
              missions_missionview_set_action_names(i, s);
          }
        }
        window["missions_missionview_" + i + "_elements"][s].info.parameters[a]
          .id;
      } else if ("String" == o) {
        (u = !0),
          (f =
            window["missions_missionview_" + i + "_elements"][s].vals[
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ]) == MIR.ui.constants.NULL_VALUE && (f = ""),
          (y = document.createElement("input")).setAttribute("type", "text"),
          y.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          y.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          y.setAttribute("data-item-id", s),
          y.setAttribute("data-element-id", i),
          y.setAttribute(
            "name",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
          ),
          y.setAttribute("value", f),
          l.appendChild(y),
          (y.onkeyup = function () {
            var e = this.getAttribute("data-item-id"),
              t = this.getAttribute("data-parameter-id"),
              i = this.getAttribute("data-element-id");
            (window["missions_missionview_" + i + "_elements"][e].vals[
              t
            ] = this.value),
              missions_missionview_set_action_names(i, e);
          });
      } else if ("Integer" == o || "Float" == o) {
        var f, y;
        (u = !0),
          (f =
            window["missions_missionview_" + i + "_elements"][s].vals[
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ]) == MIR.ui.constants.NULL_VALUE && (f = ""),
          (y = document.createElement("input")).setAttribute("type", "text"),
          y.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          y.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          y.setAttribute("data-item-id", s),
          y.setAttribute("data-element-id", i),
          y.setAttribute(
            "name",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
          ),
          y.setAttribute("value", f),
          l.appendChild(y),
          (y.onkeyup = function () {
            var e = this.getAttribute("data-item-id"),
              t = this.getAttribute("data-parameter-id"),
              i = this.getAttribute("data-element-id");
            (window["missions_missionview_" + i + "_elements"][e].vals[
              t
            ] = this.value),
              missions_missionview_set_action_names(i, e);
          });
      } else if ("Duration" == o) {
        u = !0;
        missions_missionview_transform_duration_toseconds(
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].min
        ),
          missions_missionview_transform_duration_toseconds(
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].max
          );
        if (
          window["missions_missionview_" + i + "_elements"][s].vals[
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ] == MIR.ui.constants.NULL_VALUE
        )
          var E = 0;
        else
          E = missions_missionview_transform_duration_toseconds(
            window["missions_missionview_" + i + "_elements"][s].vals[
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ]
          );
        window["missions_missionview_" + i + "_elements"][s].info.parameters[a]
          .id;
        var C = E,
          I = Math.floor(E / 60),
          T = Math.floor(I / 60),
          B = E - 60 * I;
        I = I - 60 * T;
        1 == String(B).length && (B = "0" + String(B)),
          1 == String(I).length && (I = "0" + I),
          1 == String(T).length && (T = "0" + T);
        var L = [T, I, B],
          k = ["hours", "minutes", "seconds"],
          M = [
            lang_missions_missionview_durationpicker_hours,
            lang_missions_missionview_durationpicker_minutes,
            lang_missions_missionview_durationpicker_seconds,
          ],
          x = document.createElement("div");
        x.setAttribute("class", "durationpickerholder"),
          x.setAttribute("data-cur", C),
          x.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          l.appendChild(x);
        var q = document.createElement("table");
        q.setAttribute("cellpadding", "0"),
          q.setAttribute("cellspacing", "0"),
          x.appendChild(q);
        var H = document.createElement("tr");
        q.appendChild(H);
        for (var N = 0; N < k.length; ) {
          (j = document.createElement("td")).setAttribute("class", "arrow_up"),
            H.appendChild(j),
            (U = document.createElement("div")).setAttribute(
              "data-timetype",
              k[N]
            ),
            U.setAttribute(
              "data-parameter-id",
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ),
            U.setAttribute("data-element-id", i),
            U.setAttribute("data-item-id", s),
            (U.innerHTML = "<span>+</span>"),
            (U.onclick = function () {
              var e = document.getElementById(
                  this.getAttribute("data-element-id") +
                    "_missionview_settingspanel_field_" +
                    this.getAttribute("data-parameter-id") +
                    "_" +
                    this.getAttribute("data-timetype")
                ),
                t = "00";
              if (parseInt(e.value)) var i = parseInt(e.value);
              else i = 0;
              24 <= i && "hours" == this.getAttribute("data-timetype")
                ? (t = "00")
                : 59 <= i && "minutes" == this.getAttribute("data-timetype")
                ? (t = "00")
                : 59 <= i && "seconds" == this.getAttribute("data-timetype")
                ? (t = "00")
                : 1 == (t = String(i + 1)).length && (t = "0" + t),
                (e.value = t),
                missions_missionview_durationpickerholder_set_value(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-parameter-id"),
                  this.getAttribute("data-item-id")
                );
            }),
            j.appendChild(U),
            N++;
        }
        H = document.createElement("tr");
        q.appendChild(H);
        for (N = 0; N < k.length; ) {
          (j = document.createElement("td")).setAttribute("class", "field"),
            H.appendChild(j);
          var S = document.createElement("input");
          S.setAttribute("type", "text"),
            S.setAttribute("maxlength", "2"),
            S.setAttribute("value", L[N]),
            S.setAttribute("data-timetype", k[N]),
            S.setAttribute(
              "data-parameter-id",
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ),
            S.setAttribute("data-element-id", i),
            S.setAttribute("data-item-id", s),
            S.setAttribute("data-old-value", ""),
            S.setAttribute(
              "name",
              i +
                "_missionview_settingspanel_field_" +
                window["missions_missionview_" + i + "_elements"][s].info
                  .parameters[a].id +
                "_" +
                k[N]
            ),
            S.setAttribute(
              "id",
              i +
                "_missionview_settingspanel_field_" +
                window["missions_missionview_" + i + "_elements"][s].info
                  .parameters[a].id +
                "_" +
                k[N]
            ),
            (S.onkeyup = function (e) {
              var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
              if (
                2 == this.value.length &&
                -1 < t.indexOf(e.key) &&
                e.target == this &&
                this.value !== this.getAttribute("data-old-value")
              ) {
                var i =
                  this.getAttribute("data-element-id") +
                  "_missionview_settingspanel_field_" +
                  this.getAttribute("data-parameter-id") +
                  "_";
                "hours" == this.getAttribute("data-timetype")
                  ? (i += "minutes")
                  : "minutes" == this.getAttribute("data-timetype")
                  ? (i += "seconds")
                  : (i += "hours"),
                  $("#" + i).select(),
                  $("#" + i).focus();
              } else
                -1 < t.indexOf(e.key) &&
                  this.setAttribute("data-old-value", "");
              missions_missionview_durationpickerholder_set_value(
                this.getAttribute("data-element-id"),
                this.getAttribute("data-parameter-id"),
                this.getAttribute("data-item-id")
              );
            }),
            (S.onblur = function (e) {
              if (e.target == this) {
                for (
                  var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
                    i = !1,
                    s = 0;
                  s < this.value.length;

                )
                  -1 == t.indexOf(this.value[s]) && (i = !0), s++;
                0 == this.value.length || 1 == i
                  ? (this.value = "00")
                  : "hours" == this.getAttribute("data-timetype") &&
                    24 < parseInt(this.value)
                  ? (this.value = "24")
                  : "hours" == this.getAttribute("data-timetype") &&
                    parseInt(this.value) < 0
                  ? (this.value = "00")
                  : "minutes" == this.getAttribute("data-timetype") &&
                    59 < parseInt(this.value)
                  ? (this.value = "59")
                  : "minutes" == this.getAttribute("data-timetype") &&
                    parseInt(this.value) < 0
                  ? (this.value = "00")
                  : "seconds" == this.getAttribute("data-timetype") &&
                    59 < parseInt(this.value)
                  ? (this.value = "59")
                  : "seconds" == this.getAttribute("data-timetype") &&
                    parseInt(this.value) < 0
                  ? (this.value = "00")
                  : 1 == this.value.length && (this.value = "0" + this.value),
                  this.setAttribute("data-old-value", this.value);
              }
            }),
            j.appendChild(S),
            N++;
        }
        H = document.createElement("tr");
        q.appendChild(H);
        for (N = 0; N < k.length; ) {
          (j = document.createElement("td")).setAttribute("class", "text"),
            H.appendChild(j);
          var O = document.createElement("div");
          (O.innerHTML = "<span>" + M[N] + "</span>"), j.appendChild(O), N++;
        }
        H = document.createElement("tr");
        q.appendChild(H);
        for (N = 0; N < k.length; ) {
          var j, U;
          (j = document.createElement("td")).setAttribute(
            "class",
            "arrow_down"
          ),
            H.appendChild(j),
            (U = document.createElement("div")).setAttribute(
              "data-timetype",
              k[N]
            ),
            U.setAttribute(
              "data-parameter-id",
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ),
            U.setAttribute("data-element-id", i),
            U.setAttribute("data-item-id", s),
            (U.innerHTML = "<span>-</span>"),
            (U.onclick = function () {
              var e = document.getElementById(
                  this.getAttribute("data-element-id") +
                    "_missionview_settingspanel_field_" +
                    this.getAttribute("data-parameter-id") +
                    "_" +
                    this.getAttribute("data-timetype")
                ),
                t = "00";
              if (parseInt(e.value)) var i = parseInt(e.value);
              else i = 0;
              i <= 0 && "hours" == this.getAttribute("data-timetype")
                ? (t = "24")
                : i <= 0 && "minutes" == this.getAttribute("data-timetype")
                ? (t = "59")
                : i <= 0 && "seconds" == this.getAttribute("data-timetype")
                ? (t = "59")
                : 1 == (t = String(i - 1)).length && (t = "0" + t),
                (e.value = t),
                missions_missionview_durationpickerholder_set_value(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-parameter-id"),
                  this.getAttribute("data-item-id")
                );
            }),
            j.appendChild(U),
            N++;
        }
      } else if ("Boolean" == o) {
        u = !1;
        var R,
          P = document.createElement("input");
        P.setAttribute("type", "checkbox"),
          P.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          P.setAttribute(
            "name",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
          ),
          P.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          P.setAttribute("data-item-id", s),
          P.setAttribute("data-element-id", i),
          1 ==
            window["missions_missionview_" + i + "_elements"][s].vals[
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id
            ] && P.setAttribute("checked", "checked"),
          l.appendChild(P),
          (P.onclick = function () {
            var e = this.getAttribute("data-item-id"),
              t = this.getAttribute("data-parameter-id"),
              i = this.getAttribute("data-element-id");
            1 == this.checked
              ? (window["missions_missionview_" + i + "_elements"][e].vals[
                  t
                ] = 1)
              : (window["missions_missionview_" + i + "_elements"][e].vals[
                  t
                ] = 0),
              missions_missionview_toggle_parameters(i, e),
              missions_missionview_set_action_names(i, e);
          }),
          (R = document.createElement("label")).setAttribute(
            "data-fieldtype",
            "checkbox"
          ),
          R.setAttribute(
            "for",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].saveid
          ),
          (R.innerHTML = mir_translate(
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].name
          )),
          l.appendChild(R);
        var D = document.createElement("div");
        D.setAttribute("class", "clear"), l.appendChild(D);
      }
      if (1 == u) {
        d.setAttribute("data-dynbutton", "true");
        var V =
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].type;
        ("Selection" != V && "Reference" != V) ||
          (V =
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].type +
            ":::" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id);
        var G =
          window["missions_missionview_" + i + "_elements"][s].dynvals[
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ];
        if (-1 < G)
          var J = window["missions_missionview_" + i + "_dynvars"][G].name;
        else J = "Unknown";
        var F = document.createElement("div");
        F.setAttribute("class", "dynvarprops"), d.appendChild(F);
        var K = document.createElement("div");
        K.setAttribute("class", "badge"),
          K.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          K.setAttribute(
            "data-parameter-saveid",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid
          ),
          K.setAttribute("data-parameter-type", V),
          K.setAttribute("data-item-id", s),
          K.setAttribute("data-element-id", i),
          F.appendChild(K);
        var z = document.createElement("p");
        z.setAttribute(
          "id",
          s +
            "_dynvarbadgetext_" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
        ),
          (z.innerHTML = J),
          K.appendChild(z),
          (K.onclick = function () {
            var e =
              window["missions_missionview_" + i + "_elements"][s].dynvals[
                this.getAttribute("data-parameter-id")
              ];
            missions_missionview_launch_dynvars(
              this.getAttribute("data-element-id"),
              this.getAttribute("data-item-id"),
              this.getAttribute("data-parameter-id"),
              this.getAttribute("data-parameter-saveid"),
              this.getAttribute("data-parameter-type"),
              e
            );
          });
        var Q = document.createElement("div");
        Q.setAttribute("class", "dynbutton"),
          Q.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          Q.setAttribute(
            "data-parameter-saveid",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid
          ),
          Q.setAttribute("data-parameter-type", V),
          Q.setAttribute("data-item-id", s),
          Q.setAttribute("data-element-id", i),
          d.appendChild(Q),
          (Q.onclick = function () {
            var e =
              window["missions_missionview_" + i + "_elements"][s].dynvals[
                this.getAttribute("data-parameter-id")
              ];
            missions_missionview_launch_dynvars(
              this.getAttribute("data-element-id"),
              this.getAttribute("data-item-id"),
              this.getAttribute("data-parameter-id"),
              this.getAttribute("data-parameter-saveid"),
              this.getAttribute("data-parameter-type"),
              e
            );
          });
      }
      if (
        1 !=
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].nullable ||
        window["missions_missionview_" + i + "_elements"][s].info.parameters[a]
          .hide_checkbox
      )
        d.setAttribute("data-nullable", "false"),
          d.setAttribute("data-null-option", "");
      else {
        d.setAttribute("data-nullable", "true"),
          d.setAttribute(
            "data-null-option",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].null_option
          );
        var Y = document.createElement("div");
        Y.setAttribute("class", "nullerholder"), d.appendChild(Y);
        var W = document.createElement("input");
        W.setAttribute("type", "checkbox"),
          W.setAttribute(
            "name",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id +
              "_nullfield"
          ),
          W.setAttribute(
            "id",
            i +
              "_missionview_settingspanel_field_" +
              window["missions_missionview_" + i + "_elements"][s].info
                .parameters[a].id +
              "_nullfield"
          ),
          W.setAttribute("data-element-id", i),
          W.setAttribute("data-item-id", s),
          W.setAttribute("data-cur-type", o),
          W.setAttribute("data-param-count", a),
          W.setAttribute(
            "data-default-value",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].default
          ),
          W.setAttribute(
            "data-parameter-id",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ),
          W.setAttribute(
            "data-parameter-saveid",
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].saveid
          ),
          window["missions_missionview_" + i + "_elements"][s].vals[
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id
          ] == MIR.ui.constants.NULL_VALUE &&
            (W.setAttribute("checked", "checked"),
            d.setAttribute("data-inactive", "true")),
          W.setAttribute("value", "1"),
          Y.appendChild(W),
          (W.onclick = function () {
            var e = this.getAttribute("data-default-value"),
              t = this.getAttribute("data-cur-type");
            window[
              "missions_missionview_" +
                this.getAttribute("data-element-id") +
                "_elements"
            ][this.getAttribute("data-item-id")].vals[
              this.getAttribute("data-parameter-id")
            ] == MIR.ui.constants.NULL_VALUE
              ? (this.parentNode.parentNode.setAttribute(
                  "data-inactive",
                  "false"
                ),
                "Integer" == t || "Float" == t
                  ? ("null" == e &&
                      (e =
                        window[
                          "missions_missionview_" +
                            this.getAttribute("data-element-id") +
                            "_elements"
                        ][this.getAttribute("data-item-id")].info.parameters[
                          this.getAttribute("data-param-count")
                        ].min),
                    (document.getElementById(
                      this.getAttribute("data-element-id") +
                        "_missionview_settingspanel_field_" +
                        window[
                          "missions_missionview_" +
                            this.getAttribute("data-element-id") +
                            "_elements"
                        ][this.getAttribute("data-item-id")].info.parameters[
                          this.getAttribute("data-param-count")
                        ].saveid
                    ).value = e))
                  : "Duration" == t
                  ? "null" == e &&
                    (missions_missionview_durationpickerholder_set_value(
                      this.getAttribute("data-element-id"),
                      this.getAttribute("data-parameter-id"),
                      this.getAttribute("data-item-id")
                    ),
                    (e =
                      window[
                        "missions_missionview_" +
                          this.getAttribute("data-element-id") +
                          "_elements"
                      ][this.getAttribute("data-item-id")].vals[
                        this.getAttribute("data-parameter-id")
                      ]))
                  : ("Reference" != t && "Selection" != t) ||
                    ("null" == e &&
                      (e =
                        window[
                          "missions_missionview_" +
                            this.getAttribute("data-element-id") +
                            "_elements"
                        ][this.getAttribute("data-item-id")].info.parameters[
                          this.getAttribute("data-param-count")
                        ].min),
                    $(
                      "#" +
                        this.getAttribute("data-element-id") +
                        "_missionview_settingspanel_field_" +
                        window[
                          "missions_missionview_" +
                            this.getAttribute("data-element-id") +
                            "_elements"
                        ][this.getAttribute("data-item-id")].info.parameters[
                          this.getAttribute("data-param-count")
                        ].saveid
                    ).val(e)),
                (window[
                  "missions_missionview_" +
                    this.getAttribute("data-element-id") +
                    "_elements"
                ][this.getAttribute("data-item-id")].vals[
                  this.getAttribute("data-parameter-id")
                ] = e))
              : (this.parentNode.parentNode.setAttribute(
                  "data-inactive",
                  "true"
                ),
                ("Integer" != t && "Float" != t) ||
                  (document.getElementById(
                    this.getAttribute("data-element-id") +
                      "_missionview_settingspanel_field_" +
                      window[
                        "missions_missionview_" +
                          this.getAttribute("data-element-id") +
                          "_elements"
                      ][this.getAttribute("data-item-id")].info.parameters[
                        this.getAttribute("data-param-count")
                      ].saveid
                  ).value = ""),
                (window[
                  "missions_missionview_" +
                    this.getAttribute("data-element-id") +
                    "_elements"
                ][this.getAttribute("data-item-id")].vals[
                  this.getAttribute("data-parameter-id")
                ] = MIR.ui.constants.NULL_VALUE)),
              missions_missionview_set_action_names(
                this.getAttribute("data-element-id"),
                this.getAttribute("data-item-id")
              ),
              missions_missionview_toggle_parameters(i, s);
          });
        var X = document.createElement("label");
        X.setAttribute(
          "for",
          i +
            "_missionview_settingspanel_field_" +
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id +
            "_nullfield"
        ),
          (X.innerHTML = mir_translate(
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].null_option
          )),
          Y.appendChild(X);
      }
      var Z = document.createElement("div");
      Z.setAttribute("class", "errorholder"), d.appendChild(Z);
      var ee = document.createElement("p");
      ee.setAttribute(
        "id",
        i +
          "_missionview_settingspanel_fielderror_" +
          window["missions_missionview_" + i + "_elements"][s].info.parameters[
            a
          ].saveid
      ),
        Z.appendChild(ee);
      var te = !1,
        ie = "";
      for (N = 0; N < window["missions_missionview_" + i + "_errors"].length; )
        window["missions_missionview_" + i + "_errors"][N].item == s &&
          (window["missions_missionview_" + i + "_errors"][N].field ==
            window["missions_missionview_" + i + "_elements"][s].info
              .parameters[a].id &&
            ((te = !0),
            (ie = mir_translate(
              window["missions_missionview_" + i + "_errors"][N].error_human
            ))),
          document.getElementById(s).setAttribute("data-error", "true")),
          N++;
      1 == te
        ? (d.setAttribute("data-error", "true"), (ee.innerHTML = ie))
        : (d.setAttribute("data-error", "false"), (ee.innerHTML = "")),
        a++;
    }
  (U = document.createElement("input")).setAttribute("type", "button"),
    U.setAttribute("id", i + "_missionview_settingspanel_field_setbutton"),
    U.setAttribute("name", i + "_missionview_settingspanel_field_setbutton"),
    U.setAttribute("data-element-id", i),
    U.setAttribute("data-item-id", s),
    U.setAttribute("value", mir_translate("Validate and close")),
    e.appendChild(U),
    (U.onclick = function (e) {
      missions_missionview_validation_action(
        this.getAttribute("data-element-id"),
        this.getAttribute("data-item-id"),
        !0,
        !0
      );
    }),
    (U = document.createElement("input")).setAttribute("type", "button"),
    U.setAttribute("id", i + "_missionview_settingspanel_field_cancelbutton"),
    U.setAttribute("name", i + "_missionview_settingspanel_field_cancelbutton"),
    U.setAttribute("data-element-id", i),
    U.setAttribute("data-item-id", s),
    U.setAttribute("class", "undo"),
    U.setAttribute("value", mir_translate("Undo and close")),
    e.appendChild(U),
    (U.onclick = function (e) {
      missions_missionview_undo_and_close(
        this.getAttribute("data-element-id"),
        this.getAttribute("data-item-id")
      );
    });
  var se = document.createElement("input");
  se.setAttribute("type", "button"),
    se.setAttribute("class", "remove"),
    se.setAttribute("id", i + "_missionview_settingspanel_field_delbutton"),
    se.setAttribute("name", i + "_missionview_settingspanel_field_delbutton"),
    se.setAttribute("data-element-id", i),
    se.setAttribute("data-item-id", s),
    se.setAttribute("value", mir_translate("Remove action")),
    e.appendChild(se),
    (se.onclick = function () {
      document
        .getElementById(this.getAttribute("data-element-id") + "_missionview")
        .setAttribute("data-show-settings", "false"),
        $("li.action").attr("data-settings-open", "false"),
        $("#" + this.getAttribute("data-item-id")).remove(),
        missions_missionview_align_settings_panel(i),
        delete window["missions_missionview_" + i + "_elements"][s];
    }),
    missions_missionview_toggle_parameters(i, s),
    1 == document.getElementsByTagName("body")[0].getAttribute("data-mobile")
      ? (document.getElementsByTagName("body")[0].getAttribute("data-webapp"),
        $("html, body").animate(
          {
            scrollTop: 0,
          },
          300
        ))
      : ($(document).scroll(function () {
          missions_missionview_align_settings_panel(i);
        }),
        missions_missionview_align_settings_panel(i));
}
function missions_missionview_align_settings_panel(e) {
  if ($(window).width() <= MIR.constants.MOBILE_RES_THRESHOLD + 40) return !1;
  var t = $("#" + e + "_missionview .header"),
    i = $("#" + e + "_missionview_settingspanelpusher"),
    s = $("#" + e + "_missionview_settingspanel"),
    n = 0;
  if (0 === s.length || !s.is(":visible")) return i.height(n), !1;
  if (1 !== t.length || 1 !== i.length) return !1;
  var a = $("#" + e + "_missionview_actionlist").outerHeight(),
    r = $("#" + e + "_missionview_settingspanel").outerHeight();
  if (!(a < r)) {
    var o = a - r;
    o <=
      (n =
        $(document).scrollTop() -
        t.offset().top +
        parseInt(t.css("margin-top"))) && (n = o - 9),
      i.height(n);
  }
}
function missions_missionview_durationpickerholder_set_value(e, t, i) {
  var s = document.getElementById(
      e + "_missionview_settingspanel_field_" + t + "_hours"
    ),
    n = document.getElementById(
      e + "_missionview_settingspanel_field_" + t + "_minutes"
    ),
    a = document.getElementById(
      e + "_missionview_settingspanel_field_" + t + "_seconds"
    ),
    r = s.value;
  1 == r.length && (r = "0" + r);
  var o = n.value;
  1 == o.length && (o = "0" + o);
  var d = a.value;
  1 == d.length && (d = "0" + d);
  var m = r + ":" + o + ":" + d + ".000000",
    l = parseInt(d) + 60 * parseInt(o) + 3600 * parseInt(r);
  $(s).closest("div.durationpickerholder").attr("data-cur", l),
    (window["missions_missionview_" + e + "_elements"][i].vals[t] = m),
    missions_missionview_set_action_names(e, i);
}
function missions_missionview_launch_popuppositionpicker(e, t, i, s) {
  var n = {};
  return (
    (n.positions = s),
    $.ajax({
      url: "/setup/missions?mode=popuppositionpicker-get-data",
      data: n,
      method: "POST",
      dataType: "json",
      success: function (c) {
        var e = document.createElement("div");
        e.setAttribute("class", "popuppositionpicker"),
          e.setAttribute("id", "popuppositionpicker"),
          document.getElementsByTagName("body")[0].appendChild(e);
        var t = document.createElement("div");
        t.setAttribute("class", "box"), e.appendChild(t);
        var i = document.createElement("div");
        i.setAttribute("class", "header"), t.appendChild(i);
        var s = document.createElement("h1");
        (s.innerHTML = lang_missions_missionview_popuppositionpicker_chooseposition),
          i.appendChild(s);
        var n = document.createElement("div");
        n.setAttribute("class", "backbutton"),
          (n.innerHTML =
            "<span>" +
            lang_missions_missionview_popuppositionpicker_cancel +
            "</span>"),
          i.appendChild(n),
          (n.onclick = function () {
            document
              .getElementById("popuppositionpicker")
              .parentNode.removeChild(
                document.getElementById("popuppositionpicker")
              );
          });
        var a = document.createElement("div");
        a.setAttribute("class", "formholder"),
          t.appendChild(a),
          (l = document.createElement("div")).setAttribute(
            "class",
            "fieldholder"
          ),
          a.appendChild(l);
        var r = document.createElement("label");
        r.setAttribute("for", "popuppositionpicker_selector_site"),
          (r.innerHTML = lang_missions_missionview_popuppositionpicker_site),
          l.appendChild(r);
        var o = document.createElement("select");
        o.setAttribute("name", "popuppositionpicker_selector_site"),
          o.setAttribute("id", "popuppositionpicker_selector_site"),
          (o.onchange = function () {
            if (
              "" ==
              document.getElementById("popuppositionpicker_selector_site")
                .options[
                document.getElementById("popuppositionpicker_selector_site")
                  .selectedIndex
              ].value
            ) {
              $("#popuppositionpicker_selector_map").html(""),
                (s = document.createElement("option")).setAttribute(
                  "value",
                  ""
                ),
                (s.innerHTML = lang_missions_missionview_popuppositionpicker_allmaps),
                document
                  .getElementById("popuppositionpicker_selector_map")
                  .appendChild(s);
            } else
              for (var e = 0, t = !0; e < c.length && 1 == t; ) {
                if (
                  c[e].guid ==
                  document.getElementById("popuppositionpicker_selector_site")
                    .options[
                    document.getElementById("popuppositionpicker_selector_site")
                      .selectedIndex
                  ].value
                ) {
                  $("#popuppositionpicker_selector_map").html(""),
                    (s = document.createElement("option")).setAttribute(
                      "value",
                      ""
                    ),
                    (s.innerHTML = lang_missions_missionview_popuppositionpicker_allmaps),
                    document
                      .getElementById("popuppositionpicker_selector_map")
                      .appendChild(s);
                  for (var i = 0; i < c[e].maps.length; ) {
                    var s;
                    (s = document.createElement("option")).setAttribute(
                      "value",
                      c[e].maps[i].guid
                    ),
                      (s.innerHTML = c[e].maps[i].name),
                      document
                        .getElementById("popuppositionpicker_selector_map")
                        .appendChild(s),
                      i++;
                  }
                  t = !1;
                }
                e++;
              }
            return _(), !0;
          }),
          l.appendChild(o),
          (v = document.createElement("option")).setAttribute("value", ""),
          (v.innerHTML = lang_missions_missionview_popuppositionpicker_allsites),
          o.appendChild(v);
        for (var d = 0; d < c.length; ) {
          (v = document.createElement("option")).setAttribute(
            "value",
            c[d].guid
          ),
            (v.innerHTML = c[d].name),
            o.appendChild(v),
            d++;
        }
        (l = document.createElement("div")).setAttribute(
          "class",
          "fieldholder"
        ),
          a.appendChild(l);
        var m = document.createElement("label");
        m.setAttribute("for", "popuppositionpicker_selector_map"),
          (m.innerHTML = lang_missions_missionview_popuppositionpicker_map),
          l.appendChild(m);
        var l,
          u = document.createElement("select");
        function _() {
          for (
            var e = [],
              t = document.getElementById("popuppositionpicker_selector_site")
                .options[
                document.getElementById("popuppositionpicker_selector_site")
                  .selectedIndex
              ].value,
              i = document.getElementById("popuppositionpicker_selector_map")
                .options[
                document.getElementById("popuppositionpicker_selector_map")
                  .selectedIndex
              ].value,
              s = 0;
            s < c.length;

          )
            ("" != t && c[s].guid != t) || e.push(c[s]), s++;
          var n = [];
          for (s = 0; s < e.length; ) {
            var a = {};
            (a.guid = e[s].guid), (a.name = e[s].name), (a.maps = []);
            for (var r = 0; r < e[s].maps.length; )
              ("" != i && i != e[s].maps[r].guid) || a.maps.push(e[s].maps[r]),
                r++;
            n.push(a), s++;
          }
          var o = [];
          for (s = 0; s < n.length; ) {
            for (var d = 0; d < n[s].maps.length; ) {
              for (r = 0; r < n[s].maps[d].positions.length; )
                o.push(n[s].maps[d].positions[r]), r++;
              d++;
            }
            s++;
          }
          var m = document.getElementById("popuppositionpicker_results_list");
          m.innerHTML = "";
          var l = document.createElement("ul");
          m.appendChild(l);
          for (r = 0; r < o.length; ) {
            var u = document.createElement("li");
            u.setAttribute("data-guid", o[r].guid), l.appendChild(u);
            var _ = document.createElement("div");
            _.setAttribute("class", "icon"), u.appendChild(_);
            var p = document.createElement("div");
            p.setAttribute("class", "name"),
              (p.innerHTML = o[r].name),
              u.appendChild(p),
              (u.onclick = function () {
                alert(this.getAttribute("data-guid"));
              }),
              r++;
          }
        }
        u.setAttribute("name", "popuppositionpicker_selector_map"),
          u.setAttribute("id", "popuppositionpicker_selector_map"),
          (u.onchange = _),
          l.appendChild(u),
          (v = document.createElement("option")).setAttribute("value", ""),
          (v.innerHTML = lang_missions_missionview_popuppositionpicker_allmaps),
          u.appendChild(v),
          (l = document.createElement("div")).setAttribute(
            "class",
            "fieldholder"
          ),
          a.appendChild(l);
        var p = document.createElement("label");
        p.setAttribute("for", "popuppositionpicker_selector_view"),
          (p.innerHTML = lang_missions_missionview_popuppositionpicker_view),
          l.appendChild(p);
        var v,
          h = document.createElement("select");
        h.setAttribute("name", "popuppositionpicker_selector_view"),
          h.setAttribute("id", "popuppositionpicker_selector_view"),
          l.appendChild(h),
          (v = document.createElement("option")).setAttribute("value", "list"),
          (v.innerHTML = lang_missions_missionview_popuppositionpicker_showaslist),
          h.appendChild(v),
          (v = document.createElement("option")).setAttribute("value", "map"),
          (v.innerHTML = lang_missions_missionview_popuppositionpicker_showinmap),
          h.appendChild(v);
        var g = document.createElement("div");
        g.setAttribute("class", "nodata"),
          g.setAttribute("id", "popuppositionpicker_nodata"),
          (g.innerHTML =
            "<p>" +
            lang_missions_missionview_popuppositionpicker_nodata +
            "</p>"),
          t.appendChild(g);
        var b = document.createElement("div");
        b.setAttribute("class", "results_list"),
          b.setAttribute("id", "popuppositionpicker_results_list"),
          t.appendChild(b);
        var w = document.createElement("div");
        w.setAttribute("class", "results_map"),
          w.setAttribute("id", "popuppositionpicker_results_map"),
          t.appendChild(w);
        var A = document.createElement("div");
        A.setAttribute("class", "controlbar"), t.appendChild(A);
        var f = document.createElement("input");
        f.setAttribute("name", "popuppositionpicker_filter"),
          f.setAttribute("id", "popuppositionpicker_filter"),
          f.setAttribute(
            "placeholder",
            lang_missions_missionview_popuppositionpicker_searchinpositions
          ),
          A.appendChild(f);
        var y = document.createElement("ul");
        y.setAttribute("class", "buttonlist"), A.appendChild(y);
        var E = document.createElement("li");
        E.setAttribute("id", ""),
          E.setAttribute("class", ""),
          E.setAttribute("data-active", "true"),
          (E.innerHTML = lang_missions_missionview_popuppositionpicker_showinmap),
          y.appendChild(E);
        var C = document.createElement("li");
        C.setAttribute("id", ""),
          C.setAttribute("class", ""),
          C.setAttribute("data-active", "false"),
          (C.innerHTML = lang_missions_missionview_popuppositionpicker_showaslist),
          y.appendChild(C);
      },
    }),
    !0
  );
}
function missions_missionview_transform_duration_toseconds(e) {
  var t = 0,
    i = e.split(".");
  return (
    (i = (i = i[0]).split(":")),
    (t += 3600 * parseInt(i[0])),
    (t += 60 * parseInt(i[1])),
    (t += parseInt(i[2]))
  );
}
function missions_missionview_transform_duration_tostring(e) {
  var t = Math.floor(e / 60);
  e -= 60 * t;
  var i = Math.floor(t / 60);
  t -= 60 * i;
  var s = "";
  return (
    0 < i &&
      ((s += 1 == i ? i + " hour" : i + " hours"),
      (0 < t || 0 < e) && (s += "and")),
    (0 < t || (0 < e && 0 < i)) &&
      ((s += 1 == t ? t + " minute" : t + " minutes"), 0 < e && (s += " and ")),
    (0 < e || (0 == i && 0 == t)) && (s += e + " seconds"),
    s
  );
}
function missions_missionview_transform_duration_totime(e) {
  var t = Math.floor(e / 60);
  e -= 60 * t;
  var i = Math.floor(t / 60);
  return (
    (t -= 60 * i),
    1 == String(e).length && (e = "0" + String(e)),
    1 == String(t).length && (t = "0" + String(t)),
    1 == String(i).length && (i = "0" + String(i)),
    i + ":" + t + ":" + e + ".000000"
  );
}
function missions_missionview_load_actions(s, e, n, a) {
  var t = window["missions_missionview_" + s + "_data"].guid,
    i = {
      mode: "load-mission-actionlist",
    };
  (i.mother = e),
    (i.id = t),
    (i.calltype = "light"),
    (i.pageviewid = pageviewid),
    $.ajax({
      url: "/",
      data: i,
      method: "GET",
      dataType: "json",
      element_id: s,
      success: function (e) {
        for (var t = 0; t < e.length; ) {
          var i;
          (i = e[t].parameters),
            missions_missionview_add_action(
              s,
              e[t].action_type,
              e[t].guid,
              i,
              n,
              null,
              a
            ),
            t++;
        }
      },
      complete: function () {
        window["missions_missionview_" + s + "_initial_elements"] = JSON.parse(
          JSON.stringify(window["missions_missionview_" + s + "_elements"])
        );
      },
    });
}
function missions_missionview_save_changes(u) {
  resetChanges(),
    document
      .getElementById(u + "_missionview")
      .setAttribute("data-show-settings", "false"),
    document
      .getElementById(u + "_missionview")
      .setAttribute("data-highlighted-scope", ""),
    $("li.action").attr("data-settings-open", "false"),
    $("ul#missionview_" + u + "_list_main")
      .find("div.substatement,div.subholder")
      .attr("data-highlighted", "false");
  var e = document.createElement("div");
  e.setAttribute("class", "overlay_progress"),
    e.setAttribute("id", "missionsaver_overlay"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var t = document.createElement("div");
  t.setAttribute("class", "box"), e.appendChild(t);
  var i = document.createElement("h1");
  (i.innerHTML = lang_main_missions_pleasewait), t.appendChild(i);
  var s = document.createElement("p");
  (s.innerHTML = lang_main_missions_savingmission),
    t.appendChild(s),
    $("ul#missionview_" + u + "_list_main")
      .find("li")
      .attr("data-error", "false"),
    (window["missions_missionview_" + u + "_errors"] = []);
  var _ = missions_missionview_fetch_actions(
      u,
      "missionview_" + u + "_list_main"
    ),
    p = document
      .getElementById(u + "_missionview")
      .getAttribute("data-mission-guid"),
    n = {};
  return (
    (n.data = _),
    (n.missiondata = window["missions_missionview_" + u + "_data"]),
    (n.dynvars = window["missions_missionview_" + u + "_dynvars"]),
    (n.id = p),
    (n.dryrun = "true"),
    $.ajax({
      url: "/?mode=save-mission",
      data: n,
      method: "POST",
      dataType: "json",
      success: function (e) {
        if (
          (close_waiter(),
          (window["missions_missionview_" + u + "_errors"] = []),
          0 == e.length)
        ) {
          var t = {};
          (t.data = _),
            (t.missiondata = window["missions_missionview_" + u + "_data"]),
            (t.dynvars = window["missions_missionview_" + u + "_dynvars"]),
            (t.id = p),
            $.ajax({
              url: "/?mode=save-mission",
              data: t,
              method: "POST",
              dataType: "json",
              element_id: u,
              success: function (e) {
                for (var t = 0; t < e.length; )
                  document
                    .getElementById(e[t].id)
                    .setAttribute("data-action-guid", e[t].guid),
                    t++;
                var i = window.location.href;
                (i = i.split("/"))[5] == p
                  ? document
                      .getElementById("missionsaver_overlay")
                      .parentNode.removeChild(
                        parent.document.getElementById("missionsaver_overlay")
                      )
                  : (location.href = "/setup/missions/" + p);
              },
            });
        } else {
          for (var i = 0; i < e.length; ) {
            if (
              (document
                .getElementById(e[i].id)
                .setAttribute("data-error", "true"),
              null == e[i].parameters)
            );
            else
              for (
                var s = 0;
                s <
                window["missions_missionview_" + u + "_elements"][e[i].id].info
                  .parameters.length;

              ) {
                if (
                  void 0 !==
                  e[i].parameters[
                    window["missions_missionview_" + u + "_elements"][e[i].id]
                      .info.parameters[s].id
                  ]
                ) {
                  var n = {};
                  (n.item = e[i].id),
                    (n.field =
                      window["missions_missionview_" + u + "_elements"][
                        e[i].id
                      ].info.parameters[s].id),
                    (n.error_human = mir_translate(
                      e[i].parameters[
                        window["missions_missionview_" + u + "_elements"][
                          e[i].id
                        ].info.parameters[s].id
                      ].error_human
                    )),
                    (n.error_code =
                      e[i].parameters[
                        window["missions_missionview_" + u + "_elements"][
                          e[i].id
                        ].info.parameters[s].id
                      ].error_code),
                    window["missions_missionview_" + u + "_errors"].push(n);
                }
                s++;
              }
            i++;
          }
          document
            .getElementById("missionsaver_overlay")
            .parentNode.removeChild(
              parent.document.getElementById("missionsaver_overlay")
            );
          var a = document.createElement("div");
          a.setAttribute("class", "overlay_error"),
            a.setAttribute("id", "missionerror_overlay"),
            document.getElementsByTagName("body")[0].appendChild(a);
          var r = document.createElement("div");
          r.setAttribute("class", "box"), a.appendChild(r);
          var o = document.createElement("h1");
          (o.innerHTML = lang_main_missions_errorsoccured), r.appendChild(o);
          var d = document.createElement("p");
          (d.innerHTML = lang_main_missions_errorsoccured_text),
            r.appendChild(d);
          var m = document.createElement("div");
          m.setAttribute("class", "buttonholder"), r.appendChild(m);
          var l = document.createElement("div");
          l.setAttribute("class", "ok"),
            l.setAttribute("id", "missionerror_submitbtn"),
            (l.innerHTML = lang_main_missions_errors_ok),
            m.appendChild(l),
            (l.onclick = function () {
              document
                .getElementById("missionerror_overlay")
                .parentNode.removeChild(
                  parent.document.getElementById("missionerror_overlay")
                );
            });
        }
      },
      complete: function () {
        window["missions_missionview_" + u + "_initial_elements"] = JSON.parse(
          JSON.stringify(window["missions_missionview_" + u + "_elements"])
        );
      },
    }),
    !0
  );
}
function missions_missionview_save_as(_) {
  Promise.all([
    $.get("/setup/maps?mode=get-sites", function (e) {
      (sites = e
        .map(function (e) {
          return {
            text: e.htmlname,
            value: e.guid,
          };
        })
        .sort(function (e, t) {
          return e.text < t.text ? -1 : 1;
        })),
        sites.unshift({
          text: mir_translate(
            "shared_popup_template_mission_saveas_site_no_site"
          ),
          value: "",
        });
    }),
    $.get("/setup/maps?mode=get-mission-groups", function (e) {
      groups = e
        .map(function (e) {
          return {
            text: e.htmlname,
            value: e.guid,
          };
        })
        .sort(function (e, t) {
          return e.text < t.text ? -1 : 1;
        });
    }),
  ]).then(function () {
    var n = new MIR.ui.form_element(
        {
          text: mir_translate("shared_popup_template_mission_saveas_site"),
        },
        {
          type: "select",
          opts: {
            def: window["missions_missionview_" + _ + "_data"].session_id,
            options: sites,
            attr: {
              name: "session_id",
              class: "select",
            },
          },
        },
        {
          text: mir_translate(
            "shared_popup_template_mission_saveas_site_tooltip"
          ),
        }
      ),
      a = new MIR.ui.form_element(
        {
          text: mir_translate("shared_popup_template_mission_saveas_group"),
        },
        {
          type: "select",
          opts: {
            def: window["missions_missionview_" + _ + "_data"].group_id,
            options: groups,
            attr: {
              name: "group_id",
              class: "select",
            },
          },
        },
        {
          text: mir_translate(
            "shared_popup_template_mission_saveas_group_tooltip"
          ),
        }
      ),
      e = document.createElement("div");
    e.setAttribute("class", "missionsaveas_overlay"),
      e.setAttribute("id", "missionsaveas_overlay"),
      document.getElementsByTagName("body")[0].appendChild(e);
    var t = document.createElement("div");
    t.setAttribute("class", "box"), e.appendChild(t);
    var i = document.createElement("h1");
    (i.innerHTML = lang_missions_missionview_saveas_headline), t.appendChild(i);
    var s = document.createElement("p");
    (s.innerHTML = lang_missions_missionview_saveas_text), t.appendChild(s);
    var r = document.createElement("form");
    r.setAttribute("method", "post"),
      r.setAttribute("action", "/"),
      r.setAttribute("data-element-id", _),
      (r.onsubmit = function () {
        var t = document.getElementById("missionsaveas_field_name").value;
        if (0 == t.length)
          return (
            launch_error(
              lang_missions_missionview_saveas_noname,
              "document.getElementById('missionsaveas_field_name').focus();"
            ),
            !1
          );
        launch_waiter(lang_missions_missionview_saveas_saving);
        var i = this.getAttribute("data-element-id"),
          e = document
            .getElementById(i + "_missionview")
            .getAttribute("data-mission-guid");
        document
          .getElementById("missionsaveas_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missionsaveas_overlay")
          );
        var s = {};
        return (
          (s.id = e),
          (s.name = t),
          (s.session_id = n.val()),
          (s.group_id = a.val()),
          $.ajax({
            url: "/?mode=saveas-mission",
            data: s,
            method: "POST",
            dataType: "json",
            success: function (e) {
              1 == e.success
                ? (document
                    .getElementById(i + "_missionview")
                    .setAttribute("data-mission-guid", e.guid),
                  $("ul#missionview_" + i + "_list_main")
                    .find("li")
                    .attr("data-action-guid", ""),
                  (window["missions_missionview_" + i + "_data"].name = t),
                  (window[
                    "missions_missionview_" + i + "_data"
                  ].group_id = a.val()),
                  (window[
                    "missions_missionview_" + i + "_data"
                  ].session_id = n.val()),
                  close_waiter(),
                  launch_waiter(lang_missions_missionview_saveas_savingactions),
                  missions_missionview_save_changes(i))
                : (close_waiter(),
                  launch_error(lang_missions_missionview_saveas_error));
            },
            complete: function () {
              window[
                "missions_missionview_" + i + "_initial_elements"
              ] = JSON.parse(
                JSON.stringify(
                  window["missions_missionview_" + i + "_elements"]
                )
              );
            },
          }),
          !1
        );
      }),
      t.appendChild(r);
    var o = document.createElement("label");
    o.setAttribute("for", "missionsettings_field_name"),
      (o.innerHTML = lang_missions_missionview_saveas_fieldname),
      r.appendChild(o);
    var d = document.createElement("input");
    d.setAttribute("type", "text"),
      d.setAttribute("name", "missionsaveas_field_name"),
      d.setAttribute("id", "missionsaveas_field_name"),
      d.setAttribute(
        "value",
        mir_translate("Copy of %(mission_name)s", {
          mission_name: window["missions_missionview_" + _ + "_data"].name,
        })
      ),
      r.appendChild(d),
      $(r).append(n, a);
    var m = document.createElement("div");
    m.setAttribute("class", "buttonholder"), r.appendChild(m);
    var l = document.createElement("input");
    l.setAttribute("type", "submit"),
      l.setAttribute("name", "submit"),
      l.setAttribute("id", "missionsaveas_submitbtn"),
      l.setAttribute("value", mir_translate("Save")),
      m.appendChild(l);
    var u = document.createElement("input");
    return (
      u.setAttribute("type", "button"),
      u.setAttribute("name", "missionsaveas_cancelbtn"),
      u.setAttribute("id", "missionsaveas_cancelbtn"),
      u.setAttribute("value", mir_translate("Cancel")),
      m.appendChild(u),
      (u.onclick = function () {
        document
          .getElementById("missionsaveas_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missionsaveas_overlay")
          );
      }),
      !0
    );
  });
}
function missions_missionview_undo_and_close(e, t) {
  (window["missions_missionview_" + e + "_elements"][t] =
    window["missions_missionview_" + e + "_original_elements"]),
    (window["missions_missionview_" + e + "_dynvars"] =
      window["missions_missionview_" + e + "_original_dynvars"]),
    (window["missions_missionview_" + e + "_errors"] =
      window["missions_missionview_" + e + "_original_errors"]),
    (window["missions_missionview_" + e + "_original_elements"] = void 0),
    (window["missions_missionview_" + e + "_original_dynvars"] = void 0),
    (window["missions_missionview_" + e + "_original_errors"] = void 0),
    missions_missionview_set_action_names(e, t);
  var i = $.grep(window["missions_missionview_" + e + "_errors"], function () {
    return (this.item = t);
  });
  document
    .getElementById(t)
    .setAttribute("data-error", 0 === i.length ? "false" : "true"),
    document
      .getElementById(e + "_missionview")
      .setAttribute("data-show-settings", "false"),
    document.getElementById(t).setAttribute("data-settings-open", !1);
}
function missions_missionview_validation_action(a, r, o, d) {
  d
    ? ($("ul#missionview_" + a + "_list_main")
        .find("li#" + r)
        .attr("data-error", "false"),
      (window["missions_missionview_" + a + "_errors"] = $.grep(
        window["missions_missionview_" + a + "_errors"],
        function (e) {
          return e.item === r;
        },
        !0
      )))
    : ($("ul#missionview_" + a + "_list_main")
        .find("li")
        .attr("data-error", "false"),
      (window["missions_missionview_" + a + "_errors"] = []));
  var e = missions_missionview_fetch_actions(
      a,
      "missionview_" + a + "_list_main"
    ),
    t = document
      .getElementById(a + "_missionview")
      .getAttribute("data-mission-guid"),
    i = {};
  return (
    (i.data = e),
    (i.missiondata = window["missions_missionview_" + a + "_data"]),
    (i.dynvars = window["missions_missionview_" + a + "_dynvars"]),
    (i.id = t),
    (i.dryrun = "true"),
    $.ajax({
      url: "/?mode=save-mission",
      data: i,
      method: "POST",
      dataType: "json",
      success: function (e) {
        if (0 == e.length)
          1 == o &&
            (document
              .getElementById(a + "_missionview")
              .setAttribute("data-show-settings", "false"),
            document.getElementById(r).setAttribute("data-settings-open", !1),
            missions_missionview_align_settings_panel(a));
        else {
          for (var t = 0, i = 0; i < e.length; )
            if (d && r !== e[i].id) i++;
            else {
              if (
                (document
                  .getElementById(e[i].id)
                  .setAttribute("data-error", "true"),
                null == e[i].parameters)
              );
              else
                for (
                  var s = 0;
                  s <
                  window["missions_missionview_" + a + "_elements"][e[i].id]
                    .info.parameters.length;

                ) {
                  if (
                    (void 0 !==
                      e[i].parameters[
                        window["missions_missionview_" + a + "_elements"][
                          e[i].id
                        ].info.parameters[s].id
                      ] &&
                    "true" ==
                      document
                        .getElementById(e[i].id)
                        .getAttribute("data-settings-open")
                      ? (document
                          .getElementById(
                            r +
                              "_fieldwrapper_" +
                              window["missions_missionview_" + a + "_elements"][
                                e[i].id
                              ].info.parameters[s].saveid
                          )
                          .setAttribute("data-error", "true"),
                        (document.getElementById(
                          a +
                            "_missionview_settingspanel_fielderror_" +
                            window["missions_missionview_" + a + "_elements"][
                              e[i].id
                            ].info.parameters[s].saveid
                        ).innerHTML = mir_translate(
                          e[i].parameters[
                            window["missions_missionview_" + a + "_elements"][
                              e[i].id
                            ].info.parameters[s].id
                          ].error_human
                        )),
                        t++)
                      : (document.getElementById(
                          a +
                            "_missionview_settingspanel_fielderror_" +
                            window["missions_missionview_" + a + "_elements"][
                              e[i].id
                            ].info.parameters[s].saveid
                        ) &&
                          (document.getElementById(
                            a +
                              "_missionview_settingspanel_fielderror_" +
                              window["missions_missionview_" + a + "_elements"][
                                e[i].id
                              ].info.parameters[s].saveid
                          ).innerHTML = ""),
                        document.getElementById(
                          r +
                            "_fieldwrapper_" +
                            window["missions_missionview_" + a + "_elements"][
                              e[i].id
                            ].info.parameters[s].saveid
                        ) &&
                          document
                            .getElementById(
                              r +
                                "_fieldwrapper_" +
                                window[
                                  "missions_missionview_" + a + "_elements"
                                ][e[i].id].info.parameters[s].saveid
                            )
                            .setAttribute("data-error", "false")),
                    void 0 !==
                      e[i].parameters[
                        window["missions_missionview_" + a + "_elements"][
                          e[i].id
                        ].info.parameters[s].id
                      ])
                  ) {
                    var n = {};
                    (n.item = e[i].id),
                      (n.field =
                        window["missions_missionview_" + a + "_elements"][
                          e[i].id
                        ].info.parameters[s].id),
                      (n.error_human = mir_translate(
                        e[i].parameters[
                          window["missions_missionview_" + a + "_elements"][
                            e[i].id
                          ].info.parameters[s].id
                        ].error_human
                      )),
                      (n.error_code =
                        e[i].parameters[
                          window["missions_missionview_" + a + "_elements"][
                            e[i].id
                          ].info.parameters[s].id
                        ].error_code),
                      window["missions_missionview_" + a + "_errors"].push(n);
                  }
                  s++;
                }
              i++;
            }
          0 == t &&
            1 == o &&
            (document
              .getElementById(a + "_missionview")
              .setAttribute("data-show-settings", "false"),
            document.getElementById(r).setAttribute("data-settings-open", !1));
        }
      },
    }),
    !0
  );
}
function missions_missionview_fetch_actions(t, e) {
  var i = [],
    s = document.getElementById(e);
  return (
    $(s)
      .find("li")
      .each(function () {
        var e = {};
        (e.id = this.getAttribute("id")),
          (e.action_guid = this.getAttribute("data-action-guid")),
          (e.data =
            window["missions_missionview_" + t + "_elements"][
              this.getAttribute("id")
            ]),
          i.push(e);
      }),
    i
  );
}
function missions_missionview_launch_missionsettings(e, t) {
  var i = document.createElement("div");
  i.setAttribute("class", "missionsettings_overlay"),
    i.setAttribute("id", "missionsettings_overlay"),
    document.getElementsByTagName("body")[0].appendChild(i);
  var s = document.createElement("div");
  s.setAttribute("class", "box"), i.appendChild(s);
  var n = document.createElement("h1");
  (n.innerHTML = lang_missions_missionview_settings_headline), s.appendChild(n);
  var a = document.createElement("p");
  (a.innerHTML = lang_missions_missionview_settings_text), s.appendChild(a);
  var r = document.createElement("form");
  r.setAttribute("method", "post"),
    r.setAttribute("action", "/"),
    r.setAttribute("data-element-id", e),
    (r.onsubmit = function () {
      var e = this.getAttribute("data-element-id"),
        t = document.getElementById("missionsettings_field_name").value,
        i = document.getElementById("missionsettings_field_description").value,
        s = document.getElementById("missionsettings_field_group").options[
          document.getElementById("missionsettings_field_group").selectedIndex
        ].value;
      return (
        (window["missions_missionview_" + e + "_data"].name = t),
        (window["missions_missionview_" + e + "_data"].description = i),
        (window["missions_missionview_" + e + "_data"].group_id = s),
        document
          .getElementById("missionsettings_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missionsettings_overlay")
          ),
        $("#" + e + "_missionview > div.header > div.column > h1 > span").html(
          t
        ),
        !1
      );
    }),
    s.appendChild(r);
  var o = document.createElement("label");
  o.setAttribute("for", "missionsettings_field_name"),
    (o.innerHTML = lang_missions_missionview_settings_field_name + ":"),
    r.appendChild(o);
  var d = document.createElement("input");
  d.setAttribute("type", "text"),
    d.setAttribute("name", "missionsettings_field_name"),
    d.setAttribute("id", "missionsettings_field_name"),
    void 0 !== t.name
      ? d.setAttribute("value", t.name)
      : d.setAttribute(
          "value",
          window["missions_missionview_" + e + "_data"].name
        ),
    r.appendChild(d);
  var m = document.createElement("input");
  m.setAttribute("type", "hidden"),
    m.setAttribute("name", "missionsettings_field_description"),
    m.setAttribute("id", "missionsettings_field_description"),
    void 0 !== t.description
      ? m.setAttribute("value", t.description)
      : m.setAttribute(
          "value",
          window["missions_missionview_" + e + "_data"].description
        ),
    r.appendChild(m);
  var l = document.createElement("label");
  l.setAttribute("for", "missionsettings_field_group"),
    (l.innerHTML = lang_missions_missionview_settings_field_group + ":"),
    r.appendChild(l);
  var u = document.createElement("select");
  u.setAttribute("name", "missionsettings_field_group"),
    u.setAttribute("id", "missionsettings_field_group"),
    void 0 !== t.description
      ? u.setAttribute("data-preselected", t.group)
      : u.setAttribute(
          "data-preselected",
          window["missions_missionview_" + e + "_data"].group_id
        ),
    r.appendChild(u);
  var _ = document.createElement("option");
  _.setAttribute("value", ""), (_.innerHTML = "No group"), u.appendChild(_);
  var p = document.createElement("input");
  p.setAttribute("type", "button"),
    p.setAttribute("name", "missionsettings_groupbtn"),
    p.setAttribute("id", "missionsettings_groupbtn"),
    p.setAttribute("data-element-id", e),
    p.setAttribute("value", lang_main_missiongroupeditor_createeditgroups),
    r.appendChild(p),
    (p.onclick = function () {
      var e = {};
      (e.name = document.getElementById("missionsettings_field_name").value),
        (e.description = document.getElementById(
          "missionsettings_field_description"
        ).value),
        (e.group = document.getElementById(
          "missionsettings_field_group"
        ).options[
          document.getElementById("missionsettings_field_group").selectedIndex
        ].value),
        document
          .getElementById("missionsettings_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missionsettings_overlay")
          ),
        missions_launch_groupsettings(this.getAttribute("data-element-id"), e);
    });
  var c = document.createElement("div");
  c.setAttribute("class", "buttonholder"), r.appendChild(c);
  var v = document.createElement("input");
  v.setAttribute("type", "submit"),
    v.setAttribute("name", "missionsettings_submitbtn"),
    v.setAttribute("id", "missionsettings_submitbtn"),
    v.setAttribute("value", mir_translate("OK")),
    c.appendChild(v);
  var h = document.createElement("input");
  h.setAttribute("type", "button"),
    h.setAttribute("name", "missionsettings_cancelbtn"),
    h.setAttribute("id", "missionsettings_cancelbtn"),
    h.setAttribute("value", mir_translate("Cancel")),
    c.appendChild(h),
    (h.onclick = function () {
      document
        .getElementById("missionsettings_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missionsettings_overlay")
        );
    });
  var g = {
    mode: "get-mission-groups",
  };
  $.ajax({
    url: "/",
    data: g,
    method: "GET",
    dataType: "json",
    success: function (e) {
      var t = document.getElementById("missionsettings_field_group"),
        i = t.getAttribute("data-preselected");
      $(t).find("option").remove();
      for (var s = 0; s < e.length; ) {
        var n = document.createElement("option");
        n.setAttribute("value", e[s].guid),
          e[s].guid == i && n.setAttribute("selected", "selected"),
          (n.innerHTML = e[s].htmlname),
          t.appendChild(n),
          s++;
      }
    },
  }),
    d.focus();
}
function missions_launch_groupsettings(o, d) {
  var e = document.createElement("div");
  e.setAttribute("class", "missiongroupsettings_overlay"),
    e.setAttribute("id", "missiongroupsettings_overlay"),
    document.getElementsByTagName("body")[0].appendChild(e);
  var t = document.createElement("div");
  t.setAttribute("class", "box"), e.appendChild(t);
  var i = document.createElement("h1");
  (i.innerHTML = lang_main_missiongroupeditor_missiongroups), t.appendChild(i);
  var s = document.createElement("div");
  s.setAttribute("id", "missiongroupsettings_createbtn"),
    s.setAttribute("class", "missiongroupsettings_createbtn"),
    (s.innerHTML = mir_translate("Create group")),
    t.appendChild(s),
    (s.onclick = function () {
      document
        .getElementById("missiongroupsettings_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiongroupsettings_overlay")
        ),
        missions_missionview_launch_groupeditor(o, d, null);
    });
  var n = document.createElement("p");
  (n.innerHTML = lang_main_missiongroupeditor_text), t.appendChild(n);
  var a = document.createElement("div");
  a.setAttribute("id", "missiongroupsettings_groupholder"),
    a.setAttribute("class", "missiongroupsettings_groupholder"),
    t.appendChild(a);
  var r = document.createElement("div");
  r.setAttribute("id", "missiongroupsettings_groupholder_nodata"),
    r.setAttribute("class", "missiongroupsettings_groupholder_nodata"),
    (r.innerHTML = "<p>" + lang_main_missiongroupeditor_loading + "</p>"),
    a.appendChild(r);
  var m = document.createElement("div");
  m.setAttribute("class", "buttonholder"), t.appendChild(m);
  var l = document.createElement("input");
  l.setAttribute("type", "submit"),
    l.setAttribute("name", "missionsettings_submitbtn"),
    l.setAttribute("id", "missionsettings_submitbtn"),
    l.setAttribute("value", mir_translate("OK")),
    m.appendChild(l),
    (l.onclick = function () {
      document
        .getElementById("missiongroupsettings_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiongroupsettings_overlay")
        ),
        null == d || missions_missionview_launch_missionsettings(o, d);
    });
  var u = document.createElement("input");
  u.setAttribute("type", "button"),
    u.setAttribute("name", "missionsettings_cancelbtn"),
    u.setAttribute("id", "missionsettings_cancelbtn"),
    u.setAttribute("value", mir_translate("Cancel")),
    m.appendChild(u),
    (u.onclick = function () {
      document
        .getElementById("missiongroupsettings_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiongroupsettings_overlay")
        ),
        null == d || missions_missionview_launch_missionsettings(o, d);
    });
  var _ = {
    mode: "get-mission-groups",
    calltype: "light",
  };
  $.ajax({
    url: "/",
    data: _,
    method: "GET",
    dataType: "json",
    success: function (e) {
      $("#missiongroupsettings_groupholder_nodata").hide();
      var t = document.createElement("table");
      t.setAttribute("cellpadding", 0),
        t.setAttribute("cellspacing", 0),
        document
          .getElementById("missiongroupsettings_groupholder")
          .appendChild(t);
      for (var i = 0; i < e.length; ) {
        var s = document.createElement("tr");
        s.setAttribute(
          "id",
          "missiongroupsettings_groupholder_grouprow_" + e[i].guid
        ),
          t.appendChild(s),
          ((n = document.createElement("td")).innerHTML = "<div>&raquo;</div>"),
          s.appendChild(n);
        var n = document.createElement("td");
        null == d && n.setAttribute("data-clickable", "true"),
          n.setAttribute("data-guid", e[i].guid),
          n.setAttribute("data-element-id", o),
          (n.innerHTML = "<div>" + mir_translate(e[i].htmlname) + "</div>"),
          s.appendChild(n),
          null == d &&
            (n.onclick = function () {
              var e = document.getElementById("group_id");
              0 < $(e).children("optgroup[data-type='groups']").length
                ? $(e).val("group_" + this.getAttribute("data-guid"))
                : $(e).val(this.getAttribute("data-guid")),
                null == o ||
                  missions_summary_catalogue_load_missions(
                    this.getAttribute("data-element-id")
                  ),
                document
                  .getElementById("missiongroupsettings_overlay")
                  .parentNode.removeChild(
                    parent.document.getElementById(
                      "missiongroupsettings_overlay"
                    )
                  );
            });
        n = document.createElement("td");
        s.appendChild(n);
        var a = document.createElement("div");
        (a.innerHTML = "<span>" + lang_main_missions_edit + "</span>"),
          a.setAttribute("data-guid", e[i].guid),
          n.appendChild(a),
          -1 < e[i].allowed_methods.indexOf("PUT")
            ? (a.setAttribute("data-active", "true"),
              (a.onclick = function () {
                document
                  .getElementById("missiongroupsettings_overlay")
                  .parentNode.removeChild(
                    parent.document.getElementById(
                      "missiongroupsettings_overlay"
                    )
                  ),
                  missions_missionview_launch_groupeditor(
                    o,
                    d,
                    this.getAttribute("data-guid")
                  );
              }))
            : a.setAttribute("data-active", "false");
        var r = document.createElement("div");
        (r.innerHTML = "<span>" + lang_main_missions_delete + "</span>"),
          r.setAttribute("data-guid", e[i].guid),
          r.setAttribute("data-children", e[i].num_children),
          -1 < e[i].allowed_methods.indexOf("DELETE")
            ? (r.setAttribute("data-active", "true"),
              (r.onclick = function () {
                0 < this.getAttribute("data-children")
                  ? launch_confirm(
                      lang_main_missionsgroupseditor_deletewithcontent_headline,
                      lang_main_missionsgroupseditor_deletewithcontent_text,
                      "missiongroupeditor_delete_missiongroup('" +
                        this.getAttribute("data-guid") +
                        "');",
                      lang_main_missionsgroupseditor_deletewithcontent_delete,
                      lang_main_missionsgroupseditor_deletewithcontent_cancel
                    )
                  : missiongroupeditor_delete_missiongroup(
                      this.getAttribute("data-guid")
                    );
              }))
            : r.setAttribute("data-active", "false"),
          n.appendChild(r),
          i++;
      }
    },
  });
}
function missiongroupeditor_delete_missiongroup(e) {
  var t = {};
  (t.id = e),
    (t.mode = "delete-mission-group"),
    $.ajax({
      url: "/",
      data: t,
      method: "GET",
      dataType: "json",
      guid: e,
      success: function (e) {
        var t = document.getElementById("group_id");
        $(t)
          .find("option[value='group_" + this.guid + "']")
          .remove(),
          $(t)
            .find("option[value='" + this.guid + "']")
            .remove(),
          $(t).trigger("change"),
          $("#missiongroupsettings_groupholder_grouprow_" + this.guid).remove();
      },
    });
}
function missions_missionview_launch_groupeditor(r, o, e) {
  var t = document.createElement("div");
  t.setAttribute("class", "missiongroupeditor_overlay"),
    t.setAttribute("id", "missiongroupeditor_overlay"),
    document.getElementsByTagName("body")[0].appendChild(t);
  var i = document.createElement("div");
  i.setAttribute("class", "box"), t.appendChild(i);
  var s = document.createElement("h1");
  (s.innerHTML =
    null == e
      ? lang_main_missiongroupeditor_createmissiongroup
      : lang_main_missiongroupeditor_editmissiongroup),
    i.appendChild(s);
  var n = document.createElement("p");
  (n.innerHTML = lang_main_missiongroupeditor_create_text), i.appendChild(n);
  var a = document.createElement("form");
  a.setAttribute("method", "post"),
    a.setAttribute("action", "/"),
    a.setAttribute("data-element-id", r),
    null == e
      ? a.setAttribute("data-guid", "")
      : a.setAttribute("data-guid", e),
    (a.onsubmit = function () {
      var a = {};
      return (
        (a.id = this.getAttribute("data-guid")),
        (a.name = document.getElementById(
          "missiongroupeditor_field_name"
        ).value),
        $.ajax({
          url: "/?mode=update-mission-group",
          data: a,
          method: "POST",
          dataType: "json",
          settings: o,
          element_id: r,
          success: function (e) {
            if (null == o) {
              var t = document.getElementById("group_id");
              if (36 == a.id.length)
                $(t)
                  .find("option[value='group_" + a.id + "']")
                  .html(e.results.name),
                  $(t)
                    .find("option[value='" + a.id + "']")
                    .html(e.results.name),
                  document
                    .getElementById("missiongroupeditor_overlay")
                    .parentNode.removeChild(
                      parent.document.getElementById(
                        "missiongroupeditor_overlay"
                      )
                    ),
                  missions_launch_groupsettings(r, o);
              else {
                if (0 < $(t).children("optgroup[data-type='groups']").length)
                  var i = $(t).children("optgroup[data-type='groups']");
                else i = t;
                var s = document.createElement("option");
                if (0 < $(t).children("optgroup[data-type='groups']").length)
                  var n = "group_" + e.results.guid;
                else n = e.results.guid;
                s.setAttribute("value", n),
                  (s.innerHTML = e.results.name),
                  $(i).append(s),
                  $(t).val(n),
                  $(t).trigger("change"),
                  document
                    .getElementById("missiongroupeditor_overlay")
                    .parentNode.removeChild(
                      parent.document.getElementById(
                        "missiongroupeditor_overlay"
                      )
                    );
              }
            } else
              document
                .getElementById("missiongroupeditor_overlay")
                .parentNode.removeChild(
                  parent.document.getElementById("missiongroupeditor_overlay")
                ),
                missions_launch_groupsettings(r, o);
          },
        }),
        !1
      );
    }),
    i.appendChild(a);
  var d = document.createElement("label");
  d.setAttribute("for", "missiongroupeditor_field_name"),
    (d.innerHTML = mir_translate("Name:")),
    a.appendChild(d);
  var m = document.createElement("input");
  m.setAttribute("type", "text"),
    m.setAttribute("name", "missiongroupeditor_field_name"),
    m.setAttribute("id", "missiongroupeditor_field_name"),
    m.setAttribute("value", ""),
    a.appendChild(m);
  var l = document.createElement("div");
  l.setAttribute("class", "buttonholder"), a.appendChild(l);
  var u = document.createElement("input");
  u.setAttribute("type", "submit"),
    u.setAttribute("name", "submit"),
    u.setAttribute("id", "missiongroupeditor_submitbtn"),
    u.setAttribute("value", mir_translate("OK")),
    l.appendChild(u);
  var _ = document.createElement("input");
  if (
    (_.setAttribute("type", "button"),
    _.setAttribute("name", "missionsettings_cancelbtn"),
    _.setAttribute("id", "missionsettings_cancelbtn"),
    _.setAttribute("value", mir_translate("Cancel")),
    l.appendChild(_),
    (_.onclick = function () {
      document
        .getElementById("missiongroupeditor_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiongroupeditor_overlay")
        ),
        missions_launch_groupsettings(r, o);
    }),
    null == e)
  );
  else {
    var p = {
      mode: "get-mission-group",
    };
    (p.id = e),
      $.ajax({
        url: "/",
        data: p,
        method: "GET",
        dataType: "json",
        success: function (e) {
          document.getElementById("missiongroupeditor_field_name").value =
            e.results.name;
        },
      });
  }
  m.focus();
}
function missions_missionview_launch_dynvars(a, e, t, i, r, s) {
  document
    .getElementsByTagName("body")[0]
    .setAttribute("data-mobile-dialogue", "true");
  var n = document.createElement("div");
  n.setAttribute("class", "missiondynvar_overlay"),
    n.setAttribute("id", "missiondynvar_overlay"),
    document.getElementsByTagName("body")[0].appendChild(n);
  var o = document.createElement("div");
  o.setAttribute("class", "box"), n.appendChild(o);
  var d = document.createElement("h1");
  (d.innerHTML = lang_missions_missionview_variables), o.appendChild(d);
  var m = document.createElement("div");
  m.setAttribute("id", "missiondynvar_createbtn"),
    m.setAttribute("class", "missiondynvar_createbtn"),
    m.setAttribute("data-element-id", a),
    m.setAttribute("data-item-id", e),
    m.setAttribute("data-parameter-id", t),
    m.setAttribute("data-parameter-saveid", i),
    m.setAttribute("data-parameter-type", r),
    (m.innerHTML = lang_missions_missionview_variables_create),
    o.appendChild(m),
    (m.onclick = function () {
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-dialogue", "false"),
        document
          .getElementById("missiondynvar_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missiondynvar_overlay")
          ),
        missions_missionview_launch_dynvars_editor(
          this.getAttribute("data-element-id"),
          this.getAttribute("data-item-id"),
          this.getAttribute("data-parameter-id"),
          this.getAttribute("data-parameter-saveid"),
          this.getAttribute("data-parameter-type"),
          null
        );
    });
  var l = document.createElement("p");
  (l.innerHTML = lang_missions_missionview_variables_text), o.appendChild(l);
  var u = document.createElement("div");
  u.setAttribute("id", "missiondynvar_varholder"),
    u.setAttribute("class", "missiondynvar_varholder"),
    o.appendChild(u);
  var _ = document.createElement("table");
  _.setAttribute("cellpadding", 0),
    _.setAttribute("cellspacing", 0),
    u.appendChild(_);
  var p = document.createElement("tr");
  _.appendChild(p),
    (v = document.createElement("input")).setAttribute("type", "radio"),
    v.setAttribute("name", "missiondynvar_option"),
    v.setAttribute("id", "missiondynvar_option_none"),
    v.setAttribute("value", "missiondynvar_option_none"),
    (-1 != s && null != s) || v.setAttribute("checked", "checked"),
    (h = document.createElement("td")).appendChild(v),
    p.appendChild(h),
    ((h = document.createElement("td")).innerHTML =
      '<label for="missiondynvar_option_none">' +
      lang_missions_missionview_variables_no_use +
      "</label>"),
    p.appendChild(h),
    ((h = document.createElement("td")).innerHTML = "&nbsp;"),
    p.appendChild(h);
  for (
    var c = 0;
    c < window["missions_missionview_" + a + "_dynvars"].length;

  ) {
    if (window["missions_missionview_" + a + "_dynvars"][c].type == r) {
      p = document.createElement("tr");
      _.appendChild(p);
      var v,
        h = document.createElement("td");
      p.appendChild(h),
        (v = document.createElement("input")).setAttribute("type", "radio"),
        v.setAttribute("name", "missiondynvar_option"),
        v.setAttribute("id", "missiondynvar_option_" + c),
        v.setAttribute("value", "missiondynvar_option_" + c),
        s == c && v.setAttribute("checked", "checked"),
        h.appendChild(v),
        ((h = document.createElement("td")).innerHTML =
          '<label for="missiondynvar_option_' +
          c +
          '">' +
          window["missions_missionview_" + a + "_dynvars"][c].name +
          "</label>"),
        p.appendChild(h);
      h = document.createElement("td");
      p.appendChild(h);
      var g = document.createElement("div");
      (g.innerHTML = "<span>Edit</span>"),
        g.setAttribute("data-id", c),
        g.setAttribute("data-element-id", a),
        g.setAttribute("data-item-id", e),
        g.setAttribute("data-parameter-id", t),
        g.setAttribute("data-parameter-saveid", i),
        g.setAttribute("data-parameter-type", r),
        h.appendChild(g),
        (g.onclick = function () {
          document
            .getElementsByTagName("body")[0]
            .setAttribute("data-mobile-dialogue", "false"),
            document
              .getElementById("missiondynvar_overlay")
              .parentNode.removeChild(
                parent.document.getElementById("missiondynvar_overlay")
              ),
            -1 == s || null == s
              ? missions_missionview_launch_dynvars_editor(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-item-id"),
                  this.getAttribute("data-parameter-id"),
                  this.getAttribute("data-parameter-saveid"),
                  this.getAttribute("data-parameter-type"),
                  this.getAttribute("data-id")
                )
              : missions_missionview_launch_dynvars_editor(
                  this.getAttribute("data-element-id"),
                  this.getAttribute("data-item-id"),
                  this.getAttribute("data-parameter-id"),
                  this.getAttribute("data-parameter-saveid"),
                  this.getAttribute("data-parameter-type"),
                  this.getAttribute("data-id"),
                  s
                );
        });
    }
    c++;
  }
  var b = document.createElement("div");
  b.setAttribute("class", "buttonholder"), o.appendChild(b);
  var w = document.createElement("input");
  w.setAttribute("type", "submit"),
    w.setAttribute("name", "missiondynvar_submitbtn"),
    w.setAttribute("id", "missiondynvar_submitbtn"),
    w.setAttribute("data-element-id", a),
    w.setAttribute("data-item-id", e),
    w.setAttribute("data-parameter-id", t),
    w.setAttribute("data-parameter-saveid", i),
    w.setAttribute("value", mir_translate("OK")),
    b.appendChild(w),
    (w.onclick = function () {
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-dialogue", "false");
      for (
        var e = -1, t = 0;
        t < window["missions_missionview_" + a + "_dynvars"].length;

      )
        window["missions_missionview_" + a + "_dynvars"][t].type == r &&
          1 == document.getElementById("missiondynvar_option_" + t).checked &&
          (e = t),
          t++;
      var i = document.getElementById(
          this.getAttribute("data-item-id") +
            "_dynvarbadgetext_" +
            this.getAttribute("data-parameter-id")
        ),
        s = document.getElementById(
          this.getAttribute("data-item-id") +
            "_fieldwrapper_" +
            this.getAttribute("data-parameter-saveid")
        );
      if (
        (-1 < e
          ? (s.setAttribute("data-dynval", "true"),
            (i.innerHTML =
              window[
                "missions_missionview_" +
                  this.getAttribute("data-element-id") +
                  "_dynvars"
              ][e].name))
          : (s.setAttribute("data-dynval", "false"), (i.innerHTML = "Unknown")),
        (window[
          "missions_missionview_" +
            this.getAttribute("data-element-id") +
            "_elements"
        ][this.getAttribute("data-item-id")].dynvals[
          this.getAttribute("data-parameter-id")
        ] = e),
        missions_missionview_set_action_names(
          this.getAttribute("data-element-id"),
          this.getAttribute("data-item-id")
        ),
        -1 < e)
      ) {
        var n =
          this.getAttribute("data-item-id") +
          "_fieldwrapper_" +
          this.getAttribute("data-parameter-saveid");
        $("#" + n).attr("data-error", "false"),
          $("#" + n)
            .find("div.errorholder > p")
            .html("");
      }
      document
        .getElementById("missiondynvar_overlay")
        .parentNode.removeChild(
          parent.document.getElementById("missiondynvar_overlay")
        );
    });
  var A = document.createElement("input");
  A.setAttribute("type", "button"),
    A.setAttribute("name", "missiondynvar_cancelbtn"),
    A.setAttribute("id", "missiondynvar_cancelbtn"),
    A.setAttribute("value", mir_translate("Cancel")),
    b.appendChild(A),
    (A.onclick = function () {
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-dialogue", "false"),
        document
          .getElementById("missiondynvar_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missiondynvar_overlay")
          );
    });
}
function missions_missionview_launch_dynvars_editor(h, e, t, i, s, n, g) {
  if ("Duration" == s)
    var b = "durationpicker",
      a = document.getElementById(h + "_missionview_settingspanel_field_" + i);
  else
    b = (a = document.getElementById(
      h + "_missionview_settingspanel_field_" + i
    )).tagName.toLowerCase();
  var r = document.getElementById(e + "_fieldwrapper_" + i);
  document
    .getElementsByTagName("body")[0]
    .setAttribute("data-mobile-dialogue", "true");
  var o = document.createElement("div");
  o.setAttribute("class", "missiondynvareditor_overlay"),
    o.setAttribute("id", "missiondynvareditor_overlay"),
    document.getElementsByTagName("body")[0].appendChild(o);
  var d = document.createElement("div");
  d.setAttribute("class", "box"), o.appendChild(d);
  var m = document.createElement("h1");
  (m.innerHTML =
    null == n
      ? lang_missions_missionview_variables_create
      : lang_missions_missionview_variables_edit),
    d.appendChild(m);
  var l = document.createElement("p");
  (l.innerHTML =
    null == n
      ? lang_missions_missionview_variables_create_text
      : lang_missions_missionview_variables_edit_text),
    d.appendChild(l);
  var u = document.createElement("form");
  u.setAttribute("method", "post"),
    u.setAttribute("action", "/"),
    u.setAttribute("data-element-id", h),
    u.setAttribute("data-item-id", e),
    u.setAttribute("data-parameter-id", t),
    u.setAttribute("data-parameter-saveid", i),
    u.setAttribute("data-parameter-type", s),
    null == n
      ? u.setAttribute("data-guid", "")
      : u.setAttribute("data-guid", n),
    (u.onsubmit = function () {
      document
        .getElementById("missiondynvareditor_submitbtn")
        .setAttribute("class", "spinning"),
        (document.getElementById(
          "missiondynvareditor_submitbtn"
        ).disabled = !0),
        (document.getElementById("missiondynvareditor_fielderror").innerHTML =
          "");
      var o = {};
      if (
        ((o.name = document.getElementById(
          "missiondynvareditor_field_name"
        ).value),
        "select" == b)
      )
        o.def = document.getElementById(
          "missiondynvareditor_field_def"
        ).options[
          document.getElementById("missiondynvareditor_field_def").selectedIndex
        ].value;
      else if ("slider" == b)
        o.def = missions_missionview_transform_duration_totime(
          document
            .getElementById("missiondynvareditor_field_def")
            .getAttribute("data-cur")
        );
      else if ("durationpicker" == b) {
        var e = document.getElementById("missiondynvareditor_field_def_hours"),
          t = document.getElementById("missiondynvareditor_field_def_minutes"),
          i = document.getElementById("missiondynvareditor_field_def_seconds"),
          s = e.value;
        1 == s.length && (s = "0" + s);
        var n = t.value;
        1 == n.length && (n = "0" + n);
        var a = i.value;
        1 == a.length && (a = "0" + a),
          (o.def = s + ":" + n + ":" + a + ".000000");
      } else
        o.def = document.getElementById("missiondynvareditor_field_def").value;
      (o.type = this.getAttribute("data-parameter-type")),
        document.getElementById("missiondynvareditor_field_nullable") &&
          1 ==
            document.getElementById("missiondynvareditor_field_nullable")
              .checked &&
          (o.def = MIR.ui.constants.NULL_VALUE);
      var r = document
          .getElementById(h + "_missionview")
          .getAttribute("data-mission-guid"),
        d = missions_missionview_fetch_actions(
          h,
          "missionview_" + h + "_list_main"
        ),
        m = JSON.parse(
          JSON.stringify(window["missions_missionview_" + h + "_dynvars"])
        );
      if (0 < this.getAttribute("data-guid").length) {
        m[(l = this.getAttribute("data-guid"))] = o;
      } else {
        for (var l = -1, u = 0; u < m.length; )
          m[u].name == o.name && m[u].type == o.type && (l = u), u++;
        -1 == l && (m.push(o), (l = m.length - 1));
      }
      for (var _ = JSON.parse(JSON.stringify(d)), p = 0; p < _.length; ) {
        if (_[p].id == this.getAttribute("data-item-id"))
          for (var c in _[p].data.dynvals)
            c == this.getAttribute("data-parameter-id") &&
              (_[p].data.dynvals[c] = l);
        p++;
      }
      var v = {};
      return (
        (v.data = _),
        (v.missiondata = window["missions_missionview_" + h + "_data"]),
        (v.dynvars = m),
        (v.id = r),
        (v.dryrun = "true"),
        (v.validate = "dynval"),
        (v.cur_dynval = o),
        $.ajax({
          url: "/?mode=save-mission",
          data: v,
          method: "POST",
          dataType: "json",
          guid: this.getAttribute("data-guid"),
          element_id: this.getAttribute("data-element-id"),
          item_id: this.getAttribute("data-item-id"),
          parameter_id: this.getAttribute("data-parameter-id"),
          parameter_saveid: this.getAttribute("data-parameter-saveid"),
          parameter_type: this.getAttribute("data-parameter-type"),
          cur: o,
          sel: g,
          success: function (e) {
            document
              .getElementById("missiondynvareditor_submitbtn")
              .removeAttribute("class");
            var t = (document.getElementById(
                "missiondynvareditor_submitbtn"
              ).disabled = !1),
              i = "";
            if (0 < e.length)
              for (var s = 0; s < e.length; ) {
                if (e[s].id == this.item_id)
                  for (var n in e[s].parameters)
                    n == this.parameter_id &&
                      ((t = !0),
                      (i = mir_translate(e[s].parameters[n].error_human)));
                s++;
              }
            if (1 == t)
              document.getElementById(
                "missiondynvareditor_fielderror"
              ).innerHTML = i;
            else {
              if (-1 == this.sel || null == this.sel)
                if (0 < this.guid.length) {
                  var a = this.guid;
                  window[
                    "missions_missionview_" + this.element_id + "_dynvars"
                  ][a] = this.cur;
                } else {
                  a = -1;
                  for (
                    var r = 0;
                    r <
                    window[
                      "missions_missionview_" + this.element_id + "_dynvars"
                    ].length;

                  )
                    window[
                      "missions_missionview_" + this.element_id + "_dynvars"
                    ][r].name == this.cur.name &&
                      window[
                        "missions_missionview_" + this.element_id + "_dynvars"
                      ][r].type == this.cur.type &&
                      (a = r),
                      r++;
                  -1 == a &&
                    (window[
                      "missions_missionview_" + this.element_id + "_dynvars"
                    ].push(this.cur),
                    (a =
                      window[
                        "missions_missionview_" + this.element_id + "_dynvars"
                      ].length - 1));
                }
              else if (0 < this.guid.length) {
                (window["missions_missionview_" + this.element_id + "_dynvars"][
                  this.guid
                ].name = o.name),
                  (window[
                    "missions_missionview_" + this.element_id + "_dynvars"
                  ][this.guid].def = o.def);
                a = this.guid;
              }
              document
                .getElementsByTagName("body")[0]
                .setAttribute("data-mobile-dialogue", "false"),
                document
                  .getElementById("missiondynvareditor_overlay")
                  .parentNode.removeChild(
                    parent.document.getElementById(
                      "missiondynvareditor_overlay"
                    )
                  ),
                missions_missionview_launch_dynvars(
                  this.element_id,
                  this.item_id,
                  this.parameter_id,
                  this.parameter_saveid,
                  this.parameter_type,
                  a
                );
            }
          },
        }),
        !1
      );
    }),
    d.appendChild(u);
  var _ = document.createElement("label");
  _.setAttribute("for", "missiondynvareditor_field_name"),
    (_.innerHTML = lang_missions_missionview_variables_name),
    u.appendChild(_);
  var p = document.createElement("input");
  p.setAttribute("type", "text"),
    p.setAttribute("name", "missiondynvareditor_field_name"),
    p.setAttribute("id", "missiondynvareditor_field_name"),
    null == n
      ? p.setAttribute("value", "")
      : p.setAttribute(
          "value",
          window["missions_missionview_" + h + "_dynvars"][n].name
        ),
    u.appendChild(p);
  var c = document.createElement("label");
  if (
    (c.setAttribute("for", "missiondynvareditor_field_def"),
    (c.innerHTML = lang_missions_missionview_variables_defaultvalue),
    u.appendChild(c),
    "select" == b)
  )
    (P = document.createElement("select")).setAttribute(
      "name",
      "missiondynvareditor_field_def"
    ),
      P.setAttribute("id", "missiondynvareditor_field_def"),
      u.appendChild(P),
      $(a)
        .children("option,optgroup")
        .each(function () {
          if ("OPTGROUP" == this.tagName) {
            var t = document.createElement("optgroup");
            t.setAttribute("label", this.getAttribute("label")),
              P.appendChild(t),
              $(this)
                .children("option")
                .each(function () {
                  var e = document.createElement("option");
                  e.setAttribute("value", this.getAttribute("value")),
                    (e.innerHTML = this.innerHTML),
                    null == n && 1 == this.selected
                      ? e.setAttribute("selected", "selected")
                      : null == n ||
                        (window["missions_missionview_" + h + "_dynvars"][n]
                          .def == this.getAttribute("value") &&
                          e.setAttribute("selected", "selected")),
                    t.appendChild(e);
                });
          } else {
            var e = document.createElement("option");
            e.setAttribute("value", this.getAttribute("value")),
              (e.innerHTML = this.innerHTML),
              null == n && 1 == this.selected
                ? e.setAttribute("selected", "selected")
                : null == n ||
                  (window["missions_missionview_" + h + "_dynvars"][n].def ==
                    this.getAttribute("value") &&
                    e.setAttribute("selected", "selected")),
              P.appendChild(e);
          }
        });
  else if ("durationpicker" == b) {
    if (null == n) var v = parseInt(a.getAttribute("data-cur"));
    else if (
      null === n ||
      (null != window["missions_missionview_" + h + "_dynvars"][n].def &&
        window["missions_missionview_" + h + "_dynvars"][n].def !=
          MIR.ui.constants.NULL_VALUE)
    )
      v = missions_missionview_transform_duration_toseconds(
        window["missions_missionview_" + h + "_dynvars"][n].def
      );
    else var v = 0;
    var w = Math.floor(v / 60),
      A = Math.floor(w / 60),
      f = v - 60 * w;
    w = w - 60 * A;
    1 == String(f).length && (f = "0" + String(f)),
      1 == String(w).length && (w = "0" + w),
      1 == String(A).length && (A = "0" + A);
    var y = [A, w, f],
      E = ["hours", "minutes", "seconds"],
      C = [
        lang_missions_missionview_durationpicker_hours,
        lang_missions_missionview_durationpicker_minutes,
        lang_missions_missionview_durationpicker_seconds,
      ],
      I = document.createElement("div");
    I.setAttribute("class", "durationpickerholder"),
      I.setAttribute("data-cur", v),
      I.setAttribute("id", "missiondynvareditor_field_def"),
      u.appendChild(I);
    var T = document.createElement("table");
    T.setAttribute("cellpadding", "0"),
      T.setAttribute("cellspacing", "0"),
      I.appendChild(T);
    var B = document.createElement("tr");
    T.appendChild(B);
    for (var L = 0; L < E.length; ) {
      (x = document.createElement("td")).setAttribute("class", "arrow_up"),
        B.appendChild(x),
        (q = document.createElement("div")).setAttribute("data-timetype", E[L]),
        (q.innerHTML = "<span>+</span>"),
        (q.onclick = function () {
          var e = document.getElementById(
              "missiondynvareditor_field_def_" +
                this.getAttribute("data-timetype")
            ),
            t = "00";
          if (parseInt(e.value)) var i = parseInt(e.value);
          else i = 0;
          24 <= i && "hours" == this.getAttribute("data-timetype")
            ? (t = "00")
            : 59 <= i && "minutes" == this.getAttribute("data-timetype")
            ? (t = "00")
            : 59 <= i && "seconds" == this.getAttribute("data-timetype")
            ? (t = "00")
            : 1 == (t = String(i + 1)).length && (t = "0" + t),
            (e.value = t);
        }),
        x.appendChild(q),
        L++;
    }
    B = document.createElement("tr");
    T.appendChild(B);
    for (L = 0; L < E.length; ) {
      (x = document.createElement("td")).setAttribute("class", "field"),
        B.appendChild(x);
      var k = document.createElement("input");
      k.setAttribute("type", "text"),
        k.setAttribute("maxlength", "2"),
        k.setAttribute("value", y[L]),
        k.setAttribute("data-timetype", E[L]),
        k.setAttribute("data-old-value", ""),
        k.setAttribute("name", "missiondynvareditor_field_def_" + E[L]),
        k.setAttribute("id", "missiondynvareditor_field_def_" + E[L]),
        (k.onkeyup = function (e) {
          var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
          if (
            2 == this.value.length &&
            -1 < t.indexOf(e.key) &&
            e.target == this &&
            this.value !== this.getAttribute("data-old-value")
          ) {
            var i =
              "missiondynvareditor_field_def_" +
              this.getAttribute("data-timetype");
            "hours" == this.getAttribute("data-timetype")
              ? (i += "minutes")
              : "minutes" == this.getAttribute("data-timetype")
              ? (i += "seconds")
              : (i += "hours"),
              $("#" + i).select(),
              $("#" + i).focus();
          } else
            -1 < t.indexOf(e.key) && this.setAttribute("data-old-value", "");
        }),
        (k.onblur = function (e) {
          if (e.target == this) {
            for (
              var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
                i = !1,
                s = 0;
              s < this.value.length;

            )
              -1 == t.indexOf(this.value[s]) && (i = !0), s++;
            0 == this.value.length || 1 == i
              ? (this.value = "00")
              : "hours" == this.getAttribute("data-timetype") &&
                24 < parseInt(this.value)
              ? (this.value = "24")
              : "hours" == this.getAttribute("data-timetype") &&
                parseInt(this.value) < 0
              ? (this.value = "00")
              : "minutes" == this.getAttribute("data-timetype") &&
                59 < parseInt(this.value)
              ? (this.value = "59")
              : "minutes" == this.getAttribute("data-timetype") &&
                parseInt(this.value) < 0
              ? (this.value = "00")
              : "seconds" == this.getAttribute("data-timetype") &&
                59 < parseInt(this.value)
              ? (this.value = "59")
              : "seconds" == this.getAttribute("data-timetype") &&
                parseInt(this.value) < 0
              ? (this.value = "00")
              : 1 == this.value.length && (this.value = "0" + this.value),
              this.setAttribute("data-old-value", this.value);
          }
        }),
        x.appendChild(k),
        L++;
    }
    B = document.createElement("tr");
    T.appendChild(B);
    for (L = 0; L < E.length; ) {
      (x = document.createElement("td")).setAttribute("class", "text"),
        B.appendChild(x);
      var M = document.createElement("div");
      (M.innerHTML = "<span>" + C[L] + "</span>"), x.appendChild(M), L++;
    }
    B = document.createElement("tr");
    T.appendChild(B);
    for (L = 0; L < E.length; ) {
      var x, q;
      (x = document.createElement("td")).setAttribute("class", "arrow_down"),
        B.appendChild(x),
        (q = document.createElement("div")).setAttribute("data-timetype", E[L]),
        (q.innerHTML = "<span>-</span>"),
        (q.onclick = function () {
          var e = document.getElementById(
              "missiondynvareditor_field_def_" +
                this.getAttribute("data-timetype")
            ),
            t = "00";
          if (parseInt(e.value)) var i = parseInt(e.value);
          else i = 0;
          i <= 0 && "hours" == this.getAttribute("data-timetype")
            ? (t = "24")
            : i <= 0 && "minutes" == this.getAttribute("data-timetype")
            ? (t = "59")
            : i <= 0 && "seconds" == this.getAttribute("data-timetype")
            ? (t = "59")
            : 1 == (t = String(i - 1)).length && (t = "0" + t),
            (e.value = t);
        }),
        x.appendChild(q),
        L++;
    }
  } else if ("slider" == b) {
    var H = parseInt(a.getAttribute("data-min")),
      N = parseInt(a.getAttribute("data-max")),
      S =
        ((v = parseInt(a.getAttribute("data-cur"))),
        a.getAttribute("data-nullfieldname"),
        a.getAttribute("data-use-pseudo")),
      O = a.getAttribute("data-slidervals");
    "undefined" == O || (O = JSON.parse(O)),
      null == n ||
        (window["missions_missionview_" + h + "_dynvars"][n].def &&
          (v = missions_missionview_transform_duration_toseconds(
            window["missions_missionview_" + h + "_dynvars"][n].def
          )));
    var j = document.createElement("div");
    j.setAttribute("class", "sliderholder"),
      j.setAttribute("data-cur", v),
      j.setAttribute("id", "missiondynvareditor_field_def"),
      u.appendChild(j);
    var U = document.createElement("div");
    U.setAttribute("class", "slider"),
      U.setAttribute("data-use-pseudo", S),
      j.appendChild(U);
    var R = document.createElement("div");
    R.setAttribute("class", "sliderinfo"),
      u.appendChild(R),
      1 == isNaN(v) && (v = H),
      $(U).slider({
        min: H,
        max: N,
        value: v,
        create: function (e, t) {
          var i = v,
            s = i;
          "true" == e.target.getAttribute("data-use-pseudo") &&
            ((i = O.indexOf(i)), $(U).slider("option", "value", i), (s = O[i])),
            (R.innerHTML = missions_missionview_transform_duration_tostring(s));
        },
        slide: function (e, t) {
          var i = t.value;
          "true" == e.target.getAttribute("data-use-pseudo") &&
            (i = O[t.value]),
            (R.innerHTML = missions_missionview_transform_duration_tostring(i));
        },
        stop: function (e, t) {
          var i = t.value;
          "true" == e.target.getAttribute("data-use-pseudo") &&
            (i = O[t.value]),
            (R.innerHTML = missions_missionview_transform_duration_tostring(i)),
            j.setAttribute("data-cur", i);
        },
      });
  } else {
    var P;
    (P = document.createElement("input")).setAttribute("type", "text"),
      P.setAttribute("name", "missiondynvareditor_field_def"),
      P.setAttribute("id", "missiondynvareditor_field_def"),
      null == n
        ? P.setAttribute("value", "")
        : window["missions_missionview_" + h + "_dynvars"][n].def !==
            MIR.ui.constants.NULL_VALUE &&
          P.setAttribute(
            "value",
            window["missions_missionview_" + h + "_dynvars"][n].def
          ),
      u.appendChild(P);
  }
  var D = document.createElement("p");
  if (
    (D.setAttribute("class", "fielderror"),
    D.setAttribute("id", "missiondynvareditor_fielderror"),
    (D.innerHTML = ""),
    u.appendChild(D),
    "true" == r.getAttribute("data-nullable"))
  ) {
    var V = document.createElement("div");
    V.setAttribute("class", "nullerholder"), u.appendChild(V);
    var G = document.createElement("input");
    G.setAttribute("type", "checkbox"),
      G.setAttribute("name", "missiondynvareditor_field_nullable"),
      G.setAttribute("id", "missiondynvareditor_field_nullable"),
      G.setAttribute("value", "1"),
      null === n ||
        (null != window["missions_missionview_" + h + "_dynvars"][n].def &&
          window["missions_missionview_" + h + "_dynvars"][n].def !=
            MIR.ui.constants.NULL_VALUE) ||
        (G.setAttribute("checked", "true"),
        document
          .getElementById("missiondynvareditor_field_def")
          .setAttribute("data-disabled", "true"),
        document
          .getElementById("missiondynvareditor_field_def")
          .setAttribute("disabled", "disabled")),
      V.appendChild(G);
    var J = document.createElement("label");
    J.setAttribute("for", "missiondynvareditor_field_nullable"),
      (J.innerHTML = r.getAttribute("data-null-option")),
      V.appendChild(J),
      (G.onclick = function () {
        1 == this.checked
          ? (document
              .getElementById("missiondynvareditor_field_def")
              .setAttribute("data-disabled", "true"),
            document
              .getElementById("missiondynvareditor_field_def")
              .setAttribute("disabled", "disabled"))
          : (document
              .getElementById("missiondynvareditor_field_def")
              .setAttribute("data-disabled", "false"),
            document
              .getElementById("missiondynvareditor_field_def")
              .removeAttribute("disabled"));
      });
  }
  var F = document.createElement("div");
  F.setAttribute("class", "buttonholder"), u.appendChild(F);
  var K = document.createElement("input");
  K.setAttribute("type", "submit"),
    K.setAttribute("name", "submit"),
    K.setAttribute("id", "missiondynvareditor_submitbtn"),
    K.setAttribute("value", mir_translate("OK")),
    F.appendChild(K);
  var z = document.createElement("input");
  z.setAttribute("type", "button"),
    z.setAttribute("name", "missiondynvareditor_cancelbtn"),
    z.setAttribute("id", "missiondynvareditor_cancelbtn"),
    z.setAttribute("data-element-id", h),
    z.setAttribute("data-item-id", e),
    z.setAttribute("data-parameter-id", t),
    z.setAttribute("data-parameter-saveid", i),
    z.setAttribute("data-parameter-type", s),
    z.setAttribute("value", mir_translate("Cancel")),
    F.appendChild(z),
    (z.onclick = function () {
      document
        .getElementsByTagName("body")[0]
        .setAttribute("data-mobile-dialogue", "false"),
        document
          .getElementById("missiondynvareditor_overlay")
          .parentNode.removeChild(
            parent.document.getElementById("missiondynvareditor_overlay")
          ),
        missions_missionview_launch_dynvars(
          this.getAttribute("data-element-id"),
          this.getAttribute("data-item-id"),
          this.getAttribute("data-parameter-id"),
          this.getAttribute("data-parameter-saveid"),
          this.getAttribute("data-parameter-type"),
          null == g ? -1 : g
        );
    }),
    p.focus();
}
function missions_missionview_get_active_action(t) {
  if (0 == missions_missionview_active_action_running) {
    missions_missionview_active_action_running = !0;
    missions_missionview_fetch_actions(t, "missionview_" + t + "_list_main");
    var e = document
      .getElementById(t + "_missionview")
      .getAttribute("data-mission-guid");
    if (
      robot_current_mission_guid &&
      robot_current_mission_guid == e &&
      0 < robot_current_mission
    ) {
      var i = {
        mode: "get-active-mission",
      };
      (i.queue_id = robot_current_mission),
        $.ajax({
          url: "/",
          data: i,
          method: "GET",
          dataType: "json",
          element_id: t,
          success: function (e) {
            (robot_current_mission_guid = e.mission_guid),
              (robot_current_mission_action_guid = e.action_guid),
              $("#missionview_" + t + "_list_main")
                .find("li.action")
                .attr("data-running", "false"),
              robot_current_mission_action_guid &&
                36 == robot_current_mission_action_guid.length &&
                $("#missionview_" + t + "_list_main")
                  .find(
                    "li[data-action-guid='" +
                      robot_current_mission_action_guid +
                      "'].action"
                  )
                  .attr("data-running", "true"),
              setTimeout(function () {
                missions_missionview_get_active_action(t);
              }, 1e3),
              (missions_missionview_active_action_running = !1);
          },
        });
    } else
      $("#missionview_" + t + "_list_main")
        .find("li.action")
        .attr("data-running", "false"),
        setTimeout(function () {
          missions_missionview_get_active_action(t);
        }, 3e3),
        (missions_missionview_active_action_running = !1);
  }
}
function missionqueue_edit_item(l, u, _) {
  launch_waiter(mir_translate("Loading mission..."));
  var e = {};
  return (
    (e.id = _),
    (e.queue_id = u),
    (e.edit = !0),
    $.ajax({
      url: "/?mode=queue-mission",
      data: e,
      method: "POST",
      dataType: "json",
      element_id: l,
      success: function (s) {
        if ((close_waiter(), "questions" == s.type)) {
          var e = document.createElement("div");
          e.setAttribute("class", "missionqueuequestions_overlay"),
            e.setAttribute("id", "missionqueuequestions_overlay"),
            document.getElementsByTagName("body")[0].appendChild(e);
          var n = document.createElement("div");
          n.setAttribute("class", "box"), e.appendChild(n);
          var t = document.createElement("h1");
          (t.innerHTML = mir_translate("Edit mission queue instance")),
            n.appendChild(t);
          var i = document.createElement("p");
          (i.innerHTML = mir_translate("Text about mission variables...")),
            n.appendChild(i);
          var a = document.createElement("form");
          a.setAttribute("action", ""),
            a.setAttribute("method", ""),
            n.appendChild(a),
            (a.onsubmit = function () {
              launch_waiter(mir_translate("Saving changes...")),
                $("div.box > form > div.fieldholder").attr(
                  "data-error",
                  "false"
                ),
                $("div.box > form > div.fieldholder").attr(
                  "data-error",
                  "false"
                ),
                $("div.box > form > p.error").html("");
              for (var e = {}, t = 0; t < s.questions.length; )
                (e[
                  s.questions[t].systemname
                ] = mission_summary_queue_field_fetch_value(
                  s.questions[t].systemname,
                  s.questions[t].type,
                  s.questions[t].constraints.nullable
                )),
                  t++;
              var i = {};
              return (
                (i.id = _),
                (i.queue_id = u),
                (i.vals = e),
                (i.update = !0),
                $.ajax({
                  url: "/?mode=queue-mission",
                  data: i,
                  method: "POST",
                  dataType: "json",
                  element_id: l,
                  success: function (e) {
                    if ((close_waiter(), 200 == e.headers.httpcode))
                      document
                        .getElementById("missionqueuequestions_overlay")
                        .parentNode.removeChild(
                          parent.document.getElementById(
                            "missionqueuequestions_overlay"
                          )
                        );
                    else if (
                      (0 < e.results.error_human.length &&
                        ((r.innerHTML = mir_translate(e.results.error_human)),
                        $(n).animate(
                          {
                            scrollTop: 0,
                          },
                          100
                        )),
                      void 0 === e.results.field_errors)
                    );
                    else {
                      for (var t in e.results.field_errors.parameters)
                        document
                          .getElementById(
                            "missionqueue_fieldholder_" +
                              e.results.field_errors.parameters[t].systemname
                          )
                          .setAttribute("data-error", "true"),
                          (document.getElementById(
                            "missionqueue_error_" +
                              e.results.field_errors.parameters[t].systemname
                          ).innerHTML = mir_translate(
                            e.results.field_errors.parameters[t].error_human
                          ));
                      e.results.field_errors.earliest_start_time &&
                        (document
                          .getElementById(
                            "missionqueue_fieldholder_earliest_start_time"
                          )
                          .setAttribute("data-error", "true"),
                        (document.getElementById(
                          "missionqueue_error_earliest_start_time"
                        ).innerHTML = mir_translate(
                          e.results.field_errors.earliest_start_time.error_human
                        ))),
                        e.results.field_errors.robot_id &&
                          (document
                            .getElementById("missionqueue_fieldholder_robot_id")
                            .setAttribute("data-error", "true"),
                          (document.getElementById(
                            "missionqueue_error_robot_id"
                          ).innerHTML = mir_translate(
                            e.results.field_errors.robot_id.error_human
                          )));
                    }
                  },
                }),
                !1
              );
            });
          var r = document.createElement("p");
          r.setAttribute("id", "missionqueue_error"),
            r.setAttribute("class", "error"),
            (r.innerHTML = ""),
            a.appendChild(r),
            mission_summary_queue_fieldgenerator(s.questions, a);
          var o = document.createElement("div");
          o.setAttribute("class", "buttonholder"), a.appendChild(o);
          var d = document.createElement("input");
          d.setAttribute("type", "submit"),
            d.setAttribute("name", "submit"),
            d.setAttribute("id", "missiondynvareditor_submitbtn"),
            d.setAttribute("value", mir_translate("OK")),
            o.appendChild(d);
          var m = document.createElement("input");
          m.setAttribute("type", "button"),
            m.setAttribute("name", "missionqueuequestions_cancelbtn"),
            m.setAttribute("id", "missionqueuequestions_cancelbtn"),
            m.setAttribute("value", mir_translate("Cancel")),
            o.appendChild(m),
            (m.onclick = function () {
              document
                .getElementById("missionqueuequestions_overlay")
                .parentNode.removeChild(
                  parent.document.getElementById(
                    "missionqueuequestions_overlay"
                  )
                );
            });
        } else
          launch_error(
            mir_translate(
              "The requested item from the mission queue was not found."
            )
          );
      },
    }),
    !0
  );
}
function missionqueue_show_element(e) {
  launch_waiter(mir_translate("Loading mission data..."));
  var t = {};
  return (
    (t.id = e),
    $.ajax({
      url: "/?mode=get-mission-queue-item-data",
      data: t,
      method: "POST",
      dataType: "json",
      error: function (e) {
        alert(e.responseText);
      },
      success: function (e) {
        if ((close_waiter(), 1 == e.success)) {
          document
            .getElementsByTagName("body")[0]
            .setAttribute("data-mobile-dialogue", "true");
          var t = document.createElement("div");
          t.setAttribute("class", "overlayform"),
            t.setAttribute("data-type", "missionqueueitem"),
            t.setAttribute("id", "missiondetailsoverlay"),
            document.getElementsByTagName("body")[0].appendChild(t);
          var i = document.createElement("div");
          i.setAttribute("class", "box"),
            i.setAttribute("data-type", "missiondetails"),
            t.appendChild(i);
          var s = document.createElement("h1");
          (s.innerHTML = mir_translate("Mission instance details")),
            i.appendChild(s);
          var n = document.createElement("p");
          (n.innerHTML = mir_translate(
            "Text about mission instance details..."
          )),
            i.appendChild(n);
          for (var a = 0; a < e.details.length; ) {
            var r = document.createElement("ul");
            r.setAttribute("class", "mission_datalist"), i.appendChild(r);
            for (var o = 0; o < e.details[a].items.length; ) {
              var d = document.createElement("div");
              d.setAttribute("class", "name"),
                (d.innerHTML = e.details[a].items[o].name + ":");
              var m = document.createElement("div");
              m.setAttribute("class", "value"),
                (m.innerHTML = e.details[a].items[o].value);
              var l = document.createElement("li");
              l.appendChild(d), l.appendChild(m), r.appendChild(l), o++;
            }
            a++;
          }
          if (0 < e.log.length) {
            var u = document.createElement("ul");
            u.setAttribute("class", "mission_loglist"),
              i.appendChild(u),
              (_ = document.createElement("div")).setAttribute(
                "class",
                "state"
              ),
              (_.innerHTML = "<span>&nbsp;</span>"),
              (p = document.createElement("div")).setAttribute(
                "class",
                "description"
              ),
              (p.innerHTML =
                "<span>" + mir_translate("Description") + "</span>"),
              (c = document.createElement("div")).setAttribute(
                "class",
                "started"
              ),
              (c.innerHTML = "<span>" + mir_translate("Started") + "</span>"),
              (v = document.createElement("div")).setAttribute(
                "class",
                "duration"
              ),
              (v.innerHTML = "<span>" + mir_translate("Duration") + "</span>"),
              (h = document.createElement("div")).setAttribute(
                "class",
                "finished"
              ),
              (h.innerHTML = "<span>" + mir_translate("Finished") + "</span>"),
              (g = document.createElement("li")).setAttribute("class", "head"),
              g.appendChild(_),
              g.appendChild(p),
              g.appendChild(c),
              g.appendChild(v),
              g.appendChild(h),
              u.appendChild(g);
            for (a = 0; a < e.log.length; ) {
              var _, p, c, v, h, g;
              (_ = document.createElement("div")).setAttribute(
                "class",
                "state"
              ),
                (_.innerHTML = "<span>" + e.log[a].state + "</span>"),
                (p = document.createElement("div")).setAttribute(
                  "class",
                  "description"
                ),
                (p.innerHTML = e.log[a].description),
                (c = document.createElement("div")).setAttribute(
                  "class",
                  "started"
                ),
                (c.innerHTML = e.log[a].started),
                (v = document.createElement("div")).setAttribute(
                  "class",
                  "duration"
                ),
                (v.innerHTML = e.log[a].duration),
                (h = document.createElement("div")).setAttribute(
                  "class",
                  "finished"
                ),
                (h.innerHTML = e.log[a].finished),
                (g = document.createElement("li")).setAttribute(
                  "data-state",
                  e.log[a].state
                ),
                g.appendChild(_),
                g.appendChild(p),
                g.appendChild(c),
                g.appendChild(v),
                g.appendChild(h),
                u.appendChild(g),
                a++;
            }
          }
          var b = document.createElement("ul");
          b.setAttribute("class", "buttonlist"), i.appendChild(b);
          var w = document.createElement("li");
          w.setAttribute("data-type", "submit"),
            (w.innerHTML = mir_translate("OK")),
            b.appendChild(w),
            (w.onclick = function () {
              document
                .getElementById("missiondetailsoverlay")
                .parentNode.removeChild(
                  parent.document.getElementById("missiondetailsoverlay")
                ),
                document
                  .getElementsByTagName("body")[0]
                  .setAttribute("data-mobile-dialogue", "false");
            });
        } else
          launch_error(
            mir_translate("The mission's data could not be loaded.")
          );
      },
    }),
    !0
  );
}
!(function () {
  "use strict";
  function g(e) {
    return (function (e, t) {
      var r,
        n,
        s,
        i,
        a,
        o,
        p,
        c,
        u,
        f = 1,
        l = e.length,
        d = "";
      for (n = 0; n < l; n++)
        if ("string" == typeof e[n]) d += e[n];
        else if (Array.isArray(e[n])) {
          if ((i = e[n])[2])
            for (r = t[f], s = 0; s < i[2].length; s++) {
              if (!r.hasOwnProperty(i[2][s]))
                throw new Error(
                  g('[sprintf] property "%s" does not exist', i[2][s])
                );
              r = r[i[2][s]];
            }
          else r = i[1] ? t[i[1]] : t[f++];
          if (
            (b.not_type.test(i[8]) &&
              b.not_primitive.test(i[8]) &&
              r instanceof Function &&
              (r = r()),
            b.numeric_arg.test(i[8]) && "number" != typeof r && isNaN(r))
          )
            throw new TypeError(
              g("[sprintf] expecting number but found %T", r)
            );
          switch ((b.number.test(i[8]) && (c = 0 <= r), i[8])) {
            case "b":
              r = parseInt(r, 10).toString(2);
              break;
            case "c":
              r = String.fromCharCode(parseInt(r, 10));
              break;
            case "d":
            case "i":
              r = parseInt(r, 10);
              break;
            case "j":
              r = JSON.stringify(r, null, i[6] ? parseInt(i[6]) : 0);
              break;
            case "e":
              r = i[7]
                ? parseFloat(r).toExponential(i[7])
                : parseFloat(r).toExponential();
              break;
            case "f":
              r = i[7] ? parseFloat(r).toFixed(i[7]) : parseFloat(r);
              break;
            case "g":
              r = i[7] ? String(Number(r.toPrecision(i[7]))) : parseFloat(r);
              break;
            case "o":
              r = (parseInt(r, 10) >>> 0).toString(8);
              break;
            case "s":
              (r = String(r)), (r = i[7] ? r.substring(0, i[7]) : r);
              break;
            case "t":
              (r = String(!!r)), (r = i[7] ? r.substring(0, i[7]) : r);
              break;
            case "T":
              (r = Object.prototype.toString
                .call(r)
                .slice(8, -1)
                .toLowerCase()),
                (r = i[7] ? r.substring(0, i[7]) : r);
              break;
            case "u":
              r = parseInt(r, 10) >>> 0;
              break;
            case "v":
              (r = r.valueOf()), (r = i[7] ? r.substring(0, i[7]) : r);
              break;
            case "x":
              r = (parseInt(r, 10) >>> 0).toString(16);
              break;
            case "X":
              r = (parseInt(r, 10) >>> 0).toString(16).toUpperCase();
          }
          b.json.test(i[8])
            ? (d += r)
            : (!b.number.test(i[8]) || (c && !i[3])
                ? (u = "")
                : ((u = c ? "+" : "-"), (r = r.toString().replace(b.sign, ""))),
              (o = i[4] ? ("0" === i[4] ? "0" : i[4].charAt(1)) : " "),
              (p = i[6] - (u + r).length),
              (a = i[6] && 0 < p ? o.repeat(p) : ""),
              (d += i[5] ? u + r + a : "0" === o ? u + a + r : a + u + r));
        }
      return d;
    })(
      (function (e) {
        if (p[e]) return p[e];
        for (var t, r = e, n = [], s = 0; r; ) {
          if (null !== (t = b.text.exec(r))) n.push(t[0]);
          else if (null !== (t = b.modulo.exec(r))) n.push("%");
          else {
            if (null === (t = b.placeholder.exec(r)))
              throw new SyntaxError("[sprintf] unexpected placeholder");
            if (t[2]) {
              s |= 1;
              var i = [],
                a = t[2],
                o = [];
              if (null === (o = b.key.exec(a)))
                throw new SyntaxError(
                  "[sprintf] failed to parse named argument key"
                );
              for (i.push(o[1]); "" !== (a = a.substring(o[0].length)); )
                if (null !== (o = b.key_access.exec(a))) i.push(o[1]);
                else {
                  if (null === (o = b.index_access.exec(a)))
                    throw new SyntaxError(
                      "[sprintf] failed to parse named argument key"
                    );
                  i.push(o[1]);
                }
              t[2] = i;
            } else s |= 2;
            if (3 === s)
              throw new Error(
                "[sprintf] mixing positional and named placeholders is not (yet) supported"
              );
            n.push(t);
          }
          r = r.substring(t[0].length);
        }
        return (p[e] = n);
      })(e),
      arguments
    );
  }
  function e(e, t) {
    return g.apply(null, [e].concat(t || []));
  }
  var b = {
      not_string: /[^s]/,
      not_bool: /[^t]/,
      not_type: /[^T]/,
      not_primitive: /[^v]/,
      number: /[diefg]/,
      numeric_arg: /[bcdiefguxX]/,
      json: /[j]/,
      not_json: /[^j]/,
      text: /^[^\x25]+/,
      modulo: /^\x25{2}/,
      placeholder: /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
      key: /^([a-z_][a-z_\d]*)/i,
      key_access: /^\.([a-z_][a-z_\d]*)/i,
      index_access: /^\[(\d+)\]/,
      sign: /^[\+\-]/,
    },
    p = Object.create(null);
  "undefined" != typeof exports &&
    ((exports.sprintf = g), (exports.vsprintf = e)),
    "undefined" != typeof window &&
      ((window.sprintf = g),
      (window.vsprintf = e),
      "function" == typeof define &&
        define.amd &&
        define(function () {
          return {
            sprintf: g,
            vsprintf: e,
          };
        }));
})();
var BluetoothDataGetter = BluetoothDataGetter || {
  refreshHandler: null,
  subscribers: {},
  REFRESH_INTERVAL: 1500,
  lastData: !1,
  consts: {
    BLUETOOTH_DEVICE_DONE: 0,
    BLUETOOTH_DEVICE_SCANNING: 1,
    BLUETOOTH_DEVICE_CONNECTING: 2,
    BLUETOOTH_DEVICE_ERROR: 3,
    RELAY_STATUS_CONNECTED: 0,
    RELAY_STATUS_CONNECTING: 1,
    RELAY_STATUS_ERROR: 2,
    RELAY_STATUS_DISCONNECTED: 3,
  },
  updateData: function () {
    $.getJSON("/?mode=bt-get&calltype=light", function (t) {
      (BluetoothDataGetter.lastData = t),
        BluetoothDataGetter.updateSubscribers();
    });
  },
  updateSubscribers: function () {
    $.each(BluetoothDataGetter.subscribers, function (t, e) {
      e(BluetoothDataGetter.lastData);
    });
  },
  subscribe: function (t, e, a) {
    (BluetoothDataGetter.subscribers[t] = e),
      a && BluetoothDataGetter.lastData && e(BluetoothDataGetter.lastData);
  },
  unsubscribe: function (t) {
    delete BluetoothDataGetter.subscribers[t],
      0 === BluetoothDataGetter.subscribers.length &&
        BluetoothDataGetter.stop();
  },
  start: function () {
    null === BluetoothDataGetter.refreshHandler &&
      (BluetoothDataGetter.refreshHandler = setInterval(
        BluetoothDataGetter.updateData,
        BluetoothDataGetter.REFRESH_INTERVAL
      ));
  },
  stop: function () {
    clearInterval(BluetoothDataGetter.refreshHandler),
      (BluetoothDataGetter.refreshHandler = null);
  },
};
var HookDataGetter = HookDataGetter || {
  refreshHandler: null,
  subscribers: {},
  REFRESH_INTERVAL: 1e3,
  lastData: !1,
  request: null,
  consts: {
    GRIPPER: {
      UNKNOWN: 0,
      HOMING: 1,
      OPEN: 2,
      OPENING: 3,
      "CLOSED (TROLLEY ATTACHED)": 4,
      "CLOSED (NO TROLLEY ATTACHED)": 5,
      CLOSING: 6,
      ERROR: 7,
    },
    BRAKE: {
      UNKNOWN: 0,
      INITIALIZING: 1,
      HOMING: 2,
      ACTIVE: 3,
      INACTIVE: 4,
      ACTIVATING: 5,
      DEACTIVATING: 6,
      ERROR: 7,
    },
    HEIGHT: {
      CHANGING: 2,
      ERROR: 3,
    },
  },
  hook_service: new ROSLIB.Service({
    ros: ros,
    name: "/hook/getStatus",
    serviceType: "mir_srvs/GetHookStatus",
  }),
  topics: {
    brake: new ROSLIB.Topic({
      ros: ros,
      name: "/hook/brake/state",
      messageType: "mir_hook_controller/HookBrakeState",
      throttle_rate: 100,
    }),
    status: new ROSLIB.Topic({
      ros: ros,
      name: "/hook/status",
      messageType: "mirMsgs/HookStatus",
      throttle_rate: 100,
    }),
    state: new ROSLIB.Topic({
      ros: ros,
      name: "/hook/controller/state",
      messageType: "mir_hook_controller/HookState",
    }),
    marker: new ROSLIB.Topic({
      ros: ros,
      name: "/hook/qr_markers",
      messageType: "geometry_msgs/TransformStamped",
    }),
  },
  updateData: function () {
    HookDataGetter.hook_service.callService(
      new ROSLIB.ServiceRequest({}),
      function (e) {
        (HookDataGetter.lastData = e.status),
          HookDataGetter.updateSubscribers();
      },
      function (e) {
        (HookDataGetter.lastData.available = !1),
          HookDataGetter.updateSubscribers();
      }
    );
  },
  updateSubscribers: function () {
    $.each(HookDataGetter.subscribers, function (e, t) {
      t(HookDataGetter.lastData);
    });
  },
  is_subscribed: function (e) {
    return void 0 !== HookDataGetter.subscribers[e];
  },
  subscribe: function (e, t, a) {
    (HookDataGetter.subscribers[e] = t),
      a && HookDataGetter.lastData && t(HookDataGetter.lastData);
  },
  unsubscribe: function (e) {
    delete HookDataGetter.subscribers[e],
      0 === HookDataGetter.subscribers.length && HookDataGetter.stop();
  },
  start: function () {
    null === HookDataGetter.refreshHandler &&
      (HookDataGetter.refreshHandler = setInterval(
        HookDataGetter.updateData,
        HookDataGetter.REFRESH_INTERVAL
      ));
  },
  stop: function () {
    clearInterval(HookDataGetter.refreshHandler),
      (HookDataGetter.refreshHandler = null);
  },
};
